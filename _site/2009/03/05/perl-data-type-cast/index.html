
<!DOCTYPE HTML>
<html lang="en-US" xmlns="http://www.w3.org/1999/xhtml" xmlns:wb="http://open.weibo.com/wb">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Perl数值转换 | Bo's Blog</title>
  
  <meta name="author" content="Bo Yang" />
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <!--
  <link href="/assets/themes/clear/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  -->

  <!-- Bootstrap -->
  <link href="/assets/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="/assets/bootstrap/css/bootstrap-theme.min.css" rel="stylesheet">

  <!-- font-awesome -->
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" rel="stylesheet">

  <!-- Google Prettify -->
  <link href="/assets/google-code-prettify/desert.css" rel="stylesheet" type="text/css" media="all">
  <!-- Google Pretty end -->

  <link href="/assets/bootstrap/css/blog-home.css" rel="stylesheet">
  <link href="/assets/bootstrap/css/blog-post.css" rel="stylesheet">
  
  <script src="/assets/bootstrap/js/jquery-1.10.2.js"></script>
  <script src="/assets/bootstrap/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>

<body>

   <!-- navigation bar -->
	<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/">Home</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse navbar-ex1-collapse">
				<ul class="nav navbar-nav">
					<li><a href="/archive.html">Archive</a>
                    </li>
                    <li><a href="/about.html">About</a>
                    </li>
                    <li><a href="/messages.html">Messages</a>
                    </li>
				</ul>
				<ul class="nav navbar-nav pull-right">
		          <li>
		            <form class="navbar-form navbar-search" method="get" action="http://www.google.com/search" target="google_window">
		              <input id="g_search" type="text" class="search-query" placeholder="Search..." name="q" />
		              <input type="submit" name="btnG" style="display:none" id="searchsubmit" value="Search" />
		              <input type="hidden" name="ie" value="UTF-8" />
		              <input type="hidden" name="oe" value="UTF-8" />
		              <input type="hidden" name="hl" value="en-US" />
		              <input type="hidden" name="domains" value="http://bo-yang.github.io/" />
					  <input type="hidden" name="sitesearch" value="http://bo-yang.github.io/" />
					  <button type="submit" class="button button-rounded button-flat-blue">Go</button>
		            </form>
		          </li>
		        </ul>
            </div>
			<!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

  <div class="container">
    <div class="row">
      
<div class="page-header">
	<h1>Perl数值转换</h1>
	<p class="lead">by  <a href="/about.html"><strong>Bo Yang</strong></a></p>
	<hr>
	<p>
		<span class="glyphicon glyphicon-time"></span> Posted at 2009-03-05 &nbsp; &nbsp;  <span class="glyphicon glyphicon-tag"></span><a href="/tags.html#Perl-ref" rel="nofollow">Perl</a>
	</p>
</div>

<div class="col-lg-10">
    </p>
<p>As always with Perl there is more than one way to do it. Below are a few examples of approaches to making common conversions between number representations. This is intended to be representational rather than exhaustive.</p>
<p>Some of the examples below use the Bit::Vector module from CPAN. The reason you might choose Bit::Vector over the perl built in functions is that it works with numbers of ANY size, that it is optimized for speed on some operations, and for at least some programmers the notation might be familiar.</p>
<dl>
<dt><a name="How-do-I-convert-hexadecimal-into-decimal">How do I convert hexadecimal into decimal</a></dt>
<dd>
<p>Using perl's built in conversion of 0x notation:</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>    $int = 0xDEADBEEF;
    $dec = sprintf("%d", $int);  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>Using the hex function:</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>    $int = hex("DEADBEEF");
    $dec = sprintf("%d", $int);  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>Using pack:</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>    $int = unpack("N", pack("H8", substr("0" x 8 . "DEADBEEF", -8)));
    $dec = sprintf("%d", $int);  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>Using the CPAN module Bit::Vector:</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>    use Bit::Vector;
    $vec = Bit::Vector-&gt;new_Hex(32, "DEADBEEF");
    $dec = $vec-&gt;to_Dec();  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
</dd>
<dt><a name="How-do-I-convert-from-decimal-to-hexadecimal">How do I convert from decimal to hexadecimal</a></dt>
<dd>
<p>Using sprint:</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>    $hex = sprintf("%X", 3735928559);  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>Using unpack</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>    $hex = unpack("H*", pack("N", 3735928559));  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>Using Bit::Vector</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>    use Bit::Vector;
    $vec = Bit::Vector-&gt;new_Dec(32, -559038737);
    $hex = $vec-&gt;to_Hex();  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>And Bit::Vector supports odd bit counts:</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>    use Bit::Vector;
    $vec = Bit::Vector-&gt;new_Dec(33, 3735928559);
    $vec-&gt;Resize(32); # suppress leading 0 if unwanted
    $hex = $vec-&gt;to_Hex();  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
</dd>
<dt><a name="How-do-I-convert-from-octal-to-decimal">How do I convert from octal to decimal</a></dt>
<dd>
<p>Using Perl's built in conversion of numbers with leading zeros:</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>    $int = 033653337357; # note the leading 0!
    $dec = sprintf("%d", $int);  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>Using the oct function:</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>    $int = oct("33653337357");
    $dec = sprintf("%d", $int);  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>Using Bit::Vector:</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>    use Bit::Vector;
    $vec = Bit::Vector-&gt;new(32);
    $vec-&gt;Chunk_List_Store(3, split(//, reverse "33653337357"));
    $dec = $vec-&gt;to_Dec();  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
</dd>
<dt><a name="How-do-I-convert-from-decimal-to-octal">How do I convert from decimal to octal</a></dt>
<dd>
<p>Using sprintf:</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>    $oct = sprintf("%o", 3735928559);  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>Using Bit::Vector</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>    use Bit::Vector;
    $vec = Bit::Vector-&gt;new_Dec(32, -559038737);
    $oct = reverse join('', $vec-&gt;Chunk_List_Read(3));  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
</dd>
<dt><a name="How-do-I-convert-from-binary-to-decimal">How do I convert from binary to decimal</a></dt>
<dd>
<p>Perl 5.6 lets you write binary numbers directly with the 0b notation:</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>	$number = 0b10110110;  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>Using pack and ord</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>    $decimal = ord(pack('B8', '10110110'));  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>Using pack and unpack for larger strings</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>    $int = unpack("N", pack("B32",
	substr("0" x 32 . "11110101011011011111011101111", -32)));
    $dec = sprintf("%d", $int);

    # substr() is used to left pad a 32 character string with zeros.  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>Using Bit::Vector:</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>    $vec = Bit::Vector-&gt;new_Bin(32, "11011110101011011011111011101111");
    $dec = $vec-&gt;to_Dec();  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
</dd>
<dt><a name="How-do-I-convert-from-decimal-to-binary">How do I convert from decimal to binary</a></dt>
<dd>
<p>Using unpack;</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>    $bin = unpack("B*", pack("N", 3735928559));  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>Using Bit::Vector:</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>    use Bit::Vector;
    $vec = Bit::Vector-&gt;new_Dec(32, -559038737);
    $bin = $vec-&gt;to_Bin();  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>The remaining transformations (e.g. hex -&gt; oct, bin -&gt; hex, etc.) are left as an exercise to the inclined reader.</p>
</dd>
</dl>


	<div align="right">
        <div class="bshare-custom">
	<span class='st_facebook_large' displayText='Facebook'></span>
	<span class='st_googleplus_large' displayText='Google +'></span>
	<span class='st_twitter_large' displayText='Tweet'></span>
	<span class='st_sina_large' displayText='Sina'></span>
	<span class='st_linkedin_large' displayText='LinkedIn'></span>
	<span class='st_tumblr_large' displayText='Tumblr'></span>
	<span class='st_sharethis_large' displayText='ShareThis'></span>
	<span class='st_blogger_large' displayText='Blogger'></span>
	<span class='st_email_large' displayText='Email'></span>
</div>
<script type="text/javascript">var switchTo5x=true;</script>
<script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
<script type="text/javascript">stLight.options({publisher: "6e9cb968-ad78-4055-b1e7-1b7ab6751416", doNotHash: false, doNotCopy: false, hashAddressBar: false});</script>

	</div>

	<!-- page link -->
    <div class="pager">
      <ul>
      
        <li class="previous"><a href="/2009/03/03/unix-commands-for-debug" title="UNIX Commands Used to Debug">&larr; Previous</a></li>
      

      
        <li class="next"><a href="/2009/03/05/print-socket-msg" title="PERL打印收到的Socket消息">Next &rarr;</a></li>
      
      </ul>
    </div>

    <div class="well">
		


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'boyang'; // required: replace example with your forum shortname
     var disqus_identifier = '/2009/03/05/perl-data-type-cast';
    var disqus_url = 'http://bo-yang.github.com//2009/03/05/perl-data-type-cast';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




    </div>


</div>




    </div>

    <footer>
        <p>&copy; 2007 <span id="now_year"></span> Bo Yang. </p>
        <script type="text/javascript">
          var now_year = new Date().getFullYear();
          if (now_year != 2007) {
              $('#now_year').html('- ' + now_year);
          }
	    </script>
      </footer>
  </div>

  <script type="text/javascript" src="/assets/google-code-prettify/prettify.js"></script>
  <script src="/assets/run_prettify.js"></script>
  <script type="text/javascript">
    $(function() {

      $('a[href^="http"]').each(function () {
        $(this).attr('target', '_blank');
      });

      $('pre').addClass('prettyprint linenums').attr('style', 'overflow:auto');
      window.prettyPrint && prettyPrint();

      function traverse($node, len, maxCount) {
        var reachMaxCount = len > maxCount;
        if (reachMaxCount) {
          $node.hide();
        }
        var $contents = $node.contents();
        for (var i = 0; i < $contents.length; ++i) {
          if (reachMaxCount) {
            $contents.eq(i).hide();
            continue;
          }
          if ($contents[i].nodeType == 3) { // TextNode
            var tmp = len;
            var s = $contents[i].nodeValue;
            len += s.length;
            reachMaxCount = len > maxCount;
            if (reachMaxCount && $contents[i].parentNode.nodeName != 'A') {
              $contents[i].nodeValue = s.substring(0, maxCount - tmp);
            }
          }
          else if ($contents[i].nodeType == 1) { // Element
            len = traverse($contents.eq(i), len, maxCount);
          }
        }
        return len;
      }

      $('.post_at_index').each(function() {
        var count = traverse($(this), 0, 400);
        if (count > 400) {
          var thisUrl = $(this).siblings().first().children().attr('href');
          $(this).after('\n<a href="' + thisUrl + '" rel="nofollow">' + 'Read More ...</a>');
        }
      });
    });
  </script>
  
  

</body>
</html>

