<!DOCTYPE html>
<html lang="en">
<head>
  <title>John Duff - Home </title>
  <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
  <meta name="verify-v1" content="fI45uNHehVNiO9Dt0Fp7XnsV0Z/ozBTkPoS6RlYAe50=" />
  <meta name="y_key" content="6c948e75a617b12d" />
  <meta name='technorati-claim' content='8QN7CWNH8BSJ' />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" media="screen" href="/css/bootstrap.css">
  <link rel="stylesheet" type="text/css" href="/css/default.css" />
  <link rel="stylesheet" type="text/css" href="/css/syntax.css" />
  <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="John Duff's blog" />
</head>

<body class='blog'>
  <div class="container">
    <div class="row">
      <div class="span4 sidebar affix">
        <div class="well">
          <h2 class='site-title'>
            <a href="http://bo-yang.github.io">Bo Yang</a>
          </h2>

		  <p><i>You got to make the back of the fence that nobody will see just as good looking as the front of the fence.</i></p>

          <ul id="navigation" class="clearfix">
            <li class='about'><a href='/about/'>About</a></li>
            <li class='archives'><a href='/archives/'>Archives</a></li>
            <li class="github"><a href="http://github.com/bo-yang" rel='me' class='url'>@github</a></li>
          </ul>
        </div>
      </div>
      <div class="span8 main offset4">
        <div class="well">
          <div id='index'>

  <div class="post">
    <h2><a href="/bkup/2009/10/22/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520shell%25e4%25b8%25ad%25e7%259b%25b4%25e6%258e%25a5%25e8%25b0%2583%25e7%2594%25a8perl%25e5%2591%25bd%25e4%25bb%25a4%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/">Shell中直接调用perl命令</a></h2>

    <p>The &nbsp;<em>-e</em> option is handy for quick Perl operations<br />
from the command line. Want to change all instances of "oldstring" in<br />
Wiffle.bat to "newstrong"? Try</p>
<p>&nbsp;</p>
<p>
<pre>perl -i.old -p -e "s/ oldstring/ newstrong/g" wiffle.bat</pre>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>This says: "Take each line of &nbsp;Wiffle.bat (-p); store the original in Wiffle.old (-i); substitute all instances of &nbsp;oldstring with newstrong (-e); write the result (-p) to the<br />
original file (-i)."</p>
<p>&nbsp;</p>
<p>Other PERL command line options are:</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;<strong>Perl 5 Command-Line Switches</strong></p>
<p>&nbsp;</p>
<table style="width:80%;" border="1">
<tbody>
<tr valign="top">
<td width="109">
<em>Option</em></td>
<td width="150"><em>Arguments</em> </td>
<td width="168"><em>Purpose</em></td>
<td width="163"><em>Notes</em> </td>
</tr>
<tr valign="top">
<td width="109">
<tt>-0</tt></td>
<td width="150">octal character code</td>
<td width="168">Specify record separator </td>
<td width="163">Default is newline (<tt>/n</tt>) </td>
</tr>
<tr valign="top">
<td width="109">
<tt>-a</tt></td>
<td width="150">none</td>
<td width="168">Automatically spli recordst </td>
<td width="163">Used with <tt>-n</tt> or or <tt>-p</tt> </td>
</tr>
<tr valign="top">
<td width="109">
<tt>-c</tt></td>
<td width="150">none</td>
<td width="168">Check syntax only</td>
<td width="163">Do not execute</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-d</tt></td>
<td width="150">none</td>
<td width="168">Run script using Perl debugger </td>
<td width="163">If Perl debugging option was included when Perl was installed
</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-D</tt></td>
<td width="150">flags</td>
<td width="168">Specify debugging behavior </td>
<td width="163">See table 2</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-e</tt></td>
<td width="150">command</td>
<td width="168">Pass a command to Perl from the command line </td>
<td width="163">Useful for quick operations</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-F</tt></td>
<td width="150">regular expression</td>
<td width="168">If <tt>-a</tt> used </td>
<td width="163">Expression to split by default is white space </td>
</tr>
<tr valign="top">
<td width="109">
<tt>-i</tt></td>
<td width="150">extension</td>
<td width="168">Replace original file with results </td>
<td width="163">Useful for modifying contents of files</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-I</tt></td>
<td width="150">directory</td>
<td width="168">Specify location of <tt>include</tt> files </td>
<td width="163">&nbsp;</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-l</tt></td>
<td width="150">octal character code</td>
<td width="168">Drop newlines when used </td>
<td width="163">With <tt>-n</tt> and <tt>-p</tt> and use designated character as<br />
line- termination character </td>
</tr>
<tr valign="top">
<td width="109">
<tt>-n</tt></td>
<td width="150">none</td>
<td width="168">Process the script using each specified file as an argument </td>
<td width="163">Used for performing the same set of actions on a set of files
</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-p</tt></td>
<td width="150">none</td>
<td width="168">Same as <tt>-n</tt> but each line is printed </td>
<td width="163">&nbsp;</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-P</tt></td>
<td width="150">none</td>
<td width="168">Run the script through the C preprocessor before Perl compiles it
</td>
<td width="163">&nbsp;</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-s</tt></td>
<td width="150">none</td>
<td width="168">Enable passing of arbitrary switches to Perl </td>
<td width="163">Use <tt>-s -what -ever </tt>to have the Perl variables <tt>$what<br />
</tt>and <tt>$ever </tt>defined within your script </td>
</tr>
<tr valign="top">
<td width="109">
<tt>-S</tt></td>
<td width="150">none</td>
<td width="168">Tell Perl to look along the path for the script </td>
<td width="163">&nbsp;</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-T</tt></td>
<td width="150">none</td>
<td width="168">Use taint checking; don't evaluate expressions supplied on the<br />
command line </td>
<td width="163">&nbsp;</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-u</tt></td>
<td width="150">none</td>
<td width="168">Make Perl dump core after compiling your script; intended to allow<br />
for generation of Perl executables </td>
<td width="163">Very messy; wait for the Perl compiler</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-U</tt></td>
<td width="150">none</td>
<td width="168">Unsafe mode; overrides Perl's natural caution </td>
<td width="163">Don't use this!</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-v</tt></td>
<td width="150">none</td>
<td width="168">Print Perl version number </td>
<td width="163">&nbsp;</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-w</tt></td>
<td width="150">none</td>
<td width="168">Print warnings about script syntax </td>
<td width="163">Extremely useful, especially during development &nbsp;</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>


    <small class="meta">October 22, 2009 | <a href='/bkup/2009/10/22/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520shell%25e4%25b8%25ad%25e7%259b%25b4%25e6%258e%25a5%25e8%25b0%2583%25e7%2594%25a8perl%25e5%2591%25bd%25e4%25bb%25a4%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/#disqus_thread'>View Comments</a></small>
  </div>

  <div class="post">
    <h2><a href="/perl/unix/linux/2009/10/22/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520shell%25e4%25b8%25ad%25e7%259b%25b4%25e6%258e%25a5%25e8%25b0%2583%25e7%2594%25a8perl%25e5%2591%25bd%25e4%25bb%25a4%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/">Shell中直接调用perl命令</a></h2>

    <p>The &nbsp;<em>-e</em> option is handy for quick Perl operations<br />
from the command line. Want to change all instances of "oldstring" in<br />
Wiffle.bat to "newstrong"? Try</p>
<p>&nbsp;</p>
<p>
<pre>perl -i.old -p -e "s/ oldstring/ newstrong/g" wiffle.bat</pre>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>This says: "Take each line of &nbsp;Wiffle.bat (-p); store the original in Wiffle.old (-i); substitute all instances of &nbsp;oldstring with newstrong (-e); write the result (-p) to the<br />
original file (-i)."</p>
<p>&nbsp;</p>
<p>Other PERL command line options are:</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;<strong>Perl 5 Command-Line Switches</strong></p>
<p>&nbsp;</p>
<table style="width:80%;" border="1">
<tbody>
<tr valign="top">
<td width="109">
<em>Option</em></td>
<td width="150"><em>Arguments</em> </td>
<td width="168"><em>Purpose</em></td>
<td width="163"><em>Notes</em> </td>
</tr>
<tr valign="top">
<td width="109">
<tt>-0</tt></td>
<td width="150">octal character code</td>
<td width="168">Specify record separator </td>
<td width="163">Default is newline (<tt>/n</tt>) </td>
</tr>
<tr valign="top">
<td width="109">
<tt>-a</tt></td>
<td width="150">none</td>
<td width="168">Automatically spli recordst </td>
<td width="163">Used with <tt>-n</tt> or or <tt>-p</tt> </td>
</tr>
<tr valign="top">
<td width="109">
<tt>-c</tt></td>
<td width="150">none</td>
<td width="168">Check syntax only</td>
<td width="163">Do not execute</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-d</tt></td>
<td width="150">none</td>
<td width="168">Run script using Perl debugger </td>
<td width="163">If Perl debugging option was included when Perl was installed
</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-D</tt></td>
<td width="150">flags</td>
<td width="168">Specify debugging behavior </td>
<td width="163">See table 2</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-e</tt></td>
<td width="150">command</td>
<td width="168">Pass a command to Perl from the command line </td>
<td width="163">Useful for quick operations</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-F</tt></td>
<td width="150">regular expression</td>
<td width="168">If <tt>-a</tt> used </td>
<td width="163">Expression to split by default is white space </td>
</tr>
<tr valign="top">
<td width="109">
<tt>-i</tt></td>
<td width="150">extension</td>
<td width="168">Replace original file with results </td>
<td width="163">Useful for modifying contents of files</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-I</tt></td>
<td width="150">directory</td>
<td width="168">Specify location of <tt>include</tt> files </td>
<td width="163">&nbsp;</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-l</tt></td>
<td width="150">octal character code</td>
<td width="168">Drop newlines when used </td>
<td width="163">With <tt>-n</tt> and <tt>-p</tt> and use designated character as<br />
line- termination character </td>
</tr>
<tr valign="top">
<td width="109">
<tt>-n</tt></td>
<td width="150">none</td>
<td width="168">Process the script using each specified file as an argument </td>
<td width="163">Used for performing the same set of actions on a set of files
</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-p</tt></td>
<td width="150">none</td>
<td width="168">Same as <tt>-n</tt> but each line is printed </td>
<td width="163">&nbsp;</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-P</tt></td>
<td width="150">none</td>
<td width="168">Run the script through the C preprocessor before Perl compiles it
</td>
<td width="163">&nbsp;</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-s</tt></td>
<td width="150">none</td>
<td width="168">Enable passing of arbitrary switches to Perl </td>
<td width="163">Use <tt>-s -what -ever </tt>to have the Perl variables <tt>$what<br />
</tt>and <tt>$ever </tt>defined within your script </td>
</tr>
<tr valign="top">
<td width="109">
<tt>-S</tt></td>
<td width="150">none</td>
<td width="168">Tell Perl to look along the path for the script </td>
<td width="163">&nbsp;</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-T</tt></td>
<td width="150">none</td>
<td width="168">Use taint checking; don't evaluate expressions supplied on the<br />
command line </td>
<td width="163">&nbsp;</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-u</tt></td>
<td width="150">none</td>
<td width="168">Make Perl dump core after compiling your script; intended to allow<br />
for generation of Perl executables </td>
<td width="163">Very messy; wait for the Perl compiler</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-U</tt></td>
<td width="150">none</td>
<td width="168">Unsafe mode; overrides Perl's natural caution </td>
<td width="163">Don't use this!</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-v</tt></td>
<td width="150">none</td>
<td width="168">Print Perl version number </td>
<td width="163">&nbsp;</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-w</tt></td>
<td width="150">none</td>
<td width="168">Print warnings about script syntax </td>
<td width="163">Extremely useful, especially during development &nbsp;</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>


    <small class="meta">October 22, 2009 | <a href='/perl/unix/linux/2009/10/22/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520shell%25e4%25b8%25ad%25e7%259b%25b4%25e6%258e%25a5%25e8%25b0%2583%25e7%2594%25a8perl%25e5%2591%25bd%25e4%25bb%25a4%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/#disqus_thread'>View Comments</a></small>
  </div>

  <div class="post">
    <h2><a href="/bkup/2009/10/17/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520tcl%25e4%25b8%25ad%25e8%25b0%2583%25e7%2594%25a8awk%25e5%2591%25bd%25e4%25bb%25a4%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/">Tcl中调用Awk命令</a></h2>

    <p>由于' '不是Tcl所能识别的操作符，因此在Tcl中使用Awk命令时不能用exec awk '/pattern/ {do_something}' file这种命令，即使在''前面加上/也不行。' &rsquo; 可以被Bource Shell和其它shell识别，但是由于exec awk命令是在Tcl中解释的。</p>
<p>&nbsp;</p>
<p>如果要在Tcl中执行awk命令，方法有两种：一是用&ldquo;&rdquo;代替' '，但是要考虑到需要把某些Tcl的特殊字符用/转义；二是用{}代替' '。比如语句</p>
<p>
<pre>exec awk '/{print /"blah/"/}' temp.fil </pre>
<p>&nbsp;</p>
<p>应该写为：</p>
<p>
<pre>exec awk "/somePattern/ {print /$0}" someFile</pre>
<p>&nbsp;</p>
<p>或者</p>
<p>
<pre>exec awk {/somePattern/ {print $0}}  someFile </pre>
<p>&nbsp;</p>


    <small class="meta">October 17, 2009 | <a href='/bkup/2009/10/17/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520tcl%25e4%25b8%25ad%25e8%25b0%2583%25e7%2594%25a8awk%25e5%2591%25bd%25e4%25bb%25a4%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/#disqus_thread'>View Comments</a></small>
  </div>

  <div class="post">
    <h2><a href="/unix/linux/2009/10/17/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520tcl%25e4%25b8%25ad%25e8%25b0%2583%25e7%2594%25a8awk%25e5%2591%25bd%25e4%25bb%25a4%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/">Tcl中调用Awk命令</a></h2>

    <p>由于' '不是Tcl所能识别的操作符，因此在Tcl中使用Awk命令时不能用exec awk '/pattern/ {do_something}' file这种命令，即使在''前面加上/也不行。' &rsquo; 可以被Bource Shell和其它shell识别，但是由于exec awk命令是在Tcl中解释的。</p>
<p>&nbsp;</p>
<p>如果要在Tcl中执行awk命令，方法有两种：一是用&ldquo;&rdquo;代替' '，但是要考虑到需要把某些Tcl的特殊字符用/转义；二是用{}代替' '。比如语句</p>
<p>
<pre>exec awk '/{print /"blah/"/}' temp.fil </pre>
<p>&nbsp;</p>
<p>应该写为：</p>
<p>
<pre>exec awk "/somePattern/ {print /$0}" someFile</pre>
<p>&nbsp;</p>
<p>或者</p>
<p>
<pre>exec awk {/somePattern/ {print $0}}  someFile </pre>
<p>&nbsp;</p>


    <small class="meta">October 17, 2009 | <a href='/unix/linux/2009/10/17/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520tcl%25e4%25b8%25ad%25e8%25b0%2583%25e7%2594%25a8awk%25e5%2591%25bd%25e4%25bb%25a4%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/#disqus_thread'>View Comments</a></small>
  </div>

  <div class="post">
    <h2><a href="/bkup/2009/09/24/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520cronjob%2520%2526amp%253b%2520crontab%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/">cronjob & crontab</a></h2>

    <p>&nbsp;</p>
<h3><span style="font-weight:normal;">今天要设置一个cron job，查了一些资料，发现了很好的一篇文章，见下文，原文参见：<a href="http://www.aota.net/Script_Installation_Tips/cronhelp.php4">http://www.aota.net/Script_Installation_Tips/cronhelp.php4</a>。</span></h3>
<h3><span style="font-weight:normal;">但是我按照这篇文章的介绍，在Solaris 9下设置crontab的文件时，老是报错</span></h3>
<p><span style="font-weight:normal;"><br />
</span></p>
<p>
<pre>$ crontab chkbjservers.cron
MAILTO=xxx@xxxxx.com
crontab: error on previous line; unexpected character found in line.
crontab: errors detected in input, no crontab file generated.</pre>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>后来查了Solaris的crontab的手册，发现Solaris的crontab不支持MAILTO，必须要用mailx之类的Unix邮件发送命令。另外，整个cron file只要一句话：<strong>minute(s) hour(s) day(s) month(s) weekday(s) command(s). </strong><span>比如：</span></p>
<p>&nbsp;</p>
<p><span><br />
</span></p>
<p>
<pre>30 7 * * 1 /bld/xxxx/mytool/chkbjserver.sh|cat chkbjserver.out|mailx -s "Shared memory checked result in BJ COOL" xxxx@xxxxxxx.com</pre>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong>=========================================================================</strong></p>
<h3>What is a&nbsp;<a href="http://www.aota.net/keyword.php?cronjob">cronjob</a>, and how do I use it?</h3>
<p>
The&nbsp;<a href="http://www.aota.net/keyword.php?cron">cron</a>&nbsp;daemon is a long running process that executes commands at specific dates and times. To schedule one-time only tasks with&nbsp;<a href="http://www.aota.net/keyword.php?cron">cron</a>, use&nbsp;<strong>at</strong>&nbsp;or&nbsp;<strong>batch</strong>. For commands that need to be executed repeatedly (e.g. hourly, daily or weekly), use&nbsp;<strong>crontab</strong>, which has the following options:</p>
<table border="0" cellpadding="4">
<tbody>
<tr valign="TOP">
<td align="LEFT"><strong>crontab filename</strong></td>
<td align="LEFT">Install filename as your&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;file.</td>
</tr>
<tr valign="TOP">
<td align="LEFT"><strong>crontab -e</strong></td>
<td align="LEFT">Edit your&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;file.</td>
</tr>
<tr valign="TOP">
<td align="LEFT"><strong>crontab -l</strong></td>
<td align="LEFT">Show your&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;file.</td>
</tr>
<tr valign="TOP">
<td align="LEFT"><strong>crontab -r</strong></td>
<td align="LEFT">Remove your&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;file.</td>
</tr>
<tr valign="TOP">
<td align="LEFT"><strong>MAILTO=user@domain.com</strong></td>
<td align="LEFT">Emails the output to the specified address.</td>
</tr>
</tbody>
</table>
<p>The&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;command creates a&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;file containing commands and how often&nbsp;<a href="http://www.aota.net/keyword.php?cron">cron</a>&nbsp;should execute them. Each entry in a&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;file consists of six fields, specified in the following order:</p>
<ul>
<strong>minute(s) hour(s) day(s) month(s) weekday(s) command(s)</strong>
</ul>
<p>The fields are separated by spaces or tabs. The first five are integer patterns and the sixth is the command to be executed. The following table briefly describes each of the fields.</p>
<table border="0" cellpadding="4">
<tbody>
<tr valign="TOP">
<th align="LEFT">Field</th>
<th align="LEFT">Value</th>
<th align="LEFT">Description</th>
</tr>
<tr valign="TOP">
<td align="LEFT">minute</td>
<td align="LEFT">0-59</td>
<td align="LEFT">The exact minute that the command sequence executes.</td>
</tr>
<tr valign="TOP">
<td align="LEFT">hour</td>
<td align="LEFT">0-23</td>
<td align="LEFT">The hour of the day that the command sequence executes.</td>
</tr>
<tr valign="TOP">
<td align="LEFT">day</td>
<td align="LEFT">1-31</td>
<td align="LEFT">The day of the month that the command sequence executes.</td>
</tr>
<tr valign="TOP">
<td align="LEFT">month</td>
<td align="LEFT">1-12</td>
<td align="LEFT">The month of the year that the command sequence executes.</td>
</tr>
<tr valign="TOP">
<td align="LEFT">weekday</td>
<td align="LEFT">0-6</td>
<td align="LEFT">The day of the week that the command sequence executes. Sunday=0, Monday = 1, Tuesday = 2, and so forth.</td>
</tr>
<tr valign="TOP">
<td align="LEFT">command</td>
<td align="LEFT">Special</td>
<td align="LEFT">The complete command sequence variable that is to be executed.</td>
</tr>
</tbody>
</table>
<p>Each of the patterns from the first five fields may either be an asterisk (*) (meaning all legal values) or a list of elements separated by commas. An element is either a number or two numbers separated by a minus sign (meaning an inclusive range). Note that the specification of days may be made by two fields (day of the month and day of the week). If both are specified as a list of elements, both are followed. For example:</p>
<ul>
<strong>MAILTO=user@domain.com</strong>&nbsp;<br /><strong>0 0 1,15 * 1 /big/dom/xdomain/cgi-bin/scriptname.cgi</strong>
</ul>
<p>The&nbsp;<a href="http://www.aota.net/keyword.php?cron">cron</a>&nbsp;daemon would run the program&nbsp;<strong>scriptname.cgi</strong>&nbsp;in the&nbsp;<strong>cgi-bin</strong>&nbsp;directory on the first and fifteenth of each month, as well as on every Monday. To specify days by only one field, the other field should be set to *. For example:</p>
<ul>
<strong>MAILTO=user@domain.com</strong>&nbsp;<br /><strong>0 0 * * 1 /big/dom/xdomain/cgi-bin/scriptname.cgi</strong>
</ul>
<p>The program would then only run on Mondays.</p>
<p>If a&nbsp;<a href="http://www.aota.net/keyword.php?cron">cron</a>&nbsp;job specified in your&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;entry produces any error messages when it runs, they will be reported to you via email.</p>
<p>You may create&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;files in notepad (being sure to upload them in ASCII) or you may create them within&nbsp;<a href="http://www.aota.net/keyword.php?telnet">telnet</a>&nbsp;by simply typing:</p>
<ul>
<strong>mcedit cronfile.txt</strong>
</ul>
<p>For more information, consult the man pages. man pages are the directions and tutorials available to you right at the command line from within&nbsp;<a href="http://www.aota.net/keyword.php?telnet">telnet</a>. Type any of the following lines to open the relevant tutorials:</p>
<ul>
<strong>man 5 crontab</strong>&nbsp;{enter}&nbsp;<br /><strong>man 1 crontab</strong>&nbsp;{enter}&nbsp;<br /><strong>man cron</strong>&nbsp;{enter}&nbsp;<br /><strong>man at</strong>&nbsp;{enter}&nbsp;<br /><strong>man batch</strong>&nbsp;{enter}&nbsp;<br /><strong>man 1 cron</strong>&nbsp;{enter}
</ul>
<p>
<strong>Note:</strong>&nbsp;<br />Your&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;file&nbsp;<strong>must</strong>&nbsp;end with a line feed - in other words, make sure to press [Enter] after the last line in the file.</p>
<hr />
<h3>Try It!</h3>
<p>
Now that you have read an overview of&nbsp;<a href="http://www.aota.net/keyword.php?Cron">Cron</a>, test your skills by following the steps below. Once completed you should have a&nbsp;<a href="http://www.aota.net/keyword.php?cron">cron</a>&nbsp;file of your own!&nbsp;</p>
<p><strong>Step 1:</strong>&nbsp;Create a simple text file using Notepad or any simple text editor that contains the following text:</p>
<ul>
<strong>MAILTO=yourusername@yourdomain.com {Enter}<br />58 23 * * * /big/dom/xdomain/cgi-bin/yourscript.pl<br />{Enter}</strong>
</ul>
<p>
<strong>Notes for Step 1</strong></p>
<ol>
<li>You may create this file using your&nbsp;<a href="http://www.futurequest.net/Services/CNC/">CNC</a>&nbsp;File Manager by navigating to the /big/dom/xdomain/ directory and clicking 'Create New File' or any other simple text editor such as Notepad.</li>
<li>{Enter} should not actually be typed. [Enter] means hit the {Enter} (return) key to begin the next line and to add a blank line feed at the end of the last line of your&nbsp;<a href="http://www.aota.net/keyword.php?Cron">Cron</a>&nbsp;File. It is important to always remember to do this.</li>
<li>MAILTO: Replace the email address with a valid email address of your own. This will ensure that when your&nbsp;<a href="http://www.aota.net/keyword.php?cron">cron</a>runs, that any output from the script, such as error message, will be emailed to you.</li>
<li>The second line tells your server when to run this script. In this example, the script will be run at 11:58 PM Eastern Time every day of the year.</li>
<li>It is very important that you double check the script path to ensure it is correct and remember the file names are CaSe SeNsiTive.</li>
</ol>
<p><strong>Step 2:</strong>&nbsp;Name the text file. (Example: cronfile.txt)<br />The&nbsp;<em>cronfile</em>&nbsp;name may be replaced with any name you choose. For instance if you are running a&nbsp;<a href="http://www.aota.net/keyword.php?Cron">Cron</a>&nbsp;to trigger an email reminder script it could be called&nbsp;<em>reminder.txt</em>. Many choose to simply call it cronfile.txt.&nbsp;</p>
<p><strong>Step 3:</strong>&nbsp;Upload the file in&nbsp;<a href="http://www.aota.net/keyword.php?ASCII">ASCII</a>.<br />Any standard FTP client or your account's&nbsp;<a href="http://www.futurequest.net/Services/CNC/">CNC</a>&nbsp;upload feature will work for this. It must be uploaded in&nbsp;<a href="http://www.aota.net/keyword.php?ASCII">ASCII</a>&nbsp;mode and it is recommended that it be placed in your&nbsp;<strong>/big/dom/xdomain/</strong>&nbsp;directory. It may be placed anywhere in your account but to prevent browser access (security risks) it is strongly recommended to place it above your /www directory.&nbsp;</p>
<p><strong>Step 4:</strong>&nbsp;<a href="http://www.aota.net/keyword.php?Telnet">Telnet</a>&nbsp;into your account and issue the following command:</p>
<ul>
<strong><a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;/big/dom/xdomain/cronfile.txt</strong>
</ul>
<p>
The above tells the server's&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;where the file is located and that you wish to make it active. Make sure the path to the file is the actual path to where the file was placed. If successful you will be returned to the command bash line, if not an error will be displayed)&nbsp;</p>
<p><strong>IMPORTANT NOTES</strong>&nbsp;</p>
<p>Removing/Stopping the Cron: Deleting the&nbsp;<em>cronfile.txt</em>&nbsp;file from your account will&nbsp;<strong>not</strong>&nbsp;stop the&nbsp;<a href="http://www.aota.net/keyword.php?cron">cron</a>. You may remove this file at any time, since the server's&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;already has the contents, and the&nbsp;<a href="http://www.aota.net/keyword.php?cron">cron</a>&nbsp;will still run after you have made it active.&nbsp;</p>
<p>To turn the&nbsp;<a href="http://www.aota.net/keyword.php?cron">cron</a>&nbsp;off you must&nbsp;<a href="http://www.aota.net/keyword.php?Telnet">Telnet</a>&nbsp;into your account and issue the following command:</p>
<ul>
<strong><a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;-r</strong>
</ul>
<p>
The&nbsp;<em>crontab -r</em>&nbsp;will deactivate the&nbsp;<a href="http://www.aota.net/keyword.php?cronjob">cronjob</a>&nbsp;and remove the file contents from the server.&nbsp;</p>
<p><strong>Security Note:</strong>&nbsp;If the script the&nbsp;<a href="http://www.aota.net/keyword.php?cron">cron</a>&nbsp;is setup to run is in the /cgi-bin/ or /www/ directory it may be run at anytime by anyone with browser access. If the&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;is all that should run the script and you do not want the public to be able to run the script, then you will need to place the script in a directory above the /cgi-bin/ and /www/ directories such as:<strong>/big/dom/xdom/user/cronscripts/scriptname</strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>


    <small class="meta">September 24, 2009 | <a href='/bkup/2009/09/24/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520cronjob%2520%2526amp%253b%2520crontab%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/#disqus_thread'>View Comments</a></small>
  </div>

  <div class="post">
    <h2><a href="/unix/linux/2009/09/24/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520cronjob%2520%2526amp%253b%2520crontab%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/">cronjob & crontab</a></h2>

    <p>&nbsp;</p>
<h3><span style="font-weight:normal;">今天要设置一个cron job，查了一些资料，发现了很好的一篇文章，见下文，原文参见：<a href="http://www.aota.net/Script_Installation_Tips/cronhelp.php4">http://www.aota.net/Script_Installation_Tips/cronhelp.php4</a>。</span></h3>
<h3><span style="font-weight:normal;">但是我按照这篇文章的介绍，在Solaris 9下设置crontab的文件时，老是报错</span></h3>
<p><span style="font-weight:normal;"><br />
</span></p>
<p>
<pre>$ crontab chkbjservers.cron
MAILTO=xxx@xxxxx.com
crontab: error on previous line; unexpected character found in line.
crontab: errors detected in input, no crontab file generated.</pre>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>后来查了Solaris的crontab的手册，发现Solaris的crontab不支持MAILTO，必须要用mailx之类的Unix邮件发送命令。另外，整个cron file只要一句话：<strong>minute(s) hour(s) day(s) month(s) weekday(s) command(s). </strong><span>比如：</span></p>
<p>&nbsp;</p>
<p><span><br />
</span></p>
<p>
<pre>30 7 * * 1 /bld/xxxx/mytool/chkbjserver.sh|cat chkbjserver.out|mailx -s "Shared memory checked result in BJ COOL" xxxx@xxxxxxx.com</pre>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong>=========================================================================</strong></p>
<h3>What is a&nbsp;<a href="http://www.aota.net/keyword.php?cronjob">cronjob</a>, and how do I use it?</h3>
<p>
The&nbsp;<a href="http://www.aota.net/keyword.php?cron">cron</a>&nbsp;daemon is a long running process that executes commands at specific dates and times. To schedule one-time only tasks with&nbsp;<a href="http://www.aota.net/keyword.php?cron">cron</a>, use&nbsp;<strong>at</strong>&nbsp;or&nbsp;<strong>batch</strong>. For commands that need to be executed repeatedly (e.g. hourly, daily or weekly), use&nbsp;<strong>crontab</strong>, which has the following options:</p>
<table border="0" cellpadding="4">
<tbody>
<tr valign="TOP">
<td align="LEFT"><strong>crontab filename</strong></td>
<td align="LEFT">Install filename as your&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;file.</td>
</tr>
<tr valign="TOP">
<td align="LEFT"><strong>crontab -e</strong></td>
<td align="LEFT">Edit your&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;file.</td>
</tr>
<tr valign="TOP">
<td align="LEFT"><strong>crontab -l</strong></td>
<td align="LEFT">Show your&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;file.</td>
</tr>
<tr valign="TOP">
<td align="LEFT"><strong>crontab -r</strong></td>
<td align="LEFT">Remove your&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;file.</td>
</tr>
<tr valign="TOP">
<td align="LEFT"><strong>MAILTO=user@domain.com</strong></td>
<td align="LEFT">Emails the output to the specified address.</td>
</tr>
</tbody>
</table>
<p>The&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;command creates a&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;file containing commands and how often&nbsp;<a href="http://www.aota.net/keyword.php?cron">cron</a>&nbsp;should execute them. Each entry in a&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;file consists of six fields, specified in the following order:</p>
<ul>
<strong>minute(s) hour(s) day(s) month(s) weekday(s) command(s)</strong>
</ul>
<p>The fields are separated by spaces or tabs. The first five are integer patterns and the sixth is the command to be executed. The following table briefly describes each of the fields.</p>
<table border="0" cellpadding="4">
<tbody>
<tr valign="TOP">
<th align="LEFT">Field</th>
<th align="LEFT">Value</th>
<th align="LEFT">Description</th>
</tr>
<tr valign="TOP">
<td align="LEFT">minute</td>
<td align="LEFT">0-59</td>
<td align="LEFT">The exact minute that the command sequence executes.</td>
</tr>
<tr valign="TOP">
<td align="LEFT">hour</td>
<td align="LEFT">0-23</td>
<td align="LEFT">The hour of the day that the command sequence executes.</td>
</tr>
<tr valign="TOP">
<td align="LEFT">day</td>
<td align="LEFT">1-31</td>
<td align="LEFT">The day of the month that the command sequence executes.</td>
</tr>
<tr valign="TOP">
<td align="LEFT">month</td>
<td align="LEFT">1-12</td>
<td align="LEFT">The month of the year that the command sequence executes.</td>
</tr>
<tr valign="TOP">
<td align="LEFT">weekday</td>
<td align="LEFT">0-6</td>
<td align="LEFT">The day of the week that the command sequence executes. Sunday=0, Monday = 1, Tuesday = 2, and so forth.</td>
</tr>
<tr valign="TOP">
<td align="LEFT">command</td>
<td align="LEFT">Special</td>
<td align="LEFT">The complete command sequence variable that is to be executed.</td>
</tr>
</tbody>
</table>
<p>Each of the patterns from the first five fields may either be an asterisk (*) (meaning all legal values) or a list of elements separated by commas. An element is either a number or two numbers separated by a minus sign (meaning an inclusive range). Note that the specification of days may be made by two fields (day of the month and day of the week). If both are specified as a list of elements, both are followed. For example:</p>
<ul>
<strong>MAILTO=user@domain.com</strong>&nbsp;<br /><strong>0 0 1,15 * 1 /big/dom/xdomain/cgi-bin/scriptname.cgi</strong>
</ul>
<p>The&nbsp;<a href="http://www.aota.net/keyword.php?cron">cron</a>&nbsp;daemon would run the program&nbsp;<strong>scriptname.cgi</strong>&nbsp;in the&nbsp;<strong>cgi-bin</strong>&nbsp;directory on the first and fifteenth of each month, as well as on every Monday. To specify days by only one field, the other field should be set to *. For example:</p>
<ul>
<strong>MAILTO=user@domain.com</strong>&nbsp;<br /><strong>0 0 * * 1 /big/dom/xdomain/cgi-bin/scriptname.cgi</strong>
</ul>
<p>The program would then only run on Mondays.</p>
<p>If a&nbsp;<a href="http://www.aota.net/keyword.php?cron">cron</a>&nbsp;job specified in your&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;entry produces any error messages when it runs, they will be reported to you via email.</p>
<p>You may create&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;files in notepad (being sure to upload them in ASCII) or you may create them within&nbsp;<a href="http://www.aota.net/keyword.php?telnet">telnet</a>&nbsp;by simply typing:</p>
<ul>
<strong>mcedit cronfile.txt</strong>
</ul>
<p>For more information, consult the man pages. man pages are the directions and tutorials available to you right at the command line from within&nbsp;<a href="http://www.aota.net/keyword.php?telnet">telnet</a>. Type any of the following lines to open the relevant tutorials:</p>
<ul>
<strong>man 5 crontab</strong>&nbsp;{enter}&nbsp;<br /><strong>man 1 crontab</strong>&nbsp;{enter}&nbsp;<br /><strong>man cron</strong>&nbsp;{enter}&nbsp;<br /><strong>man at</strong>&nbsp;{enter}&nbsp;<br /><strong>man batch</strong>&nbsp;{enter}&nbsp;<br /><strong>man 1 cron</strong>&nbsp;{enter}
</ul>
<p>
<strong>Note:</strong>&nbsp;<br />Your&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;file&nbsp;<strong>must</strong>&nbsp;end with a line feed - in other words, make sure to press [Enter] after the last line in the file.</p>
<hr />
<h3>Try It!</h3>
<p>
Now that you have read an overview of&nbsp;<a href="http://www.aota.net/keyword.php?Cron">Cron</a>, test your skills by following the steps below. Once completed you should have a&nbsp;<a href="http://www.aota.net/keyword.php?cron">cron</a>&nbsp;file of your own!&nbsp;</p>
<p><strong>Step 1:</strong>&nbsp;Create a simple text file using Notepad or any simple text editor that contains the following text:</p>
<ul>
<strong>MAILTO=yourusername@yourdomain.com {Enter}<br />58 23 * * * /big/dom/xdomain/cgi-bin/yourscript.pl<br />{Enter}</strong>
</ul>
<p>
<strong>Notes for Step 1</strong></p>
<ol>
<li>You may create this file using your&nbsp;<a href="http://www.futurequest.net/Services/CNC/">CNC</a>&nbsp;File Manager by navigating to the /big/dom/xdomain/ directory and clicking 'Create New File' or any other simple text editor such as Notepad.</li>
<li>{Enter} should not actually be typed. [Enter] means hit the {Enter} (return) key to begin the next line and to add a blank line feed at the end of the last line of your&nbsp;<a href="http://www.aota.net/keyword.php?Cron">Cron</a>&nbsp;File. It is important to always remember to do this.</li>
<li>MAILTO: Replace the email address with a valid email address of your own. This will ensure that when your&nbsp;<a href="http://www.aota.net/keyword.php?cron">cron</a>runs, that any output from the script, such as error message, will be emailed to you.</li>
<li>The second line tells your server when to run this script. In this example, the script will be run at 11:58 PM Eastern Time every day of the year.</li>
<li>It is very important that you double check the script path to ensure it is correct and remember the file names are CaSe SeNsiTive.</li>
</ol>
<p><strong>Step 2:</strong>&nbsp;Name the text file. (Example: cronfile.txt)<br />The&nbsp;<em>cronfile</em>&nbsp;name may be replaced with any name you choose. For instance if you are running a&nbsp;<a href="http://www.aota.net/keyword.php?Cron">Cron</a>&nbsp;to trigger an email reminder script it could be called&nbsp;<em>reminder.txt</em>. Many choose to simply call it cronfile.txt.&nbsp;</p>
<p><strong>Step 3:</strong>&nbsp;Upload the file in&nbsp;<a href="http://www.aota.net/keyword.php?ASCII">ASCII</a>.<br />Any standard FTP client or your account's&nbsp;<a href="http://www.futurequest.net/Services/CNC/">CNC</a>&nbsp;upload feature will work for this. It must be uploaded in&nbsp;<a href="http://www.aota.net/keyword.php?ASCII">ASCII</a>&nbsp;mode and it is recommended that it be placed in your&nbsp;<strong>/big/dom/xdomain/</strong>&nbsp;directory. It may be placed anywhere in your account but to prevent browser access (security risks) it is strongly recommended to place it above your /www directory.&nbsp;</p>
<p><strong>Step 4:</strong>&nbsp;<a href="http://www.aota.net/keyword.php?Telnet">Telnet</a>&nbsp;into your account and issue the following command:</p>
<ul>
<strong><a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;/big/dom/xdomain/cronfile.txt</strong>
</ul>
<p>
The above tells the server's&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;where the file is located and that you wish to make it active. Make sure the path to the file is the actual path to where the file was placed. If successful you will be returned to the command bash line, if not an error will be displayed)&nbsp;</p>
<p><strong>IMPORTANT NOTES</strong>&nbsp;</p>
<p>Removing/Stopping the Cron: Deleting the&nbsp;<em>cronfile.txt</em>&nbsp;file from your account will&nbsp;<strong>not</strong>&nbsp;stop the&nbsp;<a href="http://www.aota.net/keyword.php?cron">cron</a>. You may remove this file at any time, since the server's&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;already has the contents, and the&nbsp;<a href="http://www.aota.net/keyword.php?cron">cron</a>&nbsp;will still run after you have made it active.&nbsp;</p>
<p>To turn the&nbsp;<a href="http://www.aota.net/keyword.php?cron">cron</a>&nbsp;off you must&nbsp;<a href="http://www.aota.net/keyword.php?Telnet">Telnet</a>&nbsp;into your account and issue the following command:</p>
<ul>
<strong><a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;-r</strong>
</ul>
<p>
The&nbsp;<em>crontab -r</em>&nbsp;will deactivate the&nbsp;<a href="http://www.aota.net/keyword.php?cronjob">cronjob</a>&nbsp;and remove the file contents from the server.&nbsp;</p>
<p><strong>Security Note:</strong>&nbsp;If the script the&nbsp;<a href="http://www.aota.net/keyword.php?cron">cron</a>&nbsp;is setup to run is in the /cgi-bin/ or /www/ directory it may be run at anytime by anyone with browser access. If the&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;is all that should run the script and you do not want the public to be able to run the script, then you will need to place the script in a directory above the /cgi-bin/ and /www/ directories such as:<strong>/big/dom/xdom/user/cronscripts/scriptname</strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>


    <small class="meta">September 24, 2009 | <a href='/unix/linux/2009/09/24/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520cronjob%2520%2526amp%253b%2520crontab%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/#disqus_thread'>View Comments</a></small>
  </div>

  <div class="post">
    <h2><a href="/unix/linux/2009/09/19/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520fedora%25e5%25ae%2589%25e8%25a3%2585expect%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/">Fedora安装Expect</a></h2>

    <p>费了很大力气才下到Expect的源代码，然后参考了Expect的INSTALL说明文件，还需要Tcl/Tk的源代码支持，于是又下载了Tcl/Tk的源代码，把它们都给放到/usr/local/src下面。先编译安装tcl和tk，完了之后进入expect的文件夹下面，./configure，结果报错，说找不到tclInt.h。于是在tcl的源文件的文件夹下面搜索tclInt.h，发现该文件确实存在，在generic下面。又参考了一下Expect的INSTALL说明文件，才知道可以加--withtclincluse=选项，于是重新configure：</p>
<p>&nbsp;</p>
<p>./configure --withtclinclude=/usr/local/src/tcl8.6b1/generic</p>
<p>&nbsp;</p>
<p>configure成功。于是输入make,正式编译，结果又发现了如下错误：</p>
<p>&nbsp;</p>
<p>exp_main_exp.c:32: error: &lsquo;Tcl_Interp&rsquo; has no member named &lsquo;result&rsquo;<br />
exp_main_exp.c:33: warning: incompatible implicit declaration of built-in function &lsquo;exit&rsquo;<br />
make: *** [exp_main_exp.o] Error 1</p>
<p>&nbsp;</p>
<p>网上一搜，在<a href="http://groups.google.com/group/comp.lang.tcl/browse_thread/thread/e63b1bd2d350d024/8bbd5758f6193120?show_docid=8bbd5758f6193120&amp;pli=1">http://groups.google.com/group/comp.lang.tcl/browse_thread/thread/e63b1bd2d350d024/8bbd5758f6193120?show_docid=8bbd5758f6193120&amp;pli=1</a><br />
 发现有人遇到过同样的问题。在<a href="http://www.tcl.tk/cgi-bin/tct/tip/330.html">http://www.tcl.tk/cgi-bin/tct/tip/330.html</a><br />
给出了原因，说是因为在新版(8.6)的tcl的tcl.h中Tcl_Interp被重命名为unused1了，而expect的源代码并没有做相应修改。并且给出了解决方案，就是添加预定义USE_INTERP_RESULT，或者用8.5以下的tcl源代码。</p>
<p>&nbsp;</p>
<p>我没有再继续尝试编译安装expect。我想起来可以尝试通过yum安装，于是输入yum install expect，竟然成功了！不过在安装expect的同时，还自动安装了tcl8.5.3，估计这是因为安装的expect是基于tcl8.5的源代码变异的。</p>
<p>&nbsp;</p>
<p>看来Expect开发者乏人啊，这么长时间这个bug竟然没有人修复，唉&hellip;&hellip;</p>


    <small class="meta">September 19, 2009 | <a href='/unix/linux/2009/09/19/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520fedora%25e5%25ae%2589%25e8%25a3%2585expect%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/#disqus_thread'>View Comments</a></small>
  </div>

  <div class="post">
    <h2><a href="/bkup/2009/09/19/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520fedora%25e5%25ae%2589%25e8%25a3%2585expect%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/">Fedora安装Expect</a></h2>

    <p>费了很大力气才下到Expect的源代码，然后参考了Expect的INSTALL说明文件，还需要Tcl/Tk的源代码支持，于是又下载了Tcl/Tk的源代码，把它们都给放到/usr/local/src下面。先编译安装tcl和tk，完了之后进入expect的文件夹下面，./configure，结果报错，说找不到tclInt.h。于是在tcl的源文件的文件夹下面搜索tclInt.h，发现该文件确实存在，在generic下面。又参考了一下Expect的INSTALL说明文件，才知道可以加--withtclincluse=选项，于是重新configure：</p>
<p>&nbsp;</p>
<p>./configure --withtclinclude=/usr/local/src/tcl8.6b1/generic</p>
<p>&nbsp;</p>
<p>configure成功。于是输入make,正式编译，结果又发现了如下错误：</p>
<p>&nbsp;</p>
<p>exp_main_exp.c:32: error: &lsquo;Tcl_Interp&rsquo; has no member named &lsquo;result&rsquo;<br />
exp_main_exp.c:33: warning: incompatible implicit declaration of built-in function &lsquo;exit&rsquo;<br />
make: *** [exp_main_exp.o] Error 1</p>
<p>&nbsp;</p>
<p>网上一搜，在<a href="http://groups.google.com/group/comp.lang.tcl/browse_thread/thread/e63b1bd2d350d024/8bbd5758f6193120?show_docid=8bbd5758f6193120&amp;pli=1">http://groups.google.com/group/comp.lang.tcl/browse_thread/thread/e63b1bd2d350d024/8bbd5758f6193120?show_docid=8bbd5758f6193120&amp;pli=1</a><br />
 发现有人遇到过同样的问题。在<a href="http://www.tcl.tk/cgi-bin/tct/tip/330.html">http://www.tcl.tk/cgi-bin/tct/tip/330.html</a><br />
给出了原因，说是因为在新版(8.6)的tcl的tcl.h中Tcl_Interp被重命名为unused1了，而expect的源代码并没有做相应修改。并且给出了解决方案，就是添加预定义USE_INTERP_RESULT，或者用8.5以下的tcl源代码。</p>
<p>&nbsp;</p>
<p>我没有再继续尝试编译安装expect。我想起来可以尝试通过yum安装，于是输入yum install expect，竟然成功了！不过在安装expect的同时，还自动安装了tcl8.5.3，估计这是因为安装的expect是基于tcl8.5的源代码变异的。</p>
<p>&nbsp;</p>
<p>看来Expect开发者乏人啊，这么长时间这个bug竟然没有人修复，唉&hellip;&hellip;</p>


    <small class="meta">September 19, 2009 | <a href='/bkup/2009/09/19/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520fedora%25e5%25ae%2589%25e8%25a3%2585expect%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/#disqus_thread'>View Comments</a></small>
  </div>

  <div class="post">
    <h2><a href="/unix/linux/2009/09/15/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520solaris%25e4%25b8%258b%25e6%259f%25a5%25e7%259c%258b%25e8%25bf%259b%25e7%25a8%258b%25e7%259a%2584cpu%25e5%258d%25a0%25e7%2594%25a8%25e7%258e%2587%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/">solaris下查看进程的cpu占用率</a></h2>

    <p>&nbsp;</p>
<h3>solaris下查看某进程的资源占用率及其它</h3>
<p>
<span></p>
<div class="t_msgfontfix"><span style="font-size:x-small;"><br />
</span>
<p><span style="font-size:small;"><span style="color:#000000;">1. &nbsp; &nbsp; # ps -eo pid,pcpu,args | sort +1n&nbsp;</p>
<p>该命令输出当前系统进程的pid, cpu占用率及命令描述，并以pcpu来排序(尝试过，没有成功，据说在RedHat上可行的。)</p>
<p>2. top -p &lt;pid&gt;</span></span></p>
<p><span style="font-size:x-small;"><br /></span></p>
<p><span style="font-size:small;"><span style="color:#000000;">不同的系统top的设置不尽相同，因此使用时需要注意。</p>
<p>3. prstat -p &lt;pid&gt;</span></span></p>
<p><span style="font-size:x-small;"><br /></span></p>
<p><span style="font-size:small;"><span style="color:#000000;">prstat 检查系统中进程占用CPU，内存等情况。可以代替top，不过好像solaris5.8之后才有，5.7上就没有。</p>
<p>4. 查看IO情况 iostat</span></span></p>
<p><span style="font-size:small;"><span style="color:#000000;"><br />iostat -x -I 1 若系统明显变慢，也可用此命令检查磁盘I/O情况</span></span></p>
<p><span style="font-size:small;"><span style="color:#000000;"><br />5. 查看CPU 可以用 psrinfo -v</p>
<p>查看详细信息</p>
<p>/usr/platform/sun4u/sbin/prtdiag -v</p>
<p>&nbsp;6. sar</span></span></p>
<p><span style="font-size:small;"><span style="color:#000000;">sar -u 3 20 若系统明显变慢，用此命令检查cpu占用率<br />sar &ndash;r 3 20 用此命令检查内存使用情况</span></span></p>
</div>
<p></span></p>


    <small class="meta">September 15, 2009 | <a href='/unix/linux/2009/09/15/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520solaris%25e4%25b8%258b%25e6%259f%25a5%25e7%259c%258b%25e8%25bf%259b%25e7%25a8%258b%25e7%259a%2584cpu%25e5%258d%25a0%25e7%2594%25a8%25e7%258e%2587%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/#disqus_thread'>View Comments</a></small>
  </div>

  <div class="post">
    <h2><a href="/bkup/2009/09/15/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520solaris%25e4%25b8%258b%25e6%259f%25a5%25e7%259c%258b%25e8%25bf%259b%25e7%25a8%258b%25e7%259a%2584cpu%25e5%258d%25a0%25e7%2594%25a8%25e7%258e%2587%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/">solaris下查看进程的cpu占用率</a></h2>

    <p>&nbsp;</p>
<h3>solaris下查看某进程的资源占用率及其它</h3>
<p>
<span></p>
<div class="t_msgfontfix"><span style="font-size:x-small;"><br />
</span>
<p><span style="font-size:small;"><span style="color:#000000;">1. &nbsp; &nbsp; # ps -eo pid,pcpu,args | sort +1n&nbsp;</p>
<p>该命令输出当前系统进程的pid, cpu占用率及命令描述，并以pcpu来排序(尝试过，没有成功，据说在RedHat上可行的。)</p>
<p>2. top -p &lt;pid&gt;</span></span></p>
<p><span style="font-size:x-small;"><br /></span></p>
<p><span style="font-size:small;"><span style="color:#000000;">不同的系统top的设置不尽相同，因此使用时需要注意。</p>
<p>3. prstat -p &lt;pid&gt;</span></span></p>
<p><span style="font-size:x-small;"><br /></span></p>
<p><span style="font-size:small;"><span style="color:#000000;">prstat 检查系统中进程占用CPU，内存等情况。可以代替top，不过好像solaris5.8之后才有，5.7上就没有。</p>
<p>4. 查看IO情况 iostat</span></span></p>
<p><span style="font-size:small;"><span style="color:#000000;"><br />iostat -x -I 1 若系统明显变慢，也可用此命令检查磁盘I/O情况</span></span></p>
<p><span style="font-size:small;"><span style="color:#000000;"><br />5. 查看CPU 可以用 psrinfo -v</p>
<p>查看详细信息</p>
<p>/usr/platform/sun4u/sbin/prtdiag -v</p>
<p>&nbsp;6. sar</span></span></p>
<p><span style="font-size:small;"><span style="color:#000000;">sar -u 3 20 若系统明显变慢，用此命令检查cpu占用率<br />sar &ndash;r 3 20 用此命令检查内存使用情况</span></span></p>
</div>
<p></span></p>


    <small class="meta">September 15, 2009 | <a href='/bkup/2009/09/15/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520solaris%25e4%25b8%258b%25e6%259f%25a5%25e7%259c%258b%25e8%25bf%259b%25e7%25a8%258b%25e7%259a%2584cpu%25e5%258d%25a0%25e7%2594%25a8%25e7%258e%2587%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/#disqus_thread'>View Comments</a></small>
  </div>

</div>

<div class='paging'>
  
    <a href='/page24' class='older'>Older Posts</a>
  

  
    <a href='/page22' class='newer'>Newer Posts</a>
  

  
  <div class='clear'></div>
</div>

        </div>
      </div>

      <div id="bottom" class="span8 offset4">
        <div class="well">
          <a href="/about/">About</a> |
          <a href="/archives/">Archives</a> |
          <a href="/atom.xml">feed</a>
        </div>
      </div>
    </div>
  </div>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script src="/javascripts/bootstrap.min.js"></script>

  <!-- Google Analytics Code -->
  <script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-9947336-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script');
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 
          'http://www') + '.google-analytics.com/ga.js';
      ga.setAttribute('async', 'true');
      document.documentElement.firstChild.appendChild(ga);
    })();

  </script>
</body>
</html>

