<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Bo's Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Bo&#39;s blog.">
    <meta name="author" content="Bo Yang">
    
    <link rel="canonical" href="http://www.bo-yang.net//page19/">
    <link rel="alternate" type="application/rss+xml" title="RSS Feed for Bo's Blog" href="/feed.xml" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/pixyll.css?201602041831" type="text/css">

    <!-- Fonts -->
    <link href='//fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Lato:900,300' rel='stylesheet' type='text/css'>
    
      <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">
    

    <!-- Google Prettify -->
    <link href="http://www.bo-yang.net//assets/google-code-prettify/desert.css" rel="stylesheet" type="text/css" media="all">

    <!-- MathJax -->
    
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
    

    <!-- Verifications -->
    

    <!-- Open Graph -->
    <!-- From: https://github.com/mmistakes/hpstr-jekyll-theme/blob/master/_includes/head.html -->
    <meta property="og:locale" content="en_US">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Bo&#39;s Blog">
    <meta property="og:description" content="Bo&#39;s blog.">
    <meta property="og:url" content="http://www.bo-yang.net//page19/">
    <meta property="og:site_name" content="Bo&#39;s Blog">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    
        <meta name="twitter:site" content="@bonnyang" />
    
    <meta name="twitter:title" content="Bo's Blog" />
    <meta name="twitter:description" content="Bo's blog." />
    <meta name="twitter:url" content="http://www.bo-yang.net//page19/" />

    <!-- Icons -->
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-160x160.png" sizes="160x160">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">

    
    <script type="text/javascript">
       (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
       (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
       m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
       })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
       ga('create', 'UA-50551633-1', 'auto');
       ga('send', 'pageview');
    </script>
    
</head>

<body class="site">

	
		<div id="fb-root"></div>
		<script>(function(d, s, id) {
		  var js, fjs = d.getElementsByTagName(s)[0];
		  if (d.getElementById(id)) return;
		  js = d.createElement(s); js.id = id;
		  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5&appId=";
		  fjs.parentNode.insertBefore(js, fjs);
		}(document, 'script', 'facebook-jssdk'));</script>
	

  <div class="site-wrap">
    <header class="site-header px2 px-responsive">
  <div class="mt2 wrap">
    <div class="measure">
        <a href="http://www.bo-yang.net/" class="site-title"><b>Bo's Blog</b></a>
      <nav class="site-nav">
        
    

    

    
        <a href="/archive/">Archive</a>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    


    

    

    

    

    

    

    

    
        <a href="/tags/">Tags</a>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    


    

    
        <a href="/about/">About Me</a>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    


    

    

    

    
        <a href="/contact/">Contact</a>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    


      </nav>
      <div class="clearfix"></div>
      
        <div class="social-icons">
  <div class="social-icons-right">
    
      <a class="fa fa-github" href="https://github.com/bo-yang"></a>
    
    
    
      <a class="fa fa-stack-overflow" href="https://stackoverflow.com/users/boyang"></a>
    
    <a class="fa fa-rss" href="/feed.xml"></a>
    
      <a class="fa fa-twitter" href="https://twitter.com/bonnyang"></a>
    
    
    
    
    
      <a class="fa fa-envelope" href="mailto:bonny95@gmail.com"></a>
    
    
      <a class="fa fa-linkedin" href="https://www.linkedin.com/in/boyanglink"></a>
    
    
    
  </div>
  <div class="right">
    
    
    
  </div>
</div>
<div class="clearfix"></div>

      
    </div>
  </div>
</header>


    <div class="post p2 p-responsive wrap" role="main">
      <div class="measure">
        

<div class="home">
  
    <div class="posts">
      
        <div class="post py3">
          <p class="post-meta">Jan 13, 2009</p>
          <a href="/2009/01/13/add-a-directory-to-my-include-path-at-runtime" class="post-link"><h3 class="h2 post-title">How do I add a directory to my include path (@INC) at runtime?</h3></a>
          <p class="post-summary">
            
              <p>
     <span class="Apple-style-span" style="color:rgb(17,17,17);font-family:Arial;font-size:16px;"><span class="Apple-style-span" style="font-size:20px;font-weight:bold;">How do I add a directory to my include path (@INC) at runtime?</span></span>
<p style="font-size:100%;">Here are the suggested ways of modifying your include path, including environment variables, run-time switches, and in-code statements:</p>
<ul>
<li><a name="the-PERLLIB-environment-variable"></a><b>the PERLLIB environment variable</b>
<pre class="verbatim" style="margin-left:10px;background-image:initial;background-repeat:initial;background-attachment:initial;-webkit-background-clip:initial;-webkit-background-origin:initial;background-color:rgb(238,238,221);width:90%;background-position:initial initial;border-color:rgb(204,204,204);border-style:solid;border-width:1px;padding:10px;">	$ export PERLLIB=/path/to/my/dir
	$ perl program.pl</pre>
</li>
<li><a name="the-PERL5LIB-environment-variable"></a><b>the PERL5LIB environment variable</b>
<pre class="verbatim" style="margin-left:10px;background-image:initial;background-repeat:initial;background-attachment:initial;-webkit-background-clip:initial;-webkit-background-origin:initial;background-color:rgb(238,238,221);width:90%;background-position:initial initial;border-color:rgb(204,204,204);border-style:solid;border-width:1px;padding:10px;">	$ export PERL5LIB=/path/to/my/dir
	$ perl program.pl</pre>
</li>
<li><a name="the-perl--Idir-command-line-flag"></a><b>the perl -Idir command line flag</b>
<pre class="verbatim" style="margin-left:10px;background-image:initial;background-repeat:initial;background-attachment:initial;-webkit-background-clip:initial;-webkit-background-origin:initial;background-color:rgb(238,238,221);width:90%;background-position:initial initial;border-color:rgb(204,204,204);border-style:solid;border-width:1px;padding:10px;">	$ perl -I/path/to/my/dir program.pl</pre>
</li>
<li><a name="the-use-lib-pragma%3a"></a><b>the use lib pragma:</b>
<pre class="verbatim" style="margin-left:10px;background-image:initial;background-repeat:initial;background-attachment:initial;-webkit-background-clip:initial;-webkit-background-origin:initial;background-color:rgb(238,238,221);width:90%;background-position:initial initial;border-color:rgb(204,204,204);border-style:solid;border-width:1px;padding:10px;">	<a class="l_k" href="http://perldoc.perl.org/functions/use.html" style="color:rgb(139,0,139);font-weight:bold;">use</a> <span class="w" style="color:rgb(0,0,0);">lib</span> <span class="q" style="color:rgb(205,85,85);">"$ENV{HOME}/myown_perllib"</span><span class="sc" style="color:rgb(0,0,0);">;</span></pre>
</li>
</ul>
<p style="font-size:100%;">The last is particularly useful because it knows about machine dependent architectures. The lib.pm pragmatic module was first included with the 5.002 release of Perl.</p>

            
          </p>
        </div>
      
        <div class="post py3">
          <p class="post-meta">Jan 12, 2009</p>
          <a href="/2009/01/12/perl-parameters" class="post-link"><h3 class="h2 post-title">Shell向Perl脚本中传递变量的方法</h3></a>
          <p class="post-summary">
            
              <p><span style="border-collapse:collapse;color:#000000;font-family:song;font-size:13px;"></p>
<div><span style="font-family:Arial;">方法一：</span></div>
<p><span style="font-family:Arial;">In shell using export&nbsp;&nbsp;to output a variable, and&nbsp;in perl using special variable %ENV to get shell's variables.<br />i.e.:<br />--- shell box---<br />$ /bin/ksh<br /># export x=Foo<br /># perl -e 'print $ENV{"x"}'<br />-------------</span></span></p>
<div><span style="border-collapse:collapse;color:#000000;font-size:13px;"><span style="font-family:Arial;"><br /></span></span></div>
<div><span style="border-collapse:collapse;color:#000000;font-size:13px;"><span style="font-family:Arial;">方法二：</span></span></div>
<div><span style="border-collapse:collapse;color:#000000;font-family:song;font-size:13px;"><span style="border-collapse:separate;font-size:12px;letter-spacing:2px;line-height:18px;"><span style="font-family:Arial;">象C一样，PERL也有存储命令行参数的数组@ARGV，可以用来分别处理各个命令行参数；与C不同的是，$ARGV[0]是第一个参数，而不是程序名本身。<br />&nbsp;&nbsp;&nbsp;&nbsp;$var = $ARGV[0]; # 第一个参数<br />&nbsp;&nbsp;&nbsp;&nbsp;$numargs = @ARGV; # 参数的个数<br />&nbsp;&nbsp;PERL中，&lt;&gt;操作符实际上是对数组@ARGV的隐含的引用，其工作原理为：<br />1、当PERL解释器第一次看到&lt;&gt;时，打开以$ARGV[0]为文件名的文件；<br />2、执行动作shift(@ARGV); 即把数组@ARGV的元素向前移动一个，其元素数量即减少了一个。<br />3、&lt;&gt;操作符读取在第一步打开的文件中的所有行。<br />4、读完后，解释器回到第一步重复。<br />&nbsp;&nbsp;例：<br />&nbsp;&nbsp;&nbsp;&nbsp;@ARGV = ("myfile1", "myfile2"); #实际上由命令行参数赋值<br />&nbsp;&nbsp;&nbsp;&nbsp;while ($line = &lt;&gt;) {<br />&nbsp;&nbsp;&nbsp;&nbsp;print ($line);<br />&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<br />&nbsp;&nbsp;将把文件myfile1和myfile2的内容打印出来。</span></span><br /></span></div>

            
          </p>
        </div>
      
        <div class="post py3">
          <p class="post-meta">Jan 6, 2009</p>
          <a href="/2009/01/06/special-variable-in-perl" class="post-link"><h3 class="h2 post-title">Perl中的特殊变量</h3></a>
          <p class="post-summary">
            
              <p>
<span class="Apple-style-span" style="color:rgb(0,0,0);font-size:16px;">
<div style="min-height:1100px;counter-reset:__goog_page__ 0;font-family:Verdana;font-size:10pt;line-height:normal;background-color:rgb(255,255,255);margin:6px;padding:0;">
<h1 style="text-align:center;font-size:18pt;">Perl中的特殊变量<br /></h1>
<div style="margin-top:0;margin-bottom:0;"></div>
<div style="margin-top:0;margin-bottom:0;">
<h3 style="font-size:12pt;">1. $&amp;, $`,$' 用在模式匹配中<br /></h3>
<p><span style="font-family:verdana;"><span style="color:rgb(0,0,0);"><b><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /><br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /><span class="Apple-style-span" style="color:rgb(0,0,255);">$&amp;  用来存放匹配中的值<br /></span><span class="Apple-style-span" style="color:rgb(0,0,255);"><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />$`   用来存放匹配中之前所有字符<br /></span><span class="Apple-style-span" style="color:rgb(0,0,255);"><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />$</span></b></span><span><span class="Apple-style-span" style="color:rgb(0,0,255);"><span class="Apple-style-span" style="font-weight:bold;">'</span></span></span><span style="color:rgb(0,0,0);"><span class="Apple-style-span" style="color:rgb(0,0,255);"><span class="Apple-style-span" style="font-weight:bold;">   用来存放匹配中之后所有字符</span></span><br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /><br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />如：<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /></span><span style="color:rgb(0,128,0);">#</span><span style="color:rgb(0,128,0);">!/usr/bin/perl -w</span><span style="color:rgb(0,128,0);"><br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /></span><span style="color:rgb(0,0,255);">if</span><span style="color:rgb(0,0,0);">(</span><span style="color:rgb(0,0,0);"><b>"</b></span><span style="color:rgb(0,0,0);"><b>Hello good  there,neigbor hello</b></span><span style="color:rgb(0,0,0);"><b>"</b></span><span style="color:rgb(0,0,0);"> </span><span style="color:rgb(0,0,0);">=~</span><span style="color:rgb(0,0,0);"> </span><span style="color:rgb(0,0,0);">/</span><span style="color:rgb(0,0,0);">S(</span><span style="color:rgb(0,0,0);"></span><span style="color:rgb(0,0,0);">w</span><span style="color:rgb(0,0,0);">+</span><span style="color:rgb(0,0,0);">)</span><span style="color:rgb(0,0,0);">,/</span><span style="color:rgb(0,0,0);">)<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />{<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />        </span><span style="color:rgb(0,0,255);">print</span><span style="color:rgb(0,0,0);"> </span><span style="color:rgb(0,0,0);"><b>"</b></span><span style="color:rgb(0,0,0);"><b>That actually matched '$&amp;'. </b></span><span style="color:rgb(0,0,0);"><b>"</b></span><span style="color:rgb(0,0,0);">;<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />        </span><span style="color:rgb(0,0,255);">print</span><span style="color:rgb(0,0,0);"> $`</span><span style="color:rgb(0,0,0);">.</span><span style="color:rgb(0,0,0);"><b>"</b></span><span style="color:rgb(0,0,0);"><b> </b></span><span style="color:rgb(0,0,0);"><b>"</b></span><span style="color:rgb(0,0,0);">;<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />        </span><span style="color:rgb(0,0,255);">print</span><span style="color:rgb(0,0,0);"> $</span><span style="color:rgb(0,0,0);"><b>'</b></span><span style="color:rgb(0,0,0);"><b>." ";<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />}<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /><br /><span class="Apple-style-span" style="font-weight:normal;">执行的结果为：<br /></span><span class="Apple-style-span" style="font-weight:normal;"><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /></span><span class="Apple-style-span" style="font-weight:normal;"><img src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" align="top" alt="" style="border-style:initial;border-color:initial;border-width:0;" /><br /></span><span class="Apple-style-span" style="font-weight:normal;"><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />That actually matched </span></b></span><span style="color:rgb(0,0,0);">'</span><span style="color:rgb(0,0,0);">there</span><span style="color:rgb(0,0,0);">,</span><span style="color:rgb(0,0,0);">'</span><span style="color:rgb(0,0,0);">.<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />Hello good  <br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />neigbor hello<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /><br />－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－<span style="font-family:Verdana;"><img src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" align="top" alt="" style="border-style:initial;border-color:initial;border-width:0;" /><span style="font-family:verdana;"><font size="2">－－－－－－－－</font></span></span></span></span></div>
<div style="margin-top:0;margin-bottom:0;"><span style="font-family:verdana;"><span style="color:rgb(0,0,0);"><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /><br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />另外常用的变量@_<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />@_是子程序的一个私有变量◆；如果有一个全局变量@_，它将在此子程序调用前存储起来，当子程序调用完成后，其早期的值会被重新赋还给@_◆。这意味着当将参数传递给子程序时不用担心它会影响此程序中其它子程序的@_这个变量的值。嵌套的子程序调用时，@_的值和上述类似。甚至此子程序递归调用时，每一次调用将得到新的@_，因此子程序调用时将得到其自身的参数列表。<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /><br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />◆除非调用的子程序前有&amp;而后面没有括号（或者没有参数），此时@_从此调用者的上下文(context)得到。这通常不是个好主意，但有时很<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />有用。</span></span></div>
<div style="margin-top:0;margin-bottom:0;"></div>
<h3 style="font-size:12pt;">2. Perl - $_ and @_<br /></h3>
<p><span style="font-family:Arial;">
<div class="generaltext" style="font-family:Arial, Helvetica, sans-serif;font-style:normal;font-weight:normal;font-variant:normal;color:rgb(0,0,0);background-color:rgb(255,255,255);letter-spacing:normal;text-align:left;vertical-align:top;text-decoration:none;border-bottom-width:0;margin-top:0;margin-bottom:0;"><font size="2">Perl's a great language for special variables - variables that are set up without the programmer having to intervene and providing information ranging from the number of lines read from the <b>current input file ($.)</b> through the <b>current process ID ($$) </b>and the <b>operating system ($^O)</b>. Other special variables effect how certain operations are performed (<b>$| controlling output buffering / flushing</b>, for example), or are fundamental in the operation of certain facilities - no more so than $_ and @_.</p>
<p>Lets clear a misconception. </font><b>$_</b><font size="2"> and </font><b>@_</b><font size="2"> are </font><i>different variables</i><font size="2">. In Perl, you can have a list and a scalar of the same name, and they refer to unrelated pieces of memory.</p>
<p></font><font color="brown"><b>$_ is known as the "default input and pattern matching space"</b>.</font><font size="2"> In other words, if you read in from a file handle at the top of a </font><b>while</b><font size="2"> loop, or run a </font><b>foreach</b><font size="2"> loop and don't name a loop variable, $_ is set up for you. Then any regular expression matches, </font><b>chop</b><font size="2">s (and </font><b>lc</b><font size="2">s and many more) without a parameter, and even </font><b>print</b><font size="2">s assume you want to work on $_. Thus:<br /></font><code>while ($line = &lt;FH&gt;) {<br />  if ($line =~ /Perl/) {<br />    print FHO $line;<br />    }<br />  print uc $line;<br />  }</code></p>
<p><font size="2">Shortens to:<br /></font><code>while (&lt;FH&gt;) {<br />  /Perl/ and<br />    print FHO ;<br />  print uc;<br />  }</code></p>
<p><font color="brown"><b>@_ is the list of incoming parameters to a sub.</b></font><font size="2"> So if you write a sub, you refer to the first parameter in it as </font><b>$_[0]</b><font size="2">, the second parameter as </font><b>$_[1]</b><font size="2"> and so on. And you can refer to</font><b>$_#</b><font size="2"> as the index number of the last parameter:<br /></font><code>sub demo {<br />  print "Called with ",$#_+1," params/n";<br />  print "First param was $_[0]/n";</code></p>
<p><font size="2">Note that the </font><b>English</b><font size="2"> module adds in the ability to refer to the special variables by other longer, but easier to remember, names such as @ARG for @_ and $PID for $$. But </font><code>use English;</code><font size="2"> can have a detrimental performance effect if you're matching regular expressions against long incoming strings. </font></div>
<div style="text-align:left;"></div>
<p></span></div>
<p></span></p>

            
          </p>
        </div>
      
        <div class="post py3">
          <p class="post-meta">Dec 29, 2008</p>
          <a href="/2008/12/29/perl-note-1" class="post-link"><h3 class="h2 post-title">Perl Notes(I)</h3></a>
          <p class="post-summary">
            
              <p><span style="font-family:Verdana;font-size:13px;"></p>
<h2 style="font-size:14pt;">Part I&nbsp;&nbsp; &nbsp;Programming Perl</h2>
<h3 style="font-size:12pt;"><a name="1_Perl_Data_Types_029207318089"></a>1 Perl Data Types</h3>
<h4 style="font-size:10pt;"><a name="1_1_Funny_Characters_558344643"></a>1.1 Funny Characters</h4>
<div style="margin-top:0;margin-bottom:0;">
<table style="font-size:1em;line-height:inherit;" border="1">
<tbody>
<tr style="text-align:left;">
<th>Type</th>
<th>Character</th>
<th>Example</th>
<th>Is a name for:</th>
</tr>
<tr style="text-align:left;">
<td>Scalar</td>
<td><tt class="literal">$</tt></td>
<td><tt class="literal">$cents</tt></td>
<td>An individual value (number or string)</td>
</tr>
<tr style="text-align:left;">
<td>Array</td>
<td><tt class="literal">@</tt></td>
<td><tt class="literal">@large</tt></td>
<td>A list of values, keyed by number</td>
</tr>
<tr style="text-align:left;">
<td>Hash</td>
<td><tt class="literal">%</tt></td>
<td><tt class="literal">%interest</tt></td>
<td>A group of values, keyed by string<a name="INDEX-42"></a></td>
</tr>
<tr style="text-align:left;">
<td>Subroutine</td>
<td><tt class="literal">&amp;</tt></td>
<td><tt class="literal">&amp;how</tt></td>
<td>A callable chunk of Perl code<a name="INDEX-43"></a><a name="INDEX-44"></a></td>
</tr>
<tr style="text-align:left;">
<td>Typeglob</td>
<td><tt class="literal">*</tt></td>
<td><tt class="literal">*struck</tt></td>
<td>Everything named&nbsp;<tt class="literal">struck</tt></td>
</tr>
</tbody>
</table>
</div>
<h4 style="font-size:10pt;"><a name="1_2_Singularities_374153536744"></a>1.2&nbsp;Singularities</h4>
<div style="margin-top:0;margin-bottom:0;">Strings and numbers are singular pieces of data, while lists of strings or numbers are plural.&nbsp;Scalar variables can be assigned any form of scalar value: integers, floating-point numbers, strings, and even esoteric things like references to other variables, or to objects.</div>
<div style="margin-top:0;margin-bottom:0;"></div>
<div style="margin-top:0;margin-bottom:0;">
<p style="margin:0;"><a name="INDEX-50"></a><a name="INDEX-51"></a><a name="INDEX-52"></a><a name="INDEX-53"></a><a name="INDEX-54"></a><a name="INDEX-55"></a><a name="INDEX-56"></a><a name="INDEX-57"></a><a name="INDEX-58"></a>As in the Unix&nbsp;shell, you can use different quoting mechanisms to make different kinds of values. Double quotation marks (double quotes) do&nbsp;<em class="emphasis">variable interpolation</em>&nbsp;and&nbsp;<em class="emphasis">backslash interpolation</em>&nbsp;(such as turning&nbsp;<tt class="literal">/n</tt>&nbsp;into a newline) while single quotes suppress interpolation. And backquotes (the ones leaning to the left``) will execute an external program and return the output of the program, so you can capture it as a single string containing all the lines of output.</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">$answer = 42; # an integer
$pi = 3.14159265; # a "real" number
$avocados = 6.02e23; # scientific notation
$pet = "Camel"; # string
$sign = "I love my $pet"; # string with interpolation
$cost = 'It costs $100'; # string without interpolation
$thence = $whence; # another variable's value
$salsa = $moles * $avocados; # a gastrochemical expression
$exit = system("vi $file"); # numeric status of a command
$cwd = `pwd`; # string output from a command</pre>
</blockquote>
<p><a name="INDEX-59"></a><a name="INDEX-60"></a><a name="INDEX-61"></a><a name="INDEX-62"></a>And while we haven't covered fancy values yet, we should point out that scalars may also hold references to other data structures, including subroutines and objects.</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">$ary = /@myarray; # reference to a named array
$hsh = /%myhash; # reference to a named hash
$sub = /&amp;mysub; # reference to a named subroutine


            
          </p>
        </div>
      
        <div class="post py3">
          <p class="post-meta">Dec 24, 2008</p>
          <a href="/2008/12/24/get-ip-addr-from-host-name" class="post-link"><h3 class="h2 post-title">由服务器名字(Host name)获得IP地址</h3></a>
          <p class="post-summary">
            
              <p>
    一下代码可以根据host name获得IP地址：
<div>
<div class="highlighter">
<ol start="1" class="highlighter-c">
<li><span class="preprocessor">#include &lt;stdio.h&gt;</span><span></span></li>
<li class="alt"><span></span><span class="preprocessor">#include &lt;netdb.h&gt;</span><span></span></li>
<li><span></span><span class="preprocessor">#include &lt;sys/socket.h&gt;</span><span></span></li>
<li class="alt"><span></span><span class="preprocessor">#include &lt;arpa/inet.h&gt;</span><span></span></li>
<li><span></span><span class="preprocessor">#include &lt;netinet/in.h&gt;</span><span></span></li>
<li class="alt"><span></span></li>
<li><span></span><span class="keyword">int</span><span> main(</span><span class="keyword">int</span><span> argc,</span><span class="keyword">char</span><span> **argv)</span></li>
<li class="alt"><span>{</span></li>
<li><span>    </span><span class="keyword">struct</span><span> hostent *hptr;</span></li>
<li class="alt"><span>    </span><span class="keyword">struct</span><span> in_addr *in_addr_ptr;</span></li>
<li><span>    </span><span class="keyword">char</span><span> *ptr,**pptr,**listptr,*addr_ptr;</span></li>
<li class="alt"><span>    </span><span class="keyword">char</span><span> str[32];</span></li>
<li><span>    </span><span class="comment">/*Host name--the first param*/</span><span></span></li>
<li class="alt"><span>    ptr=argv[1];</span></li>
<li><span>    </span><span class="keyword">if</span><span>((hptr=gethostbyname(ptr))==NULL)</span></li>
<li class="alt"><span>    {</span></li>
<li><span>        printf(</span><span class="string">"gethostbyname error for host: %s/n"</span><span>,ptr);</span></li>
<li class="alt"><span>        </span><span class="keyword">return</span><span> -1;</span></li>
<li><span>    }</span></li>
<li class="alt"><span>    </span><span class="comment">/*print official host name*/</span><span></span></li>
<li><span>    printf(</span><span class="string">"offial host name: %s/n"</span><span>,hptr-&gt;h_name);</span></li>
<li class="alt"><span>    </span><span class="comment">/*print all the aliases of the host*/</span><span></span></li>
<li><span>    </span><span class="keyword">for</span><span>(pptr=hptr-&gt;h_aliases;*pptr!=NULL;pptr++)</span></li>
<li class="alt"><span>        printf(</span><span class="string">"alias:%s/n"</span><span>,*pptr);</span></li>
<li><span></span></li>
<li class="alt"><span>    </span><span class="comment">/*print IP address*/</span><span></span></li>
<li><span>    </span><span class="keyword">switch</span><span> (hptr-&gt;h_addrtype) {</span></li>
<li class="alt"><span>    </span><span class="keyword">case</span><span> AF_INET:</span></li>
<li><span>        listptr = hptr-&gt;h_addr_list;</span></li>
<li class="alt"><span>        </span><span class="keyword">if</span><span> ( (in_addr_ptr = (</span><span class="keyword">struct</span><span> in_addr *) *listptr) != NULL) {</span></li>
<li><span></span></li>
<li class="alt"><span>            addr_ptr = inet_ntoa(*in_addr_ptr);</span></li>
<li><span>            </span></li>
<li class="alt"><span>            printf(</span><span class="string">"address: %s/n"</span><span>,addr_ptr);</span></li>
<li><span>        </span></li>
<li class="alt"><span>            </span><span class="keyword">return</span><span>(0);</span></li>
<li><span>        }</span></li>
<li class="alt"><span>        </span><span class="keyword">else</span><span> {</span></li>
<li><span>            </span><span class="keyword">return</span><span>(NULL);</span></li>
<li class="alt"><span>        }</span></li>
<li><span></span></li>
<li class="alt"><span>    </span><span class="keyword">default</span><span>:</span></li>
<li><span>        printf(</span><span class="string">"unknown address type %d/n"</span><span>,hptr-&gt;h_addrtype);</span></li>
<li class="alt"><span></span></li>
<li><span>        </span><span class="keyword">return</span><span>(NULL);</span></li>
<li class="alt"><span>    }</span></li>
<li><span></span></li>
<li class="alt"><span>    </span><span class="keyword">return</span><span> 0;</span></li>
<li><span>}</span></li>
<li class="alt"><span></span></li>
<li><span></span></li>
</ol>
</div>
<p><span class="Apple-style-span" style="color:rgb(0,0,0);font-family:verdana;line-height:18px;font-size:10pt;"></span>
<p style="text-indent:2em;line-height:22px;font-size:14px;margin:1em 0 .5em;padding:0;"><font size="4">struct hostent *gethostbyname(const char *name);<br />这个函数的传入值是域名或者主机名，例如"</font><a href="http://www.google.com%22%2C%22wpc/" style="text-decoration:none;color:rgb(51,102,153);"><font size="4">www.google.com","wpc</font></a><font size="4">"等等。<br />传出值，是一个hostent的结构（如下）。如果函数调用失败，将返回NULL。</font></p>
<p style="text-indent:2em;line-height:22px;font-size:14px;margin:1em 0 .5em;padding:0;"><font size="4">struct hostent {<br />  char  *h_name;<br />  char  **h_aliases;<br />  int   h_addrtype;<br />  int   h_length;<br />  char  **h_addr_list;<br />  };<br />解释一下这个结构：<br />其中，<br />  char *h_name 表示的是主机的规范名。例如</font><a href="http://www.google.com/" style="text-decoration:none;color:rgb(51,102,153);"><font size="4">www.google.com</font></a><font size="4">的规范名其实是</font><a href="http://www.l.google.com/" style="text-decoration:none;color:rgb(51,102,153);"><font size="4">www.l.google.com</font></a><font size="4">。<br />  char   **h_aliases 表示的是主机的别名。</font><a href="http://www.google.com/" style="text-decoration:none;color:rgb(51,102,153);"><font size="4">www.google.com</font></a><font size="4">就是google他自己的别名。有的时候，有的主机可能有好几个别名，这些，其实都是为了易于用户记忆而为自己的网站多取的名字。<br />  int   h_addrtype 表示的是主机ip地址的类型，到底是ipv4(AF_INET)，还是ipv6(AF_INET6)<br />  int   h_length 表示的是主机ip地址的长度<br />  int   **h_addr_lisst 表示的是主机的ip地址，注意，这个是以网络字节序存储的。千万不要直接用printf带%s参数来打这个东西，会有问题的哇。所以到真正需要打印出这个IP的话，需要调用inet_ntop()。</font></p>
<p style="text-indent:2em;line-height:22px;font-size:14px;margin:1em 0 .5em;padding:0;"><span class="Apple-style-span" style="font-size:18px;"><span class="Apple-style-span" style="color:rgb(128,128,128);font-family:新宋体;font-size:12px;line-height:14px;">#include &lt;arpa/inet.h&gt;</span><br /></span></p>
<p style="text-indent:2em;line-height:22px;font-size:14px;margin:1em 0 .5em;padding:0;"><font size="4">const char *inet_ntop(int af, const void *src, char *dst, socklen_t cnt) ：<br />这个函数，是将类型为af的网络地址结构src，转换成主机序的字符串形式，存放在长度为cnt的字符串中。<br />这个函数，其实就是返回指向dst的一个指针。如果函数调用错误，返回值是NULL。</font></p>
<p style="text-indent:2em;line-height:22px;font-size:14px;margin:1em 0 .5em;padding:0;"><span class="Apple-style-span" style="font-size:18px;">编译时要加上-lsocket选项，否则编译器将会报出invalid reference的错误。如： gcc -o name2addr name2addr.c -lsocket.</span></p>
</div>

            
          </p>
        </div>
      
        <div class="post py3">
          <p class="post-meta">Dec 4, 2008</p>
          <a href="/2008/12/04/return-ulong-pointer" class="post-link"><h3 class="h2 post-title">return (((ulong*)(x))[-1])</h3></a>
          <p class="post-summary">
            
              <p>
<span class="Apple-style-span" style="color:rgb(0,0,0);font-family:������;">看到一个函数，定义如下： </span>
<div>
<div class="highlighter">
<ol start="1" class="highlighter-c">
<li><span class="preprocessor">#include "u.h"</span><span></span></li>
<li class="alt"><span></span><span class="preprocessor">#include "lib.h"</span><span></span></li>
<li><span></span></li>
<li class="alt"><span></span><span class="keyword">ulong</span><span></span></li>
<li><span>getcallerpc(</span><span class="keyword">void</span><span> *x)</span></li>
<li class="alt"><span>{</span></li>
<li><span>    </span><span class="keyword">return</span><span> (((</span><span class="keyword">ulong</span><span>*)(x))[-1]);</span></li>
<li class="alt"><span>}</span></li>
<li><span></span></li>
<li class="alt"><span></span></li>
</ol>
</div>
<p><span class="Apple-style-span" style="color:rgb(0,0,0);font-family:������;">((ulong*)(x))  将void* 的x针针强制转换为 ulong* </p>
<p>此时可以理解为x指向一个ulong类型的数组 <br />[-1] : 表示去x前面的那个元素 </p>
<p>上面的代码等价与 </p>
<p>ulong px=（ulong*）x <br />--px <br />return (*px) </p>
<p>一般情况下不会用 下表-1,估计此处有什么特殊用法，要看实际是怎么用的了.<br /></span></div>
<div><span class="Apple-style-span" style="color:rgb(0,0,0);font-family:������;"><br /></span></div>
<div><span class="Apple-style-span" style="color:rgb(0,0,0);font-family:������;">------------------------------------------------------------------------</span></div>
<div><span class="Apple-style-span" style="color:rgb(0,0,0);font-family:������;"><br /></span></div>
<div><span class="Apple-style-span" style="color:rgb(0,0,0);font-family:������;">ulong getcallerpc(void *x) <br />{ <br />    return (((ulong*)(x))[-1]); <br />} </p>
<p>在((ulong*)(x))[-1] 中： <br />x是一个指针 <br />（ulong*)(x)：将x转换为ulong型的指针，我们假设（ulong*)(x)转换后指针为y，则 <br />((ulong*)(x))[-1]为：y[-1]，而y[-1]就指向y首地址前面的那个地址。这种情况只有 <br />当你自己知道前面那个地址是什么了，也就是楼上所说的特殊用法了。~_~<br /></span></div>

            
          </p>
        </div>
      
        <div class="post py3">
          <p class="post-meta">Dec 3, 2008</p>
          <a href="/2008/12/03/null-pointer" class="post-link"><h3 class="h2 post-title">NULL Pointer Bugs</h3></a>
          <p class="post-summary">
            
              <div style="min-height:1100px;font-family:Verdana;font-size:10pt;line-height:1;background-color:rgb(255,255,255);width:648px!important;border-color:rgb(204,204,204) rgb(187,187,187) rgb(187,187,187) rgb(204,204,204);border-style:solid;border-width:1px 2px 2px 1px;margin:15px auto 25px;padding:40px 50px;">
<h1 style="text-align:center;font-size:18pt;">NULL Pointer Bugs<br /></h1>
<div style="margin-top:0;margin-bottom:0;"></div>
<div style="margin-top:0;margin-bottom:0;"><span style="font-family:Charter;"><font size="3">A NULL character pointer is </font><b>NOT</b><font size="3"> the same as a pointer to a NULL string. In Solaris, the following program will lead to a "</font><span style="color:rgb(51,0,0);font-family:'courier new';white-space:pre;"><font size="2">Segmentation Fault</font><span style="color:rgb(0,0,0);font-family:Charter;white-space:normal;"><font size="3">".</font></span></span></span></div>
<div style="margin-top:0;margin-bottom:0;"><span style="font-family:Charter;"><br /><font size="3"></font></span></div>
<div style="margin-top:0;margin-bottom:0;">
<div style="margin-top:0;margin-bottom:0;">
<div class="highlighter">
<ol start="1" class="highlighter-c">
<li><span class="preprocessor">#include &lt;stdio.h&gt;</span><span></span></li>
<li class="alt"><span></span><span class="preprocessor">#include &lt;string.h&gt;</span><span></span></li>
<li><span></span></li>
<li class="alt"><span></span><span class="keyword">int</span><span> main()</span></li>
<li><span>{</span></li>
<li class="alt"><span>    </span><span class="keyword">char</span><span> *</span><span class="keyword">string</span><span>=NULL;</span></li>
<li><span></span></li>
<li class="alt"><span>    printf(</span><span class="string">"/n String length=%d"</span><span>,strlen(</span><span class="keyword">string</span><span>));</span></li>
<li><span></span></li>
<li class="alt"><span>    </span><span class="keyword">return</span><span> 0;</span></li>
<li><span>}</span></li>
</ol>
</div>
<p></div>
<div>I don't know hwy this happens clearly now, and it should be pay more attention.</div>
</div>
</div>

            
          </p>
        </div>
      
        <div class="post py3">
          <p class="post-meta">Dec 1, 2008</p>
          <a href="/2008/12/01/kshell-note-5" class="post-link"><h3 class="h2 post-title">Korn Shell Notes(V)</h3></a>
          <p class="post-summary">
            
              <p>
     <span class="Apple-style-span" style="color:rgb(0,0,0);font-family:Verdana;font-size:13px;"><span class="Apple-style-span" style="font-size:19px;font-style:italic;font-weight:bold;">19. Input/Output Commands</span><br />
<h2 style="font-size:14pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h2>
<h3 style="font-size:12pt;"><a name="19_1_Escape_Characters_1455877" id="19_1_Escape_Characters_1455877"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">19.1 Escape Characters</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">
<div id="t.5t" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><img src="http://docs.google.com/File?id=dd6nw3mt_183d5p8rtgc_b" style="width:533px;height:397px;" /></p>
</div>
<p></span></span>
<div style="text-align:left;margin-top:0;margin-bottom:0;">The /c escape character causes the trailing newline to be dropped from the output. It is often used to create prompts.<br /><span style="font-family:'Courier New';">    $ print "Enter choice: /c"</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    Enter choice: $</span><br />Notice that the command prompt was displayed following the argument, and not on the next line.</p>
<h3 style="font-size:12pt;"><a name="19_2_print_Options_00785647007" id="19_2_print_Options_00785647007"></a>19.2 print Options</h3>
<div id="fkqi" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><img src="http://docs.google.com/File?id=dd6nw3mt_184ggh3tnpj_b" style="width:546px;height:518px;" />
<div style="text-align:left;margin-top:0;margin-bottom:0;">
<h3 style="font-size:12pt;"><a name="_19_3_The_exec_Command_3587034" id="_19_3_The_exec_Command_3587034"></a>19.3 The exec Command</h3>
<p>The <b>exec</b> command is used to perform I/O redirection with file descriptors 0 through 9 using this format:<br /><span style="font-family:Georgia;"><b>        exec</b> <i>I/O-redirection-command</i></span><br />The I/O redirection performed by the exec command stays in effect until specifically closed, changed, or if the script or shell terminates.</div>
</div>
<p>Here, file redir.out is opened as file descriptor 5 for reading and writing:<br /><span style="font-family:'Courier New';">    $ exec 5&lt;&gt;redir.out</span><br />Now the print command writes something to file descriptor 5:<br /><span style="font-family:'Courier New';">    $ print —u5 "This is going to fd 5"</span><br />and the cat command reads from it:<br /><span style="font-family:'Courier New';">    $ cat &lt;&amp;5</span><br style="font-family:'Courier New';" /></div>
<p><span style="font-family:'Courier New';"></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:'Courier New';">    This is going to fd 5</span><br />To finish up, we use another exec to close file descriptor 5:<br />$ exec 5&lt;&amp;—</p>
<p>Standard input can be taken from a file like this:<br /><span style="font-family:'Courier New';">    exec 0&lt;file</span><br />Commands could be read in from file, and it would be almost as if you typed them at your terminal.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="_19_4_The_read_Command_8516806" id="_19_4_The_read_Command_8516806"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">19.4 The read Command</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The read command is used to read input from a terminal or file. The basic format for the read command is:<br /><span style="font-family:Georgia;"><b>        read</b> <i>variables</i></span><br />where a line is read from standard input. Each word in the input is assigned to a corresponding variable, so the first variable gets the first word, the second variable the second word, and so on. Here, "This is output" is read in to the variables X, Y, and Z. The first word of the input is This, so it is assigned to the first variable X. The second word is is, so it is assigned to the second variable Y. The third word is output, so it is assigned to Z.<br /><span style="font-family:'Courier New';">    $ print "This is output" | read X Y Z</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $X</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    This</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $Y</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    is</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $Z</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    output</span><br /><u><br />If there aren't enough variables for all the words in the input, the last variable gets all the remaining words.</u> This command is the same as the last one, except that an extra string "again" is given.<br /><span style="font-family:'Courier New';">    $ print "This is output again " | read X Y Z</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $X</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    This</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $Y</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    is</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $Z</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    output again</span>
<div id="przl" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><img src="http://docs.google.com/File?id=dd6nw3mt_185zd8vcvfj_b" style="width:541px;height:340px;" /></p>
</div>
<p></span></span>
<div style="text-align:left;margin-top:0;margin-bottom:0;">
<h4 style="font-size:10pt;"><a name="_19_4_1_Reading_Input_from_Fil" id="_19_4_1_Reading_Input_from_Fil"></a>19.4.1 Reading Input from Files</h4>
<p>The read command by itself will only read one line of input, so you need a looping command with it. To read in the contents of a file, use this format:<br /><b><span style="font-family:Georgia;">        exec </span></b><span style="font-family:Georgia;"><i><span style="font-family:Verdana;">0</span>&lt;file</i></span><b><br style="font-family:Georgia;" /><span style="font-family:Georgia;">        while read </span></b><span style="font-family:Georgia;"><i>variable</i></span><b><br style="font-family:Georgia;" /><span style="font-family:Georgia;">        do</span><br style="font-family:Georgia;" /></b><i><span style="font-family:Georgia;">                    commands</span></i><b><br style="font-family:Georgia;" /><span style="font-family:Georgia;">        done</span></b><br />The exec command opens file for standard input, and the while command causes input to be read a line at a time until there is no more input.</div>
<p><span style="font-family:'Courier New';"></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br />Here is an alternate format that will also work for reading input from files:<br /><b><span style="font-family:Georgia;">        cat </span></b><span style="font-family:Georgia;"><i>file</i></span><b><span style="font-family:Georgia;"> | while read </span></b><i><span style="font-family:Georgia;">variable</span></i><b><br style="font-family:Georgia;" /><span style="font-family:Georgia;">        do</span><br style="font-family:Georgia;" /></b><i><span style="font-family:Georgia;">                commands</span></i><b><br style="font-family:Georgia;" /><span style="font-family:Georgia;">        done</span></b><br />On the systems tested, the exec format for reading input from files was about 40-60 times faster than the last version above.</p>
<p></span></span><br />
<h4 style="font-size:10pt;"><a name="_19_4_2_The_IFS_Variable_80535" id="_19_4_2_The_IFS_Variable_80535"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">19.4.2 The IFS Variable</span></span></h4>
<h4 style="font-size:10pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h4>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The read command normally uses the IFS (Internal Field Separator) variable as the word separators. The default for IFS is space, tab, or snewline character, in that order, but it can be set to something else.<br />By setting IFS to :, the fields in the /etc/passwd file could be read into separate variables.<br /><span style="font-family:'Courier New';">    $ cat ifs_test</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    IFS=:</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    exec 0&lt;/etc/passwd</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    while read -r NAME PASS UID GID COMM HOME SHELL</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    do</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">        print "Account name= $NAME</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    Home directory= $HOME</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    Login Shell= $SHELL"</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    done</span></p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="_19_4_3_Reading_Input_Interact" id="_19_4_3_Reading_Input_Interact"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">19.4.3 Reading Input Interactively</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The read command allows input to be read interactively using this format:<br /><span style="font-family:Georgia;"><b>        read</b> <i>name</i><b>?</b><i>prompt</i></span><br />where </span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:Georgia;"><i>prompt</i></span></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"> is displayed on standard error and the response is read into </span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:Georgia;"><i>name</i></span></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;">.</p>
<p>So instead of using two commands to display a prompt and read the input:<br /><span style="font-family:'Courier New';">    $ print —n "Enter anything: "</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ read ANSWER</span><br />The same thing can be done with one command.<br /><span style="font-family:'Courier New';">    $ read ANSWER?"Enter anything: "</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    Enter anything: ANYTHING</span><br />Here is ANSWER:<br /><span style="font-family:'Courier New';">    $ print $ANSWER</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    ANYTHING</span></p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="_19_4_4_The_REPLY_variable_360" id="_19_4_4_The_REPLY_variable_360"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">19.4.4 The<span style="font-family:Georgia;"> </span><b>REPLY</b> variable</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">If no variables are given to the <b>read</b> command, the input is automatically assigned to the <b>REPLY</b> variable. Here, ANYTHING is read into REPLY:<br /><span style="font-family:'Courier New';">    $ print ANYTHING | read</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $REPLY</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    ANYTHING</span></p>
<p></span></span><br />
<h2 style="font-size:14pt;"><a name="_20_Miscellaneous_Programming_" id="_20_Miscellaneous_Programming_"></a><i><span style="font-family:'Courier New';"><span style="font-family:Verdana;">20 Miscellaneous Programming Features</span></span></i></h2>
<h2 style="font-size:14pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h2>
<h3 style="font-size:12pt;"><a name="_20_1_The_Command_872161202132" id="_20_1_The_Command_872161202132"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">20.1 The . Command</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The <b>.</b> command reads in a complete file, then executes the commands in it as if they were typed in at the prompt. This is done in the current shell, so any variable, alias, or function settings stay in effect. It is typically used to read in and execute a profile, environment, alias, or functions file. Here the .profile file is read in and executed:<br />$ . .profile</p>
<p>The following example illustrates the difference between executing files as Korn shell scripts and reading/executing them using the .command. The .test file sets the variable X:<br /><span style="font-family:'Courier New';">    $ cat .test</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    X=ABC</span><br /><u>When the .test file is executed as a Korn shell script, variable X is not defined in the current environment, because scripts are run in a subshell</u>:<br /><span style="font-family:'Courier New';">    $ ksh .test</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $X</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $</span><br /><u>After the .test file is read in and executed using the . command, notice that the variable X is still defined</u>:<br /><span style="font-family:'Courier New';">    $ . .test</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $X</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    ABC</span><br />The standard search path, PATH, is checked if the file is not in the current directory.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="_20_2_Functions_01172757241874" id="_20_2_Functions_01172757241874"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">20.2 Functions</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Functions are most efficient for commands with arguments that are invoked fairly often, and are defined with the following format:</p>
<p><span style="font-family:Georgia;"><b>        function</b> <i>name</i> {</span><br style="font-family:Georgia;" /><i><span style="font-family:Georgia;">                commands</span></i><br style="font-family:Georgia;" /><span style="font-family:Georgia;">        }<br /></span><br />To maintain compatibility with the Bourne shell, functions can also be declared with this POSIX-style format:<br /><span style="font-family:Georgia;"><i>        function-name</i><b>()</b> {</span><br style="font-family:Georgia;" /><i><span style="font-family:Georgia;">                commands</span></i><br style="font-family:Georgia;" /><span style="font-family:Georgia;">        }</span><br style="font-family:Georgia;" /><br />These types of functions have many limitations compared to Korn shell style functions, such as no support for local variables.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="_20_3_Scope_Availability_75594" id="_20_3_Scope_Availability_75594"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">20.3 Scope &amp; Availability</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">By default, functions are not available to subshells. This means that <u>a regular function that was read in your working environment, <b>.profile</b> file, or environment file would not be available in a Korn shell script.<br /></u><br />To export a function, use the <b>typeset -fx</b> command:<br /><b>        typeset -fx</b> <i>function-name</i></p>
<p>To make a function available across separate invocations of the Korn shell, include the </span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b> typeset -fx</b> <i>function-name</i></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"> command in the environment file.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="_20_4_Function_Variables_90486" id="_20_4_Function_Variables_90486"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">20.4 Function Variables</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">All function variables, except those explicitly declared locally within the function with the <b>typeset</b> command, are inherited and shared by the calling Korn shell script. In this example, the X, Y, and Z variables are set within and outside of the function f:</p>
<p><span style="font-family:'Courier New';">    $ cat ftest</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    X=1</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    function f {</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">        Y=2</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">        typeset Z=4</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">        print "In function f, X=$X, Y=$Y, Z=$Z"</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">        X=3</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    }</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    f</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    print "Outside function f, X=$X, Y=$Y, Z=$Z"</span></p>
<p>Notice that when executed, all the variable values are shared between the function and calling script, except for variable Z, because it is explicitly set to a local function variable using the typeset command.<br />The value is not passed back to the calling Korn shell script:<br /><span style="font-family:'Courier New';">    $ ftest</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    In function f, X=1, Y=2, Z=4</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    Outside function f, X=3, Y=2, Z=</span></p>
<p>The current working directory, aliases, functions, traps, and open files from the invoking script or current environment are also shared with functions.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="_20_5_Displaying_Current_Funct" id="_20_5_Displaying_Current_Funct"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">20.5 Displaying Current Functions</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The list of currently available functions are displayed using the <b>typeset -f </b>command.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="_20_6_Autoloading_Functions_38" id="_20_6_Autoloading_Functions_38"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">20.6 Autoloading Functions</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">To improve performance, functions can be specified to autoload. <u>This causes the function to be read in when invoked, instead of each time a Korn shell script is invoked, and is used with functions that are not invoked frequently</u>. To define an autoloading function, use the <span style="font-family:Georgia;"><b>typeset -fu</b> <i>function-name</i></span> command. Here, lsf is made an autoloading function:<br /><span style="font-family:'Courier New';">    $ typeset —fu lsf</span></p>
<p>The <b>autoload</b> alias can also be used to define an autoloading function. On most systems, it is preset to <b>typeset -fu</b>.</p>
<p>The <b>FPATH</b> variable which contains the pathnames to search for autoloading functions must be set and have at least one directory for autoloading functions to work.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="_20_7_Discipline_Functions_023" id="_20_7_Discipline_Functions_023"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">20.7 Discipline Functions</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><u>Discipline functions are a special type of function used to manipulate variables. They are defined but not specifically called. Rather, they are called whenever the variable associated with the function is accessed.</u></p>
<p>There are some specific rules as to how discipline functions are named and accessed. First of all, discipline functions are named using this syntax:<br /><i><span style="font-family:Georgia;">       <b> </b><b>name.function</b></span></i></p>
<p>Notice the the funcion has two parts separated with a dot. <u>The first part name corresponds to the name of a variable, and the second part must be <b>get</b>, <b>set</b>, or <b>unset</b></u>. These correspond to the following operations on the variable:<br /></span></span>
<ul style="margin-top:0;margin-bottom:0;">
<li style="margin-top:0;margin-bottom:0;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b>get</b>     whenever the base discipline variable is accessed</span></span></li>
<li style="margin-top:0;margin-bottom:0;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b>set</b>     whenever the base discipline variable is set</span></span></li>
<li style="margin-top:0;margin-bottom:0;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b>unset</b>     whenever the base discipline variable is unset</span></span></li>
</ul>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br />For example, the discipline function LBIN.get, LBIN.set, LBIN.unset is called whenever the variable LBIN is accessed, set, or unset.</p>
<p>All three discipline functions are optional, so not all need to be specified. Within a discipline function, the following special reserved variables can be used:<br /></span></span>
<ul style="margin-top:0;margin-bottom:0;">
<li style="margin-top:0;margin-bottom:0;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b>.sh.name</b>     name of current variable</span></span></li>
<li style="margin-top:0;margin-bottom:0;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b>.sh.value</b>     value of the current variable</span></span></li>
<li style="margin-top:0;margin-bottom:0;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b>.sh.subscript</b>     name of the subscript (if array variable)</span></span></li>
</ul>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br />From a practical perspective, discipline functions are often used to help debug by tracing the setting and current value of variables in running scripts. Here is a function that can be used to trace setting the value of X:<br /><span style="font-family:'Courier New';">    function X.set {</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">        print "DEBUG: ${.sh.name} = ${.sh.value}"</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    }</span><br style="font-family:'Courier New';" /><br />Discipline functions are also a good place to centralize your variable assignment validation rules. Here is a function that checks to make sure that X it set ao a number between 3 and 10:<br /><span style="font-family:'Courier New';">    function X.set {</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">        if (( .sh.value&lt;3 || .sh.value &gt;10 ))</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">        then</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">            print "Bad value for ${.sh.name}: ${.sh.value}"</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">        fi</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    }</span></p>
<p>Note that <b>builtin</b> functions can also be used as additional discipline functions.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="_20_8_FPATH_8677511420100927" id="_20_8_FPATH_8677511420100927"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">20.8 FPATH</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The <b>FPATH</b> variable contains a list of colon-separated directories to check when an autoloading function is invoked. It is analogous to<b> PATH</b> and <b>CDPATH</b>, except that the Korn shell checks for function files, instead of commands or directories. Each directory in FPATH is searched from left-to-right for a file whose name matches the name of the function. Once found, it is read in and executed in the current environment. With the following <b>FPATH</b> setting, if an autoloading function <b>lsf</b> was invoked, the Korn shell would check for a file called <b>lsf</b> in <b>/home/anatole/.fdir</b>, then <b>/etc/.functions</b>, and if existent, read and execute it:</p>
<p><span style="font-family:'Courier New';">    $ print $FPATH</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    /home/anatole/.fdir:/etc/.functions</span></p>
<p>There is no default value for <b>FPATH</b>, so if not specifically set, this feature is not enabled.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="_20_9_Removing_Function_Defini" id="_20_9_Removing_Function_Defini"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">20.9 Removing Function Definitions</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Functions are removed by using the <b>unset -f</b> command. Here, the rd function is removed:<br /><span style="font-family:'Courier New';">    $ unset -f rd</span><br style="font-family:'Courier New';" /><br /></span></span><br />
<h3 style="font-size:12pt;"><a name="_20_10_Traps_9392005437985063" id="_20_10_Traps_9392005437985063"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">20.10 Traps</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The trap command is used to execute commands when the specified signals are received.<br /><span style="font-family:Georgia;"><b>        trap</b> commands signals</span></p>
<p><u>Trap commands are useful in controlling side effects from Korn shell scripts</u>. For example, if you have a script that creates a number of temporary files, and you hit the &lt;BREAK&gt; or &lt;DELETE&gt; key in the middle of execution, you may inadvertently leave the temporary files. By setting a <b>trap</b> command, the temporary files can be cleaned up on an error or interrupt.</p>
<p>The <b>trap_test</b> script creates some files, then removes them when an interrupt is received. <span style="background-color:rgb(0,255,255);">Notice that the </span><b>trap</b><span style="background-color:rgb(0,255,255);"> command is surrounded in single quotes. This is so that the </span><b>FILES</b><span style="background-color:rgb(0,255,255);"> variable is evaluated when the signal is received, not when the trap is set.</span><br /><span style="font-family:'Courier New';">    $ cat trap_test</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    trap 'print "$0 interrupted - removing temp files" ;/</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    rm —rf $FILES; exit 1' 1 2</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    FILES="a b c d e f"</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    touch $FILES</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    sleep 100</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ trap_test</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    Ctl-c</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    trap_test interrupted - removing temp files</span></p>
<p>If an invalid trap is set, an error is generated.</p>
<p></span></span><br />
<h4 style="font-size:10pt;"><a name="_20_10_1_Ignoring_Signals_1856" id="_20_10_1_Ignoring_Signals_1856"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">20.10.1 Ignoring Signals</span></span></h4>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The <b>trap</b> command can be used to ignore signals by specifying null as the command argument:<br /><span style="font-family:Georgia;">        <b>trap  "" </b> <i>signals</i></span><br />This could be used to make all or part of a Korn shell script uninterruptable using normal interrupt keys like Ctl-c.</p>
<p></span></span><br />
<h4 style="font-size:10pt;"><a name="_20_10_2_Resetting_Traps_86836" id="_20_10_2_Resetting_Traps_86836"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">20.10.2 Resetting Traps</span></span></h4>
<h4 style="font-size:10pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h4>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The trap command can also be used to reset traps to their default action by omitting the command argument:<br />    <b>trap</b> - <i>signals</i><br />or<br />    <b>trap</b><i> signals</i></p>
<p></span></span><br />
<h4 style="font-size:10pt;"><a name="_20_10_3_Exit_Function_Traps_3" id="_20_10_3_Exit_Function_Traps_3"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">20.10.3 Exit &amp; Function Traps</span></span></h4>
<h4 style="font-size:10pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h4>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">A trap can be set to execute when a Korn shell script exits. This is done by using a 0 or EXIT as the signals argument to the trap command:<br /><b>        trap</b> '<i><span style="font-family:Georgia;">commands</span></i>' <b>0</b><br />or<br /><b>        trap</b> '</span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><i><span style="font-family:Georgia;">commands</span></i></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;">' <b>EXIT</b><br />This could be used to consolidate Korn shell script cleanup functions into one place.<br /></span></span><br />
<h4 style="font-size:10pt;"><a name="_20_10_4_Trap_Signal_Precedenc" id="_20_10_4_Trap_Signal_Precedenc"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">20.10.4 Trap Signal Precedence</span></span></h4>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">If multiple traps are set, the order of precedence is:<br /></span></span>
<ul style="margin-top:0;margin-bottom:0;">
<li style="margin-top:0;margin-bottom:0;"><b><span style="font-family:'Courier New';"><span style="font-family:Verdana;">DEBUG</span></span></b></li>
<li style="margin-top:0;margin-bottom:0;"><b><span style="font-family:'Courier New';"><span style="font-family:Verdana;">ERR</span></span></b></li>
<li style="font-family:Georgia;margin-top:0;margin-bottom:0;"><i>Signal Number</i></li>
<li style="margin-top:0;margin-bottom:0;"><b><span style="font-family:'Courier New';"><span style="font-family:Verdana;">EXIT</span></span></b></li>
</ul>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br /></span></span><br />
<h4 style="font-size:10pt;"><a name="_20_10_5_Trapping_Keyboard_Sig" id="_20_10_5_Trapping_Keyboard_Sig"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">20.10.5 Trapping Keyboard Signals</span></span></h4>
<h4 style="font-size:10pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h4>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The Korn shell traps <b>KEYBD</b> signals (sent when you type a character) and automatically assigns the following reserved variables:<br /></span></span>
<ul style="margin-top:0;margin-bottom:0;">
<li style="margin-top:0;margin-bottom:0;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b>.sh.edchar</b>     contains last character of key sequence</span></span></li>
<li style="margin-top:0;margin-bottom:0;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b>.sh.edtext</b>     contains current input line</span></span></li>
<li style="margin-top:0;margin-bottom:0;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b>.sh.edmode</b>     contains NULL character (or escape character is user in command mode)</span></span></li>
<li style="margin-top:0;margin-bottom:0;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b>.sh.edcol</b>     contains position within the current line</span></span></li>
</ul>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br /></span></span><br />
<h3 style="font-size:12pt;"><a name="_20_11_Debugging_Korn_Shell_Sc" id="_20_11_Debugging_Korn_Shell_Sc"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">20.11 Debugging Korn Shell Scripts</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The Korn shell provides a number of options that are useful in debugging scripts: <b>noexec</b>, <b>verbose</b>, and <b>xtrace</b>. The noexec option causes commands to be read without being executed. It is used to check for syntax errors in Korn shell scripts. The verbose option causes the input to be displayed as it is read. The xtrace option causes the commands in a script to be displayed as they are executed.</span></span></span>
<div><span class="Apple-style-span" style="color:rgb(0,0,0);font-family:Verdana;font-size:13px;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><img src="http://docs.google.com/File?id=dd6nw3mt_186cd3mp7hq_b&amp;writelyrefresh=0" /><br /></span></span></span>
<div><span class="Apple-style-span" style="color:rgb(0,0,0);font-family:Verdana;font-size:13px;">
<div style="text-align:left;margin-top:0;margin-bottom:0;">
<h4 style="font-size:10pt;">20.11.1 Debugging with trap</h4>
<p>The <b>trap</b> command can also be helpful in debugging Korn shell scripts. The syntax for this type of trap command is:<br /><b>        trap </b><i>commands</i><b> DEBUG</b><br />or<br /><b>        trap </b><i>commands</i><b> ERR</b></div>
<p><span style="font-family:'Courier New';"></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;">
<div style="text-align:left;margin-top:0;margin-bottom:0;"><img src="http://docs.google.com/File?id=dd6nw3mt_1872q8bgfhj_b" style="width:459px;height:143px;" /></p>
<h3 style="font-size:12pt;"><a name="_20_12_Co_Processes_1690269969" id="_20_12_Co_Processes_1690269969"></a>20.12 Co-Processes</h3>
<p><u>Co-processes are commands that are terminated with a <b>|&amp;</b> character. They are executed in the background, but have their standard input and output attached to the current shell.</u><i> </i>The <b>print -p</b> command is used to write to the standard input of a co-process, while <b>read -p</b> is used to read from the standard output of a co-process. Here, the output of the date command is read into the DATE variable using the read -p command:<br /><span style="font-family:'Courier New';">    $ date |&amp;</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    [2] 241</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ read —p DATE</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $DATE</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    Thu Jul 18 12:23:57 PST 1996</span><br />Co-processes can be used to edit a file from within a Korn shell script.</div>
<p></span></span><span style="font-family:'Courier New';"></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;">
<div id="s_ck" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><img src="http://docs.google.com/File?id=dd6nw3mt_188f9s93ndw_b" style="width:562px;height:406px;" /></div>
<div id="s_ck" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><span class="Apple-style-span" style="color:rgb(255,0,0);font-size:28pt;"><span class="Apple-style-span" style="font-weight:bold;">THE END</span></span></div>
<div style="text-align:center;"></div>
<p></span></span></span></div>
</div>

            
          </p>
        </div>
      
        <div class="post py3">
          <p class="post-meta">Nov 30, 2008</p>
          <a href="/2008/11/30/kshell-note-4" class="post-link"><h3 class="h2 post-title">Korn Shell Notes(IV)</h3></a>
          <p class="post-summary">
            
              <div id="yn69" style="padding:1em 0;text-align:left;">
<h2><i><span style="font-family:'Courier New';"><span style="font-family:Verdana;">16 The Environment</span></span></i><br />
</h2>
<h2>
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span><br />
</h2>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></p>
<div id="i4_8" style="padding:1em 0;text-align:center;">
<img src="http://docs.google.com/File?id=dd6nw3mt_168dd38bmfm_b" style="width:472px;height:714px;" />
</div>
<p></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></p>
<div id="i4_8" style="padding:1em 0;text-align:left;">
<h3><a id="16_1_CDPATH_5651453254671944_6_11823947909311716" name="16_1_CDPATH_5651453254671944_6_11823947909311716"></a><br />
 16.1 CDPATH<br />
 </h3>
<p> The <b>CDPATH</b><br />
variable is provided to make directory navigation easier. It contains a<br />
list of colon-separated directories to check when a full pathname is<br />
not given to the cd command. Each directory in CDPATH is searched from<br />
left-to-right for a directory that matches the cd argument. A : alone<br />
in CDPATH stands for the current directory.</p>
<h3><a id="16_2_PATH_2677888549093702_009_6379903118402938" name="16_2_PATH_2677888549093702_009_6379903118402938"></a><br />
 16.2 PATH<br />
 </h3>
<p> The <b>PATH</b><br />
variable contains a list of colon-separated directories to check when a<br />
command is invoked. Each directory in PATH is searched from<br />
left-to-right for a file whose name matches the command name. If not<br />
found, an error message is displayed. A : alone in PATH specifies to<br />
check the current directory.</p>
<h3><a id="16_3_TMOUT_809440743503734_145_3826941331997027" name="16_3_TMOUT_809440743503734_145_3826941331997027"></a><br />
 16.3 TMOUT<br />
 </h3>
<p>The TMOUT variable specifies the number of seconds that the Korn shell<br />
will wait for input before displaying a 60-second warning message and<br />
exiting. If not set, the default used is 0, which disables the timeout<br />
feature. To set a 10-minute timer, set TMOUT to 600:<br />
<span style="font-family:Courier New;">    $ TMOUT=600</span><br />
 This variable is usually set by the system administrator in the <span style="font-family:Courier New;">/etc/profile</span> file.
</div>
<p></span></span></p>
<h3><a id="16_4_MAILCHECK_687330215443556" name="16_4_MAILCHECK_687330215443556"></a><br />
<span style="font-family:'Courier New';"><span style="font-family:Verdana;">16.4 MAILCHECK</span></span><br />
</h3>
<h3>
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span><br />
</h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The<br />
MAILCHECK variable specifies how often, in seconds, to check for new<br />
mail. If not set, or set to zero, new mail is checked before each new<br />
prompt is displayed. Otherwise, the default setting is 600 seconds (10<br />
minutes).</p>
<p></span></span></p>
<h3><a id="16_5_MAIL_7713528906556307_892_6743312418053198" name="16_5_MAIL_7713528906556307_892_6743312418053198"></a><br />
<span style="font-family:'Courier New';"><span style="font-family:Verdana;">16.5 MAIL</span></span><br />
</h3>
<h3>
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span><br />
</h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The <b>MAIL</b> variable contains the name of a single mailbox file to check for new mail. It is not used if MAILPATH is set.</p>
<p></span></span></p>
<h3><a id="16_6_MAILPATH_3551441223568878" name="16_6_MAILPATH_3551441223568878"></a><br />
<span style="font-family:'Courier New';"><span style="font-family:Verdana;">16.6 MAILPATH</span></span><br />
</h3>
<h3>
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span><br />
</h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The<br />
MAILPATH variable contains a colon-separated list of mailbox files to<br />
check for new mail and is used if you want to read multiple mailboxes.<br />
It overrides the MAIL variable if both are set. This MAILPATH setting<br />
specifies to check two mailbox files, <span style="font-family:Courier New;">/home/anatole/mbox and /news/mbox</span>.<br />
<span style="font-family:Courier New;">    $ print $MAILPATH</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    MAILPATH=/home/anatole/mbox:/news/mbox</p>
<p></span>Just<br />
so you don't think you can go snooping around someone else's mailbox,<br />
this only works if you have read permission on the mailbox file.<br />
 If MAILPATH is not set, there is no default.</p>
<p></span></span></p>
<h3><a id="_16_7_TERM_9189810912229358_5009562197822405" name="_16_7_TERM_9189810912229358_5009562197822405"></a><br />
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"> 16.7 TERM </span></span><br />
</h3>
<h3>
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span><br />
</h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The<br />
TERM variable specifies your terminal type, and is usually set by your<br />
system administrator in the global /etc/profile file. If it's not set<br />
there, then it's probably in your ~/.profile file.</p>
<p></span></span></p>
<h3><a id="16_8_Enabling_Disabling_Option_48916886920819536" name="16_8_Enabling_Disabling_Option_48916886920819536"></a><br />
<span style="font-family:'Courier New';"><span style="font-family:Verdana;">16.8 Enabling/Disabling Options</span></span><br />
</h3>
<h3>
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span><br />
</h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Korn shell options are enabled with the <b>set -o</b><i>option</i> or <b>set</b> -<i>option</i> command. For example, the noglob option disables file name substitution and can be set using either of these commands :<br />
<span style="font-family:Courier New;">    $ set —f</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Verdana;">or</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    $ set —o noglob</span><br />
Options can also be enabled by specifying them on the ksh command line.<br />
Here, a Korn subshell is started with the emacs option enabled:<br />
<span style="font-family:Courier New;">    $ ksh —o emacs</span><br />
 Options can be disabled with the <span style="font-family:Georgia;"><b>set +o</b> <i>option</i></span> or <b>set</b> +<i>option</i> command. In this example, the noglob option is disabled:<br />
<span style="font-family:Courier New;">    $ set +o noglob</span></p>
<p></span></span></p>
<h3><a id="16_9_Displaying_the_Current_Se_47245364006423674" name="16_9_Displaying_the_Current_Se_47245364006423674"></a><br />
<span style="font-family:'Courier New';"><span style="font-family:Verdana;">16.9 Displaying the Current Settings</span></span><br />
</h3>
<h3>
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span><br />
</h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The setting of the current options is displayed with the <b>set -o </b>command.</p>
<div id="kt4h" style="padding:1em 0;text-align:center;">
<a href="http://docs.google.com/File?id=dd6nw3mt_1728crddqft_b" target="_blank"><img src="http://docs.google.com/File?id=dd6nw3mt_1728crddqft_b" style="width:455px;height:734px;" /></a>
</div>
<p>
</span></span></p>
<h3><a id="16_10_Aliases_3822333845613286_08960525051202617" name="16_10_Aliases_3822333845613286_08960525051202617"></a><br />
<span style="font-family:'Courier New';"><span style="font-family:Verdana;">16.10 Aliases</span></span><br />
</h3>
<h3>
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span><br />
</h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Aliases<br />
are command name macros used as shorthand for other commands,<br />
especially frequently used ones. This saves a lot of typing time.<br />
Aliases are defined with the alias name=value<br /> command.Make sure to<br />
enclose the value in quotes if it contains whitespace. Here we create<br />
an alias l that is set to the ls -Fac command:<br />
<span style="font-family:Courier New;">    $ alias l="ls —Fac"</span><br />
 Now when you type in l,<span style="font-family:Courier New;"> ls -Fac</span> is executed:<br />
<span style="font-family:Courier New;">    $ l</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    ./</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    ../</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    compress.Z*</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    func.Z*</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    test/</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    uncompress.Z*</span><br />
<span style="font-family:Courier New;">    . . .</span></p>
<p> Alias values can contain any text, including special characters, like wild-cards, pipes, or I/O redirection operators.</p>
<p> Here we set two aliases: p and h. When invoked, we get h instead of Hello.<br />
<span style="font-family:Courier New;">    $ alias p='print' h=Hello</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    $ p h</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    h</span><br />
 After the p alias is reset with a trailing blank, h gets substituted in the next command correctly:<br />
<span style="font-family:Courier New;">    $ alias p='print ' h=Hello</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    $ p h</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    Hello</span></p>
<p></span></span></p>
<h4><a id="16_10_1_Displaying_Current_Ali" name="16_10_1_Displaying_Current_Ali"></a><br />
<span style="font-family:'Courier New';"><span style="font-family:Verdana;">16.10.1 Displaying Current Aliases</span></span><br />
</h4>
<h4>
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span><br />
</h4>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">A list of the current aliases is displayed using the <b>alias</b> command without arguments.</p>
<p></span></span></p>
<h4><a id="16_10_2_Removing_Aliases_26645" name="16_10_2_Removing_Aliases_26645"></a><br />
<span style="font-family:'Courier New';"><span style="font-family:Verdana;">16.10.2 Removing Aliases</span></span><br />
</h4>
<h4>
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span><br />
</h4>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Aliases are removed with the<b> unalias</b> command. Let's try it with the l alias:<br />
<span style="font-family:Courier New;">    $ unalias l</span></p>
<p></span></span></p>
<h2><a id="17_Korn_Shell_Scripts_48337193" name="17_Korn_Shell_Scripts_48337193"></a><br />
<i><span style="font-family:'Courier New';"><span style="font-family:Verdana;">17 Korn Shell Scripts</span></span></i><br />
</h2>
<h2>
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span><br />
</h2>
<h3><a id="17_1_Positional_Parameters_109" name="17_1_Positional_Parameters_109"></a><br />
<span style="font-family:'Courier New';"><span style="font-family:Verdana;">17.1 Positional Parameters</span></span><br />
</h3>
<h3>
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span><br />
</h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Positional<br />
parameters are special variables used to keep track of arguments to the<br />
Korn shell, scripts, and functions. Positional parameter names contain<br />
only digits and cannot be set directly using <i>variable=value</i> syntax. By default, parameter zero (or $0) is set to the name of the shell, script or function.<br />
<span style="font-family:Courier New;">    $ print $0</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    /bin/ksh</span><br />
The remaining parameters 1 to n are set to each of the arguments passed<br />
to the shell, script or function. For example, if you invoke a Korn<br />
shell script called <b>ptest</b> and pass the arguments <b>A</b>, <b>B</b>, and <b>C</b>, then in the script ptest, <b>$0</b> would be set to <b>ptest</b>, <b>$1</b> to <b>A</b>, <b>$2</b> to <b>B</b>, and <b>$3</b> to <b>C</b>.</p>
<div id="oal2" style="padding:1em 0;text-align:left;">
<img src="http://docs.google.com/File?id=dd6nw3mt_173f7n7tvcw_b" style="width:240px;height:157px;" />
</div>
<p></p>
<div id="t7df" style="padding:1em 0;text-align:center;">
<img src="http://docs.google.com/File?id=dd6nw3mt_174pzmvjcfz_b" style="width:536px;height:541px;" />
</div>
<p>
 There are three special Korn shell variables that provide information about the current positional parameters. <u>The first is <b>$#</b>, and it contains the number of positional parameters</u>. <u>The other two are <b>$@</b> and <b>$*</b>, and they both contain all the positional parameters.</u><br />
So in the above ptest example, $# would be 3, and both $* and $@ would<br />
be A B C. Here is a Korn shell script that manipulates positional<br />
parameters. It displays the name of the current script, the number of<br />
positional parameters, and the value of each of the positional<br />
parameters:<br />
<span style="font-family:Courier New;">    $ cat check_params</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    print "Script name: $0"</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    print "Number of args passed: $#"</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    print "Arguments passed: $*"</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    print "Arg 1=$1, Arg 2=$2, Arg 3=$3"</span></p>
<p></span></span></p>
<h3><a id="17_2_Modifying_Positional_Para" name="17_2_Modifying_Positional_Para"></a><br />
<span style="font-family:'Courier New';"><span style="font-family:Verdana;">17.2 Modifying Positional Parameters</span></span><br />
</h3>
<h3>
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span><br />
</h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">By default, <b>$0</b> is set to the name of the shell, script or function. It cannot be set or modified. The remaining parameters from <b>$1</b> to<b> $n</b> can be reassigned with the<span style="color:rgb(0,0,255);"> </span><b>shift</b><br />
command. The shift command, with no arguments, shifts positional<br />
parameters left once, so that $1 takes the value of $2, $2 takes the<br />
value of $3, and so on. <u>The original value of $1 is lost.<br />
</u> <u><br />
</u>Let's change the check_params script so that it shifts the positional<br />
 parameters left once:<br />
<span style="font-family:Courier New;">    $ cat check_params</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    print "Script name: $0"</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    print "Number of args passed: $#"</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    print "Arguments passed: $*"</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    print "Arg 1=$1, Arg 2=$2, Arg 3=$3"</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    shift</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    print "Number of remaining args: $#"</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    print "Remaining args: $*"</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    print "Arg 1=$1, Arg 2=$2, Arg 3=$3"</span><br />
 When we run it again with the arguments A B:<br />
<span style="font-family:Courier New;">    $ check_params A B</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    Script name: check_params</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    Number of args passed: 2</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    Arguments passed: A B</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    Arg 1=A, Arg 2=B, Arg 3=</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    Number of remaining args: 1</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    Remaining args: B</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    Arg 1=B, Arg 2=, Arg 3=</span><br />
 After the shift command, $1 is set to B and $2 is unset. The original value of $1 is lost.</p>
<p> The positional parameters can be shifted left more than once by providing an integer argument to the <b>shift</b> command: <b><span style="font-family:Georgia;">shift <i>n</i></span></b>.</p>
<p></span></span></p>
<h3><a id="17_3_The_exit_command_23414194" name="17_3_The_exit_command_23414194"></a><br />
<span style="font-family:'Courier New';"><span style="font-family:Verdana;">17.3 The exit command</span></span><br />
</h3>
<h3>
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span><br />
</h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The <b>exit</b> command allows you to terminate execution from anywhere in a Korn shell script and return an <b>exit</b> value using this format:<br />
<b>        exit</b><br />
 or<br />
<b>        exit <i>n</i></b><br />
 where <i>n</i> is the exit status to return. <u>If n is not specified, the exit status of the previous command is used</u>. If you don't use exit, then scripts finish after the last command is executed.</p>
<p></span></span></p>
<h3><a id="_17_4_The_Command__5899032850007576" name="_17_4_The_Command__5899032850007576"></a><br />
<span style="font-family:'Courier New';"><span style="font-family:Verdana;">17.4 The [[...]] Command</span></span><br />
</h3>
<h3>
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span><br />
</h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The<br />
[[...]] command is used to evaluate conditional expressions with file<br />
attributes, strings, integers, and more. The basic format is:<br />
         <b>[[</b><i><b> </b><span style="font-family:Georgia;">expression</span></i> <b>]]</b><br />
 where </span></span><span style="font-family:Courier New;"><span style="font-family:Verdana;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><i><span style="font-family:Georgia;">expression</span></i></span></span></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br />
is the condition you are evaluating. There must be whitespace after the<br />
opening brackets, and before the closing brackets. Whitespace must also<br />
separate the expression arguments and operators. For example, these are<br />
incorrect:<br />
<span style="font-family:Courier New;">    [[$X=$Y]]</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    [[$X = $Y]]</span><br />
 while this is correct:<br />
<span style="font-family:Courier New;">    [[ $X == $Y ]]</span><br />
 Notice that there is white space between $X, $Y, and the = operator.</p>
<p>If the expression evaluates to true, then a zero exit status is<br />
returned, otherwise the expression evaluates to false and a non-zero<br />
exit status is returned.</p>
<p> If you are familiar with the<b> test</b> and <b>[...]</b><br />
commands, then you'll recognize that [[...]] is just a new and improved<br />
version of the same commands. It basically functions the same way,<br />
except that a number of new operators are available.<br />
</span></span>
</div>
<div id="yn69" style="padding:1em 0;text-align:left;">
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></p>
<div id="t5_z" style="padding:1em 0;text-align:center;">
</div>
<p></span></span></p>
<div style="text-align:center;">
<div style="text-align:left;">
<h4><a id="_17_4_1_Checking_Strings__5241385150842537" name="_17_4_1_Checking_Strings__5241385150842537"></a><br />
 17.4.1 Checking Strings<br />
 </h4>
</div>
<p>
</div>
<div style="text-align:center;">
<span style="font-family:Courier New;"><span style="font-family:Verdana;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><a href="http://docs.google.com/File?id=dd6nw3mt_175gwrn86d5_b" target="_blank"><img src="http://docs.google.com/File?id=dd6nw3mt_175gwrn86d5_b" style="width:507px;height:459px;" /></a></span></span></span></span></p>
<div style="text-align:left;">
We could use the [[...]] command to check if a variable is set to a<br />
certain value. Here, variable X is assigned abc, then evaluated in this<br />
expression:<br />
<span style="font-family:Courier New;">    $ X=abc</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    $ [[ $X = abc ]] &amp;&amp; print "X is set to abc"</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    X is set to abc</span>
</div>
<div style="text-align:left;">
 Using the test and [...] commands, the same command could be written as:<br />
<span style="font-family:Courier New;">    test "$X" = abc &amp;&amp; print "X is set to abc"</span><br />
 or<br />
<span style="font-family:Courier New;">    [ "$X" = abc ] &amp;&amp; print "X is set to abc"</p>
<p></span>To check if a variable is set to null, the -z option can be used:<br />
<span style="font-family:Courier New;">    [[ —z $VAR ]] &amp;&amp; print "VAR is set to null"</span><br />
 or it could be compared to the null string like this:<br />
<span style="font-family:Courier New;">    [[ $VAR = "" ]] &amp;&amp; "VAR is set to null"</span>
</div>
</div>
<p><span style="font-family:'Courier New';"></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br />
</span></span></p>
<h4><a id="_17_4_2_Checking_Patterns__24458779692309196" name="_17_4_2_Checking_Patterns__24458779692309196"></a><br />
<span style="font-family:'Courier New';"><span style="font-family:Verdana;">17.4.2 Checking Patterns</span></span><br />
</h4>
<h4>
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span><br />
</h4>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The Korn shell also lets you compare strings to patterns. We could check if X begins with a 'a' like this:<br />
<span style="font-family:Courier New;">    $ X=abc</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    $ [[ $X = a* ]] &amp;&amp; print "$X matches a*"</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    abc matches a*</span></p>
<p> Using the +([09]) pattern, we could check if X is set to a number:<br />
<span style="font-family:Courier New;">    $ X=123</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    $ [[ $X = +([0—9]) ]] &amp;&amp; print "$X is a number"</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    123 is a number</span></p>
<p></span></span></p>
<h4><a id="_17_4_3_Checking_File_Attribut_4279807512566526" name="_17_4_3_Checking_File_Attribut_4279807512566526"></a><br />
<span style="font-family:'Courier New';"><span style="font-family:Verdana;">17.4.3 Checking File Attributes</span></span><br />
</h4>
<h4>
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span><br />
</h4>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></p>
<div id="f9e-" style="padding:1em 0;text-align:center;">
<img src="http://docs.google.com/File?id=dd6nw3mt_176d9kt7dg6_b" style="width:432px;height:572px;" /></p>
</div>
<p></span></span></p>
<div style="text-align:left;">
 The most basic operation to perform on a file is to see if it exists, and that can be done using the -a operator.<br />
<span style="font-family:Courier New;">    $ touch tmp</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    $ [[ —a tmp ]] &amp;&amp; print "File tmp exists"</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    File tmp exists</span></p>
<p>This only indicates that it exists, but not much else. It may be a<br />
directory, or a symbolic link, but using this operator, that's all we<br />
know. If we wanted more information, the -f or -d operators could tell<br />
us if a file existed and was a regular file (-f) or if it was just a<br />
directory (-d).</p>
<h4><a id="_17_4_4_Checking_Integer_Attri_07001292456862485" name="_17_4_4_Checking_Integer_Attri_07001292456862485"></a><br />
 17.4.4 Checking Integer Attributes<br />
</h4>
<div id="q-dl" style="padding:1em 0;text-align:center;">
<a href="http://docs.google.com/File?id=dd6nw3mt_177frb3r2c8_b" target="_blank"><img src="http://docs.google.com/File?id=dd6nw3mt_177frb3r2c8_b" /></a>
</div>
<p>
The [[...]] command provides a few integer operators that allow<br />
integers to be compared. It is frequently used to check the number of<br />
command-line arguments. This expression evaluates to true if there are<br />
less than or equal to three positional parameters set:<br />
 [[ $# —le 3 ]] &amp;&amp; print "3 or less args given"
</div>
<p><span style="font-family:'Courier New';"></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br />
The ((...)) command offers the same arithmetic comparison operators as<br />
the [[...]] command, plus many others. Besides offering more arithmetic<br />
operators, the ((...)) command provides substantial performance<br />
improvements over the [[...]] and test commands.</p>
<p></span></span></p>
<h4><a id="_17_4_5_The_Operator__42667919512565855" name="_17_4_5_The_Operator__42667919512565855"></a><br />
<span style="font-family:'Courier New';"><span style="font-family:Verdana;">17.4.5 The ! Operator</span></span><br />
</h4>
<h4>
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span><br />
</h4>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The ! operator negates the result of any [[...]] expression when used like this:<br />
<b><span style="font-family:Georgia;">[[ ! <i>expression</i> ]]</span></b><br />
 For example, to check if X is not equal to abc:<br />
<span style="font-family:Courier New;">    $ X=xyz</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    $ [[ ! $X = abc ]] &amp;&amp; print "$X not equals abc"</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    xyz not equals abc</span></p>
<p>There is one logical operator that can only be implemented with the !<br />
operator. There is no [[...]] file operator that will evaluate to true<br />
on a zero-length file.<br />
<span style="font-family:Courier New;">    $ &gt;emptyfile</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    $ [[ ! —s emptyfile ]] &amp;&amp; print "emptyfile is empty"</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    emptyfile is empty</span></p>
<p></span></span><br />
<h4><a id="_17_4_6_Compound_Expressions_47728179982164753" name="_17_4_6_Compound_Expressions_47728179982164753"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br />
 17.4.6 Compound Expressions</span></span></h4>
<h4><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br />
</span></span></h4>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">
<div id="l2r." style="padding:1em 0;text-align:center;"><img src="http://docs.google.com/File?id=dd6nw3mt_179fq89jwhp_b" />
<div style="text-align:left;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;">(1) <b>&amp;&amp;</b> - The AND Operator<br /></span></span>The &amp;&amp; operator is used with the [[...]] command to test if multiple expressions are true using this format:<br /><span style="font-family:Courier New;">    [[ expression1 &amp;&amp; expression2 ]]</span></div>
</div>
<p></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br />
 This expression checks if the noglob and noclobber options are set:<br /><span style="font-family:Courier New;">    [[ —o noglob &amp;&amp; —o noclobber ]]</span></p>
<p>(2) <b>||</b> - The OR Operator<br />The | | operator is used with the [[...]] command to test if expression1 OR expression2 are true using this format:<br /><span style="font-family:Courier New;">    [[ expression1 | | expression2 ]]</span></p>
<p></span></span><br />
<h4><a id="17_4_7_vs_test_and__7445772201941858" name="17_4_7_vs_test_and__7445772201941858"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">17.4.7 [ [...] ] vs test and [...]</span></span></h4>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The [[...]] command is preferred to test and [...], since many of the errors associated with test and [...] do not occur.</p>
<p></span></span><br />
<h2><a id="_18_Control_Commands" name="_18_Control_Commands"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br />
<i>18 Control Commands</i></span></span></h2>
<h2><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h2>
<h3><a id="18_1_The_case_command" name="18_1_The_case_command"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">18.1 The case command</span></span></h3>
<h3><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The case command provides multiple-branch capability. The syntax for the case command is:
<div id="of:d" style="padding:1em 0;text-align:left;"><img style="width:401px;height:251px;" src="http://docs.google.com/File?id=dd6nw3mt_180dxmkc4d8_b" /><br />where value is compared to <i>pattern1, pattern2, ... patternn</i>.</p>
<p>The<br />
same patterns used in file name substitution can also be used in case<br />
statements to match patterns. The new Korn shell pattern matching<br />
formats also allow multiple case patterns to be given like this:
<div id="p2_e" style="padding:1em 0;text-align:center;"><img style="width:613px;height:396px;" src="http://docs.google.com/File?id=dd6nw3mt_181fghtsb7m_b" /></div>
<h3><a id="18_2_The_for_Command" name="18_2_The_for_Command"></a>18.2 The for Command</h3>
<p>The basic syntax for the for command is:<br /><b><span style="font-family:Georgia;">        for </span></b><span style="font-family:Georgia;"><i>variable</i></span><b><span style="font-family:Georgia;"> in </span></b><i><span style="font-family:Georgia;">word1  word2 . . . wordn</span></i><b><br style="font-family:Georgia;" /><span style="font-family:Georgia;">        do</span><br style="font-family:Georgia;" /><span style="font-family:Georgia;">                   </span></b><span style="font-family:Georgia;"><i> </i><i>commands</i></span><b><br style="font-family:Georgia;" /><span style="font-family:Georgia;">        done</span></b></div>
<p>File name substitution, command substitution, and variable substitution<br />
can also be used to generate a list of word arguments for the for<br />
command. The first line of the previous command could have been given<br />
as:<br /><span style="font-family:Courier New;">    for FILE in chap[1-3]</span><br />or<br /><span style="font-family:Courier New;">    for FILE in $(ls chap[1-3])</span><br />or<br /><span style="font-family:Courier New;">    CHAPS=$(ls chap[1-3])</span><br /><span style="font-family:Courier New;">    for FILE in $CHAPS</p>
<p></span>The <b>$* </b>and <b>$@</b> variables can be used to loop on command-line arguments like this:<br /><b><span style="font-family:Georgia;">        for </span></b><span style="font-family:Georgia;"><i>variable</i></span><b><span style="font-family:Georgia;"> in $*</span><br style="font-family:Georgia;" /><span style="font-family:Georgia;">        do</span><br style="font-family:Georgia;" /></b><i><span style="font-family:Georgia;">                commands</span></i><b><br style="font-family:Georgia;" /><span style="font-family:Georgia;">        done</span></b></p>
<p>The for command can also be used without the list of word arguments:<br /></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b><span style="font-family:Georgia;">        for </span></b><span style="font-family:Georgia;"><i>variable</i></span><b><span style="font-family:Georgia;"> </span><br style="font-family:Georgia;" /><br />
<span style="font-family:Georgia;">        do</span><br style="font-family:Georgia;" /><br />
</b><i><span style="font-family:Georgia;">                commands</span></i><b><br style="font-family:Georgia;" /><br />
<span style="font-family:Georgia;">        done</span></b></span></span><br /><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The commands are executed once for each positional parameter, and <i>variable</i> is set to each successive positional parameter. It is equivalent to:<br /></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b><span style="font-family:Georgia;">       for </span></b><span style="font-family:Georgia;"><i>variable</i></span><b><span style="font-family:Georgia;"> in $@</span><br style="font-family:Georgia;" /><br />
<span style="font-family:Georgia;">        do</span><br style="font-family:Georgia;" /><br />
</b><i><span style="font-family:Georgia;">                commands</span></i><b><br style="font-family:Georgia;" /><br />
<span style="font-family:Georgia;">        done</span></b></p>
<p></span></span><br />
<h3><a id="18_3_The_if_Command" name="18_3_The_if_Command"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">18.3 The if Command</span></span></h3>
<h3><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The basic syntax of the if command is:<br /><b><span style="font-family:Georgia;">        if </span></b><span style="font-family:Georgia;"><i>command1</i></span><b><br style="font-family:Georgia;" /><span style="font-family:Georgia;">        then</span><br style="font-family:Georgia;" /><span style="font-family:Georgia;">                </span></b><i><span style="font-family:Georgia;">commands</span></i><b><br style="font-family:Georgia;" /><span style="font-family:Georgia;">        </span></b></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b><span style="font-family:Georgia;">elif </span></b><span style="font-family:Georgia;"><i>command2<br />        </i></span></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b><span style="font-family:Georgia;"> then</span></b></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:Georgia;"><i><br />                commands<br /></i></span></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b><span style="font-family:Georgia;">        else<br />                </span></b></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><i><span style="font-family:Georgia;">commands</span></i></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b><span style="font-family:Georgia;"><br />        fi</span></b><br />
</span></span><br />
<h3><a id="18_4_The_while_Command" name="18_4_The_while_Command"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">18.4 The while Command</span></span></h3>
<h3><a id="_while_command1_do_commands_do" name="_while_command1_do_commands_do"></a><span style="font-family:'Courier New';"><font size="2">        while <i>command1</i><br />        do<br />                <i>commands</i><br />        done</font><span style="font-family:Verdana;"></span></span></h3>
<h3><a id="18_5_The_until_Command" name="18_5_The_until_Command"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">18.5 The until Command</span></span></h3>
<h3><a id="The_until_command_is_another_l" name="The_until_command_is_another_l"></a><span style="font-family:'Courier New';"></span></h3>
<h3><span style="font-family:'Courier New';"><font size="2">The<br />
until command is another looping command. It's like the while command,<br />
except that instead of looping while the condition is true, it loops<br />
while the condition is false. The syntax for the until command is:<br /><b>        until </b><i><span style="font-family:Georgia;">command1</span></i><b><br />        do<br />                </b><i><span style="font-family:Georgia;">commands</span></i><b><br />        done</b><br />where commands are executed until command1 returns a zero exit status.</font><span style="font-family:Verdana;"></span></span></h3>
<h3><a id="18_6_Breaking_Out_of_Loops" name="18_6_Breaking_Out_of_Loops"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">18.6 Breaking Out of Loops</span></span></h3>
<h3><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b>break</b> command  causes an exit from a loop-type command, but not from the entire script.</p>
<p>The break command can also be used to exit from a nested loop using this format:<br /><b>        break </b><span style="font-family:Georgia;"><i>n</i></span><br />where </span></span><u><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b> </b><span style="font-family:Georgia;"><i>n</i></span></span></span></u><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><u> specifies the <i>n</i>th enclosing loop to exit from</u>.<br />Here is a new version of the nloop script that breaks out of both loops if i equals 2 and j equals 0:<br /><span style="font-family:Courier New;">$ cat nloop</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">for i in 1 2 3</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">do</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">    for j in 0 5</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">    do</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">        if ((i == 2 &amp;&amp; j == 0))</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">        then</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">            break 2</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">        else</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">            print "$i$j"</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">        fi</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">    done</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">done</span></p>
<p>Now the output would be:<br /><span style="font-family:Courier New;">    $ nloop</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">    10</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">    15</span><br />If<br />
break was used instead of break 2, then only the inner for loop would<br />
have been terminated, and execution would have continued with i set to<br />
3 in the outer loop, and j set to 0 in the inner loop.</p>
<p></span></span><br />
<h3><a id="18_7_The_continue_Command" name="18_7_The_continue_Command"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">18.7 The continue Command</span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The <b>continue</b> command causes execution to continue at the top of the current loop.</p>
<p>18.8 The select Command<br />The <b>select </b>command<br />
is used to display a simple menu that contains numbered items, and a<br />
prompt message. The syntax for the select command is:</p>
<p><b>        select </b><span style="font-family:Georgia;"><i>variable </i></span><b>in </b><i><span style="font-family:Georgia;">word1 word2 . . . wordn</span></i><b><br />        do<br />                </b><span style="font-family:Georgia;"><i>commands</i></span><b><br />        done</b><br />where <i>word1</i> through <i>wordn</i> are displayed as numbered menu choices followed by a prompt (default #?). </p>
<p><u>If the response is in the range 1 through n, then <i>variable</i> is set to the corresponding word, <b>REPLY</b> is set to the response, and the commands are executed.</u> Execution continues until a break, exit, return, or EOF is encountered.</p>
<p></span></span></p>
<h3><span style="font-family:'Courier New';"><span style="font-family:Verdana;">18.8 The select Command</span></span></h3>
<h3><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The<br />
select command is used to display a simple menu that contains numbered<br />
items, and a prompt message. The syntax for the select command is:</p>
<p><b><span style="font-family:Georgia;"><span>    </span><span>    </span>select </span></b><span style="font-family:Georgia;"><i>variable</i></span><b><span style="font-family:Georgia;"> in </span></b><span style="font-family:Georgia;"><i>word1 word2 . . . wordn</i></span><b><br style="font-family:Georgia;" /><br />
<span style="font-family:Georgia;"><span>    </span><span>    </span>do</span><br style="font-family:Georgia;" /><br />
</b><i><span style="font-family:Georgia;"><span>    </span><span>    </span><span>    </span><span>    </span>commands</span></i><b><br style="font-family:Georgia;" /><br />
<span style="font-family:Georgia;"><span>    </span><span>    </span>done</span></b></p>
<p>where <i>word1</i> through <i>wordn </i>are displayed as numbered menu choices followed by a prompt (default #?). If the response is in the range 1 through n, then <i>variable</i> is set to the corresponding word, <b>REPLY</b> is set to the response, and the <i>commands</i> are executed. Execution continues until a <b>break</b>, <b>exit</b>, <b>return</b>, or <b>EOF</b> is encountered.</p>
<p>The <b>select</b> command can also be used without the list of word arguments:</p>
<p></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b><span style="font-family:Georgia;"><span>   </span><span>    </span>select </span></b><span style="font-family:Georgia;"><i>variable</i></span><b><span style="font-family:Georgia;"> </span></b><span style="font-family:Georgia;"><i></i></span><b><br style="font-family:Georgia;" /><br />
<span style="font-family:Georgia;"><span>    </span><span>    </span>do</span><br style="font-family:Georgia;" /><br />
</b><i><span style="font-family:Georgia;"><span>    </span><span>    </span><span>    </span><span>    </span>commands</span></i><b><br style="font-family:Georgia;" /><br />
<span style="font-family:Georgia;"><span>    </span><span>    </span>done</span></b></span></span><br />
<span style="font-family:'Courier New';"><span style="font-family:Verdana;">It<br />
functions the same way as the previous select syntax, except that the<br />
positional parameters are displayed as numbered menu choices from 1 to<br />
n, instead of the words from the word list. It is equivalent to:<br />
</span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b><span style="font-family:Georgia;"><span>   </span><span>    </span>select </span></b><span style="font-family:Georgia;"><i>variable</i></span><b><span style="font-family:Georgia;"> in </span></b><span style="font-family:Georgia;"><i>"$@"</i></span><b><br style="font-family:Georgia;" /><br />
<span style="font-family:Georgia;"><span>    </span><span>    </span>do</span><br style="font-family:Georgia;" /><br />
</b><i><span style="font-family:Georgia;"><span>    </span><span>    </span><span>    </span><span>    </span>commands</span></i><b><br style="font-family:Georgia;" /><br />
<span style="font-family:Georgia;"><span>    </span><span>    </span>done</span></b></span></span><br />
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br /></span></span></div>

            
          </p>
        </div>
      
        <div class="post py3">
          <p class="post-meta">Nov 26, 2008</p>
          <a href="/2008/11/26/kshell-note-3" class="post-link"><h3 class="h2 post-title">korn Shell Notes(III)</h3></a>
          <p class="post-summary">
            
              <p>
     <span class="Apple-style-span" style="color:rgb(0,0,0);font-family:Verdana;font-size:13px;"><span class="Apple-style-span" style="font-size:19px;font-style:italic;font-weight:bold;">6 Variables</span>
<div id="xcw:" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;">
<div style="text-align:left;margin-top:0;margin-bottom:0;">The Korn shell supports four data types: string, integer, float, and array. If a data type is not explicitly defined, the Korn shell will assume that the variable is a string.</p>
<p>The typeset command can also be used to assign values.</p>
<p>If a value is not given, the variable is set to null. Here, X is reassigned the null value:<br />    <b>$ X=</b></div>
</div>
<h3 style="font-size:12pt;"><a name="6_1_Variable_Attributes_148016" id="6_1_Variable_Attributes_148016"></a>6.1 Variable Attributes</h3>
<p>Korn shell variables can have one or more attributes that specify their internal representation, access or scope, or the way they are displayed.Variables can be set to integer type for faster arithmetic operations, read-only so that the value cannot be changed, left/right justified for formatting purposes, and more. To assign a value and/or attribute to a Korn shell variable, use the following format with the typeset command:<br />    <span style="font-family:'Courier New';">typeset-attribute variable=value</span><br />or<br />    t<span style="font-family:'Courier New';">ypeset-attribute variable</span></p>
<p>Except for readonly, variable attributes can be set before, during, or after assignment. Functionally it makes no difference. Just remember that <b>the attribute has precedence over the value</b>. This means that if you change the attribute after a value has been assigned, the value may be affected.</p>
<div id="lfds" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><img src="http://docs.google.com/File?id=dd6nw3mt_157c3wjn8fw_b" style="width:551px;height:233px;" /></p>
<div id="yo2l" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><img src="http://docs.google.com/File?id=dd6nw3mt_159thjp23gb_b" style="width:414px;height:546px;" /></div>
<p></div>
<h3 style="font-size:12pt;"><a name="6_2_Lowercase_l_and_Uppercase_" id="6_2_Lowercase_l_and_Uppercase_"></a>6.2 Lowercase (-l) and Uppercase (-u) Attributes</h3>
<p>These attributes cause the variable values to be changed to lower or uppercase. For example, the lowercase attribute and uppercase value ASPD are assigned to variable MYSYS:<br />    <span style="font-family:'Courier New';">$ typeset —l MYSYS=ASPD</span><br />Despite the fact that MYSYS was assigned uppercase ASPD, when accessed, the value is displayed in lowercase:<br />    <span style="font-family:'Courier New';">$ print $MYSYS</span><br />    <span style="font-family:'Courier New';">aspd</p>
<p></span>This is because the attribute affects the variable value, regardless of the assignment. Variable attributes can also be changed after assignment. If we wanted to display variable MYSYS in uppercase, we could just reset the attribute:<br /><span style="font-family:'Courier New';">    $ typeset —u MYSYS</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $MYSYS</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    ASPD</span><br />
<h3 style="font-size:12pt;"><a name="6_3_Readonly_r_Attribute_58026" id="6_3_Readonly_r_Attribute_58026"></a>6.3 Readonly (-r) Attribute</h3>
<p>Once the readonly attribute is set, a variable cannot be assigned another value. Here, we use it to set up a restricted PATH:<br />    <span style="font-family:'Courier New';">$ typeset —r PATH=/usr/rbin</span><br />If there is an attempt to reset PATH, an error message is generated:<br /><span style="font-family:'Courier New';">    $ PATH=$PATH:/usr/bin:</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    /bin/ksh: PATH: is read only</span></p>
<p>Unlike other variable attributes, once the readonly attribute is set, it cannot be removed.<br />
<h3 style="font-size:12pt;"><a name="6_4_Integer_i_Attribute_906875" id="6_4_Integer_i_Attribute_906875"></a>6.4 Integer (-i) Attribute</h3>
<p>The integer attribute (-i) is used to explicitly declare integer variables. Although it is not necessary to set this attribute when assigning integer values, there are some benefits to it.</p>
<p>There is one restriction on integer variables. Once a variable is set to integer type, it can't be assigned a non-integer value:<br /><span style="font-family:'Courier New';">    $ typeset —i NUM=abc</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    /bin/ksh: NUM: bad number</span><br />
<h3 style="font-size:12pt;"><a name="6_5_The_Float_E_F_Attribute_26" id="6_5_The_Float_E_F_Attribute_26"></a>6.5 The Float (-E, -F) Attribute</h3>
<p>The float attributes (-E, -F) are used to declare float variables. The -E is used to specify the number of significant digits, while -F is used to specify the precision. In the following example, X is set to a float variable and assigned a value using both formats:<br /><span style="font-family:'Courier New';">    $ typeset —E5 X=123.456</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $X</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    123.46</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ typeset —F5 X=123.456</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $X</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    123.45600</span><br />The float command can also be used to declare a float variable, but does not allow for specifying the precision.<br />
<h3 style="font-size:12pt;"><a name="6_6_Right_R_and_Left_L_Justify" id="6_6_Right_R_and_Left_L_Justify"></a>6.6 Right (-R) and Left (-L) Justify Attributes</h3>
<p>The right and left justify attributes cause variable values to be justified within their width and are be used to format data. Here, variables A and B are set to right-justify with a field width of 7 characters. Notice that integer values are used, even though the integer attribute is not set.
<div id="yn69" style="text-align:left;margin-top:0;margin-bottom:0;padding:1em 0;"></div>
<div id="yn69" style="text-align:left;margin-top:0;margin-bottom:0;padding:1em 0;">    <img src="http://docs.google.com/File?id=dd6nw3mt_158g2383sgc_b" style="width:316px;height:120px;" /><br />If the field width is not large enough for the variable assignment, the value gets truncated. Variable X is assigned a seven-character wide value, but the field width is set to 3, so the first four characters are lost:<br /><span style="font-family:'Courier New';">    $ typeset —R3 X=ABCDEFG</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $X</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    EFG</p>
<p><span style="font-family:Verdana;">If a field width is not given, then it is set with the first variable assignment. Variable Y is assigned a three-character wide value, so the field width is set to 3.</span><br />    $ typeset —L Y=ABC<br />    $ print $Y<br />    ABC<br /><span style="font-family:Verdana;">Without explicitly resetting the field width, a subsequent assignment would be restricted to a three-character wide value:</span><br />    $ Y=ZYXWVUT<br />    $ print $Y<br />    ZYX<br /></span><br />
<h3 style="font-size:12pt;"><a name="6_7_Autoexport_x_Attribute_977" id="6_7_Autoexport_x_Attribute_977"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">6.7 Autoexport (-x) Attribute</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">It allows you to set and export a variable in one command. Instead of<br /><span style="font-family:'Courier New';">    $ typeset X=abc</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ export X</span><br />you can do this:<br /><span style="font-family:'Courier New';">    $ typeset —x X=abc</span><br style="font-family:'Courier New';" />We could use this attribute to add the /lbin directory to the <b>PATH</b> variable and export it all in one command:<br /><span style="font-family:'Courier New';">    $ typeset —x PATH=$PATH:/lbin</span><br /></span></span><br />
<h3 style="font-size:12pt;"><a name="6_8_Removing_Variable_Attribut" id="6_8_Removing_Variable_Attribut"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">6.8 Removing Variable Attributes</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Except for readonly, variable attributes are removed with the <b>typeset +</b><i>attribute</i> command. Assuming that the integer attribute was set on the NUM variable, we could remove it like this:<br /><span style="font-family:'Courier New';">    $ typeset +i NUM</span><br />and then reassign it a non-integer value:<br /><span style="font-family:'Courier New';">    $ NUM=abc</p>
<p></span><b>Once the readonly attribute is set, it cannot be removed</b>. When we try to do this with the PATH variable that was previously set, we get an error message:<br /><span style="font-family:'Courier New';">    $ typeset +r PATH</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    /bin/ksh: PATH: is read only</span><br /><span style="color:rgb(0,0,255);">The only way to reassign a readonly variable is to unset it first, then assign a value from scratch.</span><br /></span></span><br />
<h3 style="font-size:12pt;"><a name="6_9_Checking_Variable_Attribut" id="6_9_Checking_Variable_Attribut"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">6.9 Checking Variable Attributes</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Attributes of Korn shell variables are listed using the typeset -<i><span style="font-family:Georgia;">attribute</span></i> command. For example, to list all the integer type variables and their values:<br /><span style="font-family:'Courier New';">    $ typeset —i</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    ERRNO=0</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    MAILCHECK=600</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    PPID=177</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    RANDOM=22272</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    SECONDS=4558</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    TMOUT=0</p>
<p></span>To list only the names of variables with a specific attribute, use the typeset +<i>attribute</i> command.<br /></span></span><br />
<h3 style="font-size:12pt;"><a name="6_10_More_with_Variables_38599" id="6_10_More_with_Variables_38599"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">6.10 More with Variables</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">You can do other things with variables, such as assign them the value of another variable, the output of a command, or even the contents of a file.</p>
<p>Variables can be assigned command output using this format:<br /><span style="font-family:'Courier New';">   <b> </b><b>variable=$(command)</b></span><br />or<br /><span style="font-family:'Courier New';">    <b>variable=`command`</b></span></p>
<p>The second format is provided for compatibility with the Bourne shell. Here, UCSC is set to its internet ID by assigning the output of the grep and cut commands:<br /><span style="font-family:'Courier New';">    $ UCSC=$(grep UCSC /etc/hosts | cut —f1 —d" ")</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $UCSC</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    128.114.129.1</span></p>
<p>Variables can also be assigned the contents of files like this:<br /><b><span style="font-family:'Courier New';">    variable=$(&lt;file)</span></b><br />or<br /><b><span style="font-family:'Courier New';">    variable=`cat file`</span></b><br />The first format is equivalent to variable=$(cat file). The second format is much slower, but is provided for compatibility with the Bourne shell.</p>
<p>A <b>nameref</b> variable is a synonym for another variable and will always have the same value as its associated variable They are created using the following formats:<br /><span style="font-family:'Courier New';">    <b>nameref </b><i>nameref_variable=variable</i></span><br />or<br /><span style="font-family:'Courier New';">    <b>typeset</b> <b>-n</b> <i>nameref_variable=variable</i></span><br />For example:<br /><span style="font-family:'Courier New';">    $ X=abc</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ nameref Y=X</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $X</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    abc</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $Y</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    abc</span><br /></span></span><br />
<h3 style="font-size:12pt;"><a name="6_11_Unsetting_Variables_82193" id="6_11_Unsetting_Variables_82193"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">6.11 Unsetting Variables</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Variable definitions are removed using the <b>unset</b> command. This is not the same as being set to null.</p>
<p>Unsetting either the base or nameref variable will unset both variables.</p>
<p></span></span><br />
<h2 style="font-size:14pt;"><a name="7_Special_Parameters_155685234" id="7_Special_Parameters_155685234"></a><i><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:Verdana;">7 Special Parameters</span></span></span></i></h2>
<h2 style="font-size:14pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h2>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">
<div id="mgds" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><img src="http://docs.google.com/File?id=dd6nw3mt_160d8q2vnf3_b" style="width:537px;height:285px;" /></div>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="7_1_The_Parameter_882457770205" id="7_1_The_Parameter_882457770205"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">7.1 The ? Parameter</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The ? parameter contains the exit status of the last executed command. In this example, the date command is executed. It ran successfully, so the exit status is 0:<br /><span style="font-family:'Courier New';">    $ date +%D</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    05/24/96</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $?</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    0</span><br />When used with a pipe, $? contains the exit status of the last command in the pipeline.<br /></span></span><br />
<h3 style="font-size:12pt;"><a name="7_2_The_Parameter_996378622698" id="7_2_The_Parameter_996378622698"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">7.2 The $ Parameter</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The $ parameter contains the process id of the current shell.<br /><span style="font-family:'Courier New';">    $ print $$</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    178</span></p>
<p>It is useful in creating unique file names within Korn shell scripts.<br /><span style="font-family:'Courier New';">    $ touch $0.$$</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ ls *.*</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    ksh.218</span><br /></span></span><br />
<h3 style="font-size:12pt;"><a name="7_3_Other_Special_Parameters_5" id="7_3_Other_Special_Parameters_5"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">7.3 Other Special Parameters</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The <b>-</b> parameter contains the current options in effect. The output of the next command shows that the interactive and monitor options are enabled:<br /><span style="font-family:'Courier New';">    $ print $—</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    im</p>
<p></span>To display the error number of the last failed system call, use the <b>ERRNO</b> variable. Here, an attempt to display a non-existent file returns an error, so ERRNO is checked for the error number:<br /><span style="font-family:'Courier New';">    $ cat tmp.out</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    tmp.out: No such file or directory</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $ERRNO</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    2<br /></span>This is system dependent, so it may not be available on your system. Check your documentation or /usr/include/sys/errno.h for more information.<br /></span></span><br />
<h2 style="font-size:14pt;"><a name="8_Variable_Expansion_888811139" id="8_Variable_Expansion_888811139"></a><i><span style="font-family:'Courier New';"><span style="font-family:Verdana;">8 Variable Expansion</span></span></i></h2>
<h2 style="font-size:14pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h2>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Variable expansion is the term used for the ability to access and manipulate values of variables and parameters. Basic expansion is done by preceding the variable or parameter name with the $ character. This provides access to the value.<br /><span style="font-family:'Courier New';">    $ UULIB=/usr/lib/uucp</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $UULIB</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    /usr/lib/uucp</p>
<p></span>Other types of expansion can be used to return portions or the length of variables, use default or alternate values, check for mandatory setting, and more.</p>
<p>For the sake of convenience, the term <i>variable</i> will refer to both variables and parameters in the following sections that discuss variable expansion.
<div id="b4k6" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><a href="http://docs.google.com/File?id=dd6nw3mt_161fp2b4mfg_b" target="_blank"><img src="http://docs.google.com/File?id=dd6nw3mt_161fp2b4mfg_b" style="width:427px;height:711px;border-style:initial;border-color:initial;border-width:0;" /></a></div>
<p>
<div id="azy1" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><img src="http://docs.google.com/File?id=dd6nw3mt_162fmx9j6d6_b" style="width:411px;height:465px;" /></div>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="8_1_variable_variable_01009047" id="8_1_variable_variable_01009047"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">8.1 $variable, ${variable}</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><u>This is expanded to the value of variable</u>. The braces are used to protect or delimit the variable name from any characters that follow. The next example illustrates why braces are used in variable expansion. The variable CA is set to ca:<br /><span style="font-family:'Courier New';">    $ CA=ca</p>
<p></span>What if we wanted to reset CA to california? It could be reset to the entire value, but to make a point, let's try using the current value like this:<br /><span style="font-family:'Courier New';">    $ CA=$CAlifornia</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $CA</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $</p>
<p></span>Nothing is printed, because without the braces around the variable CA, the Korn shell looks for a variable named $CAlifornia. None is found, so nothing is substituted. With the braces around variable CA, we get the correct value:<br /><span style="font-family:'Courier New';">    $ CA=${CA}lifornia</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $CA</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    california</p>
<p></span>Braces are also needed when attempting to expand positional parameters greater than 9. This ensures that both digits are interpreted as the positional parameter name.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="8_2_variable_45711572132405753" id="8_2_variable_45711572132405753"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">8.2 ${#<i>variable</i>}</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><u>This is expanded to the length of variable.</u> In this example, X is set to a three-character string, so a length of 3 is returned:<br /><span style="font-family:'Courier New';">    $ X=abc</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${#X}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    3</span><br />Whitespace in variable values is also counted as characters.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="8_3_variable_word_variable_wor" id="8_3_variable_word_variable_wor"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">8.3 ${<i>variable:-word</i>}, ${<i>variable-word</i>}</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><u>This is expanded to the value of variable if it is set and <b>not null</b></u>, otherwise word is expanded. <b>This is used to provide a default value if a variable is not set.</b> In the following example, the variable X is set to abc. When expanded using this format, the default value abc is used:<br /><span style="font-family:'Courier New';">    $ X=abc</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${X:—cde}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    abc</span><br />After X is unset, the alternate value cde is used:<br /><span style="font-family:'Courier New';">    $ unset X</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${X:—cde}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    cde</span><br />Notice that the value of X remains unchanged:<br />$ print $X<br />$</p>
<p>Let's say we needed a command to get the user name. The problem is that some people have it set to USER, while others have it set to LOGNAME. We could use an if command to check one value first, then the other. This would be quite a few lines of code. Or we could use this form of variable expansion to have both values checked with one command. Here, if USER is set, then its value is displayed, otherwise the value of LOGNAME is displayed.<br /><span style="font-family:'Courier New';">    $ print USER=$USER, LOGNAME=$LOGNAME</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    USER=anatole, LOGNAME=AO</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${USER:—${LOGNAME}}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    anatole</span><br />Now we unset USER to check and make sure that LOGNAME is used:<br /><span style="font-family:'Courier New';">    $ unset USER</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${USER:—${LOGNAME}}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    AO</span></p>
<p>But what if both USER and LOGNAME are not set? Another variable could be checked like this:<br /><span style="font-family:'Courier New';">    $ unset USER LOGNAME</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${USER:-${LOGNAME:-USER and LOGNAME not set!}}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    USER and LOGNAME not set!</span><br />Or<br />$ print ${USER—${LOGNAME:—$(whoami)}}<br />anatole</p>
<p><b>Remember that the alternate value is only used and not assigned to anything. </b>The other format, <u>${variable-word}, causes the variable value to be used, even if it is set to null:</u><br /><span style="font-family:'Courier New';">    $ typeset X=</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${X-cde}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $</span></p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="8_4_variable_word_variable_wor_12497100047767162" id="8_4_variable_word_variable_wor_12497100047767162"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">8.4 ${<i>variable</i><span style="font-family:Georgia;">:=</span><i>word</i>}, ${<i>variable</i><span style="font-family:Georgia;">=</span><i>word</i>}</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><u>This is expanded to the value of variable <b>if set and not null</b>, otherwise it is set to word, then expande</u>d. In contrast to the variable expansion format from the previous section, this format is used to assign a default value if one is not already set. In the next example, the variable LBIN is set to /usr/lbin. When expanded using this format, the default value /usr/lbin is used:<br /><span style="font-family:'Courier New';">    $ LBIN=/usr/lbin</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${LBIN:=/usr/local/bin}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    /usr/lbin</span></p>
<p>After LBIN is unset, this form of variable expansion causes LBIN to be assigned the alternate value, /usr/local/bin:<br />$ unset LBIN<br />$ print ${LBIN:=/usr/local/bin}<br />/usr/local/bin</p>
<p>Command substitution can also be used in place of <i>word</i>. This command sets the SYS variable using only one command:<br /><span style="font-family:'Courier New';">    $ unset SYS</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${SYS:=$(hostname)}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    aspd</span></p>
<p>The other format, <u><b>${<i><span style="font-family:Georgia;">variable=word</span></i>}</b>, <span style="color:rgb(255,0,0);">causes the variable value to be used, even if it is set to null</span></u>. Here LBIN is not assigned an alternate value. <span style="color:rgb(0,0,0);">If := was used instead of =, then LBIN would be set to /usr/local/bin:</span><br /><span style="font-family:'Courier New';">    $ LBIN=</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${LBIN=/usr/local/bin}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $</span></p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="8_5_variable_word_variable_var_9760769000276923" id="8_5_variable_word_variable_var_9760769000276923"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">8.5 ${<i>variable</i><span style="font-family:Georgia;">:?</span><i>word</i>}, ${<i><span style="font-family:Georgia;">variable</span></i><span style="font-family:Georgia;">:?</span>}; ${<i><span style="font-family:Georgia;">variable</span></i><span style="font-family:Georgia;">?</span><i><span style="font-family:Georgia;">word</span></i>}, ${<i><span style="font-family:Georgia;">variable</span></i><span style="font-family:Georgia;">?</span>}</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><u>This is expanded to the value of variable <b>if it is set and not null</b>, otherwise word is printed and the Korn shell exits</u>. If word is omitted, "<b><span style="font-family:Georgia;">parameter null or not set</span></b>" is printed. This feature is often used in Korn shell scripts to check if mandatory variables are set. In this example, variable XBIN is first unset. When expanded, the default error is printed:<br /><span style="font-family:'Courier New';">    $ unset XBIN</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ : ${XBIN:?}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    /bin/ksh: XBIN: parameter null or not set</p>
<p></span>You could also provide your own error message:<br /><span style="font-family:'Courier New';">    $ print ${XBIN:?Oh my God, XBIN is not set!}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    /bin/ksh: XBIN: Oh my God, XBIN is not set!</span></p>
<p>The other formats, <u><b>${variable?word}</b> and<b> ${variable?}</b>, cause the variable value to be used, even if it is set to null</u>.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="8_6_variable_word_variable_wor_5404786737635732" id="8_6_variable_word_variable_wor_5404786737635732"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">8.6 <span style="font-family:Georgia;">${<i>variable</i>:+<i>word </i>}, ${<i>variable</i>+<i>word</i> }</span></span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><u>This is expanded to the value of word if variable is set and not null, otherwise nothing is substituted.</u> This is basically the opposite of the <span style="font-family:Georgia;">${<i>variable</i>:-<i>word</i>}</span> format. Instead of using <i>word</i> if variable is not set, <i>word </i><span style="color:rgb(255,0,0);">is used if variable is set</span>. In the first example Y is set to abc. When expanded, the alternate value def is displayed because Y is set:<br /><span style="font-family:'Courier New';">    $ Y=abc</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${Y:+def}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    def</p>
<p></span>Here, Y is unset. Now when expanded, nothing is displayed:<br /><span style="font-family:'Courier New';">    $ unset Y</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${Y:+def}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $</span></p>
<p>Like the ${variable:-word} format, <span style="color:rgb(0,0,255);">the alternate value is only used and not assigned to the variable</span>. Y is still set to null:<br /><span style="font-family:'Courier New';">    $ print $Y</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $</span></p>
<p>The other format, <u>${variable+word}, causes the variable value to be used, even if it is set to null</u>:<br /><span style="font-family:'Courier New';">    $ Y=</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${Y+def}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    def</span><br /></span></span><br />
<h3 style="font-size:12pt;"><a name="8_7_variable_pattern_variable__9965686993673444" id="8_7_variable_pattern_variable__9965686993673444"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:Georgia;">8.7 ${<i>variable</i>#<i>pattern</i>}, ${<i>variable</i>##<i>pattern</i>}</span></span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><u>This is expanded to the value of variable with the smallest (#) or largest (##) part of the left matched by <i><span style="font-family:Georgia;">pattern</span></i> deleted.</u> What these expansion formats allow you to do is manipulate substrings. To demonstrate the basic functionality, X is set to a string that contains a recurring pattern: abcabcabc.<br /><span style="font-family:'Courier New';">    $ X=abcabcabc</span><br style="font-family:'Courier New';" /><br />When expanded to return the substring that deletes the smallest left pattern abc, we get abcabc:<br /><span style="font-family:'Courier New';">    $ print ${X#abc*}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    abcabc</span></p>
<p>while the substring that deletes the largest left pattern abc is abcabcabc, or the entire string:<br /><span style="font-family:'Courier New';">    $ print ${X##abc*}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $</span></p>
<p>We could use this concept to implement the Korn shell version of the UNIX <b>basename</b> command. The pattern in this command causes the last directory to be returned if variable X is set to<span style="font-family:'Courier New';"> a full pathname:</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ X=/usr/spool/cron</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${X##*/}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    cron</span><br style="font-family:'Courier New';" /></span></span><br />
<h3 style="font-size:12pt;"><a name="8_8_variable_pattern_variable__9711597748100758" id="8_8_variable_pattern_variable__9711597748100758"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">8.8<span style="font-family:Georgia;"> ${<i>variable</i>%<i>pattern</i>}, ${<i>variable</i>%%<i>pattern</i>}</span></span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><u>This is expanded to the value of variable with the smallest (%) or largest (%%) part of the right matched by pattern deleted.</u> It could also be used to display file names without their .suffixes:<br /><span style="font-family:'Courier New';">    $ X=file.Z</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${X%.*}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    file</span></p>
<p>The pattern in this command causes it to act like the UNIX dirname command. Everything except the last directory is returned if variable X is set to a full pathname.<br /><span style="font-family:'Courier New';">    $ X=/usr/spool/cron</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${X%/*}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    /usr/spool</span><br /></span></span><br />
<h3 style="font-size:12pt;"><a name="8_9_variable_pattern1_pattern2_647486001253128" id="8_9_variable_pattern1_pattern2_647486001253128"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">8.9 ${variable//pattern1/pattern2}, </span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;">${variable/pattern1/pattern2}; </span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;">${variable#pattern1/pattern2},</span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;">${variable/%pattern1/pattern2}</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The Korn shell supports four search and replace operations on variables. This example changes all occurrences of abc in X to xyz:<br /><span style="font-family:'Courier New';">    $ X=abcabcabc</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${X//abc/xyz}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    xyzxyzxyz</span><br />while this one only changes the first occurrence of abc in X to xyz:<br /><span style="font-family:'Courier New';">    $ X=abcabcabc</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${X/abc/xyz}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    xyzabcabc</span><br />See Table 3.6 for detailed explanation of the other formats.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="8_10_variable_start_variable_s" id="8_10_variable_start_variable_s"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">8.10 ${variable:start}, ${variable:start:length}</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">This format returns a substring. The first returns variable from character position start to end, while the second returns length characters from variable from character position start to end. For example, this returns the first 3 characters of X:<br /><span style="font-family:'Courier New';">    $ X=abcdefghij</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print {$X:0:3}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    abc</span><br />while this example returns the value of X starting at character position 5:<br /><span style="font-family:'Courier New';">    $ X=abcdefghij</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print {$X:5}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    fghij</span></p>
<p></span></span><br />
<h2 style="font-size:14pt;"><a name="9_Array_Variables_111484066583_7120619406923652" id="9_Array_Variables_111484066583_7120619406923652"></a><i><span style="font-family:'Courier New';"><span style="font-family:Verdana;">9 Array Variables</span></span></i></h2>
<h2 style="font-size:14pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h2>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Arrays can have a maximum of 4096 elements. Array subscripts start at 0 and go up to 4096 (or the maximum element minus one). Any variable can become a one-dimensional array by simply referring to it with a subscript.<br /></span></span><br />
<h3 style="font-size:12pt;"><a name="9_1_Array_Variable_Assignments_8827508166432381" id="9_1_Array_Variable_Assignments_8827508166432381"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">9.1 Array Variable Assignments &amp; Declarations</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Arrays can be assigned values by using normal variable assignment statements, the <b><span style="font-family:Georgia;">set -A</span></b> command, or the <b>typeset</b> command:<br /><i>        variable[0]=value variable[1]=value . . . variable[n]=value</i><br />or<br /><span style="font-family:Georgia;"><b>        set -A </b><i>variable value0 value1 . . . valuen</i></span><br />or<br /><span style="font-family:Georgia;"><b>        typeset</b> <i>variable[0]=value variable[1]=value . . .  variable[n]=value</i></span></p>
<p>The only difference between the formats, is that with the set command format, the values are assigned to the array variable sequentially starting from element zero. In the other formats, the array elements can be assigned values in any order.</p>
<p>Not all the elements of an array need to exist. You can assign values to non-successive elements of an array.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="9_2_Array_Variable_Expansion_6_4298841701820493" id="9_2_Array_Variable_Expansion_6_4298841701820493"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">9.2 Array Variable Expansion</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;">
<div id="nazz" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><img src="http://docs.google.com/File?id=dd6nw3mt_163hqbxwc94_b" style="width:525px;height:454px;" /></div>
<p></span></span></span></span><br /><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Array variables are expanded in the same manner as normal variables and parameters: using the $ character. Without a subscript value, an array variable refers to the first element, or element 0.</p>
<p>To access the value of a specific array variable element use a subscript. Array variable names and subscripts must be enclosed in braces for proper expansion:<br /><span style="font-family:'Courier New';">    $ print ${DAY[3]} ${DAY[5]}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    Thu Sat</span></p>
<p>All the elements of an array can be accessed by using the * or @ as the subscript value. They both return the same value.</p>
<p>The number of elements of an array variable is returned by using the # in front of the array variable name and using * or @ as the subscript value.</p>
<p>To get values for a subset of an array, use this format:<br /><b><span style="font-family:Georgia;">        ${<i>variable</i>[*]:<i>start_subscript</i>:<i>num_elements</i>}</span></b><br />or<br /><b><span style="font-family:Georgia;">        ${<i>variable</i>[@]:<i>start_subscript</i>}</span></b></p>
<p>Arithmetic expressions can be used to return a subscript value. Variable expansion can also be used to generate a subscript value.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="9_3_Array_Variable_Attributes__8870758265256882" id="9_3_Array_Variable_Attributes__8870758265256882"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">9.3 Array Variable Attributes</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Arrays can also be declared, and assigned values and attributes with the typeset command:<br /><span style="font-family:Georgia;"><b>                typeset</b></span><i><span style="font-family:Georgia;"> -attribute variable[0]=value variable[1]=value . . .</span></i><br />Once set, attributes apply to all elements of an array. This example sets the uppercase attribute for the DAY array variable using the <b>typeset -u</b> command:<br /><span style="font-family:'Courier New';">        $ typeset —u DAY</span><br />Now all the element values are displayed in upper case:<br /><span style="font-family:'Courier New';">        <b>$ print ${DAY[*]}</b> <b><span style="color:rgb(56,118,29);">#Pay attention to usage.</span></b></span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">        MON TUE WED THU FRI SAT SUN</span><br />Array element attributes can be set before or after assignment.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="9_4_Array_Variable_Reassignmen_9427135931327939" id="9_4_Array_Variable_Reassignmen_9427135931327939"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">9.4 Array Variable Reassignments</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Besides using regular <span style="font-family:Georgia;"><i>array-element</i>[n]=<i>value</i></span> or <span style="font-family:Georgia;"><b>typeset</b> <i>arrayelement</i>[n]=<i>value</i></span> syntax to reassign values, array variables can also have their values reassigned with the set +A command:<br /><span style="font-family:Georgia;"><b>set +A </b><i>variable value0 value1 . . .</i></span></p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="9_5_Associative_Arrays_1665451_4800594123080373" id="9_5_Associative_Arrays_1665451_4800594123080373"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">9.5 Associative Arrays</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><u><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Associative </span></span></span></span></u><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><u>arrays use string subscripts rather than integer subscripts.</u> Associative arrays are declared using this format:<br /><span style="font-family:Georgia;"><b>                typeset -A</b> <i>variable</i></span><br />where </span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:Georgia;"><i>variable</i></span></span></span></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"> is the name of the associative array. Additional arguments can be given to the <b>typeset </b>command to specify a data type. For example, we can create an associative array to store some exchange rates:<br /><span style="font-family:'Courier New';">    $ typeset -AE exchange_rate</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ exchange_rate["DM"]=1.7</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ exchange_rate["FF"]=.15</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ exchange_rate["AS"]=.04</span></p>
<p>To display a list of associative array subscripts:<br /><span style="font-family:Georgia;">               <b> </b><b>${!<i>variable</i>[*]} </b> <span style="font-family:Verdana;">or</span>  <b>${!<i>variable</i>[@]}</b></span><br />To display the values for all or parts of an associative array:<br />        <b><span style="font-family:Georgia;">${!<i>variable</i>[<i>subscript</i>]}</span></b><br />For example, all and a specific exchange rate is displayed here:<br /><span style="font-family:'Courier New';">    $ print ${!exchange_rate[*]}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    0.15 1.7</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print "The DM exchange rate is:${exchange_rate[DM]}"</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    1.7</span></p>
<p></span></span><br />
<h2 style="font-size:14pt;"><a name="10_Compound_Variables_21190555_19111895095556974" id="10_Compound_Variables_21190555_19111895095556974"></a><i><span style="font-family:'Courier New';"><span style="font-family:Verdana;">10 Compound Variables</span></span></i></h2>
<h2 style="font-size:14pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h2>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Compound Variables is a meta-datatype which is a group of related values. The syntax for declaring compund variables is:<br /><i><b><span style="font-family:Georgia;">    compound_variable</span></b></i><b><span style="font-family:Georgia;">=(</span></b><i><b><br style="font-family:Georgia;" /><span style="font-family:Georgia;">            </span></b></i><b><span style="font-family:Georgia;">[</span></b><i><b><span style="font-family:Georgia;">datatype</span></b></i><b><span style="font-family:Georgia;">]</span></b><i><b><span style="font-family:Georgia;"> field1</span></b></i><b><span style="font-family:Georgia;">[=</span></b><i><b><span style="font-family:Georgia;">value</span></b></i><b><span style="font-family:Georgia;">]</span></b><i><b><br style="font-family:Georgia;" /><span style="font-family:Georgia;">                . . .</span><br style="font-family:Georgia;" /><span style="font-family:Georgia;">           </span></b></i><b><span style="font-family:Georgia;"> [</span></b><i><b><span style="font-family:Georgia;">datatype</span></b></i><b><span style="font-family:Georgia;">] </span></b><i><b><span style="font-family:Georgia;">fieldn</span></b></i><b><span style="font-family:Georgia;">[=</span></b><i><b><span style="font-family:Georgia;">value</span></b></i><b><span style="font-family:Georgia;">]</span></b><i><b><br style="font-family:Georgia;" /><span style="font-family:Georgia;">            </span></b></i><b><span style="font-family:Georgia;">)</span></b></span></span></span></span><br style="font-family:Georgia;" /><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br />The syntax to display the value of a compound variable field is:<br /><b>                ${<i>compound_variable.field</i>}</b></p>
<p></span></span><br />
<h2 style="font-size:14pt;"><a name="11_Quoting_12240633368492126_0" id="11_Quoting_12240633368492126_0"></a><i><span style="font-family:'Courier New';"><span style="font-family:Verdana;">11 Quoting</span></span></i></h2>
<h2 style="font-size:14pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h2>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">There are three types of quotes: <b>single quotes</b>, <b>double quotes</b>, and<b> back quotes</b>. Single and double quotes are similar, except for the way they handle some special characters. Back quotes are used for command output assignment.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="11_1_Single_Quotes_61755968164_7702147783711553" id="11_1_Single_Quotes_61755968164_7702147783711553"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">11.1 Single Quotes</span></span></h3>
<p>Single quotes are also used to hide the meaning of special characters like $, *, /, !, ", ` and /. Any characters between single quotes, except<span style="font-family:'Courier New';"><span style="font-family:Verdana;"> another single quote, are displayed without interpretation as special characters:<br /><span style="font-family:'Courier New';">    $ print '* $ / ! ` / "'</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    * $ / ! ` / "</span><br style="font-family:'Courier New';" /><br /><b>Variable and command substitution does not take place within single quotes</b> (because $ and `` lose their special meaning).<b> If you want to access the value of a variable, use double quotes instead of single quotes</b> (discussed in the next section).</p>
<p>Variables can be set to null with single quotes:<br /><span style="font-family:'Courier New';">    $ X=''</span><br />Single quotes are also used to assign values to aliases and trap commands, and prevent alias substitution, but we'll get to that later.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="11_2_Double_Quotes_24466882180_9458656702190638" id="11_2_Double_Quotes_24466882180_9458656702190638"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">11.2 Double Quotes</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Double quotes are like single quotes, except that they do <b>not </b>remove the meaning of the special characters $, `, and /. This means that variable and command substitution is performed.<br /><span style="font-family:'Courier New';">    $ DB="$HOME:`pwd`"</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $DB</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    /home/anatole:/tmp</span></p>
<p>Double quotes also preserve embedded whitespace and newlines. Here are some examples:<br /><span style="font-family:'Courier New';">    $ print "Line 1</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    &gt; Line 2"   <span style="color:rgb(106,168,79);"> </span><span style="color:rgb(106,168,79);">#</span></span></span></span><span style="font-family:'Courier New';color:rgb(106,168,79);"><span style="font-family:Verdana;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The &gt; is the secondary prompt, and is displayed whenever the Korn shell needs more input.</span></span></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:'Courier New';color:rgb(106,168,79);"></span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    Line 1</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    Line 2</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print "A        B"</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    A        B</span></p>
<p>In this case, it waits for the closing double quote:<br /><span style="font-family:'Courier New';">    $ ADDR="ASP,Inc</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    &gt; PO Box 23837</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    &gt; San Jose CA 95153 USA</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    &gt; (800)777-UNIX * (510)531-5615"</span><br />Without double quotes around ADDR, we get this:<br /><span style="font-family:'Courier New';">    $ print $ADDR</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    ASP,Inc PO Box 23837 San Jose CA 95153 USA (800) 777-</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    UNIX * (510)531-5615</span><br />Not quite what we wanted. Let's try it again:<br /><span style="font-family:'Courier New';">    $ print "$ADDR"</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    ASP,Inc</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    PO Box 23837</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    San Jose CA 95153 USA</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    (800)777-UNIX * (510)531-5615</span></p>
<p>There are also other uses for double quotes. You can set a variable to null:<br /><span style="font-family:'Courier New';">    $ NULL=""</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $NULL</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $</span><br />or display single quotes.<br /><span style="font-family:'Courier New';">    $ print "'This is in single quotes'"</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    'This is in single quotes'</span><br />If you really wanted to display the $, `, /, or " characters using double quotes, <b>escape them with a backslash</b> like this:<br /><span style="font-family:'Courier New';">    $ print "/$HOME is set to $HOME"</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $HOME is set to /home/anatole</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print "/`=back-quote //=slash /"=double-quote"</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    `=back-quote /=slash "=double-quote</span></p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="11_3_Back_Quotes_6698768856003_8325655767694116" id="11_3_Back_Quotes_6698768856003_8325655767694116"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">11.3 Back Quotes</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b><u>Back quotes are used to assign the output of a command to a variable.</u></b> This format, from the Bourne shell, is accepted by the Korn shell but considered obsolescent. This command sets the variable SYS to the system name:<br /><span style="font-family:'Courier New';">    $ SYS=`uuname —l`</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $SYS</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    aspd</span></p>
<p></span></span><br />
<h2 style="font-size:14pt;"><a name="12_Command_History_File_256358" id="12_Command_History_File_256358"></a><i><span style="font-family:'Courier New';"><span style="font-family:Verdana;">12 Command History File</span></span></i></h2>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The Korn shell stores the commands that you enter at your terminal in a file, called the command history file. This file is specified by the <b>HISTFILE</b> variable. If not set, the default is <b>$HOME/.sh_history</b>.</p>
<p>The number of commands accessible via the command history file is specified by the <b>HISTSIZE</b> variable. If not set, the last 128 commands are saved, starting from your most recent command.</p>
<p>There are two ways to access the command history file: using the <b>fc</b> command, or the in-line editor.</p>
<p></span></span><br />
<h2 style="font-size:14pt;"><a name="13_The_fc_Command_071168033406" id="13_The_fc_Command_071168033406"></a><i><span style="font-family:'Courier New';"><span style="font-family:Verdana;">13 The fc Command</span></span></i></h2>
<h2 style="font-size:14pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h2>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The <b>fc</b> command allows you to list, or edit and re-execute history file commands. The fc command also allows you to manipulate the history file using your own choice of editors.<br /></span></span><br />
<h3 style="font-size:12pt;"><a name="13_1_Displaying_the_Command_Hi" id="13_1_Displaying_the_Command_Hi"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">13.1 Displaying the Command History File</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The format for displaying the command history file with the <b>fc -l</b> command is:<br /><b>        fc -l[nr]</b> [ <i>range</i> ]<br />where the -n option causes the command numbers to not be  displayed, and the -r option specifies reverse order (latest commands first). The range of commands to list is given as:<br /><b>n1 [n2]:</b>     display list from command n1 to command n2. If n2 is not specified, display all the commands from current command back to command n1.<br /><b><i>-count:</i></b><b><i>    </i></b> display the last count commands string display all the previous commands back to the command that matches.<br /><b>string:</b><b>    </b> If no range argument is given, the last sixteen commands are listed.</p>
<p>If no <i>range </i>argument is given, the last sixteen commands are listed. Let's look at the last five commands:<br /><span style="font-family:'Courier New';">    $ fc -l -5</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    250 set</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    251 vi /etc/env</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    252 . /etc/env</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    253 set</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    254 alias</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    255 functions</span><br />The <b>history</b> command is equivalent to <b>fc -l</b>. The last command could also be given like this. Notice that the order is reversed.<br /><span style="font-family:'Courier New';">    $ history —r —5</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    255 functions</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    254 alias</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    253 set</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    252 . /etc/env</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    251 vi /etc/env</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    250 set</span><br />By using a string instead of a count argument, we could search backward for a specific command.<br /><span style="font-family:'Courier New';">    $ history —r set</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    258 fc —lr set</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    257 fc —ln —10</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    256 fc —l 250 265</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    255 functions</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    254 alias</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    253 set</span><br />The argument set could also be given as s, or se, since partial strings are also matched. This means that the string f would match functions and fc, while fu would only match functions.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="13_2_Editing_the_Command_Histo_6460225936025381" id="13_2_Editing_the_Command_Histo_6460225936025381"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">13.2 Editing the Command History File</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Besides displaying the command history file, it can also be edited using the fc command with the following format:<br /><b><span style="font-family:Georgia;">                fc [-e <i>editor</i>] [-r] [<i>range</i>]</span></b><br />or<br /><b>                fc -e - [<i>old=new</i>] [<i>command</i>]</b><br />where the -e editor option is used to specify an editor. If not given, the value of the FCEDIT variable is used, and if not set, the default /bin/ed is used. The -r option reverses the order of the commands, so that the latest commands are displayed first.</p>
<p></span></span>Using <b>r</b>, the last command could also be given as: <span style="font-family:'Courier New';"><br />    $ <b>r</b> 173</p>
<p><span style="font-family:Verdana;">The substitution feature is used to make minor changes to </span><span style="font-family:Verdana;">a previous command. Let's start with <b>print Hello</b>:<br /><span style="font-family:'Courier New';">    $ print Hello</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    Hello</span><br />We could change Hello to something else like this.<br /><span style="font-family:'Courier New';">    $ r Hello=Goodbye print</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    print Goodbye</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    Goodbye</span></p>
<p></span></span><br />
<h2 style="font-size:14pt;"><a name="14_Job_Control" id="14_Job_Control"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><i>14 Job Control</i></span></span></h2>
<h2 style="font-size:14pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h2>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Job control allows programs to be stopped and restarted, moved between the foreground and background, their processing status to be displayed, and more. To enable the job control feature, the monitor option must be enabled with the set command:<br /><b><span style="font-family:Georgia;">                $ set —o monitor</span></b><br style="font-family:Georgia;" /><span style="font-family:Verdana;">or</span><br style="font-family:Georgia;" /><b><span style="font-family:Georgia;">                $ set —m</span></b><br />This can be put into the <b>.profile</b> file so that job control is automatically enabled at login.</p>
<p>14.1 Manipulating Jobs<br />Jobs running in the foreground are suspended by typing <b>Ctl-z</b> (Control-z). So instead of waiting for the long-running <b>split</b> command to complete, it is interrupted using Ctl-z:<span style="font-family:'Courier New';"><br />    $ split —5000 hugefile</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    Ctl-z</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    [3] + Stoppedsplit —5000 hugefile</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $</p>
<p></span>Stopped and backgrounded jobs are brought back into the foreground with the <b>fg</b> command. If no argument is given, the current (most recently stopped or backgrounded) job is used. The stopped split job is brought back into the foreground with fg:<br /><span style="font-family:'Courier New';">    $ fg</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    split —5000 hugefile<br /><span style="font-family:Verdana;">or </span><br />    $ fg %3<br /></span><br />Stopped jobs are put into the background with the <b>bg </b>command.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="14_2_Checking_Job_Status" id="14_2_Checking_Job_Status"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">14.2 Checking Job Status</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The status and other information about all jobs is displayed using the <b>jobs</b> command. The <b>jobs -l</b> command shows the same information, along with the process ids, while <b><span style="font-family:Georgia;">jobs -p</span></b> only gives you the process ids.<br /><span style="font-family:'Courier New';">    $ jobs —l</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    [3] + 466 Stopped split —5000 hugefile</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    [2] — 465 Running find / —name core —print &amp;</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    [1] 463 Running sleep 25 &amp;</p>
<p></span>Stopped or background jobs are terminated with the <b>kill</b> command.</p>
<p>You can make the Korn shell wait for some or all background jobs to complete with the <b>wait</b> command. If no argument is given, the Korn shell waits for <u>all background jobs</u> to complete.<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span><br style="font-family:Verdana;" /></span><br /></span></span><br />
<h3 style="font-size:12pt;"><a name="14_3_Job_Control" id="14_3_Job_Control"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">14.3 Job Control</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;">
<div id="p4e8" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><a href="http://docs.google.com/File?id=dd6nw3mt_165hjfw2fdd_b" target="_blank"><img src="http://docs.google.com/File?id=dd6nw3mt_165hjfw2fdd_b" style="border-style:initial;border-color:initial;border-width:0;" /></a></div>
<p>Jobs being executed in the background are prevented from generating output by setting <b><span style="font-family:Georgia;">stty tostop</span></b>. Let's run the find job again with the <b>tostop</b> option enabled:<br /><span style="font-family:'Courier New';">    $ stty tostop</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ find / —name core —print &amp;</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    [2] 1460<br /><span style="font-family:Verdana;">The <b><span style="font-family:Georgia;">stty tostop</span></b> command can be put into your profile file so that </span><span style="font-family:Verdana;">background job output is by default disabled.</span></span></span></span></span></span><br /><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br />The <b><span style="font-family:Georgia;">nohup </span></b>command can also be used to direct output from background jobs. It causes standard output and standard error to be automatically sent to <b>nohup.out</b>, or whatever file you give it. One added benefit. The <b>nohup</b> command will keep jobs running, even if you log out. Here we run the <b>find</b> job again using <b>nohup</b>. First we need to enable background job output:<br /><span style="font-family:'Courier New';">    $ stty —tostop</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ nohup find / —name core —print &amp;</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    [2] 1469</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ wait</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    Sending output to 'nohup.out'</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    [2] + Done nohup find / —name core —print &amp;</span><br />The find job output is in <b>nohup.out</b>:<br /><span style="font-family:'Courier New';">    $ cat nohup.out</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    /usr/lbin/core</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    /home/anatole/bin/core</span></p>
<p>14.4 Job Names
<div id="y2h2" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><img src="http://docs.google.com/File?id=dd6nw3mt_166cds9fbf2_b" style="width:431px;height:185px;" /></p>
</div>
<p></span></span>
<div style="text-align:left;margin-top:0;margin-bottom:0;">
<h2 style="font-size:14pt;"><a name="15_Performing_Arithmetic" id="15_Performing_Arithmetic"></a><i>15 Performing Arithmetic</i></h2>
<p>All of the operators from the C programming language (except ++, --, and ?:) are now supported by the Korn shell.</div>
<p><span style="font-family:'Courier New';"></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br /></span></span><br />
<h3 style="font-size:12pt;"><a name="15_1_The_let_Command" id="15_1_The_let_Command"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">15.1 The let Command</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Integer arithmetic can be done with the let command and arithmetic expressions. The format for the let command is:<br /><span style="font-family:Georgia;"><b>                let</b>  "<i>arithmetic-expression</i>"</span><br />where arithmetic-expressions can contain constants, operators, and Korn shell variables. <b>Double quotes</b> are used with arithmetic expressions that contain white space or operators that have special meaning to the Korn shell.</p>
<p>Notice that in arithmetic expressions, regular variables can be referenced by name only, and do not have to be preceded by $ for substitution to be performed. Both<br /><span style="font-family:'Courier New';">    $ let "X=X + 1"</span><br />and<br /><span style="font-family:'Courier New';">    $ let "X=$X + 1"</span><br />are equivalent. The first format is preferred because parameter expansion does not have to be performed.
<div id="dspu" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><img src="http://docs.google.com/File?id=dd6nw3mt_167gmh78ndp_b" style="width:431px;height:592px;" /></p>
</div>
<p></span></span>
<div style="text-align:left;margin-top:0;margin-bottom:0;">
<h3 style="font-size:12pt;"><a name="15_2_The_Command" id="15_2_The_Command"></a>15.2 The ((...)) Command</h3>
<p>The ((...)) command is equivalent to the let command, except that all characters between the (( and )) are treated as quoted arithmetic expressions. This is more convenient to use than let, because many of the arithmetic operators have special meaning to the Korn shell. The following commands are equivalent:<br /><span style="font-family:'Courier New';">    $ let "X=X + 1"</span><br style="font-family:'Courier New';" /><span style="font-family:Verdana;">and</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ ((X=X + 1))</span></div>
<p><span style="font-family:'Courier New';"></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br /></span></span><br />
<h3 style="font-size:12pt;"><a name="15_3_Declaring_Integer_Variabl" id="15_3_Declaring_Integer_Variabl"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">15.3 Declaring Integer Variables</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">As with ordinary variables, integer variables need not be declared. A variable can simply be given an integer value, and then used in an arithmetic expression. However, variables can be explicitly declared integer type by using the <b>typeset -i</b> command. There is also another command called <b>integer</b>, which is equivalent to <b>typeset -i</b>.</p>
<p>Arithmetic can be performed directly on integer variables without using the let or ((...)) commands, as long as the integer value is being assigned a value. In other words, you can do this:<br /><span style="font-family:'Courier New';">    $ integer DAYS="4 + 3"</span><br />instead of<br /><span style="font-family:'Courier New';">    $ ((DAYS=4 + 3))</span><br />or<br /><span style="font-family:'Courier New';">    $ let "DAYS=4 + 3"</span></p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="15_4_Arithmetic_Constants" id="15_4_Arithmetic_Constants"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">15.4 Arithmetic Constants</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The format for arithmetic constants is:<br /><i><span style="font-family:Georgia;">   <b> </b><b>    number</b></span></i><br />or<br /><i><span style="font-family:Georgia;">    <b>    base#number</b></span></i><br />where <u>base is a whole number between 2 and 36, and number is any non-negative integer</u>. If not specified, the default base is 10. The arithmetic base of a variable can be set with the <b>typeset -i</b><i><span style="font-family:Georgia;"><b>n</b> </span></i>command, or by prepending base# to the value. In this example, variable X is set to 5 in base 2 using both formats:<br /><span style="font-family:'Courier New';">    $ typeset —i2 X=5</span><br />or<br /><span style="font-family:'Courier New';">    $ typeset —i X=2#101     <span style="color:rgb(56,118,29);">#Note here 101 denotes 5 in decimal. </span></span></p>
<p>If you want to display the value of X in another base, just reset the base with the </span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b>typeset -i</b><i><span style="font-family:Georgia;"><b>n</b> </span></i></span></span></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;">command. Here it is reset to base 3:<br /><span style="font-family:'Courier New';">    $ typeset —i3 X</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $X</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    3#12</p>
<p></span></span></span><br />
<h3 style="font-size:12pt;"><a name="15_5_Random_Numbers" id="15_5_Random_Numbers"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">15.5 Random Numbers</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The Korn shell provides a special variable, <b>RANDOM</b>, which is used to generate random numbers in the range from 0 to 32767.</p>
<p>You can also initialize a sequence of random numbers by setting <b>RANDOM</b> to a value. Here, <b>RANDOM</b> is set to 7. When subsequently accessed, the values 2726 and 18923 are returned:<br /><span style="font-family:'Courier New';">    $ RANDOM=7</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $RANDOM</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    2726</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $RANDOM</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    18923</span><br />When RANDOM is reset to 7 again, the same numbers are returned:<br /><span style="font-family:'Courier New';">    $ RANDOM=7</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $RANDOM</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    2726</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $RANDOM</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    18923</span><br />If RANDOM is unset, the special meaning is removed, even if reset.</p>
<p></span></span><br />
<h2 style="font-size:14pt;"><a name="16_The_Environment" id="16_The_Environment"></a><i><span style="font-family:'Courier New';"><span style="font-family:Verdana;">16 The Environment</span></span></i></h2>
<h2 style="font-size:14pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h2>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">
<div id="i4_8" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><img src="http://docs.google.com/File?id=dd6nw3mt_168dd38bmfm_b" style="width:472px;height:714px;" /></div>
<p></span></span></div>
<p></span></p>

            
          </p>
        </div>
      
    </div>

    <div class="pagination clearfix mb1 mt4">
  <div class="left">
    
      
        <a class="pagination-item" href="/page18/">Newer</a>
      
    
  </div>
  <div class="right">
    
      <a class="pagination-item" href="/page20/">Older</a>
    
  </div>
</div>

  
</div>

      </div>
    </div>
  </div>

  <footer class="center">
    <div class="measure">
        <small>
            <p>&copy; 2007-2016 by <a href="http://www.bo-yang.net/">Bo Yang</a>. &nbsp; <script type="text/javascript" src="//rc.revolvermaps.com/0/0/3.js?i=493pvkdo4nt&amp;b=0&amp;s=20&amp;m=2&amp;cl=ffffff&amp;co=010020&amp;cd=aa0000&amp;v0=60&amp;v1=60&amp;r=1" async="async"></script>
 </p>

            <p>Powered by <a href="https://github.com/jekyll/jekyll">Jekyll</a> and <a href="https://github.com/johnotander/pixyll">Pixyll</a>.</p>
        </small>
    </div>
</footer>

</body>
</html>
