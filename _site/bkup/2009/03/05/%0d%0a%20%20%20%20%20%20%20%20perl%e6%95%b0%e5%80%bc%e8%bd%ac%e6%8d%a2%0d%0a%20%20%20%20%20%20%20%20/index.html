<!DOCTYPE html>
<html lang="en">
<head>
  <title>John Duff - Perl数值转换 </title>
  <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
  <meta name="verify-v1" content="fI45uNHehVNiO9Dt0Fp7XnsV0Z/ozBTkPoS6RlYAe50=" />
  <meta name="y_key" content="6c948e75a617b12d" />
  <meta name='technorati-claim' content='8QN7CWNH8BSJ' />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" media="screen" href="/css/bootstrap.css">
  <link rel="stylesheet" type="text/css" href="/css/default.css" />
  <link rel="stylesheet" type="text/css" href="/css/syntax.css" />
  <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="John Duff's blog" />
</head>

<body class='blog'>
  <div class="container">
    <div class="row">
      <div class="span4 sidebar affix">
        <div class="well">
          <h2 class='site-title'>
            <a href="http://bo-yang.github.io">Bo Yang</a>
          </h2>

		  <p><i>You got to make the back of the fence that nobody will see just as good looking as the front of the fence.</i></p>

          <ul id="navigation" class="clearfix">
            <li class='about'><a href='/about/'>About</a></li>
            <li class='archives'><a href='/archives/'>Archives</a></li>
            <li class="github"><a href="http://github.com/bo-yang" rel='me' class='url'>@github</a></li>
          </ul>
        </div>
      </div>
      <div class="span8 main offset4">
        <div class="well">
          <div class="post">
    <h1>Perl数值转换</h1>
    </p>
<p>As always with Perl there is more than one way to do it. Below are a few examples of approaches to making common conversions between number representations. This is intended to be representational rather than exhaustive.</p>
<p>Some of the examples below use the Bit::Vector module from CPAN. The reason you might choose Bit::Vector over the perl built in functions is that it works with numbers of ANY size, that it is optimized for speed on some operations, and for at least some programmers the notation might be familiar.</p>
<dl>
<dt><a name="How-do-I-convert-hexadecimal-into-decimal">How do I convert hexadecimal into decimal</a></dt>
<dd>
<p>Using perl's built in conversion of 0x notation:</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>    $int = 0xDEADBEEF;
    $dec = sprintf("%d", $int);  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>Using the hex function:</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>    $int = hex("DEADBEEF");
    $dec = sprintf("%d", $int);  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>Using pack:</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>    $int = unpack("N", pack("H8", substr("0" x 8 . "DEADBEEF", -8)));
    $dec = sprintf("%d", $int);  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>Using the CPAN module Bit::Vector:</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>    use Bit::Vector;
    $vec = Bit::Vector-&gt;new_Hex(32, "DEADBEEF");
    $dec = $vec-&gt;to_Dec();  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
</dd>
<dt><a name="How-do-I-convert-from-decimal-to-hexadecimal">How do I convert from decimal to hexadecimal</a></dt>
<dd>
<p>Using sprint:</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>    $hex = sprintf("%X", 3735928559);  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>Using unpack</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>    $hex = unpack("H*", pack("N", 3735928559));  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>Using Bit::Vector</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>    use Bit::Vector;
    $vec = Bit::Vector-&gt;new_Dec(32, -559038737);
    $hex = $vec-&gt;to_Hex();  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>And Bit::Vector supports odd bit counts:</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>    use Bit::Vector;
    $vec = Bit::Vector-&gt;new_Dec(33, 3735928559);
    $vec-&gt;Resize(32); # suppress leading 0 if unwanted
    $hex = $vec-&gt;to_Hex();  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
</dd>
<dt><a name="How-do-I-convert-from-octal-to-decimal">How do I convert from octal to decimal</a></dt>
<dd>
<p>Using Perl's built in conversion of numbers with leading zeros:</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>    $int = 033653337357; # note the leading 0!
    $dec = sprintf("%d", $int);  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>Using the oct function:</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>    $int = oct("33653337357");
    $dec = sprintf("%d", $int);  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>Using Bit::Vector:</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>    use Bit::Vector;
    $vec = Bit::Vector-&gt;new(32);
    $vec-&gt;Chunk_List_Store(3, split(//, reverse "33653337357"));
    $dec = $vec-&gt;to_Dec();  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
</dd>
<dt><a name="How-do-I-convert-from-decimal-to-octal">How do I convert from decimal to octal</a></dt>
<dd>
<p>Using sprintf:</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>    $oct = sprintf("%o", 3735928559);  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>Using Bit::Vector</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>    use Bit::Vector;
    $vec = Bit::Vector-&gt;new_Dec(32, -559038737);
    $oct = reverse join('', $vec-&gt;Chunk_List_Read(3));  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
</dd>
<dt><a name="How-do-I-convert-from-binary-to-decimal">How do I convert from binary to decimal</a></dt>
<dd>
<p>Perl 5.6 lets you write binary numbers directly with the 0b notation:</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>	$number = 0b10110110;  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>Using pack and ord</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>    $decimal = ord(pack('B8', '10110110'));  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>Using pack and unpack for larger strings</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>    $int = unpack("N", pack("B32",
	substr("0" x 32 . "11110101011011011111011101111", -32)));
    $dec = sprintf("%d", $int);

    # substr() is used to left pad a 32 character string with zeros.  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>Using Bit::Vector:</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>    $vec = Bit::Vector-&gt;new_Bin(32, "11011110101011011011111011101111");
    $dec = $vec-&gt;to_Dec();  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
</dd>
<dt><a name="How-do-I-convert-from-decimal-to-binary">How do I convert from decimal to binary</a></dt>
<dd>
<p>Using unpack;</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>    $bin = unpack("B*", pack("N", 3735928559));  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>Using Bit::Vector:</p>
<p>&nbsp;</p>
<table border="0" cellspacing="0" cellpadding="1" width="100%" bgcolor="#000000">
<tbody>
<tr>
<td align="middle">
<table border="0" cellspacing="0" cellpadding="4" width="100%" bgcolor="#e8e8e8">
<tbody>
<tr>
<td>
<pre>    use Bit::Vector;
    $vec = Bit::Vector-&gt;new_Dec(32, -559038737);
    $bin = $vec-&gt;to_Bin();  </pre>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p>The remaining transformations (e.g. hex -&gt; oct, bin -&gt; hex, etc.) are left as an exercise to the inclined reader.</p>
</dd>
</dl>

</div>

<small class="meta">Posted March 05, 2009</small>

<div id="comments">
  <h3>Comments</h3>

  <div id="disqus_thread"></div>
  <script type="text/javascript">
    var disqus_shortname = 'johnduff';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

        </div>
      </div>

      <div id="bottom" class="span8 offset4">
        <div class="well">
          <a href="/about/">About</a> |
          <a href="/archives/">Archives</a> |
          <a href="/atom.xml">feed</a>
        </div>
      </div>
    </div>
  </div>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script src="/javascripts/bootstrap.min.js"></script>

  <!-- Google Analytics Code -->
  <script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-9947336-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script');
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 
          'http://www') + '.google-analytics.com/ga.js';
      ga.setAttribute('async', 'true');
      document.documentElement.firstChild.appendChild(ga);
    })();

  </script>
</body>
</html>

