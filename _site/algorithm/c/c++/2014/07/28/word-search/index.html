<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Word Search Problem - Non-recursive Solution &#8211; Bo's Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Bo&#39;s blog.">
    <meta name="author" content="Bo Yang">
    <meta name="keywords" content="Algorithm, C/C++">
    <link rel="canonical" href="http://www.bo-yang.net//algorithm/c/c++/2014/07/28/word-search/">
    <link rel="alternate" type="application/rss+xml" title="RSS Feed for Bo's Blog" href="/feed.xml" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/pixyll.css?201602012112" type="text/css">

    <!-- Fonts -->
    <link href='//fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Lato:900,300' rel='stylesheet' type='text/css'>
    
      <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">
    

    <!-- Google Prettify -->
    <link href="http://www.bo-yang.net//assets/google-code-prettify/desert.css" rel="stylesheet" type="text/css" media="all">

    <!-- MathJax -->
    
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
    

    <!-- Verifications -->
    

    <!-- Open Graph -->
    <!-- From: https://github.com/mmistakes/hpstr-jekyll-theme/blob/master/_includes/head.html -->
    <meta property="og:locale" content="en_US">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Word Search Problem - Non-recursive Solution">
    <meta property="og:description" content="Bo&#39;s blog.">
    <meta property="og:url" content="http://www.bo-yang.net//algorithm/c/c++/2014/07/28/word-search/">
    <meta property="og:site_name" content="Bo&#39;s Blog">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    
        <meta name="twitter:site" content="@bonnyang" />
    
    <meta name="twitter:title" content="Word Search Problem - Non-recursive Solution" />
    <meta name="twitter:description" content="Bo's blog." />
    <meta name="twitter:url" content="http://www.bo-yang.net//algorithm/c/c++/2014/07/28/word-search/" />

    <!-- Icons -->
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-160x160.png" sizes="160x160">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">

    
    <script type="text/javascript">
       (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
       (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
       m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
       })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
       ga('create', 'UA-50551633-1', 'auto');
       ga('send', 'pageview');
    </script>
    
</head>

<body class="site">

	
		<div id="fb-root"></div>
		<script>(function(d, s, id) {
		  var js, fjs = d.getElementsByTagName(s)[0];
		  if (d.getElementById(id)) return;
		  js = d.createElement(s); js.id = id;
		  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5&appId=";
		  fjs.parentNode.insertBefore(js, fjs);
		}(document, 'script', 'facebook-jssdk'));</script>
	

  <div class="site-wrap">
    <header class="site-header px2 px-responsive">
  <div class="mt2 wrap">
    <div class="measure">
        <a href="http://www.bo-yang.net/" class="site-title"><b>Bo's Blog</b></a>
      <nav class="site-nav">
        
    

    

    
        <a href="/archive/">Archive</a>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    


    

    

    

    

    

    

    

    
        <a href="/tags/">Tags</a>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    


    

    
        <a href="/about/">About Me</a>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    


    

    

    

    
        <a href="/contact/">Contact</a>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    


      </nav>
      <div class="clearfix"></div>
      
        <div class="social-icons">
  <div class="social-icons-right">
    
      <a class="fa fa-github" href="https://github.com/bo-yang"></a>
    
    
    
      <a class="fa fa-stack-overflow" href="https://stackoverflow.com/users/boyang"></a>
    
    <a class="fa fa-rss" href="/feed.xml"></a>
    
      <a class="fa fa-twitter" href="https://twitter.com/bonnyang"></a>
    
    
    
    
    
      <a class="fa fa-envelope" href="mailto:bonny95@gmail.com"></a>
    
    
      <a class="fa fa-linkedin" href="https://www.linkedin.com/in/boyanglink"></a>
    
    
    
  </div>
  <div class="right">
    
    
    
  </div>
</div>
<div class="clearfix"></div>

      
    </div>
  </div>
</header>


    <div class="post p2 p-responsive wrap" role="main">
      <div class="measure">
        


<div class="post-header mb2">
  <h1>Word Search Problem - Non-recursive Solution</h1>
  <span class="post-meta">Jul 28, 2014</span><br>
  
  <span class="post-meta small">
  
    2 minute read
  
  </span>
</div>

<article class="post-content">
  <p>The <a href="https://oj.leetcode.com/problems/word-search/">Word Search</a> states:</p>

<blockquote>
  <p>Given a 2D board and a word, find if the word exists in the grid.</p>

  <p>The word can be constructed from letters of sequentially adjacent cell, where “adjacent” cells are those horizontally or vertically neighboring. The same letter cell may not be used more than once.</p>

  <p>For example,</p>

  <p>Given board =</p>

  <p>[</p>

  <p>[“ABCE”],</p>

  <p>[“SFCS”],</p>

  <p>[“ADEE”]</p>

  <p>]</p>
</blockquote>

<blockquote>
  <ul>
    <li>word = “ABCCED”, -&gt; returns <code class="highlighter-rouge">true</code>,</li>
    <li>word = “SEE”, -&gt; returns <code class="highlighter-rouge">true</code>,</li>
    <li>word = “ABCB”, -&gt; returns <code class="highlighter-rouge">false</code>.</li>
  </ul>
</blockquote>

<p>The most popular solution to this problem is recursive, such as <a href="http://yucoding.blogspot.com/2013/02/leetcode-question-124-word-search.html">http://yucoding.blogspot.com/2013/02/leetcode-question-124-word-search.html</a>.</p>

<p>However, I tried to solve this problem without recursion. In my implementation, three stacks are used to record the possible coordinates in <code class="highlighter-rouge">board</code>, the character position in <code class="highlighter-rouge">word</code>(with respect to each candidate cell) and the cells have been accessed to each possible coordinates, repectively.</p>

<p>The first step is finding the possible cells for the first char in <code class="highlighter-rouge">word</code>, and push coordinates, position of the char in <code class="highlighter-rouge">word</code>(here is 0) and accessed cells(here are matched cells) into stacks.</p>

<p>The second step is exploring all the neighbors of cells in stack, and match each char in <code class="highlighter-rouge">word</code> respectively. For a match, push contexts into stack and try to match the next char. For a mismatch, pop the top of stacks and try another candidate. If the search could reach the end of the word, then we successfully find the word. If the stacks turns empty and there are still chars left, that means the seach fails.</p>

<p>Following is my C++ implementation of the non-recursive solution.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>class Solution {
public:
    bool exist(vector&lt;vector&lt;char&gt; &gt; &amp;board, string word) {
		if(board.empty())
			return false;

		std::stack&lt;std::pair&lt;int,int&gt;&gt; st_coord; // coordinates of the board
		std::stack&lt;int&gt; st_char; // store characters of the words
		vector&lt;std::pair&lt;int,int&gt; &gt; vec;
		std::stack&lt;vector&lt;std::pair&lt;int,int&gt; &gt; &gt; st_access;
		bool found=false;
        for(int l=0;l&lt;word.length();) {
			if(l==0) { // Find the first character of word in board
				for(int i=0;i&lt;board.size();++i) {
					for(int j=0;j&lt;board[0].size();++j)
						if(board[i][j]==word[l]){
							st_coord.push(std::pair&lt;int,int&gt;(i,j));
							st_char.push(l);
							vec.push_back(std::pair&lt;int,int&gt;(i,j));
							st_access.push(vec);
							vec.pop_back(); // do not affect other candidates
							if(word.size()==1) 
								return true;
						}
				}
				l++;
			} else {
				if(st_coord.empty()) // cannot find the first character
					break;

				// Explore all possible cells to match each character of the word
				while(!st_coord.empty()) {
					int x=st_coord.top().first;
					int y=st_coord.top().second;
					vec=st_access.top();
					l=st_char.top()+1;
					if(l==word.length()) {
						found=true;
						break;
					}
					
					st_coord.pop();
					st_char.pop();
					st_access.pop();

					if(x-1&gt;=0 &amp;&amp; board[x-1][y]==word[l]) {
						vector&lt;std::pair&lt;int,int&gt; &gt;::iterator got=
							std::find(vec.begin(),vec.end(),std::pair&lt;int,int&gt;(x-1,y));
						if(got==vec.end()) {
							st_coord.push(std::pair&lt;int,int&gt;(x-1,y));
							st_char.push(l);
							vec.push_back(std::pair&lt;int,int&gt;(x-1,y));
							st_access.push(vec);
							vec.pop_back(); // do not affect other candidates
						}
					}
					if(x+1&lt;board.size() &amp;&amp; board[x+1][y]==word[l]) {
						vector&lt;std::pair&lt;int,int&gt; &gt;::iterator got=
							std::find(vec.begin(),vec.end(),std::pair&lt;int,int&gt;(x+1,y));
						if(got==vec.end()) {
							st_coord.push(std::pair&lt;int,int&gt;(x+1,y));
							st_char.push(l);
							vec.push_back(std::pair&lt;int,int&gt;(x+1,y));
							st_access.push(vec);
							vec.pop_back(); // do not affect other candidates
						}
					}
					if(y-1&gt;=0 &amp;&amp; board[x][y-1]==word[l]) {
						vector&lt;std::pair&lt;int,int&gt; &gt;::iterator got=
							std::find(vec.begin(),vec.end(),std::pair&lt;int,int&gt;(x,y-1));
						if(got==vec.end()) {
							st_coord.push(std::pair&lt;int,int&gt;(x,y-1));
							st_char.push(l);
							vec.push_back(std::pair&lt;int,int&gt;(x,y-1));
							st_access.push(vec);
							vec.pop_back(); // do not affect other candidates
						}
					}
					if(y+1&lt;board[0].size() &amp;&amp; board[x][y+1]==word[l]) {
						vector&lt;std::pair&lt;int,int&gt; &gt;::iterator got=
							std::find(vec.begin(),vec.end(),std::pair&lt;int,int&gt;(x,y+1));
						if(got==vec.end()) {
							st_coord.push(std::pair&lt;int,int&gt;(x,y+1));
							st_char.push(l);
							vec.push_back(std::pair&lt;int,int&gt;(x,y+1));
							st_access.push(vec);
							vec.pop_back(); // do not affect other candidates
						}
					}
				}
			} // end else
		} // end for l

		return found;
    }
};
</code></pre>
</div>

</article>


  <div class="share-page">
  Share this post!

  <div class="share-links">
    
      <a class="fa fa-facebook" href="https://facebook.com/sharer.php?u=http://www.bo-yang.net//algorithm/c/c++/2014/07/28/word-search/" rel="nofollow" target="_blank" title="Share on Facebook"></a>
    

    
      <a class="fa fa-twitter" href="https://twitter.com/intent/tweet?text=Word Search Problem - Non-recursive Solution&url=http://www.bo-yang.net//algorithm/c/c++/2014/07/28/word-search/" rel="nofollow" target="_blank" title="Share on Twitter"></a>
    

    
      <a class="fa fa-google-plus" href="https://plus.google.com/share?url=http://www.bo-yang.net//algorithm/c/c++/2014/07/28/word-search/" rel="nofollow" target="_blank" title="Share on Google+"></a>
    

    
      <a class="fa fa-linkedin" href="http://www.linkedin.com/shareArticle?url=http://www.bo-yang.net//algorithm/c/c++/2014/07/28/word-search/&title=Word Search Problem - Non-recursive Solution" rel="nofollow" target="_blank" title="Share on LinkedIn"></a>
    

    

    
      <a class="fa fa-tumblr" href="http://www.tumblr.com/share/link?url=http://www.bo-yang.net//algorithm/c/c++/2014/07/28/word-search/&name=Word Search Problem - Non-recursive Solution" rel="nofollow" target="_blank" title="Share on Tumblr"></a>
    

    
      <a class="fa fa-reddit" href="http://reddit.com/submit?url=http://www.bo-yang.net//algorithm/c/c++/2014/07/28/word-search/&title=Word Search Problem - Non-recursive Solution" rel="nofollow" target="_blank" title="Share on Reddit"></a>
    

    

    
      <a class="fa fa-hacker-news" onclick="parent.postMessage('submit','*')" href="https://news.ycombinator.com/submitlink?u=http://www.bo-yang.net//algorithm/c/c++/2014/07/28/word-search/&t=Word Search Problem - Non-recursive Solution" rel="nofollow" target="_blank" title="Share on Hacker News"></a>
    
  </div>
</div>





<center><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Banner_728x90 -->
<ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-4220046549022535"
     data-ad-slot="5852972202"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</center>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-50551633-1', 'auto');
  ga('send', 'pageview');

</script>



  <div id="disqus_thread"></div>
  <script type="text/javascript">
    var disqus_shortname  = 'boyang';
    var disqus_identifier = '/algorithm/c/c++/2014/07/28/word-search';
    var disqus_title      = 'Word Search Problem - Non-recursive Solution';

    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>



  <div class="fb-comments" data-href="http://www.bo-yang.net//algorithm/c/c++/2014/07/28/word-search/" data-width="100%" data-numposts="10"></div>



  <h3 class="related-post-title">Related Posts</h3>
  
    <div class="post ml2">
      <a href="/network/c/c++/click/2016/01/26/gen-hex-dump/" class="post-link">
        <h4 class="post-title">Generate Wireshark-Understandable Hexdump</h4>
        <p class="post-summary"></p>
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/notes/unix/linux/2015/08/31/centos7-install-tftp-server/" class="post-link">
        <h4 class="post-title">A Complete Guide For Installing TFTP Server In CentOS 7</h4>
        <p class="post-summary"></p>
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/notes/unix/linux/2015/08/20/linux-system-log-2/" class="post-link">
        <h4 class="post-title">How To Use Local Facilities For Logging?</h4>
        <p class="post-summary"></p>
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/notes/unix/linux/openwrt/2015/05/27/retrieve-last-log/" class="post-link">
        <h4 class="post-title">Retrieve Last Log After Crash</h4>
        <p class="post-summary"></p>
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/notes/unix/linux/openwrt/2015/04/02/customize-linux-system-log-timestamp/" class="post-link">
        <h4 class="post-title">Customizing OpenWRT System Log Timestamp</h4>
        <p class="post-summary"></p>
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/notes/unix/linux/2015/03/30/debug-kernel-space-memory-leak/" class="post-link">
        <h4 class="post-title">Debug Kernel Space Memory Leak</h4>
        <p class="post-summary"></p>
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/notes/unix/linux/2015/01/12/linux-system-log/" class="post-link">
        <h4 class="post-title">Linux System Log</h4>
        <p class="post-summary"></p>
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/notes/network/2015/01/07/click-notes-click-language/" class="post-link">
        <h4 class="post-title">Click Notes II - Click Script Language</h4>
        <p class="post-summary"></p>
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/notes/network/2014/12/23/click-notes-overview/" class="post-link">
        <h4 class="post-title">Click Notes I - Overview</h4>
        <p class="post-summary"></p>
      </a>
    </div>
  
    <div class="post ml2">
      <a href="/unix/linux/notes/2014/12/19/remote-local-linux-develop-env-2/" class="post-link">
        <h4 class="post-title">Building Remote+Local *nix Develop Environment(II)</h4>
        <p class="post-summary"></p>
      </a>
    </div>
  


      </div>
    </div>
  </div>

  <footer class="center">
  <div class="measure">
      <small>
      <p>&copy; 2007-2016 by <a href="http://www.bo-yang.net/">Bo Yang. </a></p>
         
      Theme crafted with &lt;3 by <a href="http://johnotander.com">John Otander</a> (<a href="https://twitter.com/4lpine">@4lpine</a>).<br>
      &lt;/&gt; available on <a href="https://github.com/johnotander/pixyll">Github</a>.
    </small>
  </div>
</footer>

</body>
</html>
