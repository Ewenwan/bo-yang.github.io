
<!DOCTYPE HTML>
<html lang="en-US" xmlns="http://www.w3.org/1999/xhtml" xmlns:wb="http://open.weibo.com/wb">
<head>
  <title>Combination Sum Problem - A Non-recursive Method | Bo's Blog</title>
  
  <meta name="author" content="Bo Yang" />
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <!--
  <link href="/assets/themes/clear/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  -->

  <!-- Bootstrap -->
  <link href="/assets/themes/clear/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- font-awesome -->
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" rel="stylesheet">

  <!-- Google Prettify -->
  <link href="/assets/themes/clear/google-code-prettify/desert.css" rel="stylesheet" type="text/css" media="all">
  <!-- Google Pretty end -->

  <link href="/assets/themes/clear/css/style.css" rel="stylesheet" type="text/css" media="all" />
  
  
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>

<body>

  <div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <a class="brand" href="/">bo-yang</a>
        <ul class="nav">
          <li><a href="/archive.html">Archive</a></li>
          <li><a href="/about.html">About</a></li>
          <li><a href="/messages.html">Messages</a></li>
        </ul>
        <ul class="pull-right">
          <li>
            <form class="navbar-search" method="get" action="http://www.google.com/search" target="google_window">
              <input id="g_search" type="text" class="search-query" placeholder="Search..." name="q" />
              <input type="submit" name="btnG" style="display:none" id="searchsubmit" value="Search" />
              <input type="hidden" name="ie" value="UTF-8" />
              <input type="hidden" name="oe" value="UTF-8" />
              <input type="hidden" name="hl" value="en-US" />
              <input type="hidden" name="domains" value="http://bo-yang.github.io/" />
              <input type="hidden" name="sitesearch" value="http://bo-yang.github.io/" />
            </form>
          </li>
        </ul>
        <ul class="nav pull-right">
          <li><a href="/atom.xml">RSS</a></li>
        </ul>
      </div>
    </div>
  </div>

  <div class="container page-container">
    <div class="content">
      
<div class="page-header">
	<h1>Combination Sum Problem - A Non-recursive Method</h1>
</div>

<div class="row-fluid page-body">
  <div class="span11 left">
    <div class="main-container shadow">
	  <div class="mainbody thepost">
        <p><a href="https://oj.leetcode.com/problems/combination-sum/">Combination Sum Problem</a>:</p>

<blockquote>
  <p>Given a set of candidate numbers \(C\) and a target number \(T\), find all unique combinations in \(C\) where the candidate numbers sums to \(T\).</p>

  <p>The same repeated number may be chosen from \(C\) unlimited number of times.</p>

  <p>Note:</p>

  <ul>
    <li>All numbers (including target) will be positive integers.</li>
    <li>Elements in a combination (\(a_1, a_2, \cdots , a_k\)) must be in non-descending order. (ie, \(a_1 \leq a_2 \leq \cdots ≤ a_k\)).</li>
    <li>The solution set must not contain duplicate combinations.</li>
  </ul>

  <p>For example, given candidate set 2,3,6,7 and target 7,</p>
</blockquote>

<blockquote>
  <p>a solution set is:
[7]</p>
</blockquote>

<blockquote>
  <p>[2, 2, 3] </p>
</blockquote>

<p>The popular solution is to recursively scan all elements in the cadidate set, such as <a href="http://yucoding.blogspot.com/2012/12/leetcode-question-16-combination-sum.html">http://yucoding.blogspot.com/2012/12/leetcode-question-16-combination-sum.html</a>.</p>

<p>However, I don’t want to use recursion. My solution to this problem is to build trees level by level for each number in the candidate set, where the nodes are candidate set number. The sum of the sequence from root to current node is compared to the target:
* if the sum equals to the target, then we find one solution;
* if the sum is less than the target, then subnodes could be added to this node; 
* if the sum is larger than the target, then this node is a leaf node.</p>

<p>Only numbers equal to or larger than current node can be used as the children of current node. When there is no child could be added, this tree stops growing.</p>

<p>For example, given candidate set, \({2,3,6,7}\) and target 7, the following trees could be built:</p>

<p><img src="/assets/images/2014-06-25/combi_sum_trees.png" alt="Combination sum trees" /></p>

<p>Based on above strategy, my C++ implementation is:</p>

<pre>
class Solution {
public:
	struct Node {
		int val;
		int sum; // sum to now
		vector<int> path; // path to now
		//Node* pre; // parent node
	};

    vector&lt;vector<int> &gt; combinationSum(vector<int> &amp;candidates, int target) {
		vector&lt;vector<int> &gt; trace;

       	for(auto&amp; x:candidates) {
			if(x==target) {
				vector<int> tr={x};
				trace.push_back(tr);
				continue;
			}

		   	// Build trees in level order for every candidate
		   	vector&lt;vector<node>&gt; layers;
			int cur=0;
		   	int next=1;
			vector<node> tmp;
			layers.push_back(tmp);
			layers.push_back(tmp);

		  	Node nd={x,x,{x}};
		   	layers[cur].push_back(nd);
		  	while(layers[cur].size()&gt;0) {
				for(auto&amp; y:layers[cur]) {
					for(auto&amp; z: candidates) {
						if(z&gt;=y.val &amp;&amp; z+y.sum&lt;=target) {
							Node tmp_nd;
							tmp_nd.val=z;
							tmp_nd.sum=z+y.sum;
							tmp_nd.path=y.path;
							tmp_nd.path.push_back(z);
							if(tmp_nd.sum==target) // reach the target, record the trace
								trace.push_back(tmp_nd.path);
							else
								layers[next].push_back(tmp_nd);
						}
					} // end for z
			   	} // end for y
				cur=!cur;
				next=!next;
				layers[next].clear();

				//cout&lt;&lt;endl;; // TEST ONLY
		   	} // end while
	   	}// end for

		return trace;
    } 
};


</node></node></int></int></int></int></int></pre>

      </div>
    </div>

    <div class="main-container shadow">
      <div class="mainbody">
        <div class="bshare-custom">
	<span class='st_facebook_large' displayText='Facebook'></span>
	<span class='st_googleplus_large' displayText='Google +'></span>
	<span class='st_twitter_large' displayText='Tweet'></span>
	<span class='st_sina_large' displayText='Sina'></span>
	<span class='st_linkedin_large' displayText='LinkedIn'></span>
	<span class='st_tumblr_large' displayText='Tumblr'></span>
	<span class='st_sharethis_large' displayText='ShareThis'></span>
	<span class='st_blogger_large' displayText='Blogger'></span>
	<span class='st_email_large' displayText='Email'></span>
</div>
<script type="text/javascript">var switchTo5x=true;</script>
<script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
<script type="text/javascript">stLight.options({publisher: "6e9cb968-ad78-4055-b1e7-1b7ab6751416", doNotHash: false, doNotCopy: false, hashAddressBar: false});</script>

        
        <div class="post-end">
</div>


        <div class="pagination">
          <ul>
          
            <li class="prev"><a href="/2014/06/20/coin-change" title="Coin Change Problem">&larr; Previous</a></li>
          
            <li><a href="/archive.html">Archive</a></li>
          
            <li class="next"><a href="/2014/06/27/nqueens" title="N-Queens Problem">Next &rarr;</a></li>
          
          </ul>
        </div>
      </div>
    </div>

    <div class="main-container shadow">
      <div class="mainbody">
		


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'boyang'; // required: replace example with your forum shortname
     var disqus_identifier = '/2014/06/25/combination-sum';
    var disqus_url = 'http://bo-yang.github.com//2014/06/25/combination-sum';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




	  </div>
    </div>

  </div>

  <div class="span3 right">
    <div class="side-container shadow">
      <div class="sidebar">
        <h4>Published</h4>
        <div class="date"><span>2014-06-25</span></div>
      </div>
    </div>

    <div class="side-container shadow">
      <div class="sidebar">
        
          <h4>Tags</h4>
          <ul class="tag_box">
          
          


  
     
    	<li><a href="/tags.html#Algorithm-ref">Algorithm <span>15</span></a></li>
     
    	<li><a href="/tags.html#C/C++-ref">C/C++ <span>14</span></a></li>
    
  



          </ul>
        
      </div>
    </div>

	
    <div class="side-container shadow">
		<div class="sidebar">
			<!--
			<script>
var linkwithin_site_id = 2140443;
</script>
<script src="http://www.linkwithin.com/widget.js"></script>
<a href="http://www.linkwithin.com/"><img src="http://www.linkwithin.com/pixel.png" alt="Related Posts Plugin for WordPress, Blogger..." style="border: 0" /></a>

			-->
			<h4>Related Posts</h4>
			
  				<li><a href="/2014/06/27/nqueens">N-Queens Problem</a></li>
			
  				<li><a href="/2014/06/20/coin-change">Coin Change Problem</a></li>
			
  				<li><a href="/2014/06/18/text-justification">Text Justification</a></li>
			
  				<li><a href="/2014/06/17/sort-colors">Sort Colors</a></li>
			
  				<li><a href="/2014/06/14/soduku">Check Soduku Solution</a></li>
			
  				<li><a href="/2014/06/12/lru-cache">Least Recently Used(LRU) Cache</a></li>
			
      </div>
  </div>
  	

  	<div class="side-container shadow">
		<div class="sidebar">
			<h4>Recent Posts</h4>
			
  				<li><a href="/2014/06/27/nqueens">N-Queens Problem</a></li>
  			
  				<li><a href="/2014/06/25/combination-sum">Combination Sum Problem - A Non-recursive Method</a></li>
  			
  				<li><a href="/2014/06/20/coin-change">Coin Change Problem</a></li>
  			
  				<li><a href="/2014/06/18/text-justification">Text Justification</a></li>
  			
  				<li><a href="/2014/06/17/sort-colors">Sort Colors</a></li>
  			
  				<li><a href="/2014/06/14/soduku">Check Soduku Solution</a></li>
  			
  				<li><a href="/2014/06/12/lru-cache">Least Recently Used(LRU) Cache</a></li>
  			
  				<li><a href="/2014/05/26/binary-tree-traversal">Binary Tree Operations</a></li>
  			
  				<li><a href="/2014/04/30/fisher-vector-in-action-recognition">Action Recognition with Fisher Vectors</a></li>
  			
  				<li><a href="/2014/03/29/how-to-install-jekyll-in-mac-osx-mavericks">How To Install Jekyll in Mac OSX Mavericks</a></li>
  			
      </div>
    </div>


  </div>
</div>




    </div>

    <footer>
        <p>&copy; 2007 <span id="now_year"></span> Bo Yang. </p>
        <script type="text/javascript">
          var now_year = new Date().getFullYear();
          if (now_year != 2007) {
              $('#now_year').html('- ' + now_year);
          }
	    </script>
        <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      </footer>
  </div>

  <script type="text/javascript" src="/assets/themes/clear/google-code-prettify/prettify.js"></script>
  <script type="text/javascript">
    $(function() {

      $('a[href^="http"]').each(function () {
        $(this).attr('target', '_blank');
      });

      $('pre').addClass('prettyprint linenums').attr('style', 'overflow:auto');
      window.prettyPrint && prettyPrint();

      function traverse($node, len, maxCount) {
        var reachMaxCount = len > maxCount;
        if (reachMaxCount) {
          $node.hide();
        }
        var $contents = $node.contents();
        for (var i = 0; i < $contents.length; ++i) {
          if (reachMaxCount) {
            $contents.eq(i).hide();
            continue;
          }
          if ($contents[i].nodeType == 3) { // TextNode
            var tmp = len;
            var s = $contents[i].nodeValue;
            len += s.length;
            reachMaxCount = len > maxCount;
            if (reachMaxCount && $contents[i].parentNode.nodeName != 'A') {
              $contents[i].nodeValue = s.substring(0, maxCount - tmp);
            }
          }
          else if ($contents[i].nodeType == 1) { // Element
            len = traverse($contents.eq(i), len, maxCount);
          }
        }
        return len;
      }

      $('.post_at_index').each(function() {
        var count = traverse($(this), 0, 400);
        if (count > 400) {
          var thisUrl = $(this).siblings().first().children().attr('href');
          $(this).after('\n<a href="' + thisUrl + '" rel="nofollow">' + 'Read More ...</a>');
        }
      });
    });
  </script>
  

</body>
</html>

