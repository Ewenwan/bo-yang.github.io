
<!DOCTYPE HTML>
<html lang="en-US" xmlns="http://www.w3.org/1999/xhtml" xmlns:wb="http://open.weibo.com/wb">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Check Soduku Solution | Bo's Blog</title>
  
  <meta name="author" content="Bo Yang" />
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <!--
  <link href="/assets/themes/clear/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  -->

  <!-- Bootstrap -->
  <link href="/assets/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="/assets/bootstrap/css/bootstrap-theme.min.css" rel="stylesheet">

  <!-- font-awesome -->
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" rel="stylesheet">

  <!-- Google Prettify -->
  <link href="/assets/google-code-prettify/desert.css" rel="stylesheet" type="text/css" media="all">
  <!-- Google Pretty end -->

  <link href="/assets/bootstrap/css/blog-home.css" rel="stylesheet">
  <link href="/assets/bootstrap/css/blog-post.css" rel="stylesheet">
  
  <script src="/assets/bootstrap/js/jquery-1.10.2.js"></script>
  <script src="/assets/bootstrap/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>

<body>

   <!-- navigation bar -->
	<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/">Home</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse navbar-ex1-collapse">
				<ul class="nav navbar-nav">
					<li><a href="/archive.html">Archive</a>
                    </li>
                    <li><a href="/about.html">About</a>
                    </li>
                    <li><a href="/messages.html">Messages</a>
                    </li>
				</ul>
				<ul class="nav navbar-nav pull-right">
		          <li>
		            <form class="navbar-form navbar-search" method="get" action="http://www.google.com/search" target="google_window">
		              <input id="g_search" type="text" class="search-query" placeholder="Search..." name="q" />
		              <input type="submit" name="btnG" style="display:none" id="searchsubmit" value="Search" />
		              <input type="hidden" name="ie" value="UTF-8" />
		              <input type="hidden" name="oe" value="UTF-8" />
		              <input type="hidden" name="hl" value="en-US" />
		              <input type="hidden" name="domains" value="http://bo-yang.github.io/" />
					  <input type="hidden" name="sitesearch" value="http://bo-yang.github.io/" />
					  <button type="submit" class="button button-rounded button-flat-blue">Go</button>
		            </form>
		          </li>
		        </ul>
            </div>
			<!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

  <div class="container">
    <div class="row">
      
<div class="page-header">
	<h1>Check Soduku Solution</h1>
	<p class="lead">by  <a href="/about.html"><strong>Bo Yang</strong></a></p>
	<hr>
	<p>
		<span class="glyphicon glyphicon-time"></span> Posted at 2014-06-14 &nbsp; &nbsp;  <span class="glyphicon glyphicon-tag"></span><a href="/tags.html#Algorithm-ref" rel="nofollow">Algorithm</a>, <span class="glyphicon glyphicon-tag"></span><a href="/tags.html#C/C++-ref" rel="nofollow">C/C++</a>
	</p>
</div>

<div class="col-lg-10">
    <p>The objective of Soduku game is to fill a \(9 \times 9\) grid with digits so that each column, each row, and each of the nine \(3 \times 3\) sub-grids that compose the grid (also called “boxes”, “blocks”, “regions”, or “sub-squares”) contains all of the digits from 1 to 9. A solved Soduku game is like:</p>

<p><img src="/assets/images/sudoku_solution.png" alt="Solved_Suduku" /></p>

<p>To check if a \(9 \times 9\) grid is a valid solution, we need to check every row, every column and \(3 \times 3\) subgrids. It is not hard to check rows and columns, but checking subgrids is little tricky. When considering going through the grid only one time, it will be much harder.</p>

<p>My solution is define a 9-item-long vector to count the occurrences of each element in a row, a 9-item-long vector to count the occurrences of each element in a column, and a \(3 \times 9\) matrix to count the occurrences of elements in the 3 nearby subgrids. The value of each element in grid can be used as the indices of the counting vectors, because they are supposed to be in the range of 0~9. If found one occurrence greater than one in the vectors, then return false.</p>

<pre><code>bool isSoduku(vector&lt;vector&lt;int&gt;&gt; grid) {
	const int dim=3;
	vector&lt;vector&lt;int&gt;&gt; subGridCnt(grid[0].size()/dim,vector&lt;int&gt;(dim*dim+1,0)); // count the occurrences of elements in 3 nearby 3x3 subgrids.
	// check row,column, subgrids
	for(int i=0;i&lt;grid.size();++i) {
		if(i%3==0) { // reset subGridCnt
			subGridCnt.clear();
			for(int cnt=0;cnt&lt;grid[0].size()/dim;++cnt)
				subGridCnt.push_back(vector&lt;int&gt;(dim*dim+1,0));
		}
		vector&lt;int&gt; rowCnt(grid[0].size()+1,0); // count the occurrences of elements in one row.
		vector&lt;int&gt; colCnt(grid.size()+1,0); // count the occurrences of elements in one column.
		for(int j=0;j&lt;grid[i].size();++j) {
			rowCnt[grid[i][j]]++;
			colCnt[grid[j][i]]++;
			subGridCnt[j/3][grid[i][j]]++;
			if(rowCnt[grid[i][j]]&gt;1) {
				cout&lt;&lt;"Error: "&lt;&lt;rowCnt[grid[i][j]]&lt;&lt;" "&lt;&lt;grid[i][j]&lt;&lt;"s found in row "&lt;&lt;i+1&lt;&lt;"."&lt;&lt;endl;
				return false;
			}
			if(colCnt[grid[j][i]]&gt;1) {
				cout&lt;&lt;"Error: "&lt;&lt;colCnt[grid[j][i]]&lt;&lt;" "&lt;&lt;grid[j][i]&lt;&lt;"s found in column "&lt;&lt;i+1&lt;&lt;"."&lt;&lt;endl;
				return false;
			}
			if(subGridCnt[j/3][grid[i][j]]&gt;1) {
				cout&lt;&lt;"Error: duplicate elements found in subgrid &lt;"&lt;&lt;i/3+1&lt;&lt;","&lt;&lt;j/3+1&lt;&lt;"&gt;: "&lt;&lt;grid[i][j]&lt;&lt;"."&lt;&lt;endl;
				return false;
			}
		}
	}
	
	return true;
}
</code></pre>

<p>To test above funciton, following code segment can be used:</p>

<pre><code>int main() {
	vector&lt;vector&lt;int&gt;&gt; grid={ 
		{6,5,7,2,9,1,8,4,3},
		{8,9,4,6,7,3,2,1,5},
		{1,2,3,5,8,4,7,9,6},
		{5,6,8,3,4,7,1,8,2},
		{7,3,1,9,2,8,5,6,4},
		{4,8,2,1,6,5,3,7,9},
		{2,7,6,8,3,9,4,5,1},
		{3,4,5,7,1,6,9,2,8},
		{9,1,8,4,5,2,6,3,7} 
	};

	for(int i=0;i&lt;grid.size();++i) {
		for(int j=0;j&lt;grid[i].size();++j) {
			cout&lt;&lt;grid[i][j]&lt;&lt;" ";
		}
		cout&lt;&lt;endl;
	}
	
	if(isSoduku(grid))
		cout&lt;&lt;"A valid solution!"&lt;&lt;endl;
	else
		cout&lt;&lt;"Not a solution!"&lt;&lt;endl;
}
</code></pre>


	<div align="right">
        <div class="bshare-custom">
	<span class='st_facebook_large' displayText='Facebook'></span>
	<span class='st_googleplus_large' displayText='Google +'></span>
	<span class='st_twitter_large' displayText='Tweet'></span>
	<span class='st_sina_large' displayText='Sina'></span>
	<span class='st_linkedin_large' displayText='LinkedIn'></span>
	<span class='st_tumblr_large' displayText='Tumblr'></span>
	<span class='st_sharethis_large' displayText='ShareThis'></span>
	<span class='st_blogger_large' displayText='Blogger'></span>
	<span class='st_email_large' displayText='Email'></span>
</div>
<script type="text/javascript">var switchTo5x=true;</script>
<script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
<script type="text/javascript">stLight.options({publisher: "6e9cb968-ad78-4055-b1e7-1b7ab6751416", doNotHash: false, doNotCopy: false, hashAddressBar: false});</script>

	</div>

	<!-- page link -->
    <div class="pager">
      <ul>
      
        <li class="previous"><a href="/2014/06/12/lru-cache" title="Least Recently Used(LRU) Cache">&larr; Previous</a></li>
      

      
        <li class="next"><a href="/2014/06/17/sort-colors" title="Sort Colors">Next &rarr;</a></li>
      
      </ul>
    </div>

    <div class="well">
		


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'boyang'; // required: replace example with your forum shortname
     var disqus_identifier = '/2014/06/14/soduku';
    var disqus_url = 'http://bo-yang.github.com//2014/06/14/soduku';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




    </div>


</div>




    </div>

    <footer>
        <p>&copy; 2007 <span id="now_year"></span> Bo Yang. </p>
        <script type="text/javascript">
          var now_year = new Date().getFullYear();
          if (now_year != 2007) {
              $('#now_year').html('- ' + now_year);
          }
	    </script>
      </footer>
  </div>

  <script type="text/javascript" src="/assets/google-code-prettify/prettify.js"></script>
  <script src="/assets/run_prettify.js"></script>
  <script type="text/javascript">
    $(function() {

      $('a[href^="http"]').each(function () {
        $(this).attr('target', '_blank');
      });

      $('pre').addClass('prettyprint linenums').attr('style', 'overflow:auto');
      window.prettyPrint && prettyPrint();

      function traverse($node, len, maxCount) {
        var reachMaxCount = len > maxCount;
        if (reachMaxCount) {
          $node.hide();
        }
        var $contents = $node.contents();
        for (var i = 0; i < $contents.length; ++i) {
          if (reachMaxCount) {
            $contents.eq(i).hide();
            continue;
          }
          if ($contents[i].nodeType == 3) { // TextNode
            var tmp = len;
            var s = $contents[i].nodeValue;
            len += s.length;
            reachMaxCount = len > maxCount;
            if (reachMaxCount && $contents[i].parentNode.nodeName != 'A') {
              $contents[i].nodeValue = s.substring(0, maxCount - tmp);
            }
          }
          else if ($contents[i].nodeType == 1) { // Element
            len = traverse($contents.eq(i), len, maxCount);
          }
        }
        return len;
      }

      $('.post_at_index').each(function() {
        var count = traverse($(this), 0, 400);
        if (count > 400) {
          var thisUrl = $(this).siblings().first().children().attr('href');
          $(this).after('\n<a href="' + thisUrl + '" rel="nofollow">' + 'Read More ...</a>');
        }
      });
    });
  </script>
  
  

</body>
</html>

