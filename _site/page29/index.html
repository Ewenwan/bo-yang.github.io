<!DOCTYPE html>
<html lang="en">
<head>
  <title>John Duff - Home </title>
  <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
  <meta name="verify-v1" content="fI45uNHehVNiO9Dt0Fp7XnsV0Z/ozBTkPoS6RlYAe50=" />
  <meta name="y_key" content="6c948e75a617b12d" />
  <meta name='technorati-claim' content='8QN7CWNH8BSJ' />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" media="screen" href="/css/bootstrap.css">
  <link rel="stylesheet" type="text/css" href="/css/default.css" />
  <link rel="stylesheet" type="text/css" href="/css/syntax.css" />
  <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="John Duff's blog" />
</head>

<body class='blog'>
  <div class="container">
    <div class="row">
      <div class="span4 sidebar affix">
        <div class="well">
          <h2 class='site-title'>
            <a href="http://bo-yang.github.io">Bo Yang</a>
          </h2>

		  <p><i>You got to make the back of the fence that nobody will see just as good looking as the front of the fence.</i></p>

          <ul id="navigation" class="clearfix">
            <li class='about'><a href='/about/'>About</a></li>
            <li class='archives'><a href='/archives/'>Archives</a></li>
            <li class="github"><a href="http://github.com/bo-yang" rel='me' class='url'>@github</a></li>
          </ul>
        </div>
      </div>
      <div class="span8 main offset4">
        <div class="well">
          <div id='index'>

  <div class="post">
    <h2><a href="/bkup/2009/01/13/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520how%2520do%2520i%2520add%2520a%2520directory%2520to%2520my%2520include%2520path%2520%2528%2540inc%2529%2520at%2520runtime%253f%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/">How do I add a directory to my include path (@INC) at runtime?</a></h2>

    <p>
     <span class="Apple-style-span" style="color:rgb(17,17,17);font-family:Arial;font-size:16px;"><span class="Apple-style-span" style="font-size:20px;font-weight:bold;">How do I add a directory to my include path (@INC) at runtime?</span></span>
<p style="font-size:100%;">Here are the suggested ways of modifying your include path, including environment variables, run-time switches, and in-code statements:</p>
<ul>
<li><a name="the-PERLLIB-environment-variable"></a><b>the PERLLIB environment variable</b>
<pre class="verbatim" style="margin-left:10px;background-image:initial;background-repeat:initial;background-attachment:initial;-webkit-background-clip:initial;-webkit-background-origin:initial;background-color:rgb(238,238,221);width:90%;background-position:initial initial;border-color:rgb(204,204,204);border-style:solid;border-width:1px;padding:10px;">	$ export PERLLIB=/path/to/my/dir
	$ perl program.pl</pre>
</li>
<li><a name="the-PERL5LIB-environment-variable"></a><b>the PERL5LIB environment variable</b>
<pre class="verbatim" style="margin-left:10px;background-image:initial;background-repeat:initial;background-attachment:initial;-webkit-background-clip:initial;-webkit-background-origin:initial;background-color:rgb(238,238,221);width:90%;background-position:initial initial;border-color:rgb(204,204,204);border-style:solid;border-width:1px;padding:10px;">	$ export PERL5LIB=/path/to/my/dir
	$ perl program.pl</pre>
</li>
<li><a name="the-perl--Idir-command-line-flag"></a><b>the perl -Idir command line flag</b>
<pre class="verbatim" style="margin-left:10px;background-image:initial;background-repeat:initial;background-attachment:initial;-webkit-background-clip:initial;-webkit-background-origin:initial;background-color:rgb(238,238,221);width:90%;background-position:initial initial;border-color:rgb(204,204,204);border-style:solid;border-width:1px;padding:10px;">	$ perl -I/path/to/my/dir program.pl</pre>
</li>
<li><a name="the-use-lib-pragma%3a"></a><b>the use lib pragma:</b>
<pre class="verbatim" style="margin-left:10px;background-image:initial;background-repeat:initial;background-attachment:initial;-webkit-background-clip:initial;-webkit-background-origin:initial;background-color:rgb(238,238,221);width:90%;background-position:initial initial;border-color:rgb(204,204,204);border-style:solid;border-width:1px;padding:10px;">	<a class="l_k" href="http://perldoc.perl.org/functions/use.html" style="color:rgb(139,0,139);font-weight:bold;">use</a> <span class="w" style="color:rgb(0,0,0);">lib</span> <span class="q" style="color:rgb(205,85,85);">"$ENV{HOME}/myown_perllib"</span><span class="sc" style="color:rgb(0,0,0);">;</span></pre>
</li>
</ul>
<p style="font-size:100%;">The last is particularly useful because it knows about machine dependent architectures. The lib.pm pragmatic module was first included with the 5.002 release of Perl.</p>


    <small class="meta">January 13, 2009 | <a href='/bkup/2009/01/13/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520how%2520do%2520i%2520add%2520a%2520directory%2520to%2520my%2520include%2520path%2520%2528%2540inc%2529%2520at%2520runtime%253f%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/#disqus_thread'>View Comments</a></small>
  </div>

  <div class="post">
    <h2><a href="/perl/unix/linux/2009/01/13/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520how%2520do%2520i%2520add%2520a%2520directory%2520to%2520my%2520include%2520path%2520%2528%2540inc%2529%2520at%2520runtime%253f%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/">How do I add a directory to my include path (@INC) at runtime?</a></h2>

    <p>
     <span class="Apple-style-span" style="color:rgb(17,17,17);font-family:Arial;font-size:16px;"><span class="Apple-style-span" style="font-size:20px;font-weight:bold;">How do I add a directory to my include path (@INC) at runtime?</span></span>
<p style="font-size:100%;">Here are the suggested ways of modifying your include path, including environment variables, run-time switches, and in-code statements:</p>
<ul>
<li><a name="the-PERLLIB-environment-variable"></a><b>the PERLLIB environment variable</b>
<pre class="verbatim" style="margin-left:10px;background-image:initial;background-repeat:initial;background-attachment:initial;-webkit-background-clip:initial;-webkit-background-origin:initial;background-color:rgb(238,238,221);width:90%;background-position:initial initial;border-color:rgb(204,204,204);border-style:solid;border-width:1px;padding:10px;">	$ export PERLLIB=/path/to/my/dir
	$ perl program.pl</pre>
</li>
<li><a name="the-PERL5LIB-environment-variable"></a><b>the PERL5LIB environment variable</b>
<pre class="verbatim" style="margin-left:10px;background-image:initial;background-repeat:initial;background-attachment:initial;-webkit-background-clip:initial;-webkit-background-origin:initial;background-color:rgb(238,238,221);width:90%;background-position:initial initial;border-color:rgb(204,204,204);border-style:solid;border-width:1px;padding:10px;">	$ export PERL5LIB=/path/to/my/dir
	$ perl program.pl</pre>
</li>
<li><a name="the-perl--Idir-command-line-flag"></a><b>the perl -Idir command line flag</b>
<pre class="verbatim" style="margin-left:10px;background-image:initial;background-repeat:initial;background-attachment:initial;-webkit-background-clip:initial;-webkit-background-origin:initial;background-color:rgb(238,238,221);width:90%;background-position:initial initial;border-color:rgb(204,204,204);border-style:solid;border-width:1px;padding:10px;">	$ perl -I/path/to/my/dir program.pl</pre>
</li>
<li><a name="the-use-lib-pragma%3a"></a><b>the use lib pragma:</b>
<pre class="verbatim" style="margin-left:10px;background-image:initial;background-repeat:initial;background-attachment:initial;-webkit-background-clip:initial;-webkit-background-origin:initial;background-color:rgb(238,238,221);width:90%;background-position:initial initial;border-color:rgb(204,204,204);border-style:solid;border-width:1px;padding:10px;">	<a class="l_k" href="http://perldoc.perl.org/functions/use.html" style="color:rgb(139,0,139);font-weight:bold;">use</a> <span class="w" style="color:rgb(0,0,0);">lib</span> <span class="q" style="color:rgb(205,85,85);">"$ENV{HOME}/myown_perllib"</span><span class="sc" style="color:rgb(0,0,0);">;</span></pre>
</li>
</ul>
<p style="font-size:100%;">The last is particularly useful because it knows about machine dependent architectures. The lib.pm pragmatic module was first included with the 5.002 release of Perl.</p>


    <small class="meta">January 13, 2009 | <a href='/perl/unix/linux/2009/01/13/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520how%2520do%2520i%2520add%2520a%2520directory%2520to%2520my%2520include%2520path%2520%2528%2540inc%2529%2520at%2520runtime%253f%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/#disqus_thread'>View Comments</a></small>
  </div>

  <div class="post">
    <h2><a href="/bkup/2009/01/12/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520shell%25e5%2590%2591perl%25e8%2584%259a%25e6%259c%25ac%25e4%25b8%25ad%25e4%25bc%25a0%25e9%2580%2592%25e5%258f%2598%25e9%2587%258f%25e7%259a%2584%25e6%2596%25b9%25e6%25b3%2595%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/">Shell向Perl脚本中传递变量的方法</a></h2>

    <p><span style="border-collapse:collapse;color:#000000;font-family:song;font-size:13px;"></p>
<div><span style="font-family:Arial;">方法一：</span></div>
<p><span style="font-family:Arial;">In shell using export&nbsp;&nbsp;to output a variable, and&nbsp;in perl using special variable %ENV to get shell's variables.<br />i.e.:<br />--- shell box---<br />$ /bin/ksh<br /># export x=Foo<br /># perl -e 'print $ENV{"x"}'<br />-------------</span></span></p>
<div><span style="border-collapse:collapse;color:#000000;font-size:13px;"><span style="font-family:Arial;"><br /></span></span></div>
<div><span style="border-collapse:collapse;color:#000000;font-size:13px;"><span style="font-family:Arial;">方法二：</span></span></div>
<div><span style="border-collapse:collapse;color:#000000;font-family:song;font-size:13px;"><span style="border-collapse:separate;font-size:12px;letter-spacing:2px;line-height:18px;"><span style="font-family:Arial;">象C一样，PERL也有存储命令行参数的数组@ARGV，可以用来分别处理各个命令行参数；与C不同的是，$ARGV[0]是第一个参数，而不是程序名本身。<br />&nbsp;&nbsp;&nbsp;&nbsp;$var = $ARGV[0]; # 第一个参数<br />&nbsp;&nbsp;&nbsp;&nbsp;$numargs = @ARGV; # 参数的个数<br />&nbsp;&nbsp;PERL中，&lt;&gt;操作符实际上是对数组@ARGV的隐含的引用，其工作原理为：<br />1、当PERL解释器第一次看到&lt;&gt;时，打开以$ARGV[0]为文件名的文件；<br />2、执行动作shift(@ARGV); 即把数组@ARGV的元素向前移动一个，其元素数量即减少了一个。<br />3、&lt;&gt;操作符读取在第一步打开的文件中的所有行。<br />4、读完后，解释器回到第一步重复。<br />&nbsp;&nbsp;例：<br />&nbsp;&nbsp;&nbsp;&nbsp;@ARGV = ("myfile1", "myfile2"); #实际上由命令行参数赋值<br />&nbsp;&nbsp;&nbsp;&nbsp;while ($line = &lt;&gt;) {<br />&nbsp;&nbsp;&nbsp;&nbsp;print ($line);<br />&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<br />&nbsp;&nbsp;将把文件myfile1和myfile2的内容打印出来。</span></span><br /></span></div>


    <small class="meta">January 12, 2009 | <a href='/bkup/2009/01/12/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520shell%25e5%2590%2591perl%25e8%2584%259a%25e6%259c%25ac%25e4%25b8%25ad%25e4%25bc%25a0%25e9%2580%2592%25e5%258f%2598%25e9%2587%258f%25e7%259a%2584%25e6%2596%25b9%25e6%25b3%2595%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/#disqus_thread'>View Comments</a></small>
  </div>

  <div class="post">
    <h2><a href="/perl/unix/linux/2009/01/12/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520shell%25e5%2590%2591perl%25e8%2584%259a%25e6%259c%25ac%25e4%25b8%25ad%25e4%25bc%25a0%25e9%2580%2592%25e5%258f%2598%25e9%2587%258f%25e7%259a%2584%25e6%2596%25b9%25e6%25b3%2595%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/">Shell向Perl脚本中传递变量的方法</a></h2>

    <p><span style="border-collapse:collapse;color:#000000;font-family:song;font-size:13px;"></p>
<div><span style="font-family:Arial;">方法一：</span></div>
<p><span style="font-family:Arial;">In shell using export&nbsp;&nbsp;to output a variable, and&nbsp;in perl using special variable %ENV to get shell's variables.<br />i.e.:<br />--- shell box---<br />$ /bin/ksh<br /># export x=Foo<br /># perl -e 'print $ENV{"x"}'<br />-------------</span></span></p>
<div><span style="border-collapse:collapse;color:#000000;font-size:13px;"><span style="font-family:Arial;"><br /></span></span></div>
<div><span style="border-collapse:collapse;color:#000000;font-size:13px;"><span style="font-family:Arial;">方法二：</span></span></div>
<div><span style="border-collapse:collapse;color:#000000;font-family:song;font-size:13px;"><span style="border-collapse:separate;font-size:12px;letter-spacing:2px;line-height:18px;"><span style="font-family:Arial;">象C一样，PERL也有存储命令行参数的数组@ARGV，可以用来分别处理各个命令行参数；与C不同的是，$ARGV[0]是第一个参数，而不是程序名本身。<br />&nbsp;&nbsp;&nbsp;&nbsp;$var = $ARGV[0]; # 第一个参数<br />&nbsp;&nbsp;&nbsp;&nbsp;$numargs = @ARGV; # 参数的个数<br />&nbsp;&nbsp;PERL中，&lt;&gt;操作符实际上是对数组@ARGV的隐含的引用，其工作原理为：<br />1、当PERL解释器第一次看到&lt;&gt;时，打开以$ARGV[0]为文件名的文件；<br />2、执行动作shift(@ARGV); 即把数组@ARGV的元素向前移动一个，其元素数量即减少了一个。<br />3、&lt;&gt;操作符读取在第一步打开的文件中的所有行。<br />4、读完后，解释器回到第一步重复。<br />&nbsp;&nbsp;例：<br />&nbsp;&nbsp;&nbsp;&nbsp;@ARGV = ("myfile1", "myfile2"); #实际上由命令行参数赋值<br />&nbsp;&nbsp;&nbsp;&nbsp;while ($line = &lt;&gt;) {<br />&nbsp;&nbsp;&nbsp;&nbsp;print ($line);<br />&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<br />&nbsp;&nbsp;将把文件myfile1和myfile2的内容打印出来。</span></span><br /></span></div>


    <small class="meta">January 12, 2009 | <a href='/perl/unix/linux/2009/01/12/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520shell%25e5%2590%2591perl%25e8%2584%259a%25e6%259c%25ac%25e4%25b8%25ad%25e4%25bc%25a0%25e9%2580%2592%25e5%258f%2598%25e9%2587%258f%25e7%259a%2584%25e6%2596%25b9%25e6%25b3%2595%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/#disqus_thread'>View Comments</a></small>
  </div>

  <div class="post">
    <h2><a href="/bkup/2009/01/06/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520perl%25e4%25b8%25ad%25e7%259a%2584%25e7%2589%25b9%25e6%25ae%258a%25e5%258f%2598%25e9%2587%258f%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/">Perl中的特殊变量</a></h2>

    <p>
<span class="Apple-style-span" style="color:rgb(0,0,0);font-size:16px;">
<div style="min-height:1100px;counter-reset:__goog_page__ 0;font-family:Verdana;font-size:10pt;line-height:normal;background-color:rgb(255,255,255);margin:6px;padding:0;">
<h1 style="text-align:center;font-size:18pt;">Perl中的特殊变量<br /></h1>
<div style="margin-top:0;margin-bottom:0;"></div>
<div style="margin-top:0;margin-bottom:0;">
<h3 style="font-size:12pt;">1. $&amp;, $`,$' 用在模式匹配中<br /></h3>
<p><span style="font-family:verdana;"><span style="color:rgb(0,0,0);"><b><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /><br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /><span class="Apple-style-span" style="color:rgb(0,0,255);">$&amp;  用来存放匹配中的值<br /></span><span class="Apple-style-span" style="color:rgb(0,0,255);"><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />$`   用来存放匹配中之前所有字符<br /></span><span class="Apple-style-span" style="color:rgb(0,0,255);"><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />$</span></b></span><span><span class="Apple-style-span" style="color:rgb(0,0,255);"><span class="Apple-style-span" style="font-weight:bold;">'</span></span></span><span style="color:rgb(0,0,0);"><span class="Apple-style-span" style="color:rgb(0,0,255);"><span class="Apple-style-span" style="font-weight:bold;">   用来存放匹配中之后所有字符</span></span><br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /><br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />如：<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /></span><span style="color:rgb(0,128,0);">#</span><span style="color:rgb(0,128,0);">!/usr/bin/perl -w</span><span style="color:rgb(0,128,0);"><br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /></span><span style="color:rgb(0,0,255);">if</span><span style="color:rgb(0,0,0);">(</span><span style="color:rgb(0,0,0);"><b>"</b></span><span style="color:rgb(0,0,0);"><b>Hello good  there,neigbor hello</b></span><span style="color:rgb(0,0,0);"><b>"</b></span><span style="color:rgb(0,0,0);"> </span><span style="color:rgb(0,0,0);">=~</span><span style="color:rgb(0,0,0);"> </span><span style="color:rgb(0,0,0);">/</span><span style="color:rgb(0,0,0);">S(</span><span style="color:rgb(0,0,0);"></span><span style="color:rgb(0,0,0);">w</span><span style="color:rgb(0,0,0);">+</span><span style="color:rgb(0,0,0);">)</span><span style="color:rgb(0,0,0);">,/</span><span style="color:rgb(0,0,0);">)<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />{<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />        </span><span style="color:rgb(0,0,255);">print</span><span style="color:rgb(0,0,0);"> </span><span style="color:rgb(0,0,0);"><b>"</b></span><span style="color:rgb(0,0,0);"><b>That actually matched '$&amp;'. </b></span><span style="color:rgb(0,0,0);"><b>"</b></span><span style="color:rgb(0,0,0);">;<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />        </span><span style="color:rgb(0,0,255);">print</span><span style="color:rgb(0,0,0);"> $`</span><span style="color:rgb(0,0,0);">.</span><span style="color:rgb(0,0,0);"><b>"</b></span><span style="color:rgb(0,0,0);"><b> </b></span><span style="color:rgb(0,0,0);"><b>"</b></span><span style="color:rgb(0,0,0);">;<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />        </span><span style="color:rgb(0,0,255);">print</span><span style="color:rgb(0,0,0);"> $</span><span style="color:rgb(0,0,0);"><b>'</b></span><span style="color:rgb(0,0,0);"><b>." ";<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />}<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /><br /><span class="Apple-style-span" style="font-weight:normal;">执行的结果为：<br /></span><span class="Apple-style-span" style="font-weight:normal;"><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /></span><span class="Apple-style-span" style="font-weight:normal;"><img src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" align="top" alt="" style="border-style:initial;border-color:initial;border-width:0;" /><br /></span><span class="Apple-style-span" style="font-weight:normal;"><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />That actually matched </span></b></span><span style="color:rgb(0,0,0);">'</span><span style="color:rgb(0,0,0);">there</span><span style="color:rgb(0,0,0);">,</span><span style="color:rgb(0,0,0);">'</span><span style="color:rgb(0,0,0);">.<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />Hello good  <br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />neigbor hello<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /><br />－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－<span style="font-family:Verdana;"><img src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" align="top" alt="" style="border-style:initial;border-color:initial;border-width:0;" /><span style="font-family:verdana;"><font size="2">－－－－－－－－</font></span></span></span></span></div>
<div style="margin-top:0;margin-bottom:0;"><span style="font-family:verdana;"><span style="color:rgb(0,0,0);"><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /><br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />另外常用的变量@_<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />@_是子程序的一个私有变量◆；如果有一个全局变量@_，它将在此子程序调用前存储起来，当子程序调用完成后，其早期的值会被重新赋还给@_◆。这意味着当将参数传递给子程序时不用担心它会影响此程序中其它子程序的@_这个变量的值。嵌套的子程序调用时，@_的值和上述类似。甚至此子程序递归调用时，每一次调用将得到新的@_，因此子程序调用时将得到其自身的参数列表。<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /><br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />◆除非调用的子程序前有&amp;而后面没有括号（或者没有参数），此时@_从此调用者的上下文(context)得到。这通常不是个好主意，但有时很<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />有用。</span></span></div>
<div style="margin-top:0;margin-bottom:0;"></div>
<h3 style="font-size:12pt;">2. Perl - $_ and @_<br /></h3>
<p><span style="font-family:Arial;">
<div class="generaltext" style="font-family:Arial, Helvetica, sans-serif;font-style:normal;font-weight:normal;font-variant:normal;color:rgb(0,0,0);background-color:rgb(255,255,255);letter-spacing:normal;text-align:left;vertical-align:top;text-decoration:none;border-bottom-width:0;margin-top:0;margin-bottom:0;"><font size="2">Perl's a great language for special variables - variables that are set up without the programmer having to intervene and providing information ranging from the number of lines read from the <b>current input file ($.)</b> through the <b>current process ID ($$) </b>and the <b>operating system ($^O)</b>. Other special variables effect how certain operations are performed (<b>$| controlling output buffering / flushing</b>, for example), or are fundamental in the operation of certain facilities - no more so than $_ and @_.</p>
<p>Lets clear a misconception. </font><b>$_</b><font size="2"> and </font><b>@_</b><font size="2"> are </font><i>different variables</i><font size="2">. In Perl, you can have a list and a scalar of the same name, and they refer to unrelated pieces of memory.</p>
<p></font><font color="brown"><b>$_ is known as the "default input and pattern matching space"</b>.</font><font size="2"> In other words, if you read in from a file handle at the top of a </font><b>while</b><font size="2"> loop, or run a </font><b>foreach</b><font size="2"> loop and don't name a loop variable, $_ is set up for you. Then any regular expression matches, </font><b>chop</b><font size="2">s (and </font><b>lc</b><font size="2">s and many more) without a parameter, and even </font><b>print</b><font size="2">s assume you want to work on $_. Thus:<br /></font><code>while ($line = &lt;FH&gt;) {<br />  if ($line =~ /Perl/) {<br />    print FHO $line;<br />    }<br />  print uc $line;<br />  }</code></p>
<p><font size="2">Shortens to:<br /></font><code>while (&lt;FH&gt;) {<br />  /Perl/ and<br />    print FHO ;<br />  print uc;<br />  }</code></p>
<p><font color="brown"><b>@_ is the list of incoming parameters to a sub.</b></font><font size="2"> So if you write a sub, you refer to the first parameter in it as </font><b>$_[0]</b><font size="2">, the second parameter as </font><b>$_[1]</b><font size="2"> and so on. And you can refer to</font><b>$_#</b><font size="2"> as the index number of the last parameter:<br /></font><code>sub demo {<br />  print "Called with ",$#_+1," params/n";<br />  print "First param was $_[0]/n";</code></p>
<p><font size="2">Note that the </font><b>English</b><font size="2"> module adds in the ability to refer to the special variables by other longer, but easier to remember, names such as @ARG for @_ and $PID for $$. But </font><code>use English;</code><font size="2"> can have a detrimental performance effect if you're matching regular expressions against long incoming strings. </font></div>
<div style="text-align:left;"></div>
<p></span></div>
<p></span></p>


    <small class="meta">January 06, 2009 | <a href='/bkup/2009/01/06/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520perl%25e4%25b8%25ad%25e7%259a%2584%25e7%2589%25b9%25e6%25ae%258a%25e5%258f%2598%25e9%2587%258f%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/#disqus_thread'>View Comments</a></small>
  </div>

  <div class="post">
    <h2><a href="/perl/unix/linux/2009/01/06/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520perl%25e4%25b8%25ad%25e7%259a%2584%25e7%2589%25b9%25e6%25ae%258a%25e5%258f%2598%25e9%2587%258f%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/">Perl中的特殊变量</a></h2>

    <p>
<span class="Apple-style-span" style="color:rgb(0,0,0);font-size:16px;">
<div style="min-height:1100px;counter-reset:__goog_page__ 0;font-family:Verdana;font-size:10pt;line-height:normal;background-color:rgb(255,255,255);margin:6px;padding:0;">
<h1 style="text-align:center;font-size:18pt;">Perl中的特殊变量<br /></h1>
<div style="margin-top:0;margin-bottom:0;"></div>
<div style="margin-top:0;margin-bottom:0;">
<h3 style="font-size:12pt;">1. $&amp;, $`,$' 用在模式匹配中<br /></h3>
<p><span style="font-family:verdana;"><span style="color:rgb(0,0,0);"><b><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /><br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /><span class="Apple-style-span" style="color:rgb(0,0,255);">$&amp;  用来存放匹配中的值<br /></span><span class="Apple-style-span" style="color:rgb(0,0,255);"><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />$`   用来存放匹配中之前所有字符<br /></span><span class="Apple-style-span" style="color:rgb(0,0,255);"><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />$</span></b></span><span><span class="Apple-style-span" style="color:rgb(0,0,255);"><span class="Apple-style-span" style="font-weight:bold;">'</span></span></span><span style="color:rgb(0,0,0);"><span class="Apple-style-span" style="color:rgb(0,0,255);"><span class="Apple-style-span" style="font-weight:bold;">   用来存放匹配中之后所有字符</span></span><br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /><br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />如：<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /></span><span style="color:rgb(0,128,0);">#</span><span style="color:rgb(0,128,0);">!/usr/bin/perl -w</span><span style="color:rgb(0,128,0);"><br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /></span><span style="color:rgb(0,0,255);">if</span><span style="color:rgb(0,0,0);">(</span><span style="color:rgb(0,0,0);"><b>"</b></span><span style="color:rgb(0,0,0);"><b>Hello good  there,neigbor hello</b></span><span style="color:rgb(0,0,0);"><b>"</b></span><span style="color:rgb(0,0,0);"> </span><span style="color:rgb(0,0,0);">=~</span><span style="color:rgb(0,0,0);"> </span><span style="color:rgb(0,0,0);">/</span><span style="color:rgb(0,0,0);">S(</span><span style="color:rgb(0,0,0);"></span><span style="color:rgb(0,0,0);">w</span><span style="color:rgb(0,0,0);">+</span><span style="color:rgb(0,0,0);">)</span><span style="color:rgb(0,0,0);">,/</span><span style="color:rgb(0,0,0);">)<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />{<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />        </span><span style="color:rgb(0,0,255);">print</span><span style="color:rgb(0,0,0);"> </span><span style="color:rgb(0,0,0);"><b>"</b></span><span style="color:rgb(0,0,0);"><b>That actually matched '$&amp;'. </b></span><span style="color:rgb(0,0,0);"><b>"</b></span><span style="color:rgb(0,0,0);">;<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />        </span><span style="color:rgb(0,0,255);">print</span><span style="color:rgb(0,0,0);"> $`</span><span style="color:rgb(0,0,0);">.</span><span style="color:rgb(0,0,0);"><b>"</b></span><span style="color:rgb(0,0,0);"><b> </b></span><span style="color:rgb(0,0,0);"><b>"</b></span><span style="color:rgb(0,0,0);">;<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />        </span><span style="color:rgb(0,0,255);">print</span><span style="color:rgb(0,0,0);"> $</span><span style="color:rgb(0,0,0);"><b>'</b></span><span style="color:rgb(0,0,0);"><b>." ";<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />}<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /><br /><span class="Apple-style-span" style="font-weight:normal;">执行的结果为：<br /></span><span class="Apple-style-span" style="font-weight:normal;"><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /></span><span class="Apple-style-span" style="font-weight:normal;"><img src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" align="top" alt="" style="border-style:initial;border-color:initial;border-width:0;" /><br /></span><span class="Apple-style-span" style="font-weight:normal;"><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />That actually matched </span></b></span><span style="color:rgb(0,0,0);">'</span><span style="color:rgb(0,0,0);">there</span><span style="color:rgb(0,0,0);">,</span><span style="color:rgb(0,0,0);">'</span><span style="color:rgb(0,0,0);">.<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />Hello good  <br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />neigbor hello<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /><br />－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－<span style="font-family:Verdana;"><img src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" align="top" alt="" style="border-style:initial;border-color:initial;border-width:0;" /><span style="font-family:verdana;"><font size="2">－－－－－－－－</font></span></span></span></span></div>
<div style="margin-top:0;margin-bottom:0;"><span style="font-family:verdana;"><span style="color:rgb(0,0,0);"><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /><br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />另外常用的变量@_<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />@_是子程序的一个私有变量◆；如果有一个全局变量@_，它将在此子程序调用前存储起来，当子程序调用完成后，其早期的值会被重新赋还给@_◆。这意味着当将参数传递给子程序时不用担心它会影响此程序中其它子程序的@_这个变量的值。嵌套的子程序调用时，@_的值和上述类似。甚至此子程序递归调用时，每一次调用将得到新的@_，因此子程序调用时将得到其自身的参数列表。<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" /><br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />◆除非调用的子程序前有&amp;而后面没有括号（或者没有参数），此时@_从此调用者的上下文(context)得到。这通常不是个好主意，但有时很<br /><img align="top" alt="" src="http://images.csdn.net/syntaxhighlighting/OutliningIndicators/None.gif" style="border-style:initial;border-color:initial;border-width:0;" />有用。</span></span></div>
<div style="margin-top:0;margin-bottom:0;"></div>
<h3 style="font-size:12pt;">2. Perl - $_ and @_<br /></h3>
<p><span style="font-family:Arial;">
<div class="generaltext" style="font-family:Arial, Helvetica, sans-serif;font-style:normal;font-weight:normal;font-variant:normal;color:rgb(0,0,0);background-color:rgb(255,255,255);letter-spacing:normal;text-align:left;vertical-align:top;text-decoration:none;border-bottom-width:0;margin-top:0;margin-bottom:0;"><font size="2">Perl's a great language for special variables - variables that are set up without the programmer having to intervene and providing information ranging from the number of lines read from the <b>current input file ($.)</b> through the <b>current process ID ($$) </b>and the <b>operating system ($^O)</b>. Other special variables effect how certain operations are performed (<b>$| controlling output buffering / flushing</b>, for example), or are fundamental in the operation of certain facilities - no more so than $_ and @_.</p>
<p>Lets clear a misconception. </font><b>$_</b><font size="2"> and </font><b>@_</b><font size="2"> are </font><i>different variables</i><font size="2">. In Perl, you can have a list and a scalar of the same name, and they refer to unrelated pieces of memory.</p>
<p></font><font color="brown"><b>$_ is known as the "default input and pattern matching space"</b>.</font><font size="2"> In other words, if you read in from a file handle at the top of a </font><b>while</b><font size="2"> loop, or run a </font><b>foreach</b><font size="2"> loop and don't name a loop variable, $_ is set up for you. Then any regular expression matches, </font><b>chop</b><font size="2">s (and </font><b>lc</b><font size="2">s and many more) without a parameter, and even </font><b>print</b><font size="2">s assume you want to work on $_. Thus:<br /></font><code>while ($line = &lt;FH&gt;) {<br />  if ($line =~ /Perl/) {<br />    print FHO $line;<br />    }<br />  print uc $line;<br />  }</code></p>
<p><font size="2">Shortens to:<br /></font><code>while (&lt;FH&gt;) {<br />  /Perl/ and<br />    print FHO ;<br />  print uc;<br />  }</code></p>
<p><font color="brown"><b>@_ is the list of incoming parameters to a sub.</b></font><font size="2"> So if you write a sub, you refer to the first parameter in it as </font><b>$_[0]</b><font size="2">, the second parameter as </font><b>$_[1]</b><font size="2"> and so on. And you can refer to</font><b>$_#</b><font size="2"> as the index number of the last parameter:<br /></font><code>sub demo {<br />  print "Called with ",$#_+1," params/n";<br />  print "First param was $_[0]/n";</code></p>
<p><font size="2">Note that the </font><b>English</b><font size="2"> module adds in the ability to refer to the special variables by other longer, but easier to remember, names such as @ARG for @_ and $PID for $$. But </font><code>use English;</code><font size="2"> can have a detrimental performance effect if you're matching regular expressions against long incoming strings. </font></div>
<div style="text-align:left;"></div>
<p></span></div>
<p></span></p>


    <small class="meta">January 06, 2009 | <a href='/perl/unix/linux/2009/01/06/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520perl%25e4%25b8%25ad%25e7%259a%2584%25e7%2589%25b9%25e6%25ae%258a%25e5%258f%2598%25e9%2587%258f%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/#disqus_thread'>View Comments</a></small>
  </div>

  <div class="post">
    <h2><a href="/perl/unix/linux/2008/12/29/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520perl%2520notes%2528i%2529%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/">Perl Notes(I)</a></h2>

    <p><span style="font-family:Verdana;font-size:13px;"></p>
<h2 style="font-size:14pt;">Part I&nbsp;&nbsp; &nbsp;Programming Perl</h2>
<h3 style="font-size:12pt;"><a name="1_Perl_Data_Types_029207318089"></a>1 Perl Data Types</h3>
<h4 style="font-size:10pt;"><a name="1_1_Funny_Characters_558344643"></a>1.1 Funny Characters</h4>
<div style="margin-top:0;margin-bottom:0;">
<table style="font-size:1em;line-height:inherit;" border="1">
<tbody>
<tr style="text-align:left;">
<th>Type</th>
<th>Character</th>
<th>Example</th>
<th>Is a name for:</th>
</tr>
<tr style="text-align:left;">
<td>Scalar</td>
<td><tt class="literal">$</tt></td>
<td><tt class="literal">$cents</tt></td>
<td>An individual value (number or string)</td>
</tr>
<tr style="text-align:left;">
<td>Array</td>
<td><tt class="literal">@</tt></td>
<td><tt class="literal">@large</tt></td>
<td>A list of values, keyed by number</td>
</tr>
<tr style="text-align:left;">
<td>Hash</td>
<td><tt class="literal">%</tt></td>
<td><tt class="literal">%interest</tt></td>
<td>A group of values, keyed by string<a name="INDEX-42"></a></td>
</tr>
<tr style="text-align:left;">
<td>Subroutine</td>
<td><tt class="literal">&amp;</tt></td>
<td><tt class="literal">&amp;how</tt></td>
<td>A callable chunk of Perl code<a name="INDEX-43"></a><a name="INDEX-44"></a></td>
</tr>
<tr style="text-align:left;">
<td>Typeglob</td>
<td><tt class="literal">*</tt></td>
<td><tt class="literal">*struck</tt></td>
<td>Everything named&nbsp;<tt class="literal">struck</tt></td>
</tr>
</tbody>
</table>
</div>
<h4 style="font-size:10pt;"><a name="1_2_Singularities_374153536744"></a>1.2&nbsp;Singularities</h4>
<div style="margin-top:0;margin-bottom:0;">Strings and numbers are singular pieces of data, while lists of strings or numbers are plural.&nbsp;Scalar variables can be assigned any form of scalar value: integers, floating-point numbers, strings, and even esoteric things like references to other variables, or to objects.</div>
<div style="margin-top:0;margin-bottom:0;"></div>
<div style="margin-top:0;margin-bottom:0;">
<p style="margin:0;"><a name="INDEX-50"></a><a name="INDEX-51"></a><a name="INDEX-52"></a><a name="INDEX-53"></a><a name="INDEX-54"></a><a name="INDEX-55"></a><a name="INDEX-56"></a><a name="INDEX-57"></a><a name="INDEX-58"></a>As in the Unix&nbsp;shell, you can use different quoting mechanisms to make different kinds of values. Double quotation marks (double quotes) do&nbsp;<em class="emphasis">variable interpolation</em>&nbsp;and&nbsp;<em class="emphasis">backslash interpolation</em>&nbsp;(such as turning&nbsp;<tt class="literal">/n</tt>&nbsp;into a newline) while single quotes suppress interpolation. And backquotes (the ones leaning to the left``) will execute an external program and return the output of the program, so you can capture it as a single string containing all the lines of output.</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">$answer = 42; # an integer
$pi = 3.14159265; # a "real" number
$avocados = 6.02e23; # scientific notation
$pet = "Camel"; # string
$sign = "I love my $pet"; # string with interpolation
$cost = 'It costs $100'; # string without interpolation
$thence = $whence; # another variable's value
$salsa = $moles * $avocados; # a gastrochemical expression
$exit = system("vi $file"); # numeric status of a command
$cwd = `pwd`; # string output from a command</pre>
</blockquote>
<p><a name="INDEX-59"></a><a name="INDEX-60"></a><a name="INDEX-61"></a><a name="INDEX-62"></a>And while we haven't covered fancy values yet, we should point out that scalars may also hold references to other data structures, including subroutines and objects.</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">$ary = /@myarray; # reference to a named array
$hsh = /%myhash; # reference to a named hash
$sub = /&amp;mysub; # reference to a named subroutine

$ary = [1,2,3,4,5]; # reference to an unnamed array
$hsh = {Na =&gt; 19, Cl =&gt; 35}; # reference to an unnamed hash
$sub = sub { print $state }; # reference to an unnamed subroutine

$fido = new Camel "Amelia"; # reference to an object</pre>
</blockquote>
</div>
<div style="margin-top:0;margin-bottom:0;">Following the principle of least surprise, the variable is created with a null value, either&nbsp;<tt class="literal">""</tt>&nbsp;or&nbsp;<tt class="literal">0</tt>. Depending on where you use them, variables will be interpreted automatically as strings, as numbers, or as "true" and "false" values (commonly called Boolean values).&nbsp;Perl will automatically convert the data into the form required by the current context, within reason. For example, suppose you said this:</div>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">$camels = '123';
print $camels + 1, "/n";</pre>
</blockquote>
<p>The original value of&nbsp;<tt class="literal">$camels</tt>&nbsp;is a string, but it is converted to a number to add&nbsp;<tt class="literal">1</tt>&nbsp;to it, and then converted back to a string to be printed out as&nbsp;<tt class="literal">124</tt>.</p>
<div style="margin-top:0;margin-bottom:0;"></div>
<div style="margin-top:0;margin-bottom:0;">
<p style="margin:0;">Similarly, a reference behaves as a reference when you give it a "dereference" context, but otherwise acts like a simple scalar value. For example, we might say:</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">$fido = new Camel "Amelia";
if (not $fido) { die "dead camel"; }
$fido-&gt;saddle();</pre>
</blockquote>
</div>
<h4 style="font-size:10pt;"><a name="1_3_Pluralities_90712378174066"></a>1.3&nbsp;Pluralities</h4>
<div style="margin-top:0;margin-bottom:0;">Perl has two types of multivalued variables: arrays and hashes.</div>
<h5 style="font-size:8pt;"><a name="1_3_1_Array_20716473553329706_14659717492759228"></a>1.3.1 Array</h5>
<div style="margin-top:0;margin-bottom:0;">An&nbsp;<em class="emphasis">array</em>&nbsp;is an ordered list of scalars, accessed[6] by the scalar's position in the list.&nbsp;To assign a list value to an array, you simply group the values together (with a set of parentheses):</div>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">@home = ("couch", "chair", "table", "stove");</pre>
</blockquote>
<p>Conversely, if you use&nbsp;<tt class="literal">@home</tt>&nbsp;in a list context, such as on the right side of a list assignment, you get back out the same list you put in. So you could set four scalar variables from the array like this:</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">($potato, $lift, $tennis, $pipe) = @home;</pre>
</blockquote>
<p>These are called list assignments. They logically happen in parallel, so you can swap two variables by saying:</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">($alpha,$omega) = ($omega,$alpha);</pre>
</blockquote>
<div style="margin-top:0;margin-bottom:0;">Arrays are zero-based.&nbsp;Array subscripts are enclosed in square brackets [like this], so if you want to select an individual array element, you would refer to it as&nbsp;<tt class="literal">$home[</tt><em class="replaceable">n</em><tt class="literal">].</tt></div>
<div style="margin-top:0;margin-bottom:0;"><span style="font-family:'-webkit-monospace';"><br /></span></div>
<div style="margin-top:0;margin-bottom:0;">Since arrays are ordered, you can do various useful operations on them, such as the stack operations&nbsp;<tt class="literal"><span style="font-family:Verdana;">push</span></tt>&nbsp;and&nbsp;<tt class="literal"><span style="font-family:Verdana;">pop</span></tt>.&nbsp;Perl regards the<strong>&nbsp;end&nbsp;</strong>of your array as the top of a stack.</div>
<h5 style="font-size:8pt;"><a name="1_3_2_Hash_35820974223315716_17378652468323708"></a>1.3.2 Hash</h5>
<div style="margin-top:0;margin-bottom:0;">A&nbsp;<em class="emphasis">hash</em>&nbsp;is an unordered set of scalars, accessed&nbsp;by some string value that is associated with each scalar. For this reason hashes are often called&nbsp;<em class="emphasis">associative arrays</em>. &nbsp;A hash has no beginning or end.&nbsp;Since the keys to a hash are not automatically implied by their position, you must supply the key as well as the value when populating a hash.</div>
<div style="text-align:left;margin-top:0;margin-bottom:0;"><span style="color:#000066;"><br /></span></div>
<div style="margin-top:0;margin-bottom:0;">
<p style="margin:0;">Suppose you wanted to translate abbreviated day names to the corresponding full names. You could write the following list assignment:</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">%longday = ("Sun", "Sunday", "Mon", "Monday", "Tue", "Tuesday",
 "Wed", "Wednesday", "Thu", "Thursday", "Fri",
 "Friday", "Sat", "Saturday");</pre>
</blockquote>
<p><a name="INDEX-95"></a><a name="INDEX-96"></a><a name="INDEX-97"></a>But that's rather difficult to read, so Perl provides the&nbsp;<tt class="literal"><strong>=&gt;</strong></tt>&nbsp;(equals sign, greater-than sign) sequence as an alternative separator to the comma. Using this syntactic sugar (and some creative formatting), it is much easier to see which strings are the keys and which strings are the associated values.</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">%longday = (
 "Sun" =&gt; "Sunday",
 "Mon" =&gt; "Monday",
 "Tue" =&gt; "Tuesday",
 "Wed" =&gt; "Wednesday",
 "Thu" =&gt; "Thursday",
 "Fri" =&gt; "Friday",
 "Sat" =&gt; "Saturday",
);</pre>
</blockquote>
</div>
<div style="margin-top:0;margin-bottom:0;">You can select an individual hash element by enclosing the key in braces (those fancy brackets also known as "curlies"). For example, if you want to find out the value associated with&nbsp;<tt class="literal">Wed</tt>&nbsp;in the hash above, you would use&nbsp;<tt class="literal">$longday{"Wed"}</tt>. Note again that you are dealing with a scalar value, so you use&nbsp;<tt class="literal">$</tt>&nbsp;on the front, not&nbsp;<tt class="literal">%</tt>, which would indicate the entire hash.</div>
<div style="margin-top:0;margin-bottom:0;"></div>
<div style="margin-top:0;margin-bottom:0;">
<p style="margin:0;">Linguistically, the relationship encoded in a hash is genitive or possessive, like the word "of" in English, or like "'s". The wife&nbsp;<em class="emphasis">of</em>&nbsp;Adam is Eve, so we write:</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">$wife{"Adam"} = "Eve";</pre>
</blockquote>
</div>
<h5 style="font-size:8pt;"><a name="1_3_3_Complexities_52397375367"></a>1.3.3&nbsp;Complexities</h5>
<div style="margin-top:0;margin-bottom:0;">Perl lets you manipulate simple scalar references that happen to refer to complicated arrays and hashes.&nbsp;To extend our previous example, suppose we want to switch from talking about Adam's wife to Jacob's wife. Now, as it happens, Jacob had four wives. (Don't try this at home.) In trying to represent this in Perl, we find ourselves in the odd situation where we'd like to pretend that Jacob's four wives were really one wife. (Don't try this at home, either.) You might think you could write it like this:</div>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">$wife{"Jacob"} = ("Leah", "Rachel", "Bilhah", "Zilpah"); # WRONG</pre>
</blockquote>
<p><a name="INDEX-106"></a><a name="INDEX-107"></a><a name="INDEX-108"></a><a name="INDEX-109"></a><a name="INDEX-110"></a>But that wouldn't do what you want, because even parentheses and commas are not powerful enough to turn a list into a scalar in Perl. (Parentheses are used for syntactic grouping, and commas for syntactic separation.) Rather, you need to tell Perl explicitly that you want to pretend that a list is a scalar. It turns out that square brackets are powerful enough to do that:&nbsp;&nbsp;</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">$wife{"Jacob"} = ["Leah", "Rachel", "Bilhah", "Zilpah"]; # ok</pre>
</blockquote>
<div style="margin-top:0;margin-bottom:0;">That statement creates an unnamed array and puts a reference to it into the hash element&nbsp;<tt class="literal">$wife{"Jacob"}</tt>.</div>
<div style="margin-top:0;margin-bottom:0;"></div>
<div style="margin-top:0;margin-bottom:0;">suppose we wanted to list not only Jacob's wives but all the sons of each of his wives. In this case we want to treat a hash as a scalar. We can use braces for that. (Inside each hash value we'll use square brackets to represent arrays, just as we did earlier. But now we have an array in a hash in a hash.)</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">$kids_of_wife{"Jacob"} = {
 "Leah" =&gt; ["Reuben", "Simeon", "Levi", "Judah", "Issachar", "Zebulun"],
 "Rachel" =&gt; ["Joseph", "Benjamin"],
 "Bilhah" =&gt; ["Dan", "Naphtali"],
 "Zilpah" =&gt; ["Gad", "Asher"],
};</pre>
</blockquote>
<p>That would be more or less equivalent to saying:</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">$kids_of_wife{"Jacob"}{"Leah"}[0] = "Reuben";
$kids_of_wife{"Jacob"}{"Leah"}[1] = "Simeon";
$kids_of_wife{"Jacob"}{"Leah"}[2] = "Levi";
$kids_of_wife{"Jacob"}{"Leah"}[3] = "Judah";
$kids_of_wife{"Jacob"}{"Leah"}[4] = "Issachar";
$kids_of_wife{"Jacob"}{"Leah"}[5] = "Zebulun";
$kids_of_wife{"Jacob"}{"Rachel"}[0] = "Joseph";
$kids_of_wife{"Jacob"}{"Rachel"}[1] = "Benjamin";
$kids_of_wife{"Jacob"}{"Bilhah"}[0] = "Dan";
$kids_of_wife{"Jacob"}{"Bilhah"}[1] = "Naphtali";
$kids_of_wife{"Jacob"}{"Zilpah"}[0] = "Gad";
$kids_of_wife{"Jacob"}{"Zilpah"}[1] = "Asher";</pre>
</blockquote>
</div>
<h5 style="font-size:8pt;"><a name="1_3_4_Simplicities_95647719036"></a>1.3.4&nbsp;Simplicities</h5>
<div style="margin-top:0;margin-bottom:0;">
<p style="margin:0;"><a name="INDEX-121"></a><a name="INDEX-122"></a><a name="INDEX-123"></a>Perl also has several ways of topicalizing. One important topicalizer is the&nbsp;<tt class="literal">package</tt>&nbsp;declaration. Suppose you want to talk about&nbsp;<tt class="literal">Camel</tt>s in Perl. You'd likely start off your&nbsp;<tt class="literal">Camel</tt>&nbsp;module by saying:</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">package Camel;</pre>
</blockquote>
</div>
<div style="margin-top:0;margin-bottom:0;">Perl will assume from this point on that any unspecified verbs or nouns are about&nbsp;<tt class="literal">Camel</tt>s. It does this by automatically prefixing any global name with the module name "<tt class="literal">Camel::</tt>".</div>
<div style="margin-top:0;margin-bottom:0;"></div>
<div style="margin-top:0;margin-bottom:0;">
<p style="margin:0;"><a name="INDEX-128"></a><a name="INDEX-129"></a>When you say&nbsp;<tt class="literal">package Camel</tt>, you're starting a new package. But sometimes you just want to borrow the nouns and verbs of an existing package. Perl lets you do that with a&nbsp;<tt class="literal">use</tt>&nbsp;declaration, which not only borrows verbs from another package, but also checks that the module you name is loaded in from disk. In fact, you&nbsp;<em class="emphasis">must</em>&nbsp;say something like:</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">use Camel;</pre>
</blockquote>
<p>before you say:</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">$fido = new Camel "Amelia";</pre>
</blockquote>
</div>
<div style="margin-top:0;margin-bottom:0;">
<p style="margin:0;">In fact, some of the built-in modules don't actually introduce verbs at all, but simply warp the Perl language in various useful ways. These special modules we call&nbsp;<em class="emphasis">pragmas</em>. For instance, you'll often see people use the pragma&nbsp;<tt class="literal">strict</tt>, like this:</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">use strict;</pre>
</blockquote>
</div>
<h4 style="font-size:10pt;"><a name="1_4_Verbs_7150770369917154_6162498742341995"></a>1.4 Verbs</h4>
<div style="margin-top:0;margin-bottom:0;">Many of the verbs in Perl are commands: they tell the Perl interpreter to do something.&nbsp;A statement starting with a verb is generally purely imperative and evaluated entirely for its side effects. (We sometimes call these verbs&nbsp;<em class="emphasis">procedures</em>, especially when they're user-defined.)</div>
<div style="margin-top:0;margin-bottom:0;"></div>
<div style="margin-top:0;margin-bottom:0;">Other verbs translate their input parameters into return values, just as a recipe tells you how to turn raw ingredients into something (hopefully) edible. We tend to call these verbs&nbsp;<em class="emphasis">functions.</em></div>
<div style="margin-top:0;margin-bottom:0;"></div>
<div style="margin-top:0;margin-bottom:0;">Verbs are also sometimes called operators (when built-in), or subroutines (when user-defined).&nbsp;Historically, Perl required you to put an ampersand character (<tt class="literal">&amp;</tt>) on any calls to user-defined subroutines (see&nbsp;<tt class="literal">$fido = &amp;fetch();</tt>&nbsp;earlier). But with Perl version 5, the ampersand became optional, so that user-defined verbs can now be called with the same syntax as built-in verbs (<tt class="literal">$fido = fetch();</tt>).&nbsp;We still use the ampersand when talking about the&nbsp;<em class="emphasis">name</em>&nbsp;of the routine, such as when we take a reference to it (<tt class="literal">$fetcher = /&amp;fetch;</tt>).</div>
<div style="margin-top:0;margin-bottom:0;"></div>
<h4 style="font-size:10pt;"><a name="1_5_Filehandles_12350966874510"></a>1.5 Filehandles</h4>
<div style="margin-top:0;margin-bottom:0;">A filehandle is just a name you give to a file, device, socket, or pipe to help you remember which one you're talking about, and to hide some of the complexities of buffering and such. (Internally, filehandles are similar to streams from a language like C++ or I/O channels from BASIC.)</div>
<div style="margin-top:0;margin-bottom:0;"></div>
<div style="margin-top:0;margin-bottom:0;">You create a filehandle and attach it to a file by using<strong>&nbsp;</strong><tt class="literal"><strong>open</strong></tt>. The&nbsp;<tt class="literal"><strong>open</strong></tt>&nbsp;function takes at least two parameters: the filehandle and filename you want to associate it with. Perl also gives you some predefined (and preopened) filehandles.&nbsp;<tt class="literal"><strong>STDIN</strong></tt>&nbsp;is your program's normal input channel, while&nbsp;<tt class="literal"><strong>STDOUT</strong></tt>&nbsp;is your program's normal output channel. And&nbsp;<tt class="literal"><strong>STDERR</strong></tt>&nbsp;is an additional output channel that allows your program to make snide remarks off to the side while it transforms (or attempts to transform) your input into your output.</div>
<div style="margin-top:0;margin-bottom:0;"></div>
<div style="margin-top:0;margin-bottom:0;">
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">open(SESAME, "filename") # read from existing file
open(SESAME, "&lt;filename") # (same thing, explicitly)
open(SESAME, "&gt;filename") # create file and write to it
open(SESAME, "&gt;&gt;filename") # append to existing file
open(SESAME, "| output-pipe-command") # set up an output filter
open(SESAME, "input-pipe-command |") # set up an input filter</pre>
</blockquote>
<p>As you can see, the name you pick for the filehandle is arbitrary. Once opened, the filehandle&nbsp;<tt class="literal">SESAME</tt>&nbsp;can be used to access the file or pipe until it is explicitly closed (with, you guessed it,&nbsp;<tt class="literal"><strong>close(SESAME)</strong></tt>), or until the filehandle is attached to another file by a subsequent&nbsp;<tt class="literal">open</tt>&nbsp;on the same filehandle.</div>
<div style="margin-top:0;margin-bottom:0;"></div>
<div style="margin-top:0;margin-bottom:0;">Once you've opened a filehandle for input, you can read a line using the line reading operator,&nbsp;<tt class="literal">&lt;</tt><tt class="literal">&gt;</tt>.&nbsp;<span style="text-decoration:underline;">The angle operator encloses the filehandle (</span><tt class="literal"><span style="text-decoration:underline;">&lt;SESAME&gt;</span></tt><span style="text-decoration:underline;">) you want to read lines from. The empty angle operator,&nbsp;</span><tt class="literal"><span style="text-decoration:underline;">&lt;&gt;</span></tt><span style="text-decoration:underline;">, will read lines from all the files specified on the command line, or&nbsp;</span><tt class="literal"><span style="text-decoration:underline;">STDIN</span></tt><span style="text-decoration:underline;">, if none were specified</span>.</div>
<div style="margin-top:0;margin-bottom:0;"></div>
<div style="margin-top:0;margin-bottom:0;">
<p style="margin:0;">An example using the&nbsp;<tt class="literal">STDIN</tt>&nbsp;filehandle to read an answer supplied by the user would look something like this:</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">print STDOUT "Enter a number: "; # ask for a number
$number = &lt;STDIN&gt;; # input the number
print STDOUT "The number is $number./n"; # print the number</pre>
</blockquote>
</div>
<div style="margin-top:0;margin-bottom:0;">
<p style="margin:0;"><a name="INDEX-187"></a><a name="INDEX-188"></a><a name="INDEX-189"></a>If you try the previous example, you may notice that you get an extra blank line. This happens because the line-reading operation does not automatically remove the newline from your input line (your input would be, for example, "<tt class="literal">9/n</tt>"). For those times when you do want to remove the newline, Perl provides the&nbsp;<tt class="literal"><strong>chop</strong></tt>&nbsp;and&nbsp;<tt class="literal"><strong>chomp</strong></tt>&nbsp;functions.&nbsp;<tt class="literal"><span style="text-decoration:underline;">chop</span></tt><span style="text-decoration:underline;">&nbsp;will indiscriminately remove (and return) the last character of the string, while&nbsp;</span><tt class="literal"><span style="text-decoration:underline;">chomp</span></tt><span style="text-decoration:underline;">&nbsp;will only remove the end of record marker (generally, "</span><tt class="literal"><span style="text-decoration:underline;">/n</span></tt><span style="text-decoration:underline;">") and return the number of characters so removed.&nbsp;</span>You'll often see this idiom for inputting a single line:</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">chop($number = &lt;STDIN&gt;); # input number and remove newline</pre>
</blockquote>
</div>
<h3 style="font-size:12pt;"><a name="2_Operators__668523520231247"></a>2 Operators</h3>
<h4 style="font-size:10pt;"><a name="2_1_Some_Binary_Arithmetic_Ope_7225654777139425"></a>2.1&nbsp;Some Binary Arithmetic Operators</h4>
<div style="margin-top:0;margin-bottom:0;">
<table style="font-size:1em;line-height:inherit;" border="1">
<tbody>
<tr style="text-align:left;">
<th>Example</th>
<th>Name</th>
<th>Result</th>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">$a + $b</tt></td>
<td>Addition</td>
<td>Sum of&nbsp;<tt class="literal">$a</tt>&nbsp;and&nbsp;<tt class="literal">$b</tt><a name="INDEX-198"></a></td>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">$a * $b</tt></td>
<td>Multiplication</td>
<td>Product of&nbsp;<tt class="literal">$a</tt>&nbsp;and&nbsp;<tt class="literal">$b</tt><a name="INDEX-199"></a></td>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">$a % $b</tt></td>
<td>Modulus</td>
<td>Remainder of&nbsp;<tt class="literal">$a</tt>&nbsp;divided by&nbsp;<tt class="literal">$b</tt></td>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">$a ** $b</tt></td>
<td>Exponentiation</td>
<td><tt class="literal">$a</tt>&nbsp;to the power of&nbsp;<tt class="literal">$b</tt></td>
</tr>
</tbody>
</table>
</div>
<h4 style="font-size:10pt;"><a name="2_2_String_Operators__7529557030647993"></a>2.2&nbsp;String Operators</h4>
<div style="margin-top:0;margin-bottom:0;">
<p style="margin:0;">Perl defines a separate operator (<tt class="literal">.</tt>) for string concatenation:</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">$a = 123;
$b = 456;
print $a + $b; # prints 579
print $a . $b; # prints 123456</pre>
</blockquote>
</div>
<div style="margin-top:0;margin-bottom:0;">
<p style="margin:0;"><a name="INDEX-211"></a><a name="INDEX-212"></a><a name="INDEX-213"></a>There's also a "multiply" operator for strings, called the&nbsp;<em class="emphasis">repeat</em>&nbsp;operator. Again, it's a separate operator (<tt class="literal">x</tt>) to keep it distinct from numeric multiplication:</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">$a = 123;
$b = 3;
print $a * $b; # prints 369
print $a x $b; # prints 123123123</pre>
</blockquote>
</div>
<div style="margin-top:0;margin-bottom:0;">
<p style="margin:0;">The&nbsp;<tt class="literal">x</tt>&nbsp;operator may seem relatively worthless at first glance, but it is quite useful at times, especially for things like this:</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">print "-" x $scrwid, "/n";</pre>
</blockquote>
<p>which draws a line across your screen, presuming&nbsp;<tt class="literal">$scrwid</tt>&nbsp;contains your screen width, and not your screw identifier.</div>
<h4 style="font-size:10pt;"><a name="2_3_Assignment_Operators__48074441868811846"></a>2.3 Assignment Operators</h4>
<div style="margin-top:0;margin-bottom:0;">You can do shortcut with almost any binary operator in Perl, even some that you can't do it with in C:</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">$line .= "/n"; # Append newline to $line.
$fill x= 80; # Make string $fill into 80 repeats of itself.
$val ||= "2"; # Set $val to 2 if it isn't already "true".</pre>
</blockquote>
</div>
<h4 style="font-size:10pt;"><a name="2_4_Unary_Arithmetic_Operators_7676581423729658"></a>2.4 Unary Arithmetic Operators</h4>
<div style="margin-top:0;margin-bottom:0;">
<table style="font-size:1em;line-height:inherit;" border="1">
<tbody>
<tr style="text-align:left;">
<th>Example</th>
<th>Name</th>
<th>Result</th>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">++$a, $a++</tt></td>
<td>Autoincrement</td>
<td>Add 1 to&nbsp;<tt class="literal">$a</tt></td>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">--$a, $a--</tt></td>
<td>Autodecrement</td>
<td>Subtract 1 from&nbsp;<tt class="literal">$a</tt></td>
</tr>
</tbody>
</table>
</div>
<div style="margin-top:0;margin-bottom:0;">The same with C.</div>
<h4 style="font-size:10pt;"><a name="2_5_Logical_Operators__22455949615687132"></a>2.5 Logical Operators</h4>
<div style="margin-top:0;margin-bottom:0;">
<table style="font-size:1em;line-height:inherit;" border="1">
<tbody>
<tr style="text-align:left;">
<th>Example</th>
<th>Name</th>
<th>Result</th>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">$a &amp;&amp; $b</tt></td>
<td>And</td>
<td><tt class="literal">$a</tt>&nbsp;if&nbsp;<tt class="literal">$a</tt>&nbsp;is false,&nbsp;<tt class="literal">$b</tt>&nbsp;otherwise<a name="INDEX-242"></a><a name="INDEX-243"></a></td>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">$a || $b</tt></td>
<td>Or</td>
<td><tt class="literal">$a</tt>&nbsp;if&nbsp;<tt class="literal">$a</tt>&nbsp;is true,&nbsp;<tt class="literal">$b</tt>&nbsp;otherwise<a name="INDEX-244"></a><a name="INDEX-245"></a></td>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">! $a</tt></td>
<td>Not</td>
<td>True if&nbsp;<tt class="literal">$a</tt>&nbsp;is not true</td>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">$a and $b</tt></td>
<td>And</td>
<td><tt class="literal">$a</tt>&nbsp;if&nbsp;<tt class="literal">$a</tt>&nbsp;is false,&nbsp;<tt class="literal">$b</tt>&nbsp;otherwise</td>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">$a or $b</tt></td>
<td>Or</td>
<td><tt class="literal">$a</tt>&nbsp;if&nbsp;<tt class="literal">$a</tt>&nbsp;is true,&nbsp;<tt class="literal">$b</tt>&nbsp;otherwise<a name="INDEX-246"></a></td>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">not $a</tt></td>
<td>Not</td>
<td>True if&nbsp;<tt class="literal">$a</tt>&nbsp;is not true</td>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">$a xor $b</tt></td>
<td>Xor</td>
<td>True if&nbsp;<tt class="literal">$a</tt>&nbsp;or&nbsp;<tt class="literal">$b</tt>&nbsp;is true, but not both<a name="INDEX-247"></a></td>
</tr>
</tbody>
</table>
</div>
<h4 style="font-size:10pt;"><a name="2_6_Some_Numeric_and_String_Co_6402344861999154"></a>2.6&nbsp;Some Numeric and String Comparison Operators</h4>
<div style="margin-top:0;margin-bottom:0;">
<table style="font-size:1em;line-height:inherit;" border="1">
<tbody>
<tr style="text-align:left;">
<th>Comparison</th>
<th>Numeric</th>
<th>String</th>
<th>Return Value</th>
</tr>
<tr style="text-align:left;">
<td>Equal</td>
<td><tt class="literal">==</tt></td>
<td><tt class="literal">eq</tt></td>
<td>True if&nbsp;<tt class="literal">$a</tt>&nbsp;is equal to&nbsp;<tt class="literal">$b</tt><a name="INDEX-257"></a></td>
</tr>
<tr style="text-align:left;">
<td>Not equal</td>
<td><tt class="literal">!=</tt></td>
<td><tt class="literal">ne</tt></td>
<td>True if&nbsp;<tt class="literal">$a</tt>&nbsp;is not equal to&nbsp;<tt class="literal">$b</tt><a name="INDEX-258"></a></td>
</tr>
<tr style="text-align:left;">
<td>Less than</td>
<td><tt class="literal">&lt;</tt></td>
<td><tt class="literal">lt</tt></td>
<td>True if&nbsp;<tt class="literal">$a</tt>&nbsp;is less than&nbsp;<tt class="literal">$b</tt><a name="INDEX-259"></a></td>
</tr>
<tr style="text-align:left;">
<td>Greater than</td>
<td><tt class="literal">&gt;</tt></td>
<td><tt class="literal">gt</tt></td>
<td>True if&nbsp;<tt class="literal">$a</tt>&nbsp;is greater than&nbsp;<tt class="literal">$b</tt><a name="INDEX-260"></a></td>
</tr>
<tr style="text-align:left;">
<td>Less than or equal</td>
<td><tt class="literal">&lt;=</tt></td>
<td><tt class="literal">le</tt></td>
<td>True if&nbsp;<tt class="literal">$a</tt>&nbsp;not greater than&nbsp;<tt class="literal">$b</tt><a name="INDEX-261"></a></td>
</tr>
<tr style="text-align:left;">
<td>Comparison</td>
<td><tt class="literal">&lt;=&gt;</tt></td>
<td><tt class="literal">cmp</tt></td>
<td>0 if equal, 1 if&nbsp;<tt class="literal">$a</tt>&nbsp;greater, -1 if&nbsp;<tt class="literal">$b</tt>&nbsp;greater</td>
</tr>
</tbody>
</table>
</div>
<h4 style="font-size:10pt;"><a name="2_7_Some_File_Test_Operators__26567320991307497"></a>2.7&nbsp;Some File Test Operators</h4>
<div style="margin-top:0;margin-bottom:0;">
<p style="margin:0;">Here are a few of the file test operators:</p>
<p><a name="perl3-tab-over-file"></a></p>
<table style="font-size:1em;line-height:inherit;" border="1">
<tbody>
<tr style="text-align:left;">
<th>Example</th>
<th>Name</th>
<th>Result</th>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">-e $a</tt></td>
<td>Exists</td>
<td>True if file named in&nbsp;<tt class="literal">$a</tt>&nbsp;exists<a name="INDEX-270"></a></td>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">-r $a</tt></td>
<td>Readable</td>
<td>True if file named in&nbsp;<tt class="literal">$a</tt>&nbsp;is readable<a name="INDEX-271"></a><a name="INDEX-272"></a></td>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">-w $a</tt></td>
<td>Writable</td>
<td>True if file named in&nbsp;<tt class="literal">$a</tt>&nbsp;is writable<a name="INDEX-273"></a><a name="INDEX-274"></a></td>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">-d $a</tt></td>
<td>Directory</td>
<td>True if file named in&nbsp;<tt class="literal">$a</tt>&nbsp;is a directory<a name="INDEX-275"></a><a name="INDEX-276"></a></td>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">-f $a</tt></td>
<td>File</td>
<td>True if file named in&nbsp;<tt class="literal">$a</tt>&nbsp;is a regular file<a name="INDEX-277"></a><a name="INDEX-278"></a></td>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">-T $a</tt></td>
<td>Text File</td>
<td>True if file named in&nbsp;<tt class="literal">$a</tt>&nbsp;is a text file<a name="INDEX-279"></a><a name="INDEX-280"></a></td>
</tr>
</tbody>
</table>
<p style="margin:0;">You might use them like this:</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">-e "/usr/bin/perl" or warn "Perl is improperly installed/n";
-f "/vmlinuz" and print "I see you are a friend of Linus/n";</pre>
</blockquote>
</div>
<h3 style="font-size:12pt;"><a name="3_Control_Structures__5578092923387885"></a>3 Control Structures</h3>
<h4 style="font-size:10pt;"><a name="3_1_Truth__13155366573482752"></a>3.1 Truth</h4>
<div style="margin-top:0;margin-bottom:0;">
<p style="margin:0;"><a name="INDEX-290"></a><span style="text-decoration:underline;">Truth in Perl is always evaluated in a scalar context.</span>&nbsp;Other than that, no type coercion is done. So here are the rules for the various kinds of values a scalar can hold:</p>
<ol style="margin-top:0;margin-bottom:0;">
<li style="margin-top:0;margin-bottom:0;">
<p style="margin:0;"><span style="color:#0000ff;">Any string is true except for&nbsp;</span><tt class="literal"><span style="color:#0000ff;">""</span></tt><span style="color:#0000ff;">&nbsp;and&nbsp;</span><tt class="literal"><span style="color:#0000ff;">"0"</span></tt><span style="color:#0000ff;">.</span><span style="color:#0000ff;"><a name="INDEX-291"></a></span></p>
</li>
<li style="margin-top:0;margin-bottom:0;">
<p style="margin:0;"><span style="color:#0000ff;">Any number is true except for 0.</span><span style="color:#0000ff;"><a name="INDEX-292"></a></span></p>
</li>
<li style="margin-top:0;margin-bottom:0;">
<p style="margin:0;"><span style="color:#0000ff;">Any reference is true.</span><span style="color:#0000ff;"><a name="INDEX-293"></a></span></p>
</li>
<li style="margin-top:0;margin-bottom:0;">
<p style="margin:0;"><span style="color:#0000ff;">Any undefined value is false.&nbsp;</span></p>
</li>
</ol>
</div>
<div style="margin-top:0;margin-bottom:0;">For example:</div>
<div style="margin-top:0;margin-bottom:0;"><span style="font-family:verdana;"><br />
</span>
<pre style="color:#000066;font-size:120%;">"0.00" + 0 # would become the number 0 (coerced by the +), so false.
/$a # is a reference to $a, so true, even if $a is false.
undef() # is a function returning the undefined value, so false.</pre>
</div>
<p></span></p>


    <small class="meta">December 29, 2008 | <a href='/perl/unix/linux/2008/12/29/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520perl%2520notes%2528i%2529%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/#disqus_thread'>View Comments</a></small>
  </div>

  <div class="post">
    <h2><a href="/bkup/2008/12/29/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520perl%2520notes%2528i%2529%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/">Perl Notes(I)</a></h2>

    <p><span style="font-family:Verdana;font-size:13px;"></p>
<h2 style="font-size:14pt;">Part I&nbsp;&nbsp; &nbsp;Programming Perl</h2>
<h3 style="font-size:12pt;"><a name="1_Perl_Data_Types_029207318089"></a>1 Perl Data Types</h3>
<h4 style="font-size:10pt;"><a name="1_1_Funny_Characters_558344643"></a>1.1 Funny Characters</h4>
<div style="margin-top:0;margin-bottom:0;">
<table style="font-size:1em;line-height:inherit;" border="1">
<tbody>
<tr style="text-align:left;">
<th>Type</th>
<th>Character</th>
<th>Example</th>
<th>Is a name for:</th>
</tr>
<tr style="text-align:left;">
<td>Scalar</td>
<td><tt class="literal">$</tt></td>
<td><tt class="literal">$cents</tt></td>
<td>An individual value (number or string)</td>
</tr>
<tr style="text-align:left;">
<td>Array</td>
<td><tt class="literal">@</tt></td>
<td><tt class="literal">@large</tt></td>
<td>A list of values, keyed by number</td>
</tr>
<tr style="text-align:left;">
<td>Hash</td>
<td><tt class="literal">%</tt></td>
<td><tt class="literal">%interest</tt></td>
<td>A group of values, keyed by string<a name="INDEX-42"></a></td>
</tr>
<tr style="text-align:left;">
<td>Subroutine</td>
<td><tt class="literal">&amp;</tt></td>
<td><tt class="literal">&amp;how</tt></td>
<td>A callable chunk of Perl code<a name="INDEX-43"></a><a name="INDEX-44"></a></td>
</tr>
<tr style="text-align:left;">
<td>Typeglob</td>
<td><tt class="literal">*</tt></td>
<td><tt class="literal">*struck</tt></td>
<td>Everything named&nbsp;<tt class="literal">struck</tt></td>
</tr>
</tbody>
</table>
</div>
<h4 style="font-size:10pt;"><a name="1_2_Singularities_374153536744"></a>1.2&nbsp;Singularities</h4>
<div style="margin-top:0;margin-bottom:0;">Strings and numbers are singular pieces of data, while lists of strings or numbers are plural.&nbsp;Scalar variables can be assigned any form of scalar value: integers, floating-point numbers, strings, and even esoteric things like references to other variables, or to objects.</div>
<div style="margin-top:0;margin-bottom:0;"></div>
<div style="margin-top:0;margin-bottom:0;">
<p style="margin:0;"><a name="INDEX-50"></a><a name="INDEX-51"></a><a name="INDEX-52"></a><a name="INDEX-53"></a><a name="INDEX-54"></a><a name="INDEX-55"></a><a name="INDEX-56"></a><a name="INDEX-57"></a><a name="INDEX-58"></a>As in the Unix&nbsp;shell, you can use different quoting mechanisms to make different kinds of values. Double quotation marks (double quotes) do&nbsp;<em class="emphasis">variable interpolation</em>&nbsp;and&nbsp;<em class="emphasis">backslash interpolation</em>&nbsp;(such as turning&nbsp;<tt class="literal">/n</tt>&nbsp;into a newline) while single quotes suppress interpolation. And backquotes (the ones leaning to the left``) will execute an external program and return the output of the program, so you can capture it as a single string containing all the lines of output.</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">$answer = 42; # an integer
$pi = 3.14159265; # a "real" number
$avocados = 6.02e23; # scientific notation
$pet = "Camel"; # string
$sign = "I love my $pet"; # string with interpolation
$cost = 'It costs $100'; # string without interpolation
$thence = $whence; # another variable's value
$salsa = $moles * $avocados; # a gastrochemical expression
$exit = system("vi $file"); # numeric status of a command
$cwd = `pwd`; # string output from a command</pre>
</blockquote>
<p><a name="INDEX-59"></a><a name="INDEX-60"></a><a name="INDEX-61"></a><a name="INDEX-62"></a>And while we haven't covered fancy values yet, we should point out that scalars may also hold references to other data structures, including subroutines and objects.</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">$ary = /@myarray; # reference to a named array
$hsh = /%myhash; # reference to a named hash
$sub = /&amp;mysub; # reference to a named subroutine

$ary = [1,2,3,4,5]; # reference to an unnamed array
$hsh = {Na =&gt; 19, Cl =&gt; 35}; # reference to an unnamed hash
$sub = sub { print $state }; # reference to an unnamed subroutine

$fido = new Camel "Amelia"; # reference to an object</pre>
</blockquote>
</div>
<div style="margin-top:0;margin-bottom:0;">Following the principle of least surprise, the variable is created with a null value, either&nbsp;<tt class="literal">""</tt>&nbsp;or&nbsp;<tt class="literal">0</tt>. Depending on where you use them, variables will be interpreted automatically as strings, as numbers, or as "true" and "false" values (commonly called Boolean values).&nbsp;Perl will automatically convert the data into the form required by the current context, within reason. For example, suppose you said this:</div>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">$camels = '123';
print $camels + 1, "/n";</pre>
</blockquote>
<p>The original value of&nbsp;<tt class="literal">$camels</tt>&nbsp;is a string, but it is converted to a number to add&nbsp;<tt class="literal">1</tt>&nbsp;to it, and then converted back to a string to be printed out as&nbsp;<tt class="literal">124</tt>.</p>
<div style="margin-top:0;margin-bottom:0;"></div>
<div style="margin-top:0;margin-bottom:0;">
<p style="margin:0;">Similarly, a reference behaves as a reference when you give it a "dereference" context, but otherwise acts like a simple scalar value. For example, we might say:</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">$fido = new Camel "Amelia";
if (not $fido) { die "dead camel"; }
$fido-&gt;saddle();</pre>
</blockquote>
</div>
<h4 style="font-size:10pt;"><a name="1_3_Pluralities_90712378174066"></a>1.3&nbsp;Pluralities</h4>
<div style="margin-top:0;margin-bottom:0;">Perl has two types of multivalued variables: arrays and hashes.</div>
<h5 style="font-size:8pt;"><a name="1_3_1_Array_20716473553329706_14659717492759228"></a>1.3.1 Array</h5>
<div style="margin-top:0;margin-bottom:0;">An&nbsp;<em class="emphasis">array</em>&nbsp;is an ordered list of scalars, accessed[6] by the scalar's position in the list.&nbsp;To assign a list value to an array, you simply group the values together (with a set of parentheses):</div>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">@home = ("couch", "chair", "table", "stove");</pre>
</blockquote>
<p>Conversely, if you use&nbsp;<tt class="literal">@home</tt>&nbsp;in a list context, such as on the right side of a list assignment, you get back out the same list you put in. So you could set four scalar variables from the array like this:</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">($potato, $lift, $tennis, $pipe) = @home;</pre>
</blockquote>
<p>These are called list assignments. They logically happen in parallel, so you can swap two variables by saying:</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">($alpha,$omega) = ($omega,$alpha);</pre>
</blockquote>
<div style="margin-top:0;margin-bottom:0;">Arrays are zero-based.&nbsp;Array subscripts are enclosed in square brackets [like this], so if you want to select an individual array element, you would refer to it as&nbsp;<tt class="literal">$home[</tt><em class="replaceable">n</em><tt class="literal">].</tt></div>
<div style="margin-top:0;margin-bottom:0;"><span style="font-family:'-webkit-monospace';"><br /></span></div>
<div style="margin-top:0;margin-bottom:0;">Since arrays are ordered, you can do various useful operations on them, such as the stack operations&nbsp;<tt class="literal"><span style="font-family:Verdana;">push</span></tt>&nbsp;and&nbsp;<tt class="literal"><span style="font-family:Verdana;">pop</span></tt>.&nbsp;Perl regards the<strong>&nbsp;end&nbsp;</strong>of your array as the top of a stack.</div>
<h5 style="font-size:8pt;"><a name="1_3_2_Hash_35820974223315716_17378652468323708"></a>1.3.2 Hash</h5>
<div style="margin-top:0;margin-bottom:0;">A&nbsp;<em class="emphasis">hash</em>&nbsp;is an unordered set of scalars, accessed&nbsp;by some string value that is associated with each scalar. For this reason hashes are often called&nbsp;<em class="emphasis">associative arrays</em>. &nbsp;A hash has no beginning or end.&nbsp;Since the keys to a hash are not automatically implied by their position, you must supply the key as well as the value when populating a hash.</div>
<div style="text-align:left;margin-top:0;margin-bottom:0;"><span style="color:#000066;"><br /></span></div>
<div style="margin-top:0;margin-bottom:0;">
<p style="margin:0;">Suppose you wanted to translate abbreviated day names to the corresponding full names. You could write the following list assignment:</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">%longday = ("Sun", "Sunday", "Mon", "Monday", "Tue", "Tuesday",
 "Wed", "Wednesday", "Thu", "Thursday", "Fri",
 "Friday", "Sat", "Saturday");</pre>
</blockquote>
<p><a name="INDEX-95"></a><a name="INDEX-96"></a><a name="INDEX-97"></a>But that's rather difficult to read, so Perl provides the&nbsp;<tt class="literal"><strong>=&gt;</strong></tt>&nbsp;(equals sign, greater-than sign) sequence as an alternative separator to the comma. Using this syntactic sugar (and some creative formatting), it is much easier to see which strings are the keys and which strings are the associated values.</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">%longday = (
 "Sun" =&gt; "Sunday",
 "Mon" =&gt; "Monday",
 "Tue" =&gt; "Tuesday",
 "Wed" =&gt; "Wednesday",
 "Thu" =&gt; "Thursday",
 "Fri" =&gt; "Friday",
 "Sat" =&gt; "Saturday",
);</pre>
</blockquote>
</div>
<div style="margin-top:0;margin-bottom:0;">You can select an individual hash element by enclosing the key in braces (those fancy brackets also known as "curlies"). For example, if you want to find out the value associated with&nbsp;<tt class="literal">Wed</tt>&nbsp;in the hash above, you would use&nbsp;<tt class="literal">$longday{"Wed"}</tt>. Note again that you are dealing with a scalar value, so you use&nbsp;<tt class="literal">$</tt>&nbsp;on the front, not&nbsp;<tt class="literal">%</tt>, which would indicate the entire hash.</div>
<div style="margin-top:0;margin-bottom:0;"></div>
<div style="margin-top:0;margin-bottom:0;">
<p style="margin:0;">Linguistically, the relationship encoded in a hash is genitive or possessive, like the word "of" in English, or like "'s". The wife&nbsp;<em class="emphasis">of</em>&nbsp;Adam is Eve, so we write:</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">$wife{"Adam"} = "Eve";</pre>
</blockquote>
</div>
<h5 style="font-size:8pt;"><a name="1_3_3_Complexities_52397375367"></a>1.3.3&nbsp;Complexities</h5>
<div style="margin-top:0;margin-bottom:0;">Perl lets you manipulate simple scalar references that happen to refer to complicated arrays and hashes.&nbsp;To extend our previous example, suppose we want to switch from talking about Adam's wife to Jacob's wife. Now, as it happens, Jacob had four wives. (Don't try this at home.) In trying to represent this in Perl, we find ourselves in the odd situation where we'd like to pretend that Jacob's four wives were really one wife. (Don't try this at home, either.) You might think you could write it like this:</div>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">$wife{"Jacob"} = ("Leah", "Rachel", "Bilhah", "Zilpah"); # WRONG</pre>
</blockquote>
<p><a name="INDEX-106"></a><a name="INDEX-107"></a><a name="INDEX-108"></a><a name="INDEX-109"></a><a name="INDEX-110"></a>But that wouldn't do what you want, because even parentheses and commas are not powerful enough to turn a list into a scalar in Perl. (Parentheses are used for syntactic grouping, and commas for syntactic separation.) Rather, you need to tell Perl explicitly that you want to pretend that a list is a scalar. It turns out that square brackets are powerful enough to do that:&nbsp;&nbsp;</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">$wife{"Jacob"} = ["Leah", "Rachel", "Bilhah", "Zilpah"]; # ok</pre>
</blockquote>
<div style="margin-top:0;margin-bottom:0;">That statement creates an unnamed array and puts a reference to it into the hash element&nbsp;<tt class="literal">$wife{"Jacob"}</tt>.</div>
<div style="margin-top:0;margin-bottom:0;"></div>
<div style="margin-top:0;margin-bottom:0;">suppose we wanted to list not only Jacob's wives but all the sons of each of his wives. In this case we want to treat a hash as a scalar. We can use braces for that. (Inside each hash value we'll use square brackets to represent arrays, just as we did earlier. But now we have an array in a hash in a hash.)</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">$kids_of_wife{"Jacob"} = {
 "Leah" =&gt; ["Reuben", "Simeon", "Levi", "Judah", "Issachar", "Zebulun"],
 "Rachel" =&gt; ["Joseph", "Benjamin"],
 "Bilhah" =&gt; ["Dan", "Naphtali"],
 "Zilpah" =&gt; ["Gad", "Asher"],
};</pre>
</blockquote>
<p>That would be more or less equivalent to saying:</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">$kids_of_wife{"Jacob"}{"Leah"}[0] = "Reuben";
$kids_of_wife{"Jacob"}{"Leah"}[1] = "Simeon";
$kids_of_wife{"Jacob"}{"Leah"}[2] = "Levi";
$kids_of_wife{"Jacob"}{"Leah"}[3] = "Judah";
$kids_of_wife{"Jacob"}{"Leah"}[4] = "Issachar";
$kids_of_wife{"Jacob"}{"Leah"}[5] = "Zebulun";
$kids_of_wife{"Jacob"}{"Rachel"}[0] = "Joseph";
$kids_of_wife{"Jacob"}{"Rachel"}[1] = "Benjamin";
$kids_of_wife{"Jacob"}{"Bilhah"}[0] = "Dan";
$kids_of_wife{"Jacob"}{"Bilhah"}[1] = "Naphtali";
$kids_of_wife{"Jacob"}{"Zilpah"}[0] = "Gad";
$kids_of_wife{"Jacob"}{"Zilpah"}[1] = "Asher";</pre>
</blockquote>
</div>
<h5 style="font-size:8pt;"><a name="1_3_4_Simplicities_95647719036"></a>1.3.4&nbsp;Simplicities</h5>
<div style="margin-top:0;margin-bottom:0;">
<p style="margin:0;"><a name="INDEX-121"></a><a name="INDEX-122"></a><a name="INDEX-123"></a>Perl also has several ways of topicalizing. One important topicalizer is the&nbsp;<tt class="literal">package</tt>&nbsp;declaration. Suppose you want to talk about&nbsp;<tt class="literal">Camel</tt>s in Perl. You'd likely start off your&nbsp;<tt class="literal">Camel</tt>&nbsp;module by saying:</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">package Camel;</pre>
</blockquote>
</div>
<div style="margin-top:0;margin-bottom:0;">Perl will assume from this point on that any unspecified verbs or nouns are about&nbsp;<tt class="literal">Camel</tt>s. It does this by automatically prefixing any global name with the module name "<tt class="literal">Camel::</tt>".</div>
<div style="margin-top:0;margin-bottom:0;"></div>
<div style="margin-top:0;margin-bottom:0;">
<p style="margin:0;"><a name="INDEX-128"></a><a name="INDEX-129"></a>When you say&nbsp;<tt class="literal">package Camel</tt>, you're starting a new package. But sometimes you just want to borrow the nouns and verbs of an existing package. Perl lets you do that with a&nbsp;<tt class="literal">use</tt>&nbsp;declaration, which not only borrows verbs from another package, but also checks that the module you name is loaded in from disk. In fact, you&nbsp;<em class="emphasis">must</em>&nbsp;say something like:</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">use Camel;</pre>
</blockquote>
<p>before you say:</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">$fido = new Camel "Amelia";</pre>
</blockquote>
</div>
<div style="margin-top:0;margin-bottom:0;">
<p style="margin:0;">In fact, some of the built-in modules don't actually introduce verbs at all, but simply warp the Perl language in various useful ways. These special modules we call&nbsp;<em class="emphasis">pragmas</em>. For instance, you'll often see people use the pragma&nbsp;<tt class="literal">strict</tt>, like this:</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">use strict;</pre>
</blockquote>
</div>
<h4 style="font-size:10pt;"><a name="1_4_Verbs_7150770369917154_6162498742341995"></a>1.4 Verbs</h4>
<div style="margin-top:0;margin-bottom:0;">Many of the verbs in Perl are commands: they tell the Perl interpreter to do something.&nbsp;A statement starting with a verb is generally purely imperative and evaluated entirely for its side effects. (We sometimes call these verbs&nbsp;<em class="emphasis">procedures</em>, especially when they're user-defined.)</div>
<div style="margin-top:0;margin-bottom:0;"></div>
<div style="margin-top:0;margin-bottom:0;">Other verbs translate their input parameters into return values, just as a recipe tells you how to turn raw ingredients into something (hopefully) edible. We tend to call these verbs&nbsp;<em class="emphasis">functions.</em></div>
<div style="margin-top:0;margin-bottom:0;"></div>
<div style="margin-top:0;margin-bottom:0;">Verbs are also sometimes called operators (when built-in), or subroutines (when user-defined).&nbsp;Historically, Perl required you to put an ampersand character (<tt class="literal">&amp;</tt>) on any calls to user-defined subroutines (see&nbsp;<tt class="literal">$fido = &amp;fetch();</tt>&nbsp;earlier). But with Perl version 5, the ampersand became optional, so that user-defined verbs can now be called with the same syntax as built-in verbs (<tt class="literal">$fido = fetch();</tt>).&nbsp;We still use the ampersand when talking about the&nbsp;<em class="emphasis">name</em>&nbsp;of the routine, such as when we take a reference to it (<tt class="literal">$fetcher = /&amp;fetch;</tt>).</div>
<div style="margin-top:0;margin-bottom:0;"></div>
<h4 style="font-size:10pt;"><a name="1_5_Filehandles_12350966874510"></a>1.5 Filehandles</h4>
<div style="margin-top:0;margin-bottom:0;">A filehandle is just a name you give to a file, device, socket, or pipe to help you remember which one you're talking about, and to hide some of the complexities of buffering and such. (Internally, filehandles are similar to streams from a language like C++ or I/O channels from BASIC.)</div>
<div style="margin-top:0;margin-bottom:0;"></div>
<div style="margin-top:0;margin-bottom:0;">You create a filehandle and attach it to a file by using<strong>&nbsp;</strong><tt class="literal"><strong>open</strong></tt>. The&nbsp;<tt class="literal"><strong>open</strong></tt>&nbsp;function takes at least two parameters: the filehandle and filename you want to associate it with. Perl also gives you some predefined (and preopened) filehandles.&nbsp;<tt class="literal"><strong>STDIN</strong></tt>&nbsp;is your program's normal input channel, while&nbsp;<tt class="literal"><strong>STDOUT</strong></tt>&nbsp;is your program's normal output channel. And&nbsp;<tt class="literal"><strong>STDERR</strong></tt>&nbsp;is an additional output channel that allows your program to make snide remarks off to the side while it transforms (or attempts to transform) your input into your output.</div>
<div style="margin-top:0;margin-bottom:0;"></div>
<div style="margin-top:0;margin-bottom:0;">
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">open(SESAME, "filename") # read from existing file
open(SESAME, "&lt;filename") # (same thing, explicitly)
open(SESAME, "&gt;filename") # create file and write to it
open(SESAME, "&gt;&gt;filename") # append to existing file
open(SESAME, "| output-pipe-command") # set up an output filter
open(SESAME, "input-pipe-command |") # set up an input filter</pre>
</blockquote>
<p>As you can see, the name you pick for the filehandle is arbitrary. Once opened, the filehandle&nbsp;<tt class="literal">SESAME</tt>&nbsp;can be used to access the file or pipe until it is explicitly closed (with, you guessed it,&nbsp;<tt class="literal"><strong>close(SESAME)</strong></tt>), or until the filehandle is attached to another file by a subsequent&nbsp;<tt class="literal">open</tt>&nbsp;on the same filehandle.</div>
<div style="margin-top:0;margin-bottom:0;"></div>
<div style="margin-top:0;margin-bottom:0;">Once you've opened a filehandle for input, you can read a line using the line reading operator,&nbsp;<tt class="literal">&lt;</tt><tt class="literal">&gt;</tt>.&nbsp;<span style="text-decoration:underline;">The angle operator encloses the filehandle (</span><tt class="literal"><span style="text-decoration:underline;">&lt;SESAME&gt;</span></tt><span style="text-decoration:underline;">) you want to read lines from. The empty angle operator,&nbsp;</span><tt class="literal"><span style="text-decoration:underline;">&lt;&gt;</span></tt><span style="text-decoration:underline;">, will read lines from all the files specified on the command line, or&nbsp;</span><tt class="literal"><span style="text-decoration:underline;">STDIN</span></tt><span style="text-decoration:underline;">, if none were specified</span>.</div>
<div style="margin-top:0;margin-bottom:0;"></div>
<div style="margin-top:0;margin-bottom:0;">
<p style="margin:0;">An example using the&nbsp;<tt class="literal">STDIN</tt>&nbsp;filehandle to read an answer supplied by the user would look something like this:</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">print STDOUT "Enter a number: "; # ask for a number
$number = &lt;STDIN&gt;; # input the number
print STDOUT "The number is $number./n"; # print the number</pre>
</blockquote>
</div>
<div style="margin-top:0;margin-bottom:0;">
<p style="margin:0;"><a name="INDEX-187"></a><a name="INDEX-188"></a><a name="INDEX-189"></a>If you try the previous example, you may notice that you get an extra blank line. This happens because the line-reading operation does not automatically remove the newline from your input line (your input would be, for example, "<tt class="literal">9/n</tt>"). For those times when you do want to remove the newline, Perl provides the&nbsp;<tt class="literal"><strong>chop</strong></tt>&nbsp;and&nbsp;<tt class="literal"><strong>chomp</strong></tt>&nbsp;functions.&nbsp;<tt class="literal"><span style="text-decoration:underline;">chop</span></tt><span style="text-decoration:underline;">&nbsp;will indiscriminately remove (and return) the last character of the string, while&nbsp;</span><tt class="literal"><span style="text-decoration:underline;">chomp</span></tt><span style="text-decoration:underline;">&nbsp;will only remove the end of record marker (generally, "</span><tt class="literal"><span style="text-decoration:underline;">/n</span></tt><span style="text-decoration:underline;">") and return the number of characters so removed.&nbsp;</span>You'll often see this idiom for inputting a single line:</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">chop($number = &lt;STDIN&gt;); # input number and remove newline</pre>
</blockquote>
</div>
<h3 style="font-size:12pt;"><a name="2_Operators__668523520231247"></a>2 Operators</h3>
<h4 style="font-size:10pt;"><a name="2_1_Some_Binary_Arithmetic_Ope_7225654777139425"></a>2.1&nbsp;Some Binary Arithmetic Operators</h4>
<div style="margin-top:0;margin-bottom:0;">
<table style="font-size:1em;line-height:inherit;" border="1">
<tbody>
<tr style="text-align:left;">
<th>Example</th>
<th>Name</th>
<th>Result</th>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">$a + $b</tt></td>
<td>Addition</td>
<td>Sum of&nbsp;<tt class="literal">$a</tt>&nbsp;and&nbsp;<tt class="literal">$b</tt><a name="INDEX-198"></a></td>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">$a * $b</tt></td>
<td>Multiplication</td>
<td>Product of&nbsp;<tt class="literal">$a</tt>&nbsp;and&nbsp;<tt class="literal">$b</tt><a name="INDEX-199"></a></td>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">$a % $b</tt></td>
<td>Modulus</td>
<td>Remainder of&nbsp;<tt class="literal">$a</tt>&nbsp;divided by&nbsp;<tt class="literal">$b</tt></td>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">$a ** $b</tt></td>
<td>Exponentiation</td>
<td><tt class="literal">$a</tt>&nbsp;to the power of&nbsp;<tt class="literal">$b</tt></td>
</tr>
</tbody>
</table>
</div>
<h4 style="font-size:10pt;"><a name="2_2_String_Operators__7529557030647993"></a>2.2&nbsp;String Operators</h4>
<div style="margin-top:0;margin-bottom:0;">
<p style="margin:0;">Perl defines a separate operator (<tt class="literal">.</tt>) for string concatenation:</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">$a = 123;
$b = 456;
print $a + $b; # prints 579
print $a . $b; # prints 123456</pre>
</blockquote>
</div>
<div style="margin-top:0;margin-bottom:0;">
<p style="margin:0;"><a name="INDEX-211"></a><a name="INDEX-212"></a><a name="INDEX-213"></a>There's also a "multiply" operator for strings, called the&nbsp;<em class="emphasis">repeat</em>&nbsp;operator. Again, it's a separate operator (<tt class="literal">x</tt>) to keep it distinct from numeric multiplication:</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">$a = 123;
$b = 3;
print $a * $b; # prints 369
print $a x $b; # prints 123123123</pre>
</blockquote>
</div>
<div style="margin-top:0;margin-bottom:0;">
<p style="margin:0;">The&nbsp;<tt class="literal">x</tt>&nbsp;operator may seem relatively worthless at first glance, but it is quite useful at times, especially for things like this:</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">print "-" x $scrwid, "/n";</pre>
</blockquote>
<p>which draws a line across your screen, presuming&nbsp;<tt class="literal">$scrwid</tt>&nbsp;contains your screen width, and not your screw identifier.</div>
<h4 style="font-size:10pt;"><a name="2_3_Assignment_Operators__48074441868811846"></a>2.3 Assignment Operators</h4>
<div style="margin-top:0;margin-bottom:0;">You can do shortcut with almost any binary operator in Perl, even some that you can't do it with in C:</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">$line .= "/n"; # Append newline to $line.
$fill x= 80; # Make string $fill into 80 repeats of itself.
$val ||= "2"; # Set $val to 2 if it isn't already "true".</pre>
</blockquote>
</div>
<h4 style="font-size:10pt;"><a name="2_4_Unary_Arithmetic_Operators_7676581423729658"></a>2.4 Unary Arithmetic Operators</h4>
<div style="margin-top:0;margin-bottom:0;">
<table style="font-size:1em;line-height:inherit;" border="1">
<tbody>
<tr style="text-align:left;">
<th>Example</th>
<th>Name</th>
<th>Result</th>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">++$a, $a++</tt></td>
<td>Autoincrement</td>
<td>Add 1 to&nbsp;<tt class="literal">$a</tt></td>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">--$a, $a--</tt></td>
<td>Autodecrement</td>
<td>Subtract 1 from&nbsp;<tt class="literal">$a</tt></td>
</tr>
</tbody>
</table>
</div>
<div style="margin-top:0;margin-bottom:0;">The same with C.</div>
<h4 style="font-size:10pt;"><a name="2_5_Logical_Operators__22455949615687132"></a>2.5 Logical Operators</h4>
<div style="margin-top:0;margin-bottom:0;">
<table style="font-size:1em;line-height:inherit;" border="1">
<tbody>
<tr style="text-align:left;">
<th>Example</th>
<th>Name</th>
<th>Result</th>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">$a &amp;&amp; $b</tt></td>
<td>And</td>
<td><tt class="literal">$a</tt>&nbsp;if&nbsp;<tt class="literal">$a</tt>&nbsp;is false,&nbsp;<tt class="literal">$b</tt>&nbsp;otherwise<a name="INDEX-242"></a><a name="INDEX-243"></a></td>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">$a || $b</tt></td>
<td>Or</td>
<td><tt class="literal">$a</tt>&nbsp;if&nbsp;<tt class="literal">$a</tt>&nbsp;is true,&nbsp;<tt class="literal">$b</tt>&nbsp;otherwise<a name="INDEX-244"></a><a name="INDEX-245"></a></td>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">! $a</tt></td>
<td>Not</td>
<td>True if&nbsp;<tt class="literal">$a</tt>&nbsp;is not true</td>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">$a and $b</tt></td>
<td>And</td>
<td><tt class="literal">$a</tt>&nbsp;if&nbsp;<tt class="literal">$a</tt>&nbsp;is false,&nbsp;<tt class="literal">$b</tt>&nbsp;otherwise</td>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">$a or $b</tt></td>
<td>Or</td>
<td><tt class="literal">$a</tt>&nbsp;if&nbsp;<tt class="literal">$a</tt>&nbsp;is true,&nbsp;<tt class="literal">$b</tt>&nbsp;otherwise<a name="INDEX-246"></a></td>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">not $a</tt></td>
<td>Not</td>
<td>True if&nbsp;<tt class="literal">$a</tt>&nbsp;is not true</td>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">$a xor $b</tt></td>
<td>Xor</td>
<td>True if&nbsp;<tt class="literal">$a</tt>&nbsp;or&nbsp;<tt class="literal">$b</tt>&nbsp;is true, but not both<a name="INDEX-247"></a></td>
</tr>
</tbody>
</table>
</div>
<h4 style="font-size:10pt;"><a name="2_6_Some_Numeric_and_String_Co_6402344861999154"></a>2.6&nbsp;Some Numeric and String Comparison Operators</h4>
<div style="margin-top:0;margin-bottom:0;">
<table style="font-size:1em;line-height:inherit;" border="1">
<tbody>
<tr style="text-align:left;">
<th>Comparison</th>
<th>Numeric</th>
<th>String</th>
<th>Return Value</th>
</tr>
<tr style="text-align:left;">
<td>Equal</td>
<td><tt class="literal">==</tt></td>
<td><tt class="literal">eq</tt></td>
<td>True if&nbsp;<tt class="literal">$a</tt>&nbsp;is equal to&nbsp;<tt class="literal">$b</tt><a name="INDEX-257"></a></td>
</tr>
<tr style="text-align:left;">
<td>Not equal</td>
<td><tt class="literal">!=</tt></td>
<td><tt class="literal">ne</tt></td>
<td>True if&nbsp;<tt class="literal">$a</tt>&nbsp;is not equal to&nbsp;<tt class="literal">$b</tt><a name="INDEX-258"></a></td>
</tr>
<tr style="text-align:left;">
<td>Less than</td>
<td><tt class="literal">&lt;</tt></td>
<td><tt class="literal">lt</tt></td>
<td>True if&nbsp;<tt class="literal">$a</tt>&nbsp;is less than&nbsp;<tt class="literal">$b</tt><a name="INDEX-259"></a></td>
</tr>
<tr style="text-align:left;">
<td>Greater than</td>
<td><tt class="literal">&gt;</tt></td>
<td><tt class="literal">gt</tt></td>
<td>True if&nbsp;<tt class="literal">$a</tt>&nbsp;is greater than&nbsp;<tt class="literal">$b</tt><a name="INDEX-260"></a></td>
</tr>
<tr style="text-align:left;">
<td>Less than or equal</td>
<td><tt class="literal">&lt;=</tt></td>
<td><tt class="literal">le</tt></td>
<td>True if&nbsp;<tt class="literal">$a</tt>&nbsp;not greater than&nbsp;<tt class="literal">$b</tt><a name="INDEX-261"></a></td>
</tr>
<tr style="text-align:left;">
<td>Comparison</td>
<td><tt class="literal">&lt;=&gt;</tt></td>
<td><tt class="literal">cmp</tt></td>
<td>0 if equal, 1 if&nbsp;<tt class="literal">$a</tt>&nbsp;greater, -1 if&nbsp;<tt class="literal">$b</tt>&nbsp;greater</td>
</tr>
</tbody>
</table>
</div>
<h4 style="font-size:10pt;"><a name="2_7_Some_File_Test_Operators__26567320991307497"></a>2.7&nbsp;Some File Test Operators</h4>
<div style="margin-top:0;margin-bottom:0;">
<p style="margin:0;">Here are a few of the file test operators:</p>
<p><a name="perl3-tab-over-file"></a></p>
<table style="font-size:1em;line-height:inherit;" border="1">
<tbody>
<tr style="text-align:left;">
<th>Example</th>
<th>Name</th>
<th>Result</th>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">-e $a</tt></td>
<td>Exists</td>
<td>True if file named in&nbsp;<tt class="literal">$a</tt>&nbsp;exists<a name="INDEX-270"></a></td>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">-r $a</tt></td>
<td>Readable</td>
<td>True if file named in&nbsp;<tt class="literal">$a</tt>&nbsp;is readable<a name="INDEX-271"></a><a name="INDEX-272"></a></td>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">-w $a</tt></td>
<td>Writable</td>
<td>True if file named in&nbsp;<tt class="literal">$a</tt>&nbsp;is writable<a name="INDEX-273"></a><a name="INDEX-274"></a></td>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">-d $a</tt></td>
<td>Directory</td>
<td>True if file named in&nbsp;<tt class="literal">$a</tt>&nbsp;is a directory<a name="INDEX-275"></a><a name="INDEX-276"></a></td>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">-f $a</tt></td>
<td>File</td>
<td>True if file named in&nbsp;<tt class="literal">$a</tt>&nbsp;is a regular file<a name="INDEX-277"></a><a name="INDEX-278"></a></td>
</tr>
<tr style="text-align:left;">
<td><tt class="literal">-T $a</tt></td>
<td>Text File</td>
<td>True if file named in&nbsp;<tt class="literal">$a</tt>&nbsp;is a text file<a name="INDEX-279"></a><a name="INDEX-280"></a></td>
</tr>
</tbody>
</table>
<p style="margin:0;">You might use them like this:</p>
<blockquote style="border-color:#dddddd;border-style:dashed;border-width:1px;padding:10px;">
<pre class="programlisting">-e "/usr/bin/perl" or warn "Perl is improperly installed/n";
-f "/vmlinuz" and print "I see you are a friend of Linus/n";</pre>
</blockquote>
</div>
<h3 style="font-size:12pt;"><a name="3_Control_Structures__5578092923387885"></a>3 Control Structures</h3>
<h4 style="font-size:10pt;"><a name="3_1_Truth__13155366573482752"></a>3.1 Truth</h4>
<div style="margin-top:0;margin-bottom:0;">
<p style="margin:0;"><a name="INDEX-290"></a><span style="text-decoration:underline;">Truth in Perl is always evaluated in a scalar context.</span>&nbsp;Other than that, no type coercion is done. So here are the rules for the various kinds of values a scalar can hold:</p>
<ol style="margin-top:0;margin-bottom:0;">
<li style="margin-top:0;margin-bottom:0;">
<p style="margin:0;"><span style="color:#0000ff;">Any string is true except for&nbsp;</span><tt class="literal"><span style="color:#0000ff;">""</span></tt><span style="color:#0000ff;">&nbsp;and&nbsp;</span><tt class="literal"><span style="color:#0000ff;">"0"</span></tt><span style="color:#0000ff;">.</span><span style="color:#0000ff;"><a name="INDEX-291"></a></span></p>
</li>
<li style="margin-top:0;margin-bottom:0;">
<p style="margin:0;"><span style="color:#0000ff;">Any number is true except for 0.</span><span style="color:#0000ff;"><a name="INDEX-292"></a></span></p>
</li>
<li style="margin-top:0;margin-bottom:0;">
<p style="margin:0;"><span style="color:#0000ff;">Any reference is true.</span><span style="color:#0000ff;"><a name="INDEX-293"></a></span></p>
</li>
<li style="margin-top:0;margin-bottom:0;">
<p style="margin:0;"><span style="color:#0000ff;">Any undefined value is false.&nbsp;</span></p>
</li>
</ol>
</div>
<div style="margin-top:0;margin-bottom:0;">For example:</div>
<div style="margin-top:0;margin-bottom:0;"><span style="font-family:verdana;"><br />
</span>
<pre style="color:#000066;font-size:120%;">"0.00" + 0 # would become the number 0 (coerced by the +), so false.
/$a # is a reference to $a, so true, even if $a is false.
undef() # is a function returning the undefined value, so false.</pre>
</div>
<p></span></p>


    <small class="meta">December 29, 2008 | <a href='/bkup/2008/12/29/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520perl%2520notes%2528i%2529%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/#disqus_thread'>View Comments</a></small>
  </div>

  <div class="post">
    <h2><a href="/c/c++/network/telecom/unix/linux/2008/12/24/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520%25e7%2594%25b1%25e6%259c%258d%25e5%258a%25a1%25e5%2599%25a8%25e5%2590%258d%25e5%25ad%2597%2528host%2520name%2529%25e8%258e%25b7%25e5%25be%2597ip%25e5%259c%25b0%25e5%259d%2580%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/">由服务器名字(Host name)获得IP地址</a></h2>

    <p>
    一下代码可以根据host name获得IP地址：
<div>
<div class="highlighter">
<ol start="1" class="highlighter-c">
<li><span class="preprocessor">#include &lt;stdio.h&gt;</span><span></span></li>
<li class="alt"><span></span><span class="preprocessor">#include &lt;netdb.h&gt;</span><span></span></li>
<li><span></span><span class="preprocessor">#include &lt;sys/socket.h&gt;</span><span></span></li>
<li class="alt"><span></span><span class="preprocessor">#include &lt;arpa/inet.h&gt;</span><span></span></li>
<li><span></span><span class="preprocessor">#include &lt;netinet/in.h&gt;</span><span></span></li>
<li class="alt"><span></span></li>
<li><span></span><span class="keyword">int</span><span> main(</span><span class="keyword">int</span><span> argc,</span><span class="keyword">char</span><span> **argv)</span></li>
<li class="alt"><span>{</span></li>
<li><span>    </span><span class="keyword">struct</span><span> hostent *hptr;</span></li>
<li class="alt"><span>    </span><span class="keyword">struct</span><span> in_addr *in_addr_ptr;</span></li>
<li><span>    </span><span class="keyword">char</span><span> *ptr,**pptr,**listptr,*addr_ptr;</span></li>
<li class="alt"><span>    </span><span class="keyword">char</span><span> str[32];</span></li>
<li><span>    </span><span class="comment">/*Host name--the first param*/</span><span></span></li>
<li class="alt"><span>    ptr=argv[1];</span></li>
<li><span>    </span><span class="keyword">if</span><span>((hptr=gethostbyname(ptr))==NULL)</span></li>
<li class="alt"><span>    {</span></li>
<li><span>        printf(</span><span class="string">"gethostbyname error for host: %s/n"</span><span>,ptr);</span></li>
<li class="alt"><span>        </span><span class="keyword">return</span><span> -1;</span></li>
<li><span>    }</span></li>
<li class="alt"><span>    </span><span class="comment">/*print official host name*/</span><span></span></li>
<li><span>    printf(</span><span class="string">"offial host name: %s/n"</span><span>,hptr-&gt;h_name);</span></li>
<li class="alt"><span>    </span><span class="comment">/*print all the aliases of the host*/</span><span></span></li>
<li><span>    </span><span class="keyword">for</span><span>(pptr=hptr-&gt;h_aliases;*pptr!=NULL;pptr++)</span></li>
<li class="alt"><span>        printf(</span><span class="string">"alias:%s/n"</span><span>,*pptr);</span></li>
<li><span></span></li>
<li class="alt"><span>    </span><span class="comment">/*print IP address*/</span><span></span></li>
<li><span>    </span><span class="keyword">switch</span><span> (hptr-&gt;h_addrtype) {</span></li>
<li class="alt"><span>    </span><span class="keyword">case</span><span> AF_INET:</span></li>
<li><span>        listptr = hptr-&gt;h_addr_list;</span></li>
<li class="alt"><span>        </span><span class="keyword">if</span><span> ( (in_addr_ptr = (</span><span class="keyword">struct</span><span> in_addr *) *listptr) != NULL) {</span></li>
<li><span></span></li>
<li class="alt"><span>            addr_ptr = inet_ntoa(*in_addr_ptr);</span></li>
<li><span>            </span></li>
<li class="alt"><span>            printf(</span><span class="string">"address: %s/n"</span><span>,addr_ptr);</span></li>
<li><span>        </span></li>
<li class="alt"><span>            </span><span class="keyword">return</span><span>(0);</span></li>
<li><span>        }</span></li>
<li class="alt"><span>        </span><span class="keyword">else</span><span> {</span></li>
<li><span>            </span><span class="keyword">return</span><span>(NULL);</span></li>
<li class="alt"><span>        }</span></li>
<li><span></span></li>
<li class="alt"><span>    </span><span class="keyword">default</span><span>:</span></li>
<li><span>        printf(</span><span class="string">"unknown address type %d/n"</span><span>,hptr-&gt;h_addrtype);</span></li>
<li class="alt"><span></span></li>
<li><span>        </span><span class="keyword">return</span><span>(NULL);</span></li>
<li class="alt"><span>    }</span></li>
<li><span></span></li>
<li class="alt"><span>    </span><span class="keyword">return</span><span> 0;</span></li>
<li><span>}</span></li>
<li class="alt"><span></span></li>
<li><span></span></li>
</ol>
</div>
<p><span class="Apple-style-span" style="color:rgb(0,0,0);font-family:verdana;line-height:18px;font-size:10pt;"></span>
<p style="text-indent:2em;line-height:22px;font-size:14px;margin:1em 0 .5em;padding:0;"><font size="4">struct hostent *gethostbyname(const char *name);<br />这个函数的传入值是域名或者主机名，例如"</font><a href="http://www.google.com%22%2C%22wpc/" style="text-decoration:none;color:rgb(51,102,153);"><font size="4">www.google.com","wpc</font></a><font size="4">"等等。<br />传出值，是一个hostent的结构（如下）。如果函数调用失败，将返回NULL。</font></p>
<p style="text-indent:2em;line-height:22px;font-size:14px;margin:1em 0 .5em;padding:0;"><font size="4">struct hostent {<br />  char  *h_name;<br />  char  **h_aliases;<br />  int   h_addrtype;<br />  int   h_length;<br />  char  **h_addr_list;<br />  };<br />解释一下这个结构：<br />其中，<br />  char *h_name 表示的是主机的规范名。例如</font><a href="http://www.google.com/" style="text-decoration:none;color:rgb(51,102,153);"><font size="4">www.google.com</font></a><font size="4">的规范名其实是</font><a href="http://www.l.google.com/" style="text-decoration:none;color:rgb(51,102,153);"><font size="4">www.l.google.com</font></a><font size="4">。<br />  char   **h_aliases 表示的是主机的别名。</font><a href="http://www.google.com/" style="text-decoration:none;color:rgb(51,102,153);"><font size="4">www.google.com</font></a><font size="4">就是google他自己的别名。有的时候，有的主机可能有好几个别名，这些，其实都是为了易于用户记忆而为自己的网站多取的名字。<br />  int   h_addrtype 表示的是主机ip地址的类型，到底是ipv4(AF_INET)，还是ipv6(AF_INET6)<br />  int   h_length 表示的是主机ip地址的长度<br />  int   **h_addr_lisst 表示的是主机的ip地址，注意，这个是以网络字节序存储的。千万不要直接用printf带%s参数来打这个东西，会有问题的哇。所以到真正需要打印出这个IP的话，需要调用inet_ntop()。</font></p>
<p style="text-indent:2em;line-height:22px;font-size:14px;margin:1em 0 .5em;padding:0;"><span class="Apple-style-span" style="font-size:18px;"><span class="Apple-style-span" style="color:rgb(128,128,128);font-family:新宋体;font-size:12px;line-height:14px;">#include &lt;arpa/inet.h&gt;</span><br /></span></p>
<p style="text-indent:2em;line-height:22px;font-size:14px;margin:1em 0 .5em;padding:0;"><font size="4">const char *inet_ntop(int af, const void *src, char *dst, socklen_t cnt) ：<br />这个函数，是将类型为af的网络地址结构src，转换成主机序的字符串形式，存放在长度为cnt的字符串中。<br />这个函数，其实就是返回指向dst的一个指针。如果函数调用错误，返回值是NULL。</font></p>
<p style="text-indent:2em;line-height:22px;font-size:14px;margin:1em 0 .5em;padding:0;"><span class="Apple-style-span" style="font-size:18px;">编译时要加上-lsocket选项，否则编译器将会报出invalid reference的错误。如： gcc -o name2addr name2addr.c -lsocket.</span></p>
</div>


    <small class="meta">December 24, 2008 | <a href='/c/c++/network/telecom/unix/linux/2008/12/24/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520%25e7%2594%25b1%25e6%259c%258d%25e5%258a%25a1%25e5%2599%25a8%25e5%2590%258d%25e5%25ad%2597%2528host%2520name%2529%25e8%258e%25b7%25e5%25be%2597ip%25e5%259c%25b0%25e5%259d%2580%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/#disqus_thread'>View Comments</a></small>
  </div>

  <div class="post">
    <h2><a href="/bkup/2008/12/24/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520%25e7%2594%25b1%25e6%259c%258d%25e5%258a%25a1%25e5%2599%25a8%25e5%2590%258d%25e5%25ad%2597%2528host%2520name%2529%25e8%258e%25b7%25e5%25be%2597ip%25e5%259c%25b0%25e5%259d%2580%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/">由服务器名字(Host name)获得IP地址</a></h2>

    <p>
    一下代码可以根据host name获得IP地址：
<div>
<div class="highlighter">
<ol start="1" class="highlighter-c">
<li><span class="preprocessor">#include &lt;stdio.h&gt;</span><span></span></li>
<li class="alt"><span></span><span class="preprocessor">#include &lt;netdb.h&gt;</span><span></span></li>
<li><span></span><span class="preprocessor">#include &lt;sys/socket.h&gt;</span><span></span></li>
<li class="alt"><span></span><span class="preprocessor">#include &lt;arpa/inet.h&gt;</span><span></span></li>
<li><span></span><span class="preprocessor">#include &lt;netinet/in.h&gt;</span><span></span></li>
<li class="alt"><span></span></li>
<li><span></span><span class="keyword">int</span><span> main(</span><span class="keyword">int</span><span> argc,</span><span class="keyword">char</span><span> **argv)</span></li>
<li class="alt"><span>{</span></li>
<li><span>    </span><span class="keyword">struct</span><span> hostent *hptr;</span></li>
<li class="alt"><span>    </span><span class="keyword">struct</span><span> in_addr *in_addr_ptr;</span></li>
<li><span>    </span><span class="keyword">char</span><span> *ptr,**pptr,**listptr,*addr_ptr;</span></li>
<li class="alt"><span>    </span><span class="keyword">char</span><span> str[32];</span></li>
<li><span>    </span><span class="comment">/*Host name--the first param*/</span><span></span></li>
<li class="alt"><span>    ptr=argv[1];</span></li>
<li><span>    </span><span class="keyword">if</span><span>((hptr=gethostbyname(ptr))==NULL)</span></li>
<li class="alt"><span>    {</span></li>
<li><span>        printf(</span><span class="string">"gethostbyname error for host: %s/n"</span><span>,ptr);</span></li>
<li class="alt"><span>        </span><span class="keyword">return</span><span> -1;</span></li>
<li><span>    }</span></li>
<li class="alt"><span>    </span><span class="comment">/*print official host name*/</span><span></span></li>
<li><span>    printf(</span><span class="string">"offial host name: %s/n"</span><span>,hptr-&gt;h_name);</span></li>
<li class="alt"><span>    </span><span class="comment">/*print all the aliases of the host*/</span><span></span></li>
<li><span>    </span><span class="keyword">for</span><span>(pptr=hptr-&gt;h_aliases;*pptr!=NULL;pptr++)</span></li>
<li class="alt"><span>        printf(</span><span class="string">"alias:%s/n"</span><span>,*pptr);</span></li>
<li><span></span></li>
<li class="alt"><span>    </span><span class="comment">/*print IP address*/</span><span></span></li>
<li><span>    </span><span class="keyword">switch</span><span> (hptr-&gt;h_addrtype) {</span></li>
<li class="alt"><span>    </span><span class="keyword">case</span><span> AF_INET:</span></li>
<li><span>        listptr = hptr-&gt;h_addr_list;</span></li>
<li class="alt"><span>        </span><span class="keyword">if</span><span> ( (in_addr_ptr = (</span><span class="keyword">struct</span><span> in_addr *) *listptr) != NULL) {</span></li>
<li><span></span></li>
<li class="alt"><span>            addr_ptr = inet_ntoa(*in_addr_ptr);</span></li>
<li><span>            </span></li>
<li class="alt"><span>            printf(</span><span class="string">"address: %s/n"</span><span>,addr_ptr);</span></li>
<li><span>        </span></li>
<li class="alt"><span>            </span><span class="keyword">return</span><span>(0);</span></li>
<li><span>        }</span></li>
<li class="alt"><span>        </span><span class="keyword">else</span><span> {</span></li>
<li><span>            </span><span class="keyword">return</span><span>(NULL);</span></li>
<li class="alt"><span>        }</span></li>
<li><span></span></li>
<li class="alt"><span>    </span><span class="keyword">default</span><span>:</span></li>
<li><span>        printf(</span><span class="string">"unknown address type %d/n"</span><span>,hptr-&gt;h_addrtype);</span></li>
<li class="alt"><span></span></li>
<li><span>        </span><span class="keyword">return</span><span>(NULL);</span></li>
<li class="alt"><span>    }</span></li>
<li><span></span></li>
<li class="alt"><span>    </span><span class="keyword">return</span><span> 0;</span></li>
<li><span>}</span></li>
<li class="alt"><span></span></li>
<li><span></span></li>
</ol>
</div>
<p><span class="Apple-style-span" style="color:rgb(0,0,0);font-family:verdana;line-height:18px;font-size:10pt;"></span>
<p style="text-indent:2em;line-height:22px;font-size:14px;margin:1em 0 .5em;padding:0;"><font size="4">struct hostent *gethostbyname(const char *name);<br />这个函数的传入值是域名或者主机名，例如"</font><a href="http://www.google.com%22%2C%22wpc/" style="text-decoration:none;color:rgb(51,102,153);"><font size="4">www.google.com","wpc</font></a><font size="4">"等等。<br />传出值，是一个hostent的结构（如下）。如果函数调用失败，将返回NULL。</font></p>
<p style="text-indent:2em;line-height:22px;font-size:14px;margin:1em 0 .5em;padding:0;"><font size="4">struct hostent {<br />  char  *h_name;<br />  char  **h_aliases;<br />  int   h_addrtype;<br />  int   h_length;<br />  char  **h_addr_list;<br />  };<br />解释一下这个结构：<br />其中，<br />  char *h_name 表示的是主机的规范名。例如</font><a href="http://www.google.com/" style="text-decoration:none;color:rgb(51,102,153);"><font size="4">www.google.com</font></a><font size="4">的规范名其实是</font><a href="http://www.l.google.com/" style="text-decoration:none;color:rgb(51,102,153);"><font size="4">www.l.google.com</font></a><font size="4">。<br />  char   **h_aliases 表示的是主机的别名。</font><a href="http://www.google.com/" style="text-decoration:none;color:rgb(51,102,153);"><font size="4">www.google.com</font></a><font size="4">就是google他自己的别名。有的时候，有的主机可能有好几个别名，这些，其实都是为了易于用户记忆而为自己的网站多取的名字。<br />  int   h_addrtype 表示的是主机ip地址的类型，到底是ipv4(AF_INET)，还是ipv6(AF_INET6)<br />  int   h_length 表示的是主机ip地址的长度<br />  int   **h_addr_lisst 表示的是主机的ip地址，注意，这个是以网络字节序存储的。千万不要直接用printf带%s参数来打这个东西，会有问题的哇。所以到真正需要打印出这个IP的话，需要调用inet_ntop()。</font></p>
<p style="text-indent:2em;line-height:22px;font-size:14px;margin:1em 0 .5em;padding:0;"><span class="Apple-style-span" style="font-size:18px;"><span class="Apple-style-span" style="color:rgb(128,128,128);font-family:新宋体;font-size:12px;line-height:14px;">#include &lt;arpa/inet.h&gt;</span><br /></span></p>
<p style="text-indent:2em;line-height:22px;font-size:14px;margin:1em 0 .5em;padding:0;"><font size="4">const char *inet_ntop(int af, const void *src, char *dst, socklen_t cnt) ：<br />这个函数，是将类型为af的网络地址结构src，转换成主机序的字符串形式，存放在长度为cnt的字符串中。<br />这个函数，其实就是返回指向dst的一个指针。如果函数调用错误，返回值是NULL。</font></p>
<p style="text-indent:2em;line-height:22px;font-size:14px;margin:1em 0 .5em;padding:0;"><span class="Apple-style-span" style="font-size:18px;">编译时要加上-lsocket选项，否则编译器将会报出invalid reference的错误。如： gcc -o name2addr name2addr.c -lsocket.</span></p>
</div>


    <small class="meta">December 24, 2008 | <a href='/bkup/2008/12/24/%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520%25e7%2594%25b1%25e6%259c%258d%25e5%258a%25a1%25e5%2599%25a8%25e5%2590%258d%25e5%25ad%2597%2528host%2520name%2529%25e8%258e%25b7%25e5%25be%2597ip%25e5%259c%25b0%25e5%259d%2580%250d%250a%2520%2520%2520%2520%2520%2520%2520%2520/#disqus_thread'>View Comments</a></small>
  </div>

</div>

<div class='paging'>
  
    <a href='/page30' class='older'>Older Posts</a>
  

  
    <a href='/page28' class='newer'>Newer Posts</a>
  

  
  <div class='clear'></div>
</div>

        </div>
      </div>

      <div id="bottom" class="span8 offset4">
        <div class="well">
          <a href="/about/">About</a> |
          <a href="/archives/">Archives</a> |
          <a href="/atom.xml">feed</a>
        </div>
      </div>
    </div>
  </div>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script src="/javascripts/bootstrap.min.js"></script>

  <!-- Google Analytics Code -->
  <script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-9947336-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script');
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 
          'http://www') + '.google-analytics.com/ga.js';
      ga.setAttribute('async', 'true');
      document.documentElement.firstChild.appendChild(ga);
    })();

  </script>
</body>
</html>

