
<!DOCTYPE HTML>
<html lang="en-US" xmlns="http://www.w3.org/1999/xhtml" xmlns:wb="http://open.weibo.com/wb">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bo Yang | Bo's Blog</title>
  
  <meta name="author" content="Bo Yang" />
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <!--
  <link href="/assets/themes/clear/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  -->

  <!-- Bootstrap -->
  <link href="/assets/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="/assets/bootstrap/css/bootstrap-theme.min.css" rel="stylesheet">

  <!-- font-awesome -->
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" rel="stylesheet">

  <!-- Google Prettify -->
  <link href="/assets/google-code-prettify/desert.css" rel="stylesheet" type="text/css" media="all">
  <!-- Google Pretty end -->

  <link href="/assets/style/blog.css" rel="stylesheet">
  
  <script src="/assets/bootstrap/js/jquery-1.10.2.js"></script>
  <script src="/assets/bootstrap/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>

<body>

   <!-- navigation bar -->
	<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
				<a class="navbar-brand" href="/"><b>bo-yang</b></a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse navbar-ex1-collapse">
				<ul class="nav navbar-nav">
					<li><a href="/archive.html"><b>Archive</b></a>
					</li>
					<li><a href="/tags.html"><b>Tags</b></a>
                    </li>
                    <li><a href="/about.html"><b>About</b></a>
                    </li>
                    <li><a href="/messages.html"><b>Messages</b></a>
                    </li>
				</ul>
				<ul class="nav navbar-nav pull-right">
		          <li>
		            <form class="navbar-form navbar-search" method="get" action="http://www.google.com/search" target="google_window">
		              <input id="g_search" type="text" class="search-query" placeholder="Search..." name="q" />
		              <input type="submit" name="btnG" style="display:none" id="searchsubmit" value="Search" />
		              <input type="hidden" name="ie" value="UTF-8" />
		              <input type="hidden" name="oe" value="UTF-8" />
		              <input type="hidden" name="hl" value="en-US" />
		              <input type="hidden" name="domains" value="http://bo-yang.github.io/" />
					  <input type="hidden" name="sitesearch" value="http://bo-yang.github.io/" />
					  <button type="submit" class="button button-rounded button-flat-blue">Go</button>
		            </form>
		          </li>
		        </ul>
            </div>
			<!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

  <div class="container">
    <div class="row" id="content-row">
      
<div class="page-header">
	<h1>Bo Yang  <small style="margin-left:20px;"><font face="cursive"><i>Keep looking. Don't settle.</i></font></small></h1>
</div>

<div class="container">
    <div class="row" id="content-row">
		<div class="col-md-9">
	<!-- blog entry -->
	
	<div class="post paper">	
    <h2 class="header"><a href="/2008/12/01/kshell-note-5">Korn Shell Notes(V)</a></h2>
    <p>
    	<span class="glyphicon glyphicon-time"></span> Posted by <strong>Bo Yang</strong> at <strong>2008-12-01</strong> with tags <span class="glyphicon glyphicon-tag"></span><a href="/tags.html#Shell-ref" rel="nofollow">Shell</a>, <span class="glyphicon glyphicon-tag"></span><a href="/tags.html#Unix/Linux-ref" rel="nofollow">Unix/Linux</a>, <span class="glyphicon glyphicon-tag"></span><a href="/tags.html#Notes-ref" rel="nofollow">Notes</a>
	</p>
	<hr>
    
    <div class="post_at_index thepost">
    	<p>
     <span class="Apple-style-span" style="color:rgb(0,0,0);font-family:Verdana;font-size:13px;"><span class="Apple-style-span" style="font-size:19px;font-style:italic;font-weight:bold;">19. Input/Output Commands</span><br />
<h2 style="font-size:14pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h2>
<h3 style="font-size:12pt;"><a name="19_1_Escape_Characters_1455877" id="19_1_Escape_Characters_1455877"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">19.1 Escape Characters</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">
<div id="t.5t" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><img src="http://docs.google.com/File?id=dd6nw3mt_183d5p8rtgc_b" style="width:533px;height:397px;" /></p>
</div>
<p></span></span>
<div style="text-align:left;margin-top:0;margin-bottom:0;">The /c escape character causes the trailing newline to be dropped from the output. It is often used to create prompts.<br /><span style="font-family:'Courier New';">    $ print "Enter choice: /c"</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    Enter choice: $</span><br />Notice that the command prompt was displayed following the argument, and not on the next line.</p>
<h3 style="font-size:12pt;"><a name="19_2_print_Options_00785647007" id="19_2_print_Options_00785647007"></a>19.2 print Options</h3>
<div id="fkqi" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><img src="http://docs.google.com/File?id=dd6nw3mt_184ggh3tnpj_b" style="width:546px;height:518px;" />
<div style="text-align:left;margin-top:0;margin-bottom:0;">
<h3 style="font-size:12pt;"><a name="_19_3_The_exec_Command_3587034" id="_19_3_The_exec_Command_3587034"></a>19.3 The exec Command</h3>
<p>The <b>exec</b> command is used to perform I/O redirection with file descriptors 0 through 9 using this format:<br /><span style="font-family:Georgia;"><b>        exec</b> <i>I/O-redirection-command</i></span><br />The I/O redirection performed by the exec command stays in effect until specifically closed, changed, or if the script or shell terminates.</div>
</div>
<p>Here, file redir.out is opened as file descriptor 5 for reading and writing:<br /><span style="font-family:'Courier New';">    $ exec 5&lt;&gt;redir.out</span><br />Now the print command writes something to file descriptor 5:<br /><span style="font-family:'Courier New';">    $ print —u5 "This is going to fd 5"</span><br />and the cat command reads from it:<br /><span style="font-family:'Courier New';">    $ cat &lt;&amp;5</span><br style="font-family:'Courier New';" /></div>
<p><span style="font-family:'Courier New';"></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:'Courier New';">    This is going to fd 5</span><br />To finish up, we use another exec to close file descriptor 5:<br />$ exec 5&lt;&amp;—</p>
<p>Standard input can be taken from a file like this:<br /><span style="font-family:'Courier New';">    exec 0&lt;file</span><br />Commands could be read in from file, and it would be almost as if you typed them at your terminal.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="_19_4_The_read_Command_8516806" id="_19_4_The_read_Command_8516806"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">19.4 The read Command</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The read command is used to read input from a terminal or file. The basic format for the read command is:<br /><span style="font-family:Georgia;"><b>        read</b> <i>variables</i></span><br />where a line is read from standard input. Each word in the input is assigned to a corresponding variable, so the first variable gets the first word, the second variable the second word, and so on. Here, "This is output" is read in to the variables X, Y, and Z. The first word of the input is This, so it is assigned to the first variable X. The second word is is, so it is assigned to the second variable Y. The third word is output, so it is assigned to Z.<br /><span style="font-family:'Courier New';">    $ print "This is output" | read X Y Z</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $X</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    This</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $Y</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    is</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $Z</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    output</span><br /><u><br />If there aren't enough variables for all the words in the input, the last variable gets all the remaining words.</u> This command is the same as the last one, except that an extra string "again" is given.<br /><span style="font-family:'Courier New';">    $ print "This is output again " | read X Y Z</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $X</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    This</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $Y</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    is</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $Z</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    output again</span>
<div id="przl" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><img src="http://docs.google.com/File?id=dd6nw3mt_185zd8vcvfj_b" style="width:541px;height:340px;" /></p>
</div>
<p></span></span>
<div style="text-align:left;margin-top:0;margin-bottom:0;">
<h4 style="font-size:10pt;"><a name="_19_4_1_Reading_Input_from_Fil" id="_19_4_1_Reading_Input_from_Fil"></a>19.4.1 Reading Input from Files</h4>
<p>The read command by itself will only read one line of input, so you need a looping command with it. To read in the contents of a file, use this format:<br /><b><span style="font-family:Georgia;">        exec </span></b><span style="font-family:Georgia;"><i><span style="font-family:Verdana;">0</span>&lt;file</i></span><b><br style="font-family:Georgia;" /><span style="font-family:Georgia;">        while read </span></b><span style="font-family:Georgia;"><i>variable</i></span><b><br style="font-family:Georgia;" /><span style="font-family:Georgia;">        do</span><br style="font-family:Georgia;" /></b><i><span style="font-family:Georgia;">                    commands</span></i><b><br style="font-family:Georgia;" /><span style="font-family:Georgia;">        done</span></b><br />The exec command opens file for standard input, and the while command causes input to be read a line at a time until there is no more input.</div>
<p><span style="font-family:'Courier New';"></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br />Here is an alternate format that will also work for reading input from files:<br /><b><span style="font-family:Georgia;">        cat </span></b><span style="font-family:Georgia;"><i>file</i></span><b><span style="font-family:Georgia;"> | while read </span></b><i><span style="font-family:Georgia;">variable</span></i><b><br style="font-family:Georgia;" /><span style="font-family:Georgia;">        do</span><br style="font-family:Georgia;" /></b><i><span style="font-family:Georgia;">                commands</span></i><b><br style="font-family:Georgia;" /><span style="font-family:Georgia;">        done</span></b><br />On the systems tested, the exec format for reading input from files was about 40-60 times faster than the last version above.</p>
<p></span></span><br />
<h4 style="font-size:10pt;"><a name="_19_4_2_The_IFS_Variable_80535" id="_19_4_2_The_IFS_Variable_80535"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">19.4.2 The IFS Variable</span></span></h4>
<h4 style="font-size:10pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h4>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The read command normally uses the IFS (Internal Field Separator) variable as the word separators. The default for IFS is space, tab, or snewline character, in that order, but it can be set to something else.<br />By setting IFS to :, the fields in the /etc/passwd file could be read into separate variables.<br /><span style="font-family:'Courier New';">    $ cat ifs_test</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    IFS=:</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    exec 0&lt;/etc/passwd</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    while read -r NAME PASS UID GID COMM HOME SHELL</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    do</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">        print "Account name= $NAME</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    Home directory= $HOME</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    Login Shell= $SHELL"</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    done</span></p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="_19_4_3_Reading_Input_Interact" id="_19_4_3_Reading_Input_Interact"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">19.4.3 Reading Input Interactively</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The read command allows input to be read interactively using this format:<br /><span style="font-family:Georgia;"><b>        read</b> <i>name</i><b>?</b><i>prompt</i></span><br />where </span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:Georgia;"><i>prompt</i></span></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"> is displayed on standard error and the response is read into </span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:Georgia;"><i>name</i></span></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;">.</p>
<p>So instead of using two commands to display a prompt and read the input:<br /><span style="font-family:'Courier New';">    $ print —n "Enter anything: "</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ read ANSWER</span><br />The same thing can be done with one command.<br /><span style="font-family:'Courier New';">    $ read ANSWER?"Enter anything: "</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    Enter anything: ANYTHING</span><br />Here is ANSWER:<br /><span style="font-family:'Courier New';">    $ print $ANSWER</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    ANYTHING</span></p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="_19_4_4_The_REPLY_variable_360" id="_19_4_4_The_REPLY_variable_360"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">19.4.4 The<span style="font-family:Georgia;"> </span><b>REPLY</b> variable</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">If no variables are given to the <b>read</b> command, the input is automatically assigned to the <b>REPLY</b> variable. Here, ANYTHING is read into REPLY:<br /><span style="font-family:'Courier New';">    $ print ANYTHING | read</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $REPLY</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    ANYTHING</span></p>
<p></span></span><br />
<h2 style="font-size:14pt;"><a name="_20_Miscellaneous_Programming_" id="_20_Miscellaneous_Programming_"></a><i><span style="font-family:'Courier New';"><span style="font-family:Verdana;">20 Miscellaneous Programming Features</span></span></i></h2>
<h2 style="font-size:14pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h2>
<h3 style="font-size:12pt;"><a name="_20_1_The_Command_872161202132" id="_20_1_The_Command_872161202132"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">20.1 The . Command</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The <b>.</b> command reads in a complete file, then executes the commands in it as if they were typed in at the prompt. This is done in the current shell, so any variable, alias, or function settings stay in effect. It is typically used to read in and execute a profile, environment, alias, or functions file. Here the .profile file is read in and executed:<br />$ . .profile</p>
<p>The following example illustrates the difference between executing files as Korn shell scripts and reading/executing them using the .command. The .test file sets the variable X:<br /><span style="font-family:'Courier New';">    $ cat .test</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    X=ABC</span><br /><u>When the .test file is executed as a Korn shell script, variable X is not defined in the current environment, because scripts are run in a subshell</u>:<br /><span style="font-family:'Courier New';">    $ ksh .test</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $X</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $</span><br /><u>After the .test file is read in and executed using the . command, notice that the variable X is still defined</u>:<br /><span style="font-family:'Courier New';">    $ . .test</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $X</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    ABC</span><br />The standard search path, PATH, is checked if the file is not in the current directory.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="_20_2_Functions_01172757241874" id="_20_2_Functions_01172757241874"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">20.2 Functions</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Functions are most efficient for commands with arguments that are invoked fairly often, and are defined with the following format:</p>
<p><span style="font-family:Georgia;"><b>        function</b> <i>name</i> {</span><br style="font-family:Georgia;" /><i><span style="font-family:Georgia;">                commands</span></i><br style="font-family:Georgia;" /><span style="font-family:Georgia;">        }<br /></span><br />To maintain compatibility with the Bourne shell, functions can also be declared with this POSIX-style format:<br /><span style="font-family:Georgia;"><i>        function-name</i><b>()</b> {</span><br style="font-family:Georgia;" /><i><span style="font-family:Georgia;">                commands</span></i><br style="font-family:Georgia;" /><span style="font-family:Georgia;">        }</span><br style="font-family:Georgia;" /><br />These types of functions have many limitations compared to Korn shell style functions, such as no support for local variables.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="_20_3_Scope_Availability_75594" id="_20_3_Scope_Availability_75594"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">20.3 Scope &amp; Availability</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">By default, functions are not available to subshells. This means that <u>a regular function that was read in your working environment, <b>.profile</b> file, or environment file would not be available in a Korn shell script.<br /></u><br />To export a function, use the <b>typeset -fx</b> command:<br /><b>        typeset -fx</b> <i>function-name</i></p>
<p>To make a function available across separate invocations of the Korn shell, include the </span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b> typeset -fx</b> <i>function-name</i></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"> command in the environment file.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="_20_4_Function_Variables_90486" id="_20_4_Function_Variables_90486"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">20.4 Function Variables</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">All function variables, except those explicitly declared locally within the function with the <b>typeset</b> command, are inherited and shared by the calling Korn shell script. In this example, the X, Y, and Z variables are set within and outside of the function f:</p>
<p><span style="font-family:'Courier New';">    $ cat ftest</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    X=1</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    function f {</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">        Y=2</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">        typeset Z=4</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">        print "In function f, X=$X, Y=$Y, Z=$Z"</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">        X=3</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    }</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    f</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    print "Outside function f, X=$X, Y=$Y, Z=$Z"</span></p>
<p>Notice that when executed, all the variable values are shared between the function and calling script, except for variable Z, because it is explicitly set to a local function variable using the typeset command.<br />The value is not passed back to the calling Korn shell script:<br /><span style="font-family:'Courier New';">    $ ftest</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    In function f, X=1, Y=2, Z=4</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    Outside function f, X=3, Y=2, Z=</span></p>
<p>The current working directory, aliases, functions, traps, and open files from the invoking script or current environment are also shared with functions.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="_20_5_Displaying_Current_Funct" id="_20_5_Displaying_Current_Funct"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">20.5 Displaying Current Functions</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The list of currently available functions are displayed using the <b>typeset -f </b>command.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="_20_6_Autoloading_Functions_38" id="_20_6_Autoloading_Functions_38"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">20.6 Autoloading Functions</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">To improve performance, functions can be specified to autoload. <u>This causes the function to be read in when invoked, instead of each time a Korn shell script is invoked, and is used with functions that are not invoked frequently</u>. To define an autoloading function, use the <span style="font-family:Georgia;"><b>typeset -fu</b> <i>function-name</i></span> command. Here, lsf is made an autoloading function:<br /><span style="font-family:'Courier New';">    $ typeset —fu lsf</span></p>
<p>The <b>autoload</b> alias can also be used to define an autoloading function. On most systems, it is preset to <b>typeset -fu</b>.</p>
<p>The <b>FPATH</b> variable which contains the pathnames to search for autoloading functions must be set and have at least one directory for autoloading functions to work.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="_20_7_Discipline_Functions_023" id="_20_7_Discipline_Functions_023"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">20.7 Discipline Functions</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><u>Discipline functions are a special type of function used to manipulate variables. They are defined but not specifically called. Rather, they are called whenever the variable associated with the function is accessed.</u></p>
<p>There are some specific rules as to how discipline functions are named and accessed. First of all, discipline functions are named using this syntax:<br /><i><span style="font-family:Georgia;">       <b> </b><b>name.function</b></span></i></p>
<p>Notice the the funcion has two parts separated with a dot. <u>The first part name corresponds to the name of a variable, and the second part must be <b>get</b>, <b>set</b>, or <b>unset</b></u>. These correspond to the following operations on the variable:<br /></span></span>
<ul style="margin-top:0;margin-bottom:0;">
<li style="margin-top:0;margin-bottom:0;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b>get</b>     whenever the base discipline variable is accessed</span></span></li>
<li style="margin-top:0;margin-bottom:0;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b>set</b>     whenever the base discipline variable is set</span></span></li>
<li style="margin-top:0;margin-bottom:0;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b>unset</b>     whenever the base discipline variable is unset</span></span></li>
</ul>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br />For example, the discipline function LBIN.get, LBIN.set, LBIN.unset is called whenever the variable LBIN is accessed, set, or unset.</p>
<p>All three discipline functions are optional, so not all need to be specified. Within a discipline function, the following special reserved variables can be used:<br /></span></span>
<ul style="margin-top:0;margin-bottom:0;">
<li style="margin-top:0;margin-bottom:0;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b>.sh.name</b>     name of current variable</span></span></li>
<li style="margin-top:0;margin-bottom:0;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b>.sh.value</b>     value of the current variable</span></span></li>
<li style="margin-top:0;margin-bottom:0;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b>.sh.subscript</b>     name of the subscript (if array variable)</span></span></li>
</ul>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br />From a practical perspective, discipline functions are often used to help debug by tracing the setting and current value of variables in running scripts. Here is a function that can be used to trace setting the value of X:<br /><span style="font-family:'Courier New';">    function X.set {</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">        print "DEBUG: ${.sh.name} = ${.sh.value}"</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    }</span><br style="font-family:'Courier New';" /><br />Discipline functions are also a good place to centralize your variable assignment validation rules. Here is a function that checks to make sure that X it set ao a number between 3 and 10:<br /><span style="font-family:'Courier New';">    function X.set {</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">        if (( .sh.value&lt;3 || .sh.value &gt;10 ))</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">        then</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">            print "Bad value for ${.sh.name}: ${.sh.value}"</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">        fi</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    }</span></p>
<p>Note that <b>builtin</b> functions can also be used as additional discipline functions.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="_20_8_FPATH_8677511420100927" id="_20_8_FPATH_8677511420100927"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">20.8 FPATH</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The <b>FPATH</b> variable contains a list of colon-separated directories to check when an autoloading function is invoked. It is analogous to<b> PATH</b> and <b>CDPATH</b>, except that the Korn shell checks for function files, instead of commands or directories. Each directory in FPATH is searched from left-to-right for a file whose name matches the name of the function. Once found, it is read in and executed in the current environment. With the following <b>FPATH</b> setting, if an autoloading function <b>lsf</b> was invoked, the Korn shell would check for a file called <b>lsf</b> in <b>/home/anatole/.fdir</b>, then <b>/etc/.functions</b>, and if existent, read and execute it:</p>
<p><span style="font-family:'Courier New';">    $ print $FPATH</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    /home/anatole/.fdir:/etc/.functions</span></p>
<p>There is no default value for <b>FPATH</b>, so if not specifically set, this feature is not enabled.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="_20_9_Removing_Function_Defini" id="_20_9_Removing_Function_Defini"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">20.9 Removing Function Definitions</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Functions are removed by using the <b>unset -f</b> command. Here, the rd function is removed:<br /><span style="font-family:'Courier New';">    $ unset -f rd</span><br style="font-family:'Courier New';" /><br /></span></span><br />
<h3 style="font-size:12pt;"><a name="_20_10_Traps_9392005437985063" id="_20_10_Traps_9392005437985063"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">20.10 Traps</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The trap command is used to execute commands when the specified signals are received.<br /><span style="font-family:Georgia;"><b>        trap</b> commands signals</span></p>
<p><u>Trap commands are useful in controlling side effects from Korn shell scripts</u>. For example, if you have a script that creates a number of temporary files, and you hit the &lt;BREAK&gt; or &lt;DELETE&gt; key in the middle of execution, you may inadvertently leave the temporary files. By setting a <b>trap</b> command, the temporary files can be cleaned up on an error or interrupt.</p>
<p>The <b>trap_test</b> script creates some files, then removes them when an interrupt is received. <span style="background-color:rgb(0,255,255);">Notice that the </span><b>trap</b><span style="background-color:rgb(0,255,255);"> command is surrounded in single quotes. This is so that the </span><b>FILES</b><span style="background-color:rgb(0,255,255);"> variable is evaluated when the signal is received, not when the trap is set.</span><br /><span style="font-family:'Courier New';">    $ cat trap_test</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    trap 'print "$0 interrupted - removing temp files" ;/</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    rm —rf $FILES; exit 1' 1 2</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    FILES="a b c d e f"</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    touch $FILES</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    sleep 100</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ trap_test</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    Ctl-c</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    trap_test interrupted - removing temp files</span></p>
<p>If an invalid trap is set, an error is generated.</p>
<p></span></span><br />
<h4 style="font-size:10pt;"><a name="_20_10_1_Ignoring_Signals_1856" id="_20_10_1_Ignoring_Signals_1856"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">20.10.1 Ignoring Signals</span></span></h4>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The <b>trap</b> command can be used to ignore signals by specifying null as the command argument:<br /><span style="font-family:Georgia;">        <b>trap  "" </b> <i>signals</i></span><br />This could be used to make all or part of a Korn shell script uninterruptable using normal interrupt keys like Ctl-c.</p>
<p></span></span><br />
<h4 style="font-size:10pt;"><a name="_20_10_2_Resetting_Traps_86836" id="_20_10_2_Resetting_Traps_86836"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">20.10.2 Resetting Traps</span></span></h4>
<h4 style="font-size:10pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h4>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The trap command can also be used to reset traps to their default action by omitting the command argument:<br />    <b>trap</b> - <i>signals</i><br />or<br />    <b>trap</b><i> signals</i></p>
<p></span></span><br />
<h4 style="font-size:10pt;"><a name="_20_10_3_Exit_Function_Traps_3" id="_20_10_3_Exit_Function_Traps_3"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">20.10.3 Exit &amp; Function Traps</span></span></h4>
<h4 style="font-size:10pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h4>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">A trap can be set to execute when a Korn shell script exits. This is done by using a 0 or EXIT as the signals argument to the trap command:<br /><b>        trap</b> '<i><span style="font-family:Georgia;">commands</span></i>' <b>0</b><br />or<br /><b>        trap</b> '</span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><i><span style="font-family:Georgia;">commands</span></i></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;">' <b>EXIT</b><br />This could be used to consolidate Korn shell script cleanup functions into one place.<br /></span></span><br />
<h4 style="font-size:10pt;"><a name="_20_10_4_Trap_Signal_Precedenc" id="_20_10_4_Trap_Signal_Precedenc"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">20.10.4 Trap Signal Precedence</span></span></h4>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">If multiple traps are set, the order of precedence is:<br /></span></span>
<ul style="margin-top:0;margin-bottom:0;">
<li style="margin-top:0;margin-bottom:0;"><b><span style="font-family:'Courier New';"><span style="font-family:Verdana;">DEBUG</span></span></b></li>
<li style="margin-top:0;margin-bottom:0;"><b><span style="font-family:'Courier New';"><span style="font-family:Verdana;">ERR</span></span></b></li>
<li style="font-family:Georgia;margin-top:0;margin-bottom:0;"><i>Signal Number</i></li>
<li style="margin-top:0;margin-bottom:0;"><b><span style="font-family:'Courier New';"><span style="font-family:Verdana;">EXIT</span></span></b></li>
</ul>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br /></span></span><br />
<h4 style="font-size:10pt;"><a name="_20_10_5_Trapping_Keyboard_Sig" id="_20_10_5_Trapping_Keyboard_Sig"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">20.10.5 Trapping Keyboard Signals</span></span></h4>
<h4 style="font-size:10pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h4>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The Korn shell traps <b>KEYBD</b> signals (sent when you type a character) and automatically assigns the following reserved variables:<br /></span></span>
<ul style="margin-top:0;margin-bottom:0;">
<li style="margin-top:0;margin-bottom:0;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b>.sh.edchar</b>     contains last character of key sequence</span></span></li>
<li style="margin-top:0;margin-bottom:0;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b>.sh.edtext</b>     contains current input line</span></span></li>
<li style="margin-top:0;margin-bottom:0;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b>.sh.edmode</b>     contains NULL character (or escape character is user in command mode)</span></span></li>
<li style="margin-top:0;margin-bottom:0;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b>.sh.edcol</b>     contains position within the current line</span></span></li>
</ul>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br /></span></span><br />
<h3 style="font-size:12pt;"><a name="_20_11_Debugging_Korn_Shell_Sc" id="_20_11_Debugging_Korn_Shell_Sc"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">20.11 Debugging Korn Shell Scripts</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The Korn shell provides a number of options that are useful in debugging scripts: <b>noexec</b>, <b>verbose</b>, and <b>xtrace</b>. The noexec option causes commands to be read without being executed. It is used to check for syntax errors in Korn shell scripts. The verbose option causes the input to be displayed as it is read. The xtrace option causes the commands in a script to be displayed as they are executed.</span></span></span>
<div><span class="Apple-style-span" style="color:rgb(0,0,0);font-family:Verdana;font-size:13px;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><img src="http://docs.google.com/File?id=dd6nw3mt_186cd3mp7hq_b&amp;writelyrefresh=0" /><br /></span></span></span>
<div><span class="Apple-style-span" style="color:rgb(0,0,0);font-family:Verdana;font-size:13px;">
<div style="text-align:left;margin-top:0;margin-bottom:0;">
<h4 style="font-size:10pt;">20.11.1 Debugging with trap</h4>
<p>The <b>trap</b> command can also be helpful in debugging Korn shell scripts. The syntax for this type of trap command is:<br /><b>        trap </b><i>commands</i><b> DEBUG</b><br />or<br /><b>        trap </b><i>commands</i><b> ERR</b></div>
<p><span style="font-family:'Courier New';"></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;">
<div style="text-align:left;margin-top:0;margin-bottom:0;"><img src="http://docs.google.com/File?id=dd6nw3mt_1872q8bgfhj_b" style="width:459px;height:143px;" /></p>
<h3 style="font-size:12pt;"><a name="_20_12_Co_Processes_1690269969" id="_20_12_Co_Processes_1690269969"></a>20.12 Co-Processes</h3>
<p><u>Co-processes are commands that are terminated with a <b>|&amp;</b> character. They are executed in the background, but have their standard input and output attached to the current shell.</u><i> </i>The <b>print -p</b> command is used to write to the standard input of a co-process, while <b>read -p</b> is used to read from the standard output of a co-process. Here, the output of the date command is read into the DATE variable using the read -p command:<br /><span style="font-family:'Courier New';">    $ date |&amp;</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    [2] 241</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ read —p DATE</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $DATE</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    Thu Jul 18 12:23:57 PST 1996</span><br />Co-processes can be used to edit a file from within a Korn shell script.</div>
<p></span></span><span style="font-family:'Courier New';"></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;">
<div id="s_ck" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><img src="http://docs.google.com/File?id=dd6nw3mt_188f9s93ndw_b" style="width:562px;height:406px;" /></div>
<div id="s_ck" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><span class="Apple-style-span" style="color:rgb(255,0,0);font-size:28pt;"><span class="Apple-style-span" style="font-weight:bold;">THE END</span></span></div>
<div style="text-align:center;"></div>
<p></span></span></span></div>
</div>

	</div>
	</div>
    
	<div class="post paper">	
    <h2 class="header"><a href="/2008/11/30/kshell-note-4">Korn Shell Notes(IV)</a></h2>
    <p>
    	<span class="glyphicon glyphicon-time"></span> Posted by <strong>Bo Yang</strong> at <strong>2008-11-30</strong> with tags <span class="glyphicon glyphicon-tag"></span><a href="/tags.html#Shell-ref" rel="nofollow">Shell</a>, <span class="glyphicon glyphicon-tag"></span><a href="/tags.html#Unix/Linux-ref" rel="nofollow">Unix/Linux</a>, <span class="glyphicon glyphicon-tag"></span><a href="/tags.html#Notes-ref" rel="nofollow">Notes</a>
	</p>
	<hr>
    
    <div class="post_at_index thepost">
    	<div id="yn69" style="padding:1em 0;text-align:left;">
<h2><i><span style="font-family:'Courier New';"><span style="font-family:Verdana;">16 The Environment</span></span></i><br />
</h2>
<h2>
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span><br />
</h2>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></p>
<div id="i4_8" style="padding:1em 0;text-align:center;">
<img src="http://docs.google.com/File?id=dd6nw3mt_168dd38bmfm_b" style="width:472px;height:714px;" />
</div>
<p></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></p>
<div id="i4_8" style="padding:1em 0;text-align:left;">
<h3><a id="16_1_CDPATH_5651453254671944_6_11823947909311716" name="16_1_CDPATH_5651453254671944_6_11823947909311716"></a><br />
 16.1 CDPATH<br />
 </h3>
<p> The <b>CDPATH</b><br />
variable is provided to make directory navigation easier. It contains a<br />
list of colon-separated directories to check when a full pathname is<br />
not given to the cd command. Each directory in CDPATH is searched from<br />
left-to-right for a directory that matches the cd argument. A : alone<br />
in CDPATH stands for the current directory.</p>
<h3><a id="16_2_PATH_2677888549093702_009_6379903118402938" name="16_2_PATH_2677888549093702_009_6379903118402938"></a><br />
 16.2 PATH<br />
 </h3>
<p> The <b>PATH</b><br />
variable contains a list of colon-separated directories to check when a<br />
command is invoked. Each directory in PATH is searched from<br />
left-to-right for a file whose name matches the command name. If not<br />
found, an error message is displayed. A : alone in PATH specifies to<br />
check the current directory.</p>
<h3><a id="16_3_TMOUT_809440743503734_145_3826941331997027" name="16_3_TMOUT_809440743503734_145_3826941331997027"></a><br />
 16.3 TMOUT<br />
 </h3>
<p>The TMOUT variable specifies the number of seconds that the Korn shell<br />
will wait for input before displaying a 60-second warning message and<br />
exiting. If not set, the default used is 0, which disables the timeout<br />
feature. To set a 10-minute timer, set TMOUT to 600:<br />
<span style="font-family:Courier New;">    $ TMOUT=600</span><br />
 This variable is usually set by the system administrator in the <span style="font-family:Courier New;">/etc/profile</span> file.
</div>
<p></span></span></p>
<h3><a id="16_4_MAILCHECK_687330215443556" name="16_4_MAILCHECK_687330215443556"></a><br />
<span style="font-family:'Courier New';"><span style="font-family:Verdana;">16.4 MAILCHECK</span></span><br />
</h3>
<h3>
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span><br />
</h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The<br />
MAILCHECK variable specifies how often, in seconds, to check for new<br />
mail. If not set, or set to zero, new mail is checked before each new<br />
prompt is displayed. Otherwise, the default setting is 600 seconds (10<br />
minutes).</p>
<p></span></span></p>
<h3><a id="16_5_MAIL_7713528906556307_892_6743312418053198" name="16_5_MAIL_7713528906556307_892_6743312418053198"></a><br />
<span style="font-family:'Courier New';"><span style="font-family:Verdana;">16.5 MAIL</span></span><br />
</h3>
<h3>
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span><br />
</h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The <b>MAIL</b> variable contains the name of a single mailbox file to check for new mail. It is not used if MAILPATH is set.</p>
<p></span></span></p>
<h3><a id="16_6_MAILPATH_3551441223568878" name="16_6_MAILPATH_3551441223568878"></a><br />
<span style="font-family:'Courier New';"><span style="font-family:Verdana;">16.6 MAILPATH</span></span><br />
</h3>
<h3>
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span><br />
</h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The<br />
MAILPATH variable contains a colon-separated list of mailbox files to<br />
check for new mail and is used if you want to read multiple mailboxes.<br />
It overrides the MAIL variable if both are set. This MAILPATH setting<br />
specifies to check two mailbox files, <span style="font-family:Courier New;">/home/anatole/mbox and /news/mbox</span>.<br />
<span style="font-family:Courier New;">    $ print $MAILPATH</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    MAILPATH=/home/anatole/mbox:/news/mbox</p>
<p></span>Just<br />
so you don't think you can go snooping around someone else's mailbox,<br />
this only works if you have read permission on the mailbox file.<br />
 If MAILPATH is not set, there is no default.</p>
<p></span></span></p>
<h3><a id="_16_7_TERM_9189810912229358_5009562197822405" name="_16_7_TERM_9189810912229358_5009562197822405"></a><br />
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"> 16.7 TERM </span></span><br />
</h3>
<h3>
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span><br />
</h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The<br />
TERM variable specifies your terminal type, and is usually set by your<br />
system administrator in the global /etc/profile file. If it's not set<br />
there, then it's probably in your ~/.profile file.</p>
<p></span></span></p>
<h3><a id="16_8_Enabling_Disabling_Option_48916886920819536" name="16_8_Enabling_Disabling_Option_48916886920819536"></a><br />
<span style="font-family:'Courier New';"><span style="font-family:Verdana;">16.8 Enabling/Disabling Options</span></span><br />
</h3>
<h3>
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span><br />
</h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Korn shell options are enabled with the <b>set -o</b><i>option</i> or <b>set</b> -<i>option</i> command. For example, the noglob option disables file name substitution and can be set using either of these commands :<br />
<span style="font-family:Courier New;">    $ set —f</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Verdana;">or</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    $ set —o noglob</span><br />
Options can also be enabled by specifying them on the ksh command line.<br />
Here, a Korn subshell is started with the emacs option enabled:<br />
<span style="font-family:Courier New;">    $ ksh —o emacs</span><br />
 Options can be disabled with the <span style="font-family:Georgia;"><b>set +o</b> <i>option</i></span> or <b>set</b> +<i>option</i> command. In this example, the noglob option is disabled:<br />
<span style="font-family:Courier New;">    $ set +o noglob</span></p>
<p></span></span></p>
<h3><a id="16_9_Displaying_the_Current_Se_47245364006423674" name="16_9_Displaying_the_Current_Se_47245364006423674"></a><br />
<span style="font-family:'Courier New';"><span style="font-family:Verdana;">16.9 Displaying the Current Settings</span></span><br />
</h3>
<h3>
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span><br />
</h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The setting of the current options is displayed with the <b>set -o </b>command.</p>
<div id="kt4h" style="padding:1em 0;text-align:center;">
<a href="http://docs.google.com/File?id=dd6nw3mt_1728crddqft_b" target="_blank"><img src="http://docs.google.com/File?id=dd6nw3mt_1728crddqft_b" style="width:455px;height:734px;" /></a>
</div>
<p>
</span></span></p>
<h3><a id="16_10_Aliases_3822333845613286_08960525051202617" name="16_10_Aliases_3822333845613286_08960525051202617"></a><br />
<span style="font-family:'Courier New';"><span style="font-family:Verdana;">16.10 Aliases</span></span><br />
</h3>
<h3>
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span><br />
</h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Aliases<br />
are command name macros used as shorthand for other commands,<br />
especially frequently used ones. This saves a lot of typing time.<br />
Aliases are defined with the alias name=value<br /> command.Make sure to<br />
enclose the value in quotes if it contains whitespace. Here we create<br />
an alias l that is set to the ls -Fac command:<br />
<span style="font-family:Courier New;">    $ alias l="ls —Fac"</span><br />
 Now when you type in l,<span style="font-family:Courier New;"> ls -Fac</span> is executed:<br />
<span style="font-family:Courier New;">    $ l</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    ./</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    ../</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    compress.Z*</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    func.Z*</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    test/</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    uncompress.Z*</span><br />
<span style="font-family:Courier New;">    . . .</span></p>
<p> Alias values can contain any text, including special characters, like wild-cards, pipes, or I/O redirection operators.</p>
<p> Here we set two aliases: p and h. When invoked, we get h instead of Hello.<br />
<span style="font-family:Courier New;">    $ alias p='print' h=Hello</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    $ p h</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    h</span><br />
 After the p alias is reset with a trailing blank, h gets substituted in the next command correctly:<br />
<span style="font-family:Courier New;">    $ alias p='print ' h=Hello</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    $ p h</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    Hello</span></p>
<p></span></span></p>
<h4><a id="16_10_1_Displaying_Current_Ali" name="16_10_1_Displaying_Current_Ali"></a><br />
<span style="font-family:'Courier New';"><span style="font-family:Verdana;">16.10.1 Displaying Current Aliases</span></span><br />
</h4>
<h4>
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span><br />
</h4>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">A list of the current aliases is displayed using the <b>alias</b> command without arguments.</p>
<p></span></span></p>
<h4><a id="16_10_2_Removing_Aliases_26645" name="16_10_2_Removing_Aliases_26645"></a><br />
<span style="font-family:'Courier New';"><span style="font-family:Verdana;">16.10.2 Removing Aliases</span></span><br />
</h4>
<h4>
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span><br />
</h4>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Aliases are removed with the<b> unalias</b> command. Let's try it with the l alias:<br />
<span style="font-family:Courier New;">    $ unalias l</span></p>
<p></span></span></p>
<h2><a id="17_Korn_Shell_Scripts_48337193" name="17_Korn_Shell_Scripts_48337193"></a><br />
<i><span style="font-family:'Courier New';"><span style="font-family:Verdana;">17 Korn Shell Scripts</span></span></i><br />
</h2>
<h2>
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span><br />
</h2>
<h3><a id="17_1_Positional_Parameters_109" name="17_1_Positional_Parameters_109"></a><br />
<span style="font-family:'Courier New';"><span style="font-family:Verdana;">17.1 Positional Parameters</span></span><br />
</h3>
<h3>
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span><br />
</h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Positional<br />
parameters are special variables used to keep track of arguments to the<br />
Korn shell, scripts, and functions. Positional parameter names contain<br />
only digits and cannot be set directly using <i>variable=value</i> syntax. By default, parameter zero (or $0) is set to the name of the shell, script or function.<br />
<span style="font-family:Courier New;">    $ print $0</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    /bin/ksh</span><br />
The remaining parameters 1 to n are set to each of the arguments passed<br />
to the shell, script or function. For example, if you invoke a Korn<br />
shell script called <b>ptest</b> and pass the arguments <b>A</b>, <b>B</b>, and <b>C</b>, then in the script ptest, <b>$0</b> would be set to <b>ptest</b>, <b>$1</b> to <b>A</b>, <b>$2</b> to <b>B</b>, and <b>$3</b> to <b>C</b>.</p>
<div id="oal2" style="padding:1em 0;text-align:left;">
<img src="http://docs.google.com/File?id=dd6nw3mt_173f7n7tvcw_b" style="width:240px;height:157px;" />
</div>
<p></p>
<div id="t7df" style="padding:1em 0;text-align:center;">
<img src="http://docs.google.com/File?id=dd6nw3mt_174pzmvjcfz_b" style="width:536px;height:541px;" />
</div>
<p>
 There are three special Korn shell variables that provide information about the current positional parameters. <u>The first is <b>$#</b>, and it contains the number of positional parameters</u>. <u>The other two are <b>$@</b> and <b>$*</b>, and they both contain all the positional parameters.</u><br />
So in the above ptest example, $# would be 3, and both $* and $@ would<br />
be A B C. Here is a Korn shell script that manipulates positional<br />
parameters. It displays the name of the current script, the number of<br />
positional parameters, and the value of each of the positional<br />
parameters:<br />
<span style="font-family:Courier New;">    $ cat check_params</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    print "Script name: $0"</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    print "Number of args passed: $#"</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    print "Arguments passed: $*"</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    print "Arg 1=$1, Arg 2=$2, Arg 3=$3"</span></p>
<p></span></span></p>
<h3><a id="17_2_Modifying_Positional_Para" name="17_2_Modifying_Positional_Para"></a><br />
<span style="font-family:'Courier New';"><span style="font-family:Verdana;">17.2 Modifying Positional Parameters</span></span><br />
</h3>
<h3>
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span><br />
</h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">By default, <b>$0</b> is set to the name of the shell, script or function. It cannot be set or modified. The remaining parameters from <b>$1</b> to<b> $n</b> can be reassigned with the<span style="color:rgb(0,0,255);"> </span><b>shift</b><br />
command. The shift command, with no arguments, shifts positional<br />
parameters left once, so that $1 takes the value of $2, $2 takes the<br />
value of $3, and so on. <u>The original value of $1 is lost.<br />
</u> <u><br />
</u>Let's change the check_params script so that it shifts the positional<br />
 parameters left once:<br />
<span style="font-family:Courier New;">    $ cat check_params</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    print "Script name: $0"</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    print "Number of args passed: $#"</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    print "Arguments passed: $*"</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    print "Arg 1=$1, Arg 2=$2, Arg 3=$3"</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    shift</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    print "Number of remaining args: $#"</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    print "Remaining args: $*"</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    print "Arg 1=$1, Arg 2=$2, Arg 3=$3"</span><br />
 When we run it again with the arguments A B:<br />
<span style="font-family:Courier New;">    $ check_params A B</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    Script name: check_params</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    Number of args passed: 2</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    Arguments passed: A B</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    Arg 1=A, Arg 2=B, Arg 3=</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    Number of remaining args: 1</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    Remaining args: B</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    Arg 1=B, Arg 2=, Arg 3=</span><br />
 After the shift command, $1 is set to B and $2 is unset. The original value of $1 is lost.</p>
<p> The positional parameters can be shifted left more than once by providing an integer argument to the <b>shift</b> command: <b><span style="font-family:Georgia;">shift <i>n</i></span></b>.</p>
<p></span></span></p>
<h3><a id="17_3_The_exit_command_23414194" name="17_3_The_exit_command_23414194"></a><br />
<span style="font-family:'Courier New';"><span style="font-family:Verdana;">17.3 The exit command</span></span><br />
</h3>
<h3>
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span><br />
</h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The <b>exit</b> command allows you to terminate execution from anywhere in a Korn shell script and return an <b>exit</b> value using this format:<br />
<b>        exit</b><br />
 or<br />
<b>        exit <i>n</i></b><br />
 where <i>n</i> is the exit status to return. <u>If n is not specified, the exit status of the previous command is used</u>. If you don't use exit, then scripts finish after the last command is executed.</p>
<p></span></span></p>
<h3><a id="_17_4_The_Command__5899032850007576" name="_17_4_The_Command__5899032850007576"></a><br />
<span style="font-family:'Courier New';"><span style="font-family:Verdana;">17.4 The [[...]] Command</span></span><br />
</h3>
<h3>
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span><br />
</h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The<br />
[[...]] command is used to evaluate conditional expressions with file<br />
attributes, strings, integers, and more. The basic format is:<br />
         <b>[[</b><i><b> </b><span style="font-family:Georgia;">expression</span></i> <b>]]</b><br />
 where </span></span><span style="font-family:Courier New;"><span style="font-family:Verdana;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><i><span style="font-family:Georgia;">expression</span></i></span></span></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br />
is the condition you are evaluating. There must be whitespace after the<br />
opening brackets, and before the closing brackets. Whitespace must also<br />
separate the expression arguments and operators. For example, these are<br />
incorrect:<br />
<span style="font-family:Courier New;">    [[$X=$Y]]</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    [[$X = $Y]]</span><br />
 while this is correct:<br />
<span style="font-family:Courier New;">    [[ $X == $Y ]]</span><br />
 Notice that there is white space between $X, $Y, and the = operator.</p>
<p>If the expression evaluates to true, then a zero exit status is<br />
returned, otherwise the expression evaluates to false and a non-zero<br />
exit status is returned.</p>
<p> If you are familiar with the<b> test</b> and <b>[...]</b><br />
commands, then you'll recognize that [[...]] is just a new and improved<br />
version of the same commands. It basically functions the same way,<br />
except that a number of new operators are available.<br />
</span></span>
</div>
<div id="yn69" style="padding:1em 0;text-align:left;">
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></p>
<div id="t5_z" style="padding:1em 0;text-align:center;">
</div>
<p></span></span></p>
<div style="text-align:center;">
<div style="text-align:left;">
<h4><a id="_17_4_1_Checking_Strings__5241385150842537" name="_17_4_1_Checking_Strings__5241385150842537"></a><br />
 17.4.1 Checking Strings<br />
 </h4>
</div>
<p>
</div>
<div style="text-align:center;">
<span style="font-family:Courier New;"><span style="font-family:Verdana;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><a href="http://docs.google.com/File?id=dd6nw3mt_175gwrn86d5_b" target="_blank"><img src="http://docs.google.com/File?id=dd6nw3mt_175gwrn86d5_b" style="width:507px;height:459px;" /></a></span></span></span></span></p>
<div style="text-align:left;">
We could use the [[...]] command to check if a variable is set to a<br />
certain value. Here, variable X is assigned abc, then evaluated in this<br />
expression:<br />
<span style="font-family:Courier New;">    $ X=abc</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    $ [[ $X = abc ]] &amp;&amp; print "X is set to abc"</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    X is set to abc</span>
</div>
<div style="text-align:left;">
 Using the test and [...] commands, the same command could be written as:<br />
<span style="font-family:Courier New;">    test "$X" = abc &amp;&amp; print "X is set to abc"</span><br />
 or<br />
<span style="font-family:Courier New;">    [ "$X" = abc ] &amp;&amp; print "X is set to abc"</p>
<p></span>To check if a variable is set to null, the -z option can be used:<br />
<span style="font-family:Courier New;">    [[ —z $VAR ]] &amp;&amp; print "VAR is set to null"</span><br />
 or it could be compared to the null string like this:<br />
<span style="font-family:Courier New;">    [[ $VAR = "" ]] &amp;&amp; "VAR is set to null"</span>
</div>
</div>
<p><span style="font-family:'Courier New';"></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br />
</span></span></p>
<h4><a id="_17_4_2_Checking_Patterns__24458779692309196" name="_17_4_2_Checking_Patterns__24458779692309196"></a><br />
<span style="font-family:'Courier New';"><span style="font-family:Verdana;">17.4.2 Checking Patterns</span></span><br />
</h4>
<h4>
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span><br />
</h4>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The Korn shell also lets you compare strings to patterns. We could check if X begins with a 'a' like this:<br />
<span style="font-family:Courier New;">    $ X=abc</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    $ [[ $X = a* ]] &amp;&amp; print "$X matches a*"</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    abc matches a*</span></p>
<p> Using the +([09]) pattern, we could check if X is set to a number:<br />
<span style="font-family:Courier New;">    $ X=123</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    $ [[ $X = +([0—9]) ]] &amp;&amp; print "$X is a number"</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    123 is a number</span></p>
<p></span></span></p>
<h4><a id="_17_4_3_Checking_File_Attribut_4279807512566526" name="_17_4_3_Checking_File_Attribut_4279807512566526"></a><br />
<span style="font-family:'Courier New';"><span style="font-family:Verdana;">17.4.3 Checking File Attributes</span></span><br />
</h4>
<h4>
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span><br />
</h4>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></p>
<div id="f9e-" style="padding:1em 0;text-align:center;">
<img src="http://docs.google.com/File?id=dd6nw3mt_176d9kt7dg6_b" style="width:432px;height:572px;" /></p>
</div>
<p></span></span></p>
<div style="text-align:left;">
 The most basic operation to perform on a file is to see if it exists, and that can be done using the -a operator.<br />
<span style="font-family:Courier New;">    $ touch tmp</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    $ [[ —a tmp ]] &amp;&amp; print "File tmp exists"</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    File tmp exists</span></p>
<p>This only indicates that it exists, but not much else. It may be a<br />
directory, or a symbolic link, but using this operator, that's all we<br />
know. If we wanted more information, the -f or -d operators could tell<br />
us if a file existed and was a regular file (-f) or if it was just a<br />
directory (-d).</p>
<h4><a id="_17_4_4_Checking_Integer_Attri_07001292456862485" name="_17_4_4_Checking_Integer_Attri_07001292456862485"></a><br />
 17.4.4 Checking Integer Attributes<br />
</h4>
<div id="q-dl" style="padding:1em 0;text-align:center;">
<a href="http://docs.google.com/File?id=dd6nw3mt_177frb3r2c8_b" target="_blank"><img src="http://docs.google.com/File?id=dd6nw3mt_177frb3r2c8_b" /></a>
</div>
<p>
The [[...]] command provides a few integer operators that allow<br />
integers to be compared. It is frequently used to check the number of<br />
command-line arguments. This expression evaluates to true if there are<br />
less than or equal to three positional parameters set:<br />
 [[ $# —le 3 ]] &amp;&amp; print "3 or less args given"
</div>
<p><span style="font-family:'Courier New';"></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br />
The ((...)) command offers the same arithmetic comparison operators as<br />
the [[...]] command, plus many others. Besides offering more arithmetic<br />
operators, the ((...)) command provides substantial performance<br />
improvements over the [[...]] and test commands.</p>
<p></span></span></p>
<h4><a id="_17_4_5_The_Operator__42667919512565855" name="_17_4_5_The_Operator__42667919512565855"></a><br />
<span style="font-family:'Courier New';"><span style="font-family:Verdana;">17.4.5 The ! Operator</span></span><br />
</h4>
<h4>
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span><br />
</h4>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The ! operator negates the result of any [[...]] expression when used like this:<br />
<b><span style="font-family:Georgia;">[[ ! <i>expression</i> ]]</span></b><br />
 For example, to check if X is not equal to abc:<br />
<span style="font-family:Courier New;">    $ X=xyz</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    $ [[ ! $X = abc ]] &amp;&amp; print "$X not equals abc"</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    xyz not equals abc</span></p>
<p>There is one logical operator that can only be implemented with the !<br />
operator. There is no [[...]] file operator that will evaluate to true<br />
on a zero-length file.<br />
<span style="font-family:Courier New;">    $ &gt;emptyfile</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    $ [[ ! —s emptyfile ]] &amp;&amp; print "emptyfile is empty"</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">    emptyfile is empty</span></p>
<p></span></span><br />
<h4><a id="_17_4_6_Compound_Expressions_47728179982164753" name="_17_4_6_Compound_Expressions_47728179982164753"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br />
 17.4.6 Compound Expressions</span></span></h4>
<h4><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br />
</span></span></h4>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">
<div id="l2r." style="padding:1em 0;text-align:center;"><img src="http://docs.google.com/File?id=dd6nw3mt_179fq89jwhp_b" />
<div style="text-align:left;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;">(1) <b>&amp;&amp;</b> - The AND Operator<br /></span></span>The &amp;&amp; operator is used with the [[...]] command to test if multiple expressions are true using this format:<br /><span style="font-family:Courier New;">    [[ expression1 &amp;&amp; expression2 ]]</span></div>
</div>
<p></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br />
 This expression checks if the noglob and noclobber options are set:<br /><span style="font-family:Courier New;">    [[ —o noglob &amp;&amp; —o noclobber ]]</span></p>
<p>(2) <b>||</b> - The OR Operator<br />The | | operator is used with the [[...]] command to test if expression1 OR expression2 are true using this format:<br /><span style="font-family:Courier New;">    [[ expression1 | | expression2 ]]</span></p>
<p></span></span><br />
<h4><a id="17_4_7_vs_test_and__7445772201941858" name="17_4_7_vs_test_and__7445772201941858"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">17.4.7 [ [...] ] vs test and [...]</span></span></h4>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The [[...]] command is preferred to test and [...], since many of the errors associated with test and [...] do not occur.</p>
<p></span></span><br />
<h2><a id="_18_Control_Commands" name="_18_Control_Commands"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br />
<i>18 Control Commands</i></span></span></h2>
<h2><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h2>
<h3><a id="18_1_The_case_command" name="18_1_The_case_command"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">18.1 The case command</span></span></h3>
<h3><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The case command provides multiple-branch capability. The syntax for the case command is:
<div id="of:d" style="padding:1em 0;text-align:left;"><img style="width:401px;height:251px;" src="http://docs.google.com/File?id=dd6nw3mt_180dxmkc4d8_b" /><br />where value is compared to <i>pattern1, pattern2, ... patternn</i>.</p>
<p>The<br />
same patterns used in file name substitution can also be used in case<br />
statements to match patterns. The new Korn shell pattern matching<br />
formats also allow multiple case patterns to be given like this:
<div id="p2_e" style="padding:1em 0;text-align:center;"><img style="width:613px;height:396px;" src="http://docs.google.com/File?id=dd6nw3mt_181fghtsb7m_b" /></div>
<h3><a id="18_2_The_for_Command" name="18_2_The_for_Command"></a>18.2 The for Command</h3>
<p>The basic syntax for the for command is:<br /><b><span style="font-family:Georgia;">        for </span></b><span style="font-family:Georgia;"><i>variable</i></span><b><span style="font-family:Georgia;"> in </span></b><i><span style="font-family:Georgia;">word1  word2 . . . wordn</span></i><b><br style="font-family:Georgia;" /><span style="font-family:Georgia;">        do</span><br style="font-family:Georgia;" /><span style="font-family:Georgia;">                   </span></b><span style="font-family:Georgia;"><i> </i><i>commands</i></span><b><br style="font-family:Georgia;" /><span style="font-family:Georgia;">        done</span></b></div>
<p>File name substitution, command substitution, and variable substitution<br />
can also be used to generate a list of word arguments for the for<br />
command. The first line of the previous command could have been given<br />
as:<br /><span style="font-family:Courier New;">    for FILE in chap[1-3]</span><br />or<br /><span style="font-family:Courier New;">    for FILE in $(ls chap[1-3])</span><br />or<br /><span style="font-family:Courier New;">    CHAPS=$(ls chap[1-3])</span><br /><span style="font-family:Courier New;">    for FILE in $CHAPS</p>
<p></span>The <b>$* </b>and <b>$@</b> variables can be used to loop on command-line arguments like this:<br /><b><span style="font-family:Georgia;">        for </span></b><span style="font-family:Georgia;"><i>variable</i></span><b><span style="font-family:Georgia;"> in $*</span><br style="font-family:Georgia;" /><span style="font-family:Georgia;">        do</span><br style="font-family:Georgia;" /></b><i><span style="font-family:Georgia;">                commands</span></i><b><br style="font-family:Georgia;" /><span style="font-family:Georgia;">        done</span></b></p>
<p>The for command can also be used without the list of word arguments:<br /></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b><span style="font-family:Georgia;">        for </span></b><span style="font-family:Georgia;"><i>variable</i></span><b><span style="font-family:Georgia;"> </span><br style="font-family:Georgia;" /><br />
<span style="font-family:Georgia;">        do</span><br style="font-family:Georgia;" /><br />
</b><i><span style="font-family:Georgia;">                commands</span></i><b><br style="font-family:Georgia;" /><br />
<span style="font-family:Georgia;">        done</span></b></span></span><br /><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The commands are executed once for each positional parameter, and <i>variable</i> is set to each successive positional parameter. It is equivalent to:<br /></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b><span style="font-family:Georgia;">       for </span></b><span style="font-family:Georgia;"><i>variable</i></span><b><span style="font-family:Georgia;"> in $@</span><br style="font-family:Georgia;" /><br />
<span style="font-family:Georgia;">        do</span><br style="font-family:Georgia;" /><br />
</b><i><span style="font-family:Georgia;">                commands</span></i><b><br style="font-family:Georgia;" /><br />
<span style="font-family:Georgia;">        done</span></b></p>
<p></span></span><br />
<h3><a id="18_3_The_if_Command" name="18_3_The_if_Command"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">18.3 The if Command</span></span></h3>
<h3><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The basic syntax of the if command is:<br /><b><span style="font-family:Georgia;">        if </span></b><span style="font-family:Georgia;"><i>command1</i></span><b><br style="font-family:Georgia;" /><span style="font-family:Georgia;">        then</span><br style="font-family:Georgia;" /><span style="font-family:Georgia;">                </span></b><i><span style="font-family:Georgia;">commands</span></i><b><br style="font-family:Georgia;" /><span style="font-family:Georgia;">        </span></b></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b><span style="font-family:Georgia;">elif </span></b><span style="font-family:Georgia;"><i>command2<br />        </i></span></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b><span style="font-family:Georgia;"> then</span></b></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:Georgia;"><i><br />                commands<br /></i></span></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b><span style="font-family:Georgia;">        else<br />                </span></b></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><i><span style="font-family:Georgia;">commands</span></i></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b><span style="font-family:Georgia;"><br />        fi</span></b><br />
</span></span><br />
<h3><a id="18_4_The_while_Command" name="18_4_The_while_Command"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">18.4 The while Command</span></span></h3>
<h3><a id="_while_command1_do_commands_do" name="_while_command1_do_commands_do"></a><span style="font-family:'Courier New';"><font size="2">        while <i>command1</i><br />        do<br />                <i>commands</i><br />        done</font><span style="font-family:Verdana;"></span></span></h3>
<h3><a id="18_5_The_until_Command" name="18_5_The_until_Command"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">18.5 The until Command</span></span></h3>
<h3><a id="The_until_command_is_another_l" name="The_until_command_is_another_l"></a><span style="font-family:'Courier New';"></span></h3>
<h3><span style="font-family:'Courier New';"><font size="2">The<br />
until command is another looping command. It's like the while command,<br />
except that instead of looping while the condition is true, it loops<br />
while the condition is false. The syntax for the until command is:<br /><b>        until </b><i><span style="font-family:Georgia;">command1</span></i><b><br />        do<br />                </b><i><span style="font-family:Georgia;">commands</span></i><b><br />        done</b><br />where commands are executed until command1 returns a zero exit status.</font><span style="font-family:Verdana;"></span></span></h3>
<h3><a id="18_6_Breaking_Out_of_Loops" name="18_6_Breaking_Out_of_Loops"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">18.6 Breaking Out of Loops</span></span></h3>
<h3><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b>break</b> command  causes an exit from a loop-type command, but not from the entire script.</p>
<p>The break command can also be used to exit from a nested loop using this format:<br /><b>        break </b><span style="font-family:Georgia;"><i>n</i></span><br />where </span></span><u><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b> </b><span style="font-family:Georgia;"><i>n</i></span></span></span></u><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><u> specifies the <i>n</i>th enclosing loop to exit from</u>.<br />Here is a new version of the nloop script that breaks out of both loops if i equals 2 and j equals 0:<br /><span style="font-family:Courier New;">$ cat nloop</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">for i in 1 2 3</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">do</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">    for j in 0 5</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">    do</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">        if ((i == 2 &amp;&amp; j == 0))</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">        then</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">            break 2</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">        else</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">            print "$i$j"</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">        fi</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">    done</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">done</span></p>
<p>Now the output would be:<br /><span style="font-family:Courier New;">    $ nloop</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">    10</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">    15</span><br />If<br />
break was used instead of break 2, then only the inner for loop would<br />
have been terminated, and execution would have continued with i set to<br />
3 in the outer loop, and j set to 0 in the inner loop.</p>
<p></span></span><br />
<h3><a id="18_7_The_continue_Command" name="18_7_The_continue_Command"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">18.7 The continue Command</span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The <b>continue</b> command causes execution to continue at the top of the current loop.</p>
<p>18.8 The select Command<br />The <b>select </b>command<br />
is used to display a simple menu that contains numbered items, and a<br />
prompt message. The syntax for the select command is:</p>
<p><b>        select </b><span style="font-family:Georgia;"><i>variable </i></span><b>in </b><i><span style="font-family:Georgia;">word1 word2 . . . wordn</span></i><b><br />        do<br />                </b><span style="font-family:Georgia;"><i>commands</i></span><b><br />        done</b><br />where <i>word1</i> through <i>wordn</i> are displayed as numbered menu choices followed by a prompt (default #?). </p>
<p><u>If the response is in the range 1 through n, then <i>variable</i> is set to the corresponding word, <b>REPLY</b> is set to the response, and the commands are executed.</u> Execution continues until a break, exit, return, or EOF is encountered.</p>
<p></span></span></p>
<h3><span style="font-family:'Courier New';"><span style="font-family:Verdana;">18.8 The select Command</span></span></h3>
<h3><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The<br />
select command is used to display a simple menu that contains numbered<br />
items, and a prompt message. The syntax for the select command is:</p>
<p><b><span style="font-family:Georgia;"><span>    </span><span>    </span>select </span></b><span style="font-family:Georgia;"><i>variable</i></span><b><span style="font-family:Georgia;"> in </span></b><span style="font-family:Georgia;"><i>word1 word2 . . . wordn</i></span><b><br style="font-family:Georgia;" /><br />
<span style="font-family:Georgia;"><span>    </span><span>    </span>do</span><br style="font-family:Georgia;" /><br />
</b><i><span style="font-family:Georgia;"><span>    </span><span>    </span><span>    </span><span>    </span>commands</span></i><b><br style="font-family:Georgia;" /><br />
<span style="font-family:Georgia;"><span>    </span><span>    </span>done</span></b></p>
<p>where <i>word1</i> through <i>wordn </i>are displayed as numbered menu choices followed by a prompt (default #?). If the response is in the range 1 through n, then <i>variable</i> is set to the corresponding word, <b>REPLY</b> is set to the response, and the <i>commands</i> are executed. Execution continues until a <b>break</b>, <b>exit</b>, <b>return</b>, or <b>EOF</b> is encountered.</p>
<p>The <b>select</b> command can also be used without the list of word arguments:</p>
<p></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b><span style="font-family:Georgia;"><span>   </span><span>    </span>select </span></b><span style="font-family:Georgia;"><i>variable</i></span><b><span style="font-family:Georgia;"> </span></b><span style="font-family:Georgia;"><i></i></span><b><br style="font-family:Georgia;" /><br />
<span style="font-family:Georgia;"><span>    </span><span>    </span>do</span><br style="font-family:Georgia;" /><br />
</b><i><span style="font-family:Georgia;"><span>    </span><span>    </span><span>    </span><span>    </span>commands</span></i><b><br style="font-family:Georgia;" /><br />
<span style="font-family:Georgia;"><span>    </span><span>    </span>done</span></b></span></span><br />
<span style="font-family:'Courier New';"><span style="font-family:Verdana;">It<br />
functions the same way as the previous select syntax, except that the<br />
positional parameters are displayed as numbered menu choices from 1 to<br />
n, instead of the words from the word list. It is equivalent to:<br />
</span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b><span style="font-family:Georgia;"><span>   </span><span>    </span>select </span></b><span style="font-family:Georgia;"><i>variable</i></span><b><span style="font-family:Georgia;"> in </span></b><span style="font-family:Georgia;"><i>"$@"</i></span><b><br style="font-family:Georgia;" /><br />
<span style="font-family:Georgia;"><span>    </span><span>    </span>do</span><br style="font-family:Georgia;" /><br />
</b><i><span style="font-family:Georgia;"><span>    </span><span>    </span><span>    </span><span>    </span>commands</span></i><b><br style="font-family:Georgia;" /><br />
<span style="font-family:Georgia;"><span>    </span><span>    </span>done</span></b></span></span><br />
<span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br /></span></span></div>

	</div>
	</div>
    
	<div class="post paper">	
    <h2 class="header"><a href="/2008/11/26/kshell-note-3">korn Shell Notes(III)</a></h2>
    <p>
    	<span class="glyphicon glyphicon-time"></span> Posted by <strong>Bo Yang</strong> at <strong>2008-11-26</strong> with tags <span class="glyphicon glyphicon-tag"></span><a href="/tags.html#Shell-ref" rel="nofollow">Shell</a>, <span class="glyphicon glyphicon-tag"></span><a href="/tags.html#Unix/Linux-ref" rel="nofollow">Unix/Linux</a>, <span class="glyphicon glyphicon-tag"></span><a href="/tags.html#Notes-ref" rel="nofollow">Notes</a>
	</p>
	<hr>
    
    <div class="post_at_index thepost">
    	<p>
     <span class="Apple-style-span" style="color:rgb(0,0,0);font-family:Verdana;font-size:13px;"><span class="Apple-style-span" style="font-size:19px;font-style:italic;font-weight:bold;">6 Variables</span>
<div id="xcw:" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;">
<div style="text-align:left;margin-top:0;margin-bottom:0;">The Korn shell supports four data types: string, integer, float, and array. If a data type is not explicitly defined, the Korn shell will assume that the variable is a string.</p>
<p>The typeset command can also be used to assign values.</p>
<p>If a value is not given, the variable is set to null. Here, X is reassigned the null value:<br />    <b>$ X=</b></div>
</div>
<h3 style="font-size:12pt;"><a name="6_1_Variable_Attributes_148016" id="6_1_Variable_Attributes_148016"></a>6.1 Variable Attributes</h3>
<p>Korn shell variables can have one or more attributes that specify their internal representation, access or scope, or the way they are displayed.Variables can be set to integer type for faster arithmetic operations, read-only so that the value cannot be changed, left/right justified for formatting purposes, and more. To assign a value and/or attribute to a Korn shell variable, use the following format with the typeset command:<br />    <span style="font-family:'Courier New';">typeset-attribute variable=value</span><br />or<br />    t<span style="font-family:'Courier New';">ypeset-attribute variable</span></p>
<p>Except for readonly, variable attributes can be set before, during, or after assignment. Functionally it makes no difference. Just remember that <b>the attribute has precedence over the value</b>. This means that if you change the attribute after a value has been assigned, the value may be affected.</p>
<div id="lfds" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><img src="http://docs.google.com/File?id=dd6nw3mt_157c3wjn8fw_b" style="width:551px;height:233px;" /></p>
<div id="yo2l" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><img src="http://docs.google.com/File?id=dd6nw3mt_159thjp23gb_b" style="width:414px;height:546px;" /></div>
<p></div>
<h3 style="font-size:12pt;"><a name="6_2_Lowercase_l_and_Uppercase_" id="6_2_Lowercase_l_and_Uppercase_"></a>6.2 Lowercase (-l) and Uppercase (-u) Attributes</h3>
<p>These attributes cause the variable values to be changed to lower or uppercase. For example, the lowercase attribute and uppercase value ASPD are assigned to variable MYSYS:<br />    <span style="font-family:'Courier New';">$ typeset —l MYSYS=ASPD</span><br />Despite the fact that MYSYS was assigned uppercase ASPD, when accessed, the value is displayed in lowercase:<br />    <span style="font-family:'Courier New';">$ print $MYSYS</span><br />    <span style="font-family:'Courier New';">aspd</p>
<p></span>This is because the attribute affects the variable value, regardless of the assignment. Variable attributes can also be changed after assignment. If we wanted to display variable MYSYS in uppercase, we could just reset the attribute:<br /><span style="font-family:'Courier New';">    $ typeset —u MYSYS</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $MYSYS</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    ASPD</span><br />
<h3 style="font-size:12pt;"><a name="6_3_Readonly_r_Attribute_58026" id="6_3_Readonly_r_Attribute_58026"></a>6.3 Readonly (-r) Attribute</h3>
<p>Once the readonly attribute is set, a variable cannot be assigned another value. Here, we use it to set up a restricted PATH:<br />    <span style="font-family:'Courier New';">$ typeset —r PATH=/usr/rbin</span><br />If there is an attempt to reset PATH, an error message is generated:<br /><span style="font-family:'Courier New';">    $ PATH=$PATH:/usr/bin:</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    /bin/ksh: PATH: is read only</span></p>
<p>Unlike other variable attributes, once the readonly attribute is set, it cannot be removed.<br />
<h3 style="font-size:12pt;"><a name="6_4_Integer_i_Attribute_906875" id="6_4_Integer_i_Attribute_906875"></a>6.4 Integer (-i) Attribute</h3>
<p>The integer attribute (-i) is used to explicitly declare integer variables. Although it is not necessary to set this attribute when assigning integer values, there are some benefits to it.</p>
<p>There is one restriction on integer variables. Once a variable is set to integer type, it can't be assigned a non-integer value:<br /><span style="font-family:'Courier New';">    $ typeset —i NUM=abc</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    /bin/ksh: NUM: bad number</span><br />
<h3 style="font-size:12pt;"><a name="6_5_The_Float_E_F_Attribute_26" id="6_5_The_Float_E_F_Attribute_26"></a>6.5 The Float (-E, -F) Attribute</h3>
<p>The float attributes (-E, -F) are used to declare float variables. The -E is used to specify the number of significant digits, while -F is used to specify the precision. In the following example, X is set to a float variable and assigned a value using both formats:<br /><span style="font-family:'Courier New';">    $ typeset —E5 X=123.456</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $X</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    123.46</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ typeset —F5 X=123.456</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $X</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    123.45600</span><br />The float command can also be used to declare a float variable, but does not allow for specifying the precision.<br />
<h3 style="font-size:12pt;"><a name="6_6_Right_R_and_Left_L_Justify" id="6_6_Right_R_and_Left_L_Justify"></a>6.6 Right (-R) and Left (-L) Justify Attributes</h3>
<p>The right and left justify attributes cause variable values to be justified within their width and are be used to format data. Here, variables A and B are set to right-justify with a field width of 7 characters. Notice that integer values are used, even though the integer attribute is not set.
<div id="yn69" style="text-align:left;margin-top:0;margin-bottom:0;padding:1em 0;"></div>
<div id="yn69" style="text-align:left;margin-top:0;margin-bottom:0;padding:1em 0;">    <img src="http://docs.google.com/File?id=dd6nw3mt_158g2383sgc_b" style="width:316px;height:120px;" /><br />If the field width is not large enough for the variable assignment, the value gets truncated. Variable X is assigned a seven-character wide value, but the field width is set to 3, so the first four characters are lost:<br /><span style="font-family:'Courier New';">    $ typeset —R3 X=ABCDEFG</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $X</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    EFG</p>
<p><span style="font-family:Verdana;">If a field width is not given, then it is set with the first variable assignment. Variable Y is assigned a three-character wide value, so the field width is set to 3.</span><br />    $ typeset —L Y=ABC<br />    $ print $Y<br />    ABC<br /><span style="font-family:Verdana;">Without explicitly resetting the field width, a subsequent assignment would be restricted to a three-character wide value:</span><br />    $ Y=ZYXWVUT<br />    $ print $Y<br />    ZYX<br /></span><br />
<h3 style="font-size:12pt;"><a name="6_7_Autoexport_x_Attribute_977" id="6_7_Autoexport_x_Attribute_977"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">6.7 Autoexport (-x) Attribute</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">It allows you to set and export a variable in one command. Instead of<br /><span style="font-family:'Courier New';">    $ typeset X=abc</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ export X</span><br />you can do this:<br /><span style="font-family:'Courier New';">    $ typeset —x X=abc</span><br style="font-family:'Courier New';" />We could use this attribute to add the /lbin directory to the <b>PATH</b> variable and export it all in one command:<br /><span style="font-family:'Courier New';">    $ typeset —x PATH=$PATH:/lbin</span><br /></span></span><br />
<h3 style="font-size:12pt;"><a name="6_8_Removing_Variable_Attribut" id="6_8_Removing_Variable_Attribut"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">6.8 Removing Variable Attributes</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Except for readonly, variable attributes are removed with the <b>typeset +</b><i>attribute</i> command. Assuming that the integer attribute was set on the NUM variable, we could remove it like this:<br /><span style="font-family:'Courier New';">    $ typeset +i NUM</span><br />and then reassign it a non-integer value:<br /><span style="font-family:'Courier New';">    $ NUM=abc</p>
<p></span><b>Once the readonly attribute is set, it cannot be removed</b>. When we try to do this with the PATH variable that was previously set, we get an error message:<br /><span style="font-family:'Courier New';">    $ typeset +r PATH</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    /bin/ksh: PATH: is read only</span><br /><span style="color:rgb(0,0,255);">The only way to reassign a readonly variable is to unset it first, then assign a value from scratch.</span><br /></span></span><br />
<h3 style="font-size:12pt;"><a name="6_9_Checking_Variable_Attribut" id="6_9_Checking_Variable_Attribut"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">6.9 Checking Variable Attributes</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Attributes of Korn shell variables are listed using the typeset -<i><span style="font-family:Georgia;">attribute</span></i> command. For example, to list all the integer type variables and their values:<br /><span style="font-family:'Courier New';">    $ typeset —i</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    ERRNO=0</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    MAILCHECK=600</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    PPID=177</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    RANDOM=22272</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    SECONDS=4558</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    TMOUT=0</p>
<p></span>To list only the names of variables with a specific attribute, use the typeset +<i>attribute</i> command.<br /></span></span><br />
<h3 style="font-size:12pt;"><a name="6_10_More_with_Variables_38599" id="6_10_More_with_Variables_38599"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">6.10 More with Variables</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">You can do other things with variables, such as assign them the value of another variable, the output of a command, or even the contents of a file.</p>
<p>Variables can be assigned command output using this format:<br /><span style="font-family:'Courier New';">   <b> </b><b>variable=$(command)</b></span><br />or<br /><span style="font-family:'Courier New';">    <b>variable=`command`</b></span></p>
<p>The second format is provided for compatibility with the Bourne shell. Here, UCSC is set to its internet ID by assigning the output of the grep and cut commands:<br /><span style="font-family:'Courier New';">    $ UCSC=$(grep UCSC /etc/hosts | cut —f1 —d" ")</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $UCSC</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    128.114.129.1</span></p>
<p>Variables can also be assigned the contents of files like this:<br /><b><span style="font-family:'Courier New';">    variable=$(&lt;file)</span></b><br />or<br /><b><span style="font-family:'Courier New';">    variable=`cat file`</span></b><br />The first format is equivalent to variable=$(cat file). The second format is much slower, but is provided for compatibility with the Bourne shell.</p>
<p>A <b>nameref</b> variable is a synonym for another variable and will always have the same value as its associated variable They are created using the following formats:<br /><span style="font-family:'Courier New';">    <b>nameref </b><i>nameref_variable=variable</i></span><br />or<br /><span style="font-family:'Courier New';">    <b>typeset</b> <b>-n</b> <i>nameref_variable=variable</i></span><br />For example:<br /><span style="font-family:'Courier New';">    $ X=abc</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ nameref Y=X</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $X</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    abc</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $Y</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    abc</span><br /></span></span><br />
<h3 style="font-size:12pt;"><a name="6_11_Unsetting_Variables_82193" id="6_11_Unsetting_Variables_82193"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">6.11 Unsetting Variables</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Variable definitions are removed using the <b>unset</b> command. This is not the same as being set to null.</p>
<p>Unsetting either the base or nameref variable will unset both variables.</p>
<p></span></span><br />
<h2 style="font-size:14pt;"><a name="7_Special_Parameters_155685234" id="7_Special_Parameters_155685234"></a><i><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:Verdana;">7 Special Parameters</span></span></span></i></h2>
<h2 style="font-size:14pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h2>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">
<div id="mgds" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><img src="http://docs.google.com/File?id=dd6nw3mt_160d8q2vnf3_b" style="width:537px;height:285px;" /></div>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="7_1_The_Parameter_882457770205" id="7_1_The_Parameter_882457770205"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">7.1 The ? Parameter</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The ? parameter contains the exit status of the last executed command. In this example, the date command is executed. It ran successfully, so the exit status is 0:<br /><span style="font-family:'Courier New';">    $ date +%D</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    05/24/96</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $?</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    0</span><br />When used with a pipe, $? contains the exit status of the last command in the pipeline.<br /></span></span><br />
<h3 style="font-size:12pt;"><a name="7_2_The_Parameter_996378622698" id="7_2_The_Parameter_996378622698"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">7.2 The $ Parameter</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The $ parameter contains the process id of the current shell.<br /><span style="font-family:'Courier New';">    $ print $$</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    178</span></p>
<p>It is useful in creating unique file names within Korn shell scripts.<br /><span style="font-family:'Courier New';">    $ touch $0.$$</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ ls *.*</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    ksh.218</span><br /></span></span><br />
<h3 style="font-size:12pt;"><a name="7_3_Other_Special_Parameters_5" id="7_3_Other_Special_Parameters_5"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">7.3 Other Special Parameters</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The <b>-</b> parameter contains the current options in effect. The output of the next command shows that the interactive and monitor options are enabled:<br /><span style="font-family:'Courier New';">    $ print $—</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    im</p>
<p></span>To display the error number of the last failed system call, use the <b>ERRNO</b> variable. Here, an attempt to display a non-existent file returns an error, so ERRNO is checked for the error number:<br /><span style="font-family:'Courier New';">    $ cat tmp.out</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    tmp.out: No such file or directory</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $ERRNO</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    2<br /></span>This is system dependent, so it may not be available on your system. Check your documentation or /usr/include/sys/errno.h for more information.<br /></span></span><br />
<h2 style="font-size:14pt;"><a name="8_Variable_Expansion_888811139" id="8_Variable_Expansion_888811139"></a><i><span style="font-family:'Courier New';"><span style="font-family:Verdana;">8 Variable Expansion</span></span></i></h2>
<h2 style="font-size:14pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h2>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Variable expansion is the term used for the ability to access and manipulate values of variables and parameters. Basic expansion is done by preceding the variable or parameter name with the $ character. This provides access to the value.<br /><span style="font-family:'Courier New';">    $ UULIB=/usr/lib/uucp</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $UULIB</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    /usr/lib/uucp</p>
<p></span>Other types of expansion can be used to return portions or the length of variables, use default or alternate values, check for mandatory setting, and more.</p>
<p>For the sake of convenience, the term <i>variable</i> will refer to both variables and parameters in the following sections that discuss variable expansion.
<div id="b4k6" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><a href="http://docs.google.com/File?id=dd6nw3mt_161fp2b4mfg_b" target="_blank"><img src="http://docs.google.com/File?id=dd6nw3mt_161fp2b4mfg_b" style="width:427px;height:711px;border-style:initial;border-color:initial;border-width:0;" /></a></div>
<p>
<div id="azy1" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><img src="http://docs.google.com/File?id=dd6nw3mt_162fmx9j6d6_b" style="width:411px;height:465px;" /></div>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="8_1_variable_variable_01009047" id="8_1_variable_variable_01009047"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">8.1 $variable, ${variable}</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><u>This is expanded to the value of variable</u>. The braces are used to protect or delimit the variable name from any characters that follow. The next example illustrates why braces are used in variable expansion. The variable CA is set to ca:<br /><span style="font-family:'Courier New';">    $ CA=ca</p>
<p></span>What if we wanted to reset CA to california? It could be reset to the entire value, but to make a point, let's try using the current value like this:<br /><span style="font-family:'Courier New';">    $ CA=$CAlifornia</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $CA</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $</p>
<p></span>Nothing is printed, because without the braces around the variable CA, the Korn shell looks for a variable named $CAlifornia. None is found, so nothing is substituted. With the braces around variable CA, we get the correct value:<br /><span style="font-family:'Courier New';">    $ CA=${CA}lifornia</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $CA</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    california</p>
<p></span>Braces are also needed when attempting to expand positional parameters greater than 9. This ensures that both digits are interpreted as the positional parameter name.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="8_2_variable_45711572132405753" id="8_2_variable_45711572132405753"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">8.2 ${#<i>variable</i>}</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><u>This is expanded to the length of variable.</u> In this example, X is set to a three-character string, so a length of 3 is returned:<br /><span style="font-family:'Courier New';">    $ X=abc</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${#X}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    3</span><br />Whitespace in variable values is also counted as characters.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="8_3_variable_word_variable_wor" id="8_3_variable_word_variable_wor"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">8.3 ${<i>variable:-word</i>}, ${<i>variable-word</i>}</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><u>This is expanded to the value of variable if it is set and <b>not null</b></u>, otherwise word is expanded. <b>This is used to provide a default value if a variable is not set.</b> In the following example, the variable X is set to abc. When expanded using this format, the default value abc is used:<br /><span style="font-family:'Courier New';">    $ X=abc</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${X:—cde}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    abc</span><br />After X is unset, the alternate value cde is used:<br /><span style="font-family:'Courier New';">    $ unset X</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${X:—cde}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    cde</span><br />Notice that the value of X remains unchanged:<br />$ print $X<br />$</p>
<p>Let's say we needed a command to get the user name. The problem is that some people have it set to USER, while others have it set to LOGNAME. We could use an if command to check one value first, then the other. This would be quite a few lines of code. Or we could use this form of variable expansion to have both values checked with one command. Here, if USER is set, then its value is displayed, otherwise the value of LOGNAME is displayed.<br /><span style="font-family:'Courier New';">    $ print USER=$USER, LOGNAME=$LOGNAME</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    USER=anatole, LOGNAME=AO</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${USER:—${LOGNAME}}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    anatole</span><br />Now we unset USER to check and make sure that LOGNAME is used:<br /><span style="font-family:'Courier New';">    $ unset USER</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${USER:—${LOGNAME}}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    AO</span></p>
<p>But what if both USER and LOGNAME are not set? Another variable could be checked like this:<br /><span style="font-family:'Courier New';">    $ unset USER LOGNAME</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${USER:-${LOGNAME:-USER and LOGNAME not set!}}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    USER and LOGNAME not set!</span><br />Or<br />$ print ${USER—${LOGNAME:—$(whoami)}}<br />anatole</p>
<p><b>Remember that the alternate value is only used and not assigned to anything. </b>The other format, <u>${variable-word}, causes the variable value to be used, even if it is set to null:</u><br /><span style="font-family:'Courier New';">    $ typeset X=</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${X-cde}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $</span></p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="8_4_variable_word_variable_wor_12497100047767162" id="8_4_variable_word_variable_wor_12497100047767162"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">8.4 ${<i>variable</i><span style="font-family:Georgia;">:=</span><i>word</i>}, ${<i>variable</i><span style="font-family:Georgia;">=</span><i>word</i>}</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><u>This is expanded to the value of variable <b>if set and not null</b>, otherwise it is set to word, then expande</u>d. In contrast to the variable expansion format from the previous section, this format is used to assign a default value if one is not already set. In the next example, the variable LBIN is set to /usr/lbin. When expanded using this format, the default value /usr/lbin is used:<br /><span style="font-family:'Courier New';">    $ LBIN=/usr/lbin</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${LBIN:=/usr/local/bin}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    /usr/lbin</span></p>
<p>After LBIN is unset, this form of variable expansion causes LBIN to be assigned the alternate value, /usr/local/bin:<br />$ unset LBIN<br />$ print ${LBIN:=/usr/local/bin}<br />/usr/local/bin</p>
<p>Command substitution can also be used in place of <i>word</i>. This command sets the SYS variable using only one command:<br /><span style="font-family:'Courier New';">    $ unset SYS</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${SYS:=$(hostname)}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    aspd</span></p>
<p>The other format, <u><b>${<i><span style="font-family:Georgia;">variable=word</span></i>}</b>, <span style="color:rgb(255,0,0);">causes the variable value to be used, even if it is set to null</span></u>. Here LBIN is not assigned an alternate value. <span style="color:rgb(0,0,0);">If := was used instead of =, then LBIN would be set to /usr/local/bin:</span><br /><span style="font-family:'Courier New';">    $ LBIN=</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${LBIN=/usr/local/bin}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $</span></p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="8_5_variable_word_variable_var_9760769000276923" id="8_5_variable_word_variable_var_9760769000276923"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">8.5 ${<i>variable</i><span style="font-family:Georgia;">:?</span><i>word</i>}, ${<i><span style="font-family:Georgia;">variable</span></i><span style="font-family:Georgia;">:?</span>}; ${<i><span style="font-family:Georgia;">variable</span></i><span style="font-family:Georgia;">?</span><i><span style="font-family:Georgia;">word</span></i>}, ${<i><span style="font-family:Georgia;">variable</span></i><span style="font-family:Georgia;">?</span>}</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><u>This is expanded to the value of variable <b>if it is set and not null</b>, otherwise word is printed and the Korn shell exits</u>. If word is omitted, "<b><span style="font-family:Georgia;">parameter null or not set</span></b>" is printed. This feature is often used in Korn shell scripts to check if mandatory variables are set. In this example, variable XBIN is first unset. When expanded, the default error is printed:<br /><span style="font-family:'Courier New';">    $ unset XBIN</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ : ${XBIN:?}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    /bin/ksh: XBIN: parameter null or not set</p>
<p></span>You could also provide your own error message:<br /><span style="font-family:'Courier New';">    $ print ${XBIN:?Oh my God, XBIN is not set!}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    /bin/ksh: XBIN: Oh my God, XBIN is not set!</span></p>
<p>The other formats, <u><b>${variable?word}</b> and<b> ${variable?}</b>, cause the variable value to be used, even if it is set to null</u>.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="8_6_variable_word_variable_wor_5404786737635732" id="8_6_variable_word_variable_wor_5404786737635732"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">8.6 <span style="font-family:Georgia;">${<i>variable</i>:+<i>word </i>}, ${<i>variable</i>+<i>word</i> }</span></span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><u>This is expanded to the value of word if variable is set and not null, otherwise nothing is substituted.</u> This is basically the opposite of the <span style="font-family:Georgia;">${<i>variable</i>:-<i>word</i>}</span> format. Instead of using <i>word</i> if variable is not set, <i>word </i><span style="color:rgb(255,0,0);">is used if variable is set</span>. In the first example Y is set to abc. When expanded, the alternate value def is displayed because Y is set:<br /><span style="font-family:'Courier New';">    $ Y=abc</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${Y:+def}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    def</p>
<p></span>Here, Y is unset. Now when expanded, nothing is displayed:<br /><span style="font-family:'Courier New';">    $ unset Y</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${Y:+def}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $</span></p>
<p>Like the ${variable:-word} format, <span style="color:rgb(0,0,255);">the alternate value is only used and not assigned to the variable</span>. Y is still set to null:<br /><span style="font-family:'Courier New';">    $ print $Y</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $</span></p>
<p>The other format, <u>${variable+word}, causes the variable value to be used, even if it is set to null</u>:<br /><span style="font-family:'Courier New';">    $ Y=</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${Y+def}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    def</span><br /></span></span><br />
<h3 style="font-size:12pt;"><a name="8_7_variable_pattern_variable__9965686993673444" id="8_7_variable_pattern_variable__9965686993673444"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:Georgia;">8.7 ${<i>variable</i>#<i>pattern</i>}, ${<i>variable</i>##<i>pattern</i>}</span></span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><u>This is expanded to the value of variable with the smallest (#) or largest (##) part of the left matched by <i><span style="font-family:Georgia;">pattern</span></i> deleted.</u> What these expansion formats allow you to do is manipulate substrings. To demonstrate the basic functionality, X is set to a string that contains a recurring pattern: abcabcabc.<br /><span style="font-family:'Courier New';">    $ X=abcabcabc</span><br style="font-family:'Courier New';" /><br />When expanded to return the substring that deletes the smallest left pattern abc, we get abcabc:<br /><span style="font-family:'Courier New';">    $ print ${X#abc*}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    abcabc</span></p>
<p>while the substring that deletes the largest left pattern abc is abcabcabc, or the entire string:<br /><span style="font-family:'Courier New';">    $ print ${X##abc*}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $</span></p>
<p>We could use this concept to implement the Korn shell version of the UNIX <b>basename</b> command. The pattern in this command causes the last directory to be returned if variable X is set to<span style="font-family:'Courier New';"> a full pathname:</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ X=/usr/spool/cron</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${X##*/}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    cron</span><br style="font-family:'Courier New';" /></span></span><br />
<h3 style="font-size:12pt;"><a name="8_8_variable_pattern_variable__9711597748100758" id="8_8_variable_pattern_variable__9711597748100758"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">8.8<span style="font-family:Georgia;"> ${<i>variable</i>%<i>pattern</i>}, ${<i>variable</i>%%<i>pattern</i>}</span></span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><u>This is expanded to the value of variable with the smallest (%) or largest (%%) part of the right matched by pattern deleted.</u> It could also be used to display file names without their .suffixes:<br /><span style="font-family:'Courier New';">    $ X=file.Z</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${X%.*}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    file</span></p>
<p>The pattern in this command causes it to act like the UNIX dirname command. Everything except the last directory is returned if variable X is set to a full pathname.<br /><span style="font-family:'Courier New';">    $ X=/usr/spool/cron</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${X%/*}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    /usr/spool</span><br /></span></span><br />
<h3 style="font-size:12pt;"><a name="8_9_variable_pattern1_pattern2_647486001253128" id="8_9_variable_pattern1_pattern2_647486001253128"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">8.9 ${variable//pattern1/pattern2}, </span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;">${variable/pattern1/pattern2}; </span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;">${variable#pattern1/pattern2},</span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;">${variable/%pattern1/pattern2}</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The Korn shell supports four search and replace operations on variables. This example changes all occurrences of abc in X to xyz:<br /><span style="font-family:'Courier New';">    $ X=abcabcabc</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${X//abc/xyz}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    xyzxyzxyz</span><br />while this one only changes the first occurrence of abc in X to xyz:<br /><span style="font-family:'Courier New';">    $ X=abcabcabc</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${X/abc/xyz}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    xyzabcabc</span><br />See Table 3.6 for detailed explanation of the other formats.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="8_10_variable_start_variable_s" id="8_10_variable_start_variable_s"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">8.10 ${variable:start}, ${variable:start:length}</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">This format returns a substring. The first returns variable from character position start to end, while the second returns length characters from variable from character position start to end. For example, this returns the first 3 characters of X:<br /><span style="font-family:'Courier New';">    $ X=abcdefghij</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print {$X:0:3}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    abc</span><br />while this example returns the value of X starting at character position 5:<br /><span style="font-family:'Courier New';">    $ X=abcdefghij</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print {$X:5}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    fghij</span></p>
<p></span></span><br />
<h2 style="font-size:14pt;"><a name="9_Array_Variables_111484066583_7120619406923652" id="9_Array_Variables_111484066583_7120619406923652"></a><i><span style="font-family:'Courier New';"><span style="font-family:Verdana;">9 Array Variables</span></span></i></h2>
<h2 style="font-size:14pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h2>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Arrays can have a maximum of 4096 elements. Array subscripts start at 0 and go up to 4096 (or the maximum element minus one). Any variable can become a one-dimensional array by simply referring to it with a subscript.<br /></span></span><br />
<h3 style="font-size:12pt;"><a name="9_1_Array_Variable_Assignments_8827508166432381" id="9_1_Array_Variable_Assignments_8827508166432381"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">9.1 Array Variable Assignments &amp; Declarations</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Arrays can be assigned values by using normal variable assignment statements, the <b><span style="font-family:Georgia;">set -A</span></b> command, or the <b>typeset</b> command:<br /><i>        variable[0]=value variable[1]=value . . . variable[n]=value</i><br />or<br /><span style="font-family:Georgia;"><b>        set -A </b><i>variable value0 value1 . . . valuen</i></span><br />or<br /><span style="font-family:Georgia;"><b>        typeset</b> <i>variable[0]=value variable[1]=value . . .  variable[n]=value</i></span></p>
<p>The only difference between the formats, is that with the set command format, the values are assigned to the array variable sequentially starting from element zero. In the other formats, the array elements can be assigned values in any order.</p>
<p>Not all the elements of an array need to exist. You can assign values to non-successive elements of an array.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="9_2_Array_Variable_Expansion_6_4298841701820493" id="9_2_Array_Variable_Expansion_6_4298841701820493"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">9.2 Array Variable Expansion</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;">
<div id="nazz" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><img src="http://docs.google.com/File?id=dd6nw3mt_163hqbxwc94_b" style="width:525px;height:454px;" /></div>
<p></span></span></span></span><br /><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Array variables are expanded in the same manner as normal variables and parameters: using the $ character. Without a subscript value, an array variable refers to the first element, or element 0.</p>
<p>To access the value of a specific array variable element use a subscript. Array variable names and subscripts must be enclosed in braces for proper expansion:<br /><span style="font-family:'Courier New';">    $ print ${DAY[3]} ${DAY[5]}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    Thu Sat</span></p>
<p>All the elements of an array can be accessed by using the * or @ as the subscript value. They both return the same value.</p>
<p>The number of elements of an array variable is returned by using the # in front of the array variable name and using * or @ as the subscript value.</p>
<p>To get values for a subset of an array, use this format:<br /><b><span style="font-family:Georgia;">        ${<i>variable</i>[*]:<i>start_subscript</i>:<i>num_elements</i>}</span></b><br />or<br /><b><span style="font-family:Georgia;">        ${<i>variable</i>[@]:<i>start_subscript</i>}</span></b></p>
<p>Arithmetic expressions can be used to return a subscript value. Variable expansion can also be used to generate a subscript value.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="9_3_Array_Variable_Attributes__8870758265256882" id="9_3_Array_Variable_Attributes__8870758265256882"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">9.3 Array Variable Attributes</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Arrays can also be declared, and assigned values and attributes with the typeset command:<br /><span style="font-family:Georgia;"><b>                typeset</b></span><i><span style="font-family:Georgia;"> -attribute variable[0]=value variable[1]=value . . .</span></i><br />Once set, attributes apply to all elements of an array. This example sets the uppercase attribute for the DAY array variable using the <b>typeset -u</b> command:<br /><span style="font-family:'Courier New';">        $ typeset —u DAY</span><br />Now all the element values are displayed in upper case:<br /><span style="font-family:'Courier New';">        <b>$ print ${DAY[*]}</b> <b><span style="color:rgb(56,118,29);">#Pay attention to usage.</span></b></span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">        MON TUE WED THU FRI SAT SUN</span><br />Array element attributes can be set before or after assignment.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="9_4_Array_Variable_Reassignmen_9427135931327939" id="9_4_Array_Variable_Reassignmen_9427135931327939"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">9.4 Array Variable Reassignments</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Besides using regular <span style="font-family:Georgia;"><i>array-element</i>[n]=<i>value</i></span> or <span style="font-family:Georgia;"><b>typeset</b> <i>arrayelement</i>[n]=<i>value</i></span> syntax to reassign values, array variables can also have their values reassigned with the set +A command:<br /><span style="font-family:Georgia;"><b>set +A </b><i>variable value0 value1 . . .</i></span></p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="9_5_Associative_Arrays_1665451_4800594123080373" id="9_5_Associative_Arrays_1665451_4800594123080373"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">9.5 Associative Arrays</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><u><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Associative </span></span></span></span></u><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><u>arrays use string subscripts rather than integer subscripts.</u> Associative arrays are declared using this format:<br /><span style="font-family:Georgia;"><b>                typeset -A</b> <i>variable</i></span><br />where </span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:Georgia;"><i>variable</i></span></span></span></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"> is the name of the associative array. Additional arguments can be given to the <b>typeset </b>command to specify a data type. For example, we can create an associative array to store some exchange rates:<br /><span style="font-family:'Courier New';">    $ typeset -AE exchange_rate</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ exchange_rate["DM"]=1.7</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ exchange_rate["FF"]=.15</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ exchange_rate["AS"]=.04</span></p>
<p>To display a list of associative array subscripts:<br /><span style="font-family:Georgia;">               <b> </b><b>${!<i>variable</i>[*]} </b> <span style="font-family:Verdana;">or</span>  <b>${!<i>variable</i>[@]}</b></span><br />To display the values for all or parts of an associative array:<br />        <b><span style="font-family:Georgia;">${!<i>variable</i>[<i>subscript</i>]}</span></b><br />For example, all and a specific exchange rate is displayed here:<br /><span style="font-family:'Courier New';">    $ print ${!exchange_rate[*]}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    0.15 1.7</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print "The DM exchange rate is:${exchange_rate[DM]}"</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    1.7</span></p>
<p></span></span><br />
<h2 style="font-size:14pt;"><a name="10_Compound_Variables_21190555_19111895095556974" id="10_Compound_Variables_21190555_19111895095556974"></a><i><span style="font-family:'Courier New';"><span style="font-family:Verdana;">10 Compound Variables</span></span></i></h2>
<h2 style="font-size:14pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h2>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Compound Variables is a meta-datatype which is a group of related values. The syntax for declaring compund variables is:<br /><i><b><span style="font-family:Georgia;">    compound_variable</span></b></i><b><span style="font-family:Georgia;">=(</span></b><i><b><br style="font-family:Georgia;" /><span style="font-family:Georgia;">            </span></b></i><b><span style="font-family:Georgia;">[</span></b><i><b><span style="font-family:Georgia;">datatype</span></b></i><b><span style="font-family:Georgia;">]</span></b><i><b><span style="font-family:Georgia;"> field1</span></b></i><b><span style="font-family:Georgia;">[=</span></b><i><b><span style="font-family:Georgia;">value</span></b></i><b><span style="font-family:Georgia;">]</span></b><i><b><br style="font-family:Georgia;" /><span style="font-family:Georgia;">                . . .</span><br style="font-family:Georgia;" /><span style="font-family:Georgia;">           </span></b></i><b><span style="font-family:Georgia;"> [</span></b><i><b><span style="font-family:Georgia;">datatype</span></b></i><b><span style="font-family:Georgia;">] </span></b><i><b><span style="font-family:Georgia;">fieldn</span></b></i><b><span style="font-family:Georgia;">[=</span></b><i><b><span style="font-family:Georgia;">value</span></b></i><b><span style="font-family:Georgia;">]</span></b><i><b><br style="font-family:Georgia;" /><span style="font-family:Georgia;">            </span></b></i><b><span style="font-family:Georgia;">)</span></b></span></span></span></span><br style="font-family:Georgia;" /><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br />The syntax to display the value of a compound variable field is:<br /><b>                ${<i>compound_variable.field</i>}</b></p>
<p></span></span><br />
<h2 style="font-size:14pt;"><a name="11_Quoting_12240633368492126_0" id="11_Quoting_12240633368492126_0"></a><i><span style="font-family:'Courier New';"><span style="font-family:Verdana;">11 Quoting</span></span></i></h2>
<h2 style="font-size:14pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h2>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">There are three types of quotes: <b>single quotes</b>, <b>double quotes</b>, and<b> back quotes</b>. Single and double quotes are similar, except for the way they handle some special characters. Back quotes are used for command output assignment.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="11_1_Single_Quotes_61755968164_7702147783711553" id="11_1_Single_Quotes_61755968164_7702147783711553"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">11.1 Single Quotes</span></span></h3>
<p>Single quotes are also used to hide the meaning of special characters like $, *, /, !, ", ` and /. Any characters between single quotes, except<span style="font-family:'Courier New';"><span style="font-family:Verdana;"> another single quote, are displayed without interpretation as special characters:<br /><span style="font-family:'Courier New';">    $ print '* $ / ! ` / "'</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    * $ / ! ` / "</span><br style="font-family:'Courier New';" /><br /><b>Variable and command substitution does not take place within single quotes</b> (because $ and `` lose their special meaning).<b> If you want to access the value of a variable, use double quotes instead of single quotes</b> (discussed in the next section).</p>
<p>Variables can be set to null with single quotes:<br /><span style="font-family:'Courier New';">    $ X=''</span><br />Single quotes are also used to assign values to aliases and trap commands, and prevent alias substitution, but we'll get to that later.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="11_2_Double_Quotes_24466882180_9458656702190638" id="11_2_Double_Quotes_24466882180_9458656702190638"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">11.2 Double Quotes</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Double quotes are like single quotes, except that they do <b>not </b>remove the meaning of the special characters $, `, and /. This means that variable and command substitution is performed.<br /><span style="font-family:'Courier New';">    $ DB="$HOME:`pwd`"</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $DB</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    /home/anatole:/tmp</span></p>
<p>Double quotes also preserve embedded whitespace and newlines. Here are some examples:<br /><span style="font-family:'Courier New';">    $ print "Line 1</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    &gt; Line 2"   <span style="color:rgb(106,168,79);"> </span><span style="color:rgb(106,168,79);">#</span></span></span></span><span style="font-family:'Courier New';color:rgb(106,168,79);"><span style="font-family:Verdana;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The &gt; is the secondary prompt, and is displayed whenever the Korn shell needs more input.</span></span></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:'Courier New';color:rgb(106,168,79);"></span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    Line 1</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    Line 2</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print "A        B"</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    A        B</span></p>
<p>In this case, it waits for the closing double quote:<br /><span style="font-family:'Courier New';">    $ ADDR="ASP,Inc</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    &gt; PO Box 23837</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    &gt; San Jose CA 95153 USA</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    &gt; (800)777-UNIX * (510)531-5615"</span><br />Without double quotes around ADDR, we get this:<br /><span style="font-family:'Courier New';">    $ print $ADDR</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    ASP,Inc PO Box 23837 San Jose CA 95153 USA (800) 777-</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    UNIX * (510)531-5615</span><br />Not quite what we wanted. Let's try it again:<br /><span style="font-family:'Courier New';">    $ print "$ADDR"</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    ASP,Inc</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    PO Box 23837</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    San Jose CA 95153 USA</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    (800)777-UNIX * (510)531-5615</span></p>
<p>There are also other uses for double quotes. You can set a variable to null:<br /><span style="font-family:'Courier New';">    $ NULL=""</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $NULL</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $</span><br />or display single quotes.<br /><span style="font-family:'Courier New';">    $ print "'This is in single quotes'"</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    'This is in single quotes'</span><br />If you really wanted to display the $, `, /, or " characters using double quotes, <b>escape them with a backslash</b> like this:<br /><span style="font-family:'Courier New';">    $ print "/$HOME is set to $HOME"</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $HOME is set to /home/anatole</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print "/`=back-quote //=slash /"=double-quote"</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    `=back-quote /=slash "=double-quote</span></p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="11_3_Back_Quotes_6698768856003_8325655767694116" id="11_3_Back_Quotes_6698768856003_8325655767694116"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">11.3 Back Quotes</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b><u>Back quotes are used to assign the output of a command to a variable.</u></b> This format, from the Bourne shell, is accepted by the Korn shell but considered obsolescent. This command sets the variable SYS to the system name:<br /><span style="font-family:'Courier New';">    $ SYS=`uuname —l`</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $SYS</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    aspd</span></p>
<p></span></span><br />
<h2 style="font-size:14pt;"><a name="12_Command_History_File_256358" id="12_Command_History_File_256358"></a><i><span style="font-family:'Courier New';"><span style="font-family:Verdana;">12 Command History File</span></span></i></h2>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The Korn shell stores the commands that you enter at your terminal in a file, called the command history file. This file is specified by the <b>HISTFILE</b> variable. If not set, the default is <b>$HOME/.sh_history</b>.</p>
<p>The number of commands accessible via the command history file is specified by the <b>HISTSIZE</b> variable. If not set, the last 128 commands are saved, starting from your most recent command.</p>
<p>There are two ways to access the command history file: using the <b>fc</b> command, or the in-line editor.</p>
<p></span></span><br />
<h2 style="font-size:14pt;"><a name="13_The_fc_Command_071168033406" id="13_The_fc_Command_071168033406"></a><i><span style="font-family:'Courier New';"><span style="font-family:Verdana;">13 The fc Command</span></span></i></h2>
<h2 style="font-size:14pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h2>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The <b>fc</b> command allows you to list, or edit and re-execute history file commands. The fc command also allows you to manipulate the history file using your own choice of editors.<br /></span></span><br />
<h3 style="font-size:12pt;"><a name="13_1_Displaying_the_Command_Hi" id="13_1_Displaying_the_Command_Hi"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">13.1 Displaying the Command History File</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The format for displaying the command history file with the <b>fc -l</b> command is:<br /><b>        fc -l[nr]</b> [ <i>range</i> ]<br />where the -n option causes the command numbers to not be  displayed, and the -r option specifies reverse order (latest commands first). The range of commands to list is given as:<br /><b>n1 [n2]:</b>     display list from command n1 to command n2. If n2 is not specified, display all the commands from current command back to command n1.<br /><b><i>-count:</i></b><b><i>    </i></b> display the last count commands string display all the previous commands back to the command that matches.<br /><b>string:</b><b>    </b> If no range argument is given, the last sixteen commands are listed.</p>
<p>If no <i>range </i>argument is given, the last sixteen commands are listed. Let's look at the last five commands:<br /><span style="font-family:'Courier New';">    $ fc -l -5</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    250 set</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    251 vi /etc/env</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    252 . /etc/env</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    253 set</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    254 alias</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    255 functions</span><br />The <b>history</b> command is equivalent to <b>fc -l</b>. The last command could also be given like this. Notice that the order is reversed.<br /><span style="font-family:'Courier New';">    $ history —r —5</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    255 functions</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    254 alias</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    253 set</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    252 . /etc/env</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    251 vi /etc/env</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    250 set</span><br />By using a string instead of a count argument, we could search backward for a specific command.<br /><span style="font-family:'Courier New';">    $ history —r set</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    258 fc —lr set</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    257 fc —ln —10</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    256 fc —l 250 265</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    255 functions</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    254 alias</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    253 set</span><br />The argument set could also be given as s, or se, since partial strings are also matched. This means that the string f would match functions and fc, while fu would only match functions.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="13_2_Editing_the_Command_Histo_6460225936025381" id="13_2_Editing_the_Command_Histo_6460225936025381"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">13.2 Editing the Command History File</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Besides displaying the command history file, it can also be edited using the fc command with the following format:<br /><b><span style="font-family:Georgia;">                fc [-e <i>editor</i>] [-r] [<i>range</i>]</span></b><br />or<br /><b>                fc -e - [<i>old=new</i>] [<i>command</i>]</b><br />where the -e editor option is used to specify an editor. If not given, the value of the FCEDIT variable is used, and if not set, the default /bin/ed is used. The -r option reverses the order of the commands, so that the latest commands are displayed first.</p>
<p></span></span>Using <b>r</b>, the last command could also be given as: <span style="font-family:'Courier New';"><br />    $ <b>r</b> 173</p>
<p><span style="font-family:Verdana;">The substitution feature is used to make minor changes to </span><span style="font-family:Verdana;">a previous command. Let's start with <b>print Hello</b>:<br /><span style="font-family:'Courier New';">    $ print Hello</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    Hello</span><br />We could change Hello to something else like this.<br /><span style="font-family:'Courier New';">    $ r Hello=Goodbye print</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    print Goodbye</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    Goodbye</span></p>
<p></span></span><br />
<h2 style="font-size:14pt;"><a name="14_Job_Control" id="14_Job_Control"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><i>14 Job Control</i></span></span></h2>
<h2 style="font-size:14pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h2>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Job control allows programs to be stopped and restarted, moved between the foreground and background, their processing status to be displayed, and more. To enable the job control feature, the monitor option must be enabled with the set command:<br /><b><span style="font-family:Georgia;">                $ set —o monitor</span></b><br style="font-family:Georgia;" /><span style="font-family:Verdana;">or</span><br style="font-family:Georgia;" /><b><span style="font-family:Georgia;">                $ set —m</span></b><br />This can be put into the <b>.profile</b> file so that job control is automatically enabled at login.</p>
<p>14.1 Manipulating Jobs<br />Jobs running in the foreground are suspended by typing <b>Ctl-z</b> (Control-z). So instead of waiting for the long-running <b>split</b> command to complete, it is interrupted using Ctl-z:<span style="font-family:'Courier New';"><br />    $ split —5000 hugefile</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    Ctl-z</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    [3] + Stoppedsplit —5000 hugefile</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $</p>
<p></span>Stopped and backgrounded jobs are brought back into the foreground with the <b>fg</b> command. If no argument is given, the current (most recently stopped or backgrounded) job is used. The stopped split job is brought back into the foreground with fg:<br /><span style="font-family:'Courier New';">    $ fg</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    split —5000 hugefile<br /><span style="font-family:Verdana;">or </span><br />    $ fg %3<br /></span><br />Stopped jobs are put into the background with the <b>bg </b>command.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="14_2_Checking_Job_Status" id="14_2_Checking_Job_Status"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">14.2 Checking Job Status</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The status and other information about all jobs is displayed using the <b>jobs</b> command. The <b>jobs -l</b> command shows the same information, along with the process ids, while <b><span style="font-family:Georgia;">jobs -p</span></b> only gives you the process ids.<br /><span style="font-family:'Courier New';">    $ jobs —l</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    [3] + 466 Stopped split —5000 hugefile</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    [2] — 465 Running find / —name core —print &amp;</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    [1] 463 Running sleep 25 &amp;</p>
<p></span>Stopped or background jobs are terminated with the <b>kill</b> command.</p>
<p>You can make the Korn shell wait for some or all background jobs to complete with the <b>wait</b> command. If no argument is given, the Korn shell waits for <u>all background jobs</u> to complete.<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span><br style="font-family:Verdana;" /></span><br /></span></span><br />
<h3 style="font-size:12pt;"><a name="14_3_Job_Control" id="14_3_Job_Control"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">14.3 Job Control</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;">
<div id="p4e8" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><a href="http://docs.google.com/File?id=dd6nw3mt_165hjfw2fdd_b" target="_blank"><img src="http://docs.google.com/File?id=dd6nw3mt_165hjfw2fdd_b" style="border-style:initial;border-color:initial;border-width:0;" /></a></div>
<p>Jobs being executed in the background are prevented from generating output by setting <b><span style="font-family:Georgia;">stty tostop</span></b>. Let's run the find job again with the <b>tostop</b> option enabled:<br /><span style="font-family:'Courier New';">    $ stty tostop</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ find / —name core —print &amp;</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    [2] 1460<br /><span style="font-family:Verdana;">The <b><span style="font-family:Georgia;">stty tostop</span></b> command can be put into your profile file so that </span><span style="font-family:Verdana;">background job output is by default disabled.</span></span></span></span></span></span><br /><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br />The <b><span style="font-family:Georgia;">nohup </span></b>command can also be used to direct output from background jobs. It causes standard output and standard error to be automatically sent to <b>nohup.out</b>, or whatever file you give it. One added benefit. The <b>nohup</b> command will keep jobs running, even if you log out. Here we run the <b>find</b> job again using <b>nohup</b>. First we need to enable background job output:<br /><span style="font-family:'Courier New';">    $ stty —tostop</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ nohup find / —name core —print &amp;</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    [2] 1469</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ wait</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    Sending output to 'nohup.out'</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    [2] + Done nohup find / —name core —print &amp;</span><br />The find job output is in <b>nohup.out</b>:<br /><span style="font-family:'Courier New';">    $ cat nohup.out</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    /usr/lbin/core</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    /home/anatole/bin/core</span></p>
<p>14.4 Job Names
<div id="y2h2" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><img src="http://docs.google.com/File?id=dd6nw3mt_166cds9fbf2_b" style="width:431px;height:185px;" /></p>
</div>
<p></span></span>
<div style="text-align:left;margin-top:0;margin-bottom:0;">
<h2 style="font-size:14pt;"><a name="15_Performing_Arithmetic" id="15_Performing_Arithmetic"></a><i>15 Performing Arithmetic</i></h2>
<p>All of the operators from the C programming language (except ++, --, and ?:) are now supported by the Korn shell.</div>
<p><span style="font-family:'Courier New';"></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br /></span></span><br />
<h3 style="font-size:12pt;"><a name="15_1_The_let_Command" id="15_1_The_let_Command"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">15.1 The let Command</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Integer arithmetic can be done with the let command and arithmetic expressions. The format for the let command is:<br /><span style="font-family:Georgia;"><b>                let</b>  "<i>arithmetic-expression</i>"</span><br />where arithmetic-expressions can contain constants, operators, and Korn shell variables. <b>Double quotes</b> are used with arithmetic expressions that contain white space or operators that have special meaning to the Korn shell.</p>
<p>Notice that in arithmetic expressions, regular variables can be referenced by name only, and do not have to be preceded by $ for substitution to be performed. Both<br /><span style="font-family:'Courier New';">    $ let "X=X + 1"</span><br />and<br /><span style="font-family:'Courier New';">    $ let "X=$X + 1"</span><br />are equivalent. The first format is preferred because parameter expansion does not have to be performed.
<div id="dspu" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><img src="http://docs.google.com/File?id=dd6nw3mt_167gmh78ndp_b" style="width:431px;height:592px;" /></p>
</div>
<p></span></span>
<div style="text-align:left;margin-top:0;margin-bottom:0;">
<h3 style="font-size:12pt;"><a name="15_2_The_Command" id="15_2_The_Command"></a>15.2 The ((...)) Command</h3>
<p>The ((...)) command is equivalent to the let command, except that all characters between the (( and )) are treated as quoted arithmetic expressions. This is more convenient to use than let, because many of the arithmetic operators have special meaning to the Korn shell. The following commands are equivalent:<br /><span style="font-family:'Courier New';">    $ let "X=X + 1"</span><br style="font-family:'Courier New';" /><span style="font-family:Verdana;">and</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ ((X=X + 1))</span></div>
<p><span style="font-family:'Courier New';"></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br /></span></span><br />
<h3 style="font-size:12pt;"><a name="15_3_Declaring_Integer_Variabl" id="15_3_Declaring_Integer_Variabl"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">15.3 Declaring Integer Variables</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">As with ordinary variables, integer variables need not be declared. A variable can simply be given an integer value, and then used in an arithmetic expression. However, variables can be explicitly declared integer type by using the <b>typeset -i</b> command. There is also another command called <b>integer</b>, which is equivalent to <b>typeset -i</b>.</p>
<p>Arithmetic can be performed directly on integer variables without using the let or ((...)) commands, as long as the integer value is being assigned a value. In other words, you can do this:<br /><span style="font-family:'Courier New';">    $ integer DAYS="4 + 3"</span><br />instead of<br /><span style="font-family:'Courier New';">    $ ((DAYS=4 + 3))</span><br />or<br /><span style="font-family:'Courier New';">    $ let "DAYS=4 + 3"</span></p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="15_4_Arithmetic_Constants" id="15_4_Arithmetic_Constants"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">15.4 Arithmetic Constants</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The format for arithmetic constants is:<br /><i><span style="font-family:Georgia;">   <b> </b><b>    number</b></span></i><br />or<br /><i><span style="font-family:Georgia;">    <b>    base#number</b></span></i><br />where <u>base is a whole number between 2 and 36, and number is any non-negative integer</u>. If not specified, the default base is 10. The arithmetic base of a variable can be set with the <b>typeset -i</b><i><span style="font-family:Georgia;"><b>n</b> </span></i>command, or by prepending base# to the value. In this example, variable X is set to 5 in base 2 using both formats:<br /><span style="font-family:'Courier New';">    $ typeset —i2 X=5</span><br />or<br /><span style="font-family:'Courier New';">    $ typeset —i X=2#101     <span style="color:rgb(56,118,29);">#Note here 101 denotes 5 in decimal. </span></span></p>
<p>If you want to display the value of X in another base, just reset the base with the </span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b>typeset -i</b><i><span style="font-family:Georgia;"><b>n</b> </span></i></span></span></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;">command. Here it is reset to base 3:<br /><span style="font-family:'Courier New';">    $ typeset —i3 X</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $X</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    3#12</p>
<p></span></span></span><br />
<h3 style="font-size:12pt;"><a name="15_5_Random_Numbers" id="15_5_Random_Numbers"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">15.5 Random Numbers</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The Korn shell provides a special variable, <b>RANDOM</b>, which is used to generate random numbers in the range from 0 to 32767.</p>
<p>You can also initialize a sequence of random numbers by setting <b>RANDOM</b> to a value. Here, <b>RANDOM</b> is set to 7. When subsequently accessed, the values 2726 and 18923 are returned:<br /><span style="font-family:'Courier New';">    $ RANDOM=7</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $RANDOM</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    2726</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $RANDOM</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    18923</span><br />When RANDOM is reset to 7 again, the same numbers are returned:<br /><span style="font-family:'Courier New';">    $ RANDOM=7</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $RANDOM</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    2726</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $RANDOM</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    18923</span><br />If RANDOM is unset, the special meaning is removed, even if reset.</p>
<p></span></span><br />
<h2 style="font-size:14pt;"><a name="16_The_Environment" id="16_The_Environment"></a><i><span style="font-family:'Courier New';"><span style="font-family:Verdana;">16 The Environment</span></span></i></h2>
<h2 style="font-size:14pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h2>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">
<div id="i4_8" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><img src="http://docs.google.com/File?id=dd6nw3mt_168dd38bmfm_b" style="width:472px;height:714px;" /></div>
<p></span></span></div>
<p></span></p>

	</div>
	</div>
    
	<div class="post paper">	
    <h2 class="header"><a href="/2008/11/24/kshell-note-2">Korn Shell Notes(II)</a></h2>
    <p>
    	<span class="glyphicon glyphicon-time"></span> Posted by <strong>Bo Yang</strong> at <strong>2008-11-24</strong> with tags <span class="glyphicon glyphicon-tag"></span><a href="/tags.html#Unix/Linux-ref" rel="nofollow">Unix/Linux</a>, <span class="glyphicon glyphicon-tag"></span><a href="/tags.html#Shell-ref" rel="nofollow">Shell</a>, <span class="glyphicon glyphicon-tag"></span><a href="/tags.html#Notes-ref" rel="nofollow">Notes</a>
	</p>
	<hr>
    
    <div class="post_at_index thepost">
    	<br />
<h1 style="text-align:center;"><a id="_korn_Shell_Mannual_7321622101" name="_korn_Shell_Mannual_7321622101"></a> Korn Shell Notes<br /></h1>
<div>
<h2><a id="1_Useful_Cmds_5672844878149838_07467550420309199" name="1_Useful_Cmds_5672844878149838_07467550420309199"></a><i>1 Useful Cmds</i></h2>
<p><b>wc</b> - display a count of lines, words and characters in a file.<br />
&nbsp;&nbsp; &nbsp;It can be used to count the numbers together with other commands, such as ls, who and so on.</p>
<p><b>cut</b> - cut out selected fields of each line of a file.<br />
&nbsp;&nbsp;&nbsp; The name of each unique user that is logged on is displayed using this command:<br />
<span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$ who | cut —f1 —d' ' | sort —u</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;anatole</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;root</p>
<p></span><b>print</b> is a Korn shell&nbsp;specialized&nbsp;command which is similar to <span style="font-family:Courier New;">echo</span>.</p>
<p><b>nl</b> - line numbering filter.</div>
<div>
<h2><a id="2_Conditional_Execution_938277" name="2_Conditional_Execution_938277"></a><span style="font-family:Courier New;"><span style="font-family:Verdana;"><i>2 Process Execution</i><br /></span></span></h2>
<h3><a id="2_1_Conditional_Execution_5079_8305832861221516" name="2_1_Conditional_Execution_5079_8305832861221516"></a>2.1 <span style="font-family:Courier New;"><span style="font-family:Verdana;">Conditional Execution</span></span></h3>
<h3><span style="font-family:Courier New;"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:Courier New;"><span style="font-family:Verdana;">You can implement a simple if command by using the &amp;&amp; and || operators together like this:<br />
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<span style="font-family:Courier New;">command1 &amp;&amp; command2 || command3</span><br />
If command1 returns true, then command2 is executed, which causes<br />
command3 to not be executed. If command1 does not return true, then<br />
command2 is not executed, which causes command3 to be executed.<br />
</span></span></div>
<div>
<h3><a id="3_Grouping_Commands_3102224048" name="3_Grouping_Commands_3102224048"></a>2.2 Grouping Commands</h3>
<p>Commands enclosed in {} are executed in current shell. If</div>
<div><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$ echo "This is file temp:" ; cat temp | nl</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;This is file temp:</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;1 The rain in Spain</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;2 falls mainly on the plain</span></div>
<div>
<div style="padding:1em 0;text-align:center;" id="ozct">
<div style="text-align:left;">then by using {}s, the output will be:<br /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$ { echo "This is file temp:"; cat temp ; } | nl</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;1 This is file temp:</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;2 The rain in Spain</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;3 falls mainly on the plain</span><br />There must be whitespace after the opening {, and commands within the {}'s must be terminated with a semi-colon.</p>
<p>Commands<br />
enclosed in () are executed in a subshell. Subshells are generated<br />
whenever you enclose commands in ()'s, perform command substitution,<br />
for background processes, and for coprocesses.A subshell is a separate<br />
copy of the parent shell, so variables, functions, and aliases from the<br />
parent shell are available to the subshell. However, subshells cannot<br />
change the value of parent shell variables, functions, or aliases.</div>
<p><img src="http://docs.google.com/File?id=dd6nw3mt_104f3ccnmc3_b" style="width:501px;height:609px;" /></div>
</div>
<h3><a id="4_Redirecting_Standard_Output_" name="4_Redirecting_Standard_Output_"></a><span style="font-family:Courier New;"></span><span style="font-family:Courier New;"><span style="font-family:Verdana;"></span></span></h3>
<h2><a id="3_Input_Output_Redirection_262_7061543286301161" name="3_Input_Output_Redirection_262_7061543286301161"></a><i>3 Input/Output Redirection</i></h2>
<h3><span style="font-family:Courier New;"><span style="font-family:Verdana;"></span></span></h3>
<h3><a id="3_1_Redirecting_Standard_Outpu_8229576773319682" name="3_1_Redirecting_Standard_Outpu_8229576773319682"></a><span style="font-family:Courier New;"><span style="font-family:Verdana;">3.1 Redirecting Standard Output</span></span></h3>
<h3><span style="font-family:Courier New;"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:Courier New;"><span style="font-family:Verdana;">By using the &gt; symbol, the standard output of a command can be redirected to a file, instead of your terminal.</p>
<p>You can also use the &gt; command to create an empty file:<br /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;$ &gt; tmp</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;$ ls —s tmp</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;0 tmp</span><br />This is equivalent to <span style="font-family:Courier New;">touch tmp</span>.</p>
<p>Standard output can be appended to a file by using the <b>&gt;&gt;</b> redirect operator.</p>
<p>Standard output is closed with the <b><span style="font-family:Courier New;">&gt;&amp;-</span></b> redirect operator:<br /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;$ echo "This is going nowhere" &gt;&amp;-</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;$</span><br /></span></span><br />
<h3><a id="5_The_noclobber_Option_4119643" name="5_The_noclobber_Option_4119643"></a><span style="font-family:Courier New;"><span style="font-family:Verdana;">3.2 The<span style="font-family:Courier New;"> noclobber</span> Option</span></span></h3>
<h3><span style="font-family:Courier New;"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:Courier New;"><span style="font-family:Verdana;">To<br />
prevent redirecting output to an existing file, set the noclobber<br />
option. By default, this feature is usually disabled, but can be<br />
enabled with the <b>set -o noclobber</b> command:<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<span style="font-family:Courier New;">$ ls &gt; file.out</span><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<span style="font-family:Courier New;">$ set —o noclobber</span></p>
<p>The &gt;| operator is used to force overwriting of a file, even if the noclobber option is enabled.<br /></span></span><br />
<h3><a id="6_Redirecting_Standard_Input_2" name="6_Redirecting_Standard_Input_2"></a><span style="font-family:Courier New;"><span style="font-family:Verdana;">3.3 Redirecting Standard Input</span></span></h3>
<h3><span style="font-family:Courier New;"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:Courier New;"><span style="font-family:Verdana;">Standard input to a command is redirected from a file using the &lt; operator.</p>
<div id="l-l6" style="padding:1em 0;text-align:center;"><img style="width:656px;height:461px;" src="http://docs.google.com/File?id=dd6nw3mt_142zhz6kvd8_b" />
<div style="text-align:left;">
<h3><a id="7_Redirecting_Standard_Error_6" name="7_Redirecting_Standard_Error_6"></a>3.4 Redirecting Standard Error</h3>
<p>As<br />
with standard output, standard error is by default directed to your<br />
terminal, but it can be redirected using the standard error file<br />
descriptor (2) and the &gt; operator, e.g. <b>2&gt;</b>
<div id="kvf6" style="padding:1em 0;text-align:center;"><img style="width:453px;height:180px;" src="http://docs.google.com/File?id=dd6nw3mt_143dnb47w36_b" />
<div style="text-align:left;">
<h3><a id="8_More_With_File_Descriptors_7" name="8_More_With_File_Descriptors_7"></a>3.5 More With File Descriptors</h3>
<p>The <b>&gt;&amp;n </b>operator<br />
causes output to be redirected to file descriptor n. This is used when<br />
you want to direct output to a specific file descriptor.In the next<br />
command, the standard error and output are sent to ls.out by specifying<br />
multiple redirections on the same command line. First, <b>&gt;&amp;2</b><br />
causes standard output to be redirected to standard error. Then,<br />
2&gt;ls.out causes standard error (which is now standard output and<br />
standard error) to be sent to ls.out:<br /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$ ls tmp t.out 2&gt;ls.out 1&gt;&amp;2</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$ cat ls.out</span><br /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; tmp not found</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; t.out</span><br style="font-family:Courier New;" /><br />If<br />
the output of the last command was redirected to a file using the &gt;<br />
operator, then only the standard output would be redirected. The<br />
standard error would still be displayed on your terminal.<br /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$ {echo "This is going to stdout"} &gt;&amp;1;/</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;echo "This is going to stderr" &gt;&amp;2;} &gt;out</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;This is going to stderr</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$ cat out</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;This is going to stdout.</span></p>
<p>The<b> <span style="font-family:Courier New;">n&gt;&amp;m</span> </b>operator<br />
causes the output from file descriptors n and m to be merged. This<br />
operator could be used in the previous command to direct both the<br />
standard output and standard error to the same file.</div>
</div>
<p>If you wanted the standard output and standard error appended to the output file, the <span style="font-family:Courier New;">&gt;&gt;</span> operator could be used.<br />
<h3><a id="9_Here_Document_78766796044282" name="9_Here_Document_78766796044282"></a>3.6 Here Document</h3>
<p>&nbsp;<br />
Here documents is a term used for redirecting multiple lines of<br />
standard input to a command. In looser terms, they allow batch input to<br />
be given to programs and are frequently used to execute interactive<br />
commands from within Korn shell scripts. The format for a here document<br />
is:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <i>command &lt;&lt; word</i><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; or<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <i><span style="font-family:Courier New;">command &lt;&lt;-word</span></i><br />where lines that follow are used as standard input to command until word is read. </p>
<p>The<br />
other variation, command &lt;&lt;- word, deletes leading tab characters<br />
from the here document. It is often used over the first variation to<br />
produce more readable code when used within larger scripts. A good use<br />
for here documents is to automate ftp file transfers. This snippet of<br />
code could be used within a larger script to automatically ftp code to<br />
or from another server.<br />
<h3><a id="10_Discarding_Standard_Output_" name="10_Discarding_Standard_Output_"></a>3.7 Discarding Standard Output</h3>
<p>&nbsp; The <span style="font-family:Courier New;">/dev/null</span> file is like the system trash bin. Anything redirected to it is discarded by the system.
<div id="d4na" style="padding:1em 0;text-align:center;"><img style="width:456px;height:653px;" src="http://docs.google.com/File?id=dd6nw3mt_144g6jg94h3_b" />
<div style="text-align:left;">
<h2><a id="4_File_Name_Substitution_36576_08147998549624513" name="4_File_Name_Substitution_36576_08147998549624513"></a><i>4 File Name Substitution</i></h2>
<h3><a id="4_1_The_Character_8811087270296203" name="4_1_The_Character_8811087270296203"></a>4.1 The * Character</h3>
<p>The<br />
* matches any zero or more characters in current directory, except<br />
those begin with the "." character. These must be explicitly matched.<br />
<h3><a id="4_2_The_Character_9445044472675496" name="4_2_The_Character_9445044472675496"></a>4.2 The ? Character</h3>
<p>The ? character matches exactly one character.<br />
<h3><a id="4_3_The_Character_8276669466373929" name="4_3_The_Character_8276669466373929"></a>4.3 The [] Character</h3>
<p>The [] characters match a single, multiple, or range of characters. <br />This command lists file names beginning with d or m, and ending with any number 1 through 5:
<div id="b.as" style="padding:1em 0;text-align:center;"><img style="width:574px;height:69px;" src="http://docs.google.com/File?id=dd6nw3mt_145445m29dg_b" /></div>
<p>In<br />
the range argument, the first character must be alphabetically less<br />
than the last character. This means that [c-a] is an invalid range.<br />
This also means that pattern [0-z] matches any alphabetic or<br />
alphanumeric character, [A-z] matches any alphabetic character (upper<br />
and lower case), [0Z] matches any alphanumeric or upper case<br />
alphabetic character, and [09] matches any alphanumeric character.</p>
<p>Multiple ranges can also be given. The pattern <span style="font-family:Courier New;">[a-jlmr3-7]</span> would match files names beginning with the letters a through j, l, m, r, and 3 through 7.<br />
<h3><a id="4_4_The_Character_8385233166155047" name="4_4_The_Character_8385233166155047"></a>4.4 The ! Character</h3>
<p>The ! character can be used with [ ] to reverse the match. In other words,<span style="font-family:Courier New;"> [!a]</span> matches any character, except <span style="font-family:Courier New;">a</span>.<br />If we want to list all of the file names except those started with d, we could do this:
<div id="e0s4" style="padding:1em 0;text-align:center;"><img style="width:593px;height:98px;" src="http://docs.google.com/File?id=dd6nw3mt_146g3wh6vf8_b" /></div>
<p>or it can be done more easily using <b><span style="font-family:Courier New;">[!d]</span></b>:
<div id="oa2y" style="padding:1em 0;text-align:center;"><img style="width:590px;height:72px;" src="http://docs.google.com/File?id=dd6nw3mt_147ggsj9rdd_b" /></div>
<p>Multiple and range arguments can also be negated. The pattern <b><span style="font-family:Courier New;">[!lro]*</span></b> would match strings not beginning with l, r, or o, <b>*[!25]</b> would match strings not ending with 2 through 5, and <b><span style="font-family:Courier New;">*.[!Z]</span></b> would match strings not ending in .Z.
<div id="l82v" style="padding:1em 0;text-align:center;"><img style="width:419px;height:356px;" src="http://docs.google.com/File?id=dd6nw3mt_148f76gd7dg_b" />
<div style="text-align:left;">
<h3><a id="4_5_Complex_Patterns_6749485921749048" name="4_5_Complex_Patterns_6749485921749048"></a>4.5 Complex Patterns</h3>
<p>Korn Shell also provides entire patterns matching.
<div id="qkd5" style="padding:1em 0;text-align:center;"><img style="width:533px;height:353px;" src="http://docs.google.com/File?id=dd6nw3mt_150dzwchbcf_b" /></div>
<h4><a id="4_5_1_pattern__7121078334798239" name="4_5_1_pattern__7121078334798239"></a>4.5.1 *(<i>pattern</i>)</h4>
<p>This format matches any zero or more occurrences of pattern.</div>
</div>
<p>This pattern matches anti, antic, antigen, and antique: <b>$ match anti*(c|gen|que)</b><br />
<h4><a id="4_5_2_pattern__3180494268564732" name="4_5_2_pattern__3180494268564732"></a>4.5.2 ?<span style="font-family:Courier New;"></span>(<i>pattern</i>)</h4>
<p>This format matches any zero or one occurrences of pattern. Here are some more patterns using this format:
<div id="ty67" style="padding:1em 0;text-align:left;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<img style="width:328px;height:164px;" src="http://docs.google.com/File?id=dd6nw3mt_1549w8352fj_b" /></div>
<h4><a id="4_5_3_pattern__1431321966993203" name="4_5_3_pattern__1431321966993203"></a>4.5.3 +(<i>pattern</i>)</h4>
<p>This format matches one or more occurrences of pattern.<br />
<h4><a id="4_5_4_pattern__14535345873275873" name="4_5_4_pattern__14535345873275873"></a>4.5.4 @(<i>pattern</i>)</h4>
<p>This format matches exactly one occurrence of pattern. Let's look for words beginning with <b>Ala</b> or <b>Cla</b>: &nbsp;&nbsp; &nbsp;<b><span style="font-family:Courier New;">$ match @([AC]la)*</span></b><br />
<h4><a id="4_5_5_pattern__6355112508705647" name="4_5_5_pattern__6355112508705647"></a>4.5.5 !(pattern)</h4>
<p>This format matches anything except pattern. To match any string that does not end in .c, .Z, or .o:<br /><b><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; !(*.c|*.Z|*.o)</span></b><br />or any string that does not contain digits:<br /><b>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;!(*[0-9]*)</b>
<div id="i2wj" style="padding:1em 0;text-align:center;"><img style="width:329px;height:256px;" src="http://docs.google.com/File?id=dd6nw3mt_155hnrm7xht_b" /></div>
<p>
<h3><a id="4_6_Disabling_File_Name_Substi_16185795665760638" name="4_6_Disabling_File_Name_Substi_16185795665760638"></a>4.6 Disabling File Name Substitution</h3>
<p>File name substitution can be disabled by setting the noglob option using the set command:<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="font-family:Courier New;">&nbsp;</span><span style="font-family:Courier New;">$ set —o noglob</span><br />or<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<span style="font-family:Courier New;">$ set —f</span></p>
<p>The <span style="font-family:Courier New;">-o noglob</span> and <span style="font-family:Courier New;">-f options</span><br />
for the set command are the same. Once file name substitution is<br />
disabled, pattern-matching characters like *, ?, and ] lose their<br />
special meaning:<br /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$ ls a*</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;a* not found</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$ ls b?</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;b? not found</span><br /><b>Within [...] patterns, a / character is used to remove the meaning of the special pattern-matching characters.</b> This means that the [/*/?]* pattern would match file names beginning with * or ?.<br />
<h2><a id="5_Command_Substitution_8604427133040446" name="5_Command_Substitution_8604427133040446"></a><i>5 Command Substitution</i></h2>
<p>Command<br />
substitution is a feature that allows output to be expanded from a<br />
command. It can be used to assign the output of a command to a<br />
variable, or to imbed the output of a command within another command.<br />
The format for command substitution is:<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <b>&nbsp;</b><b><span style="font-family:Courier New;">$(<i>command</i>)</span></b><br />where <i>command</i> is executed and the output is substituted for the entire <i>$(command)</i> construct.<br />For example, to print the current date in a friendly format:<br /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$ echo The date is $(date)</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;The date is Fri Jul 27 10:41:21 PST 1996</span><br />
<h3><a id="5_1_Bourne_Shell_Compatibility" name="5_1_Bourne_Shell_Compatibility"></a>5.1 Bourne Shell Compatibility</h3>
<p>For compatibility with the Bourne shell, the following format for command substitution can also be used:<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<b><span style="font-family:Courier New;">`</span><i>command</i><span style="font-family:Courier New;"> `</span></b><br />Using `. . .` command substitution, we could get the names of the files in the current directory like this:<br /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$ echo `ls` are in this directory</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;NEWS asp bin pc are this directory</span><br />
<h3><a id="5_2_Directing_File_Input" name="5_2_Directing_File_Input"></a>5.2 Directing File Input</h3>
<p>There is also a special form of the <b>$(...)</b> command that is used to substitute the contents of a file. The format for file input substitution is:<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<b><span style="font-family:Courier New;">$(&lt;file)</span></b><br />This is equivalent to<b><span style="font-family:Courier New;"> $(cat file)</span></b> or `<b>cat file</b>`, except that it is faster, because an extra process does not have to be created to execute the <span style="font-family:Courier New;">cat</span> command.</p>
<h3><a id="5_3_Arithmetic_Operations" name="5_3_Arithmetic_Operations"></a>5.3 Arithmetic Operations</h3>
<p>Another form of the $(...) command is used to substitute the output of<br />
arithmetic expressions. The value of an arithmetic expression is<br />
returned when enclosed in double parentheses and preceded with a dollar<br />
sign.<br />
<b><span style="font-family:Courier New;"><span>&nbsp;&nbsp; &nbsp;</span><span>&nbsp;&nbsp; &nbsp;</span>$((arithmetic-expression))</span></b><br />
Here are a few examples.<br />
<span style="font-family:Courier New;"><span>&nbsp;&nbsp; &nbsp;</span><span>&nbsp;&nbsp; &nbsp;</span>$ echo $((3+5))</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;"><span>&nbsp;&nbsp; &nbsp;</span><span>&nbsp;&nbsp; &nbsp;</span>8</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;"><span>&nbsp;&nbsp; &nbsp;</span><span>&nbsp;&nbsp; &nbsp;</span>$ echo $((8192*16384%23))</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;"><span>&nbsp;&nbsp; &nbsp;</span><span>&nbsp;&nbsp; &nbsp;</span>9</span></p>
<h3><a id="5_4_Tilde_Substitution" name="5_4_Tilde_Substitution"></a>5.4 Tilde Substitution</h3>
<p>Tilde substitution is used to substitute the pathname of a user's home<br />
directory for ~user. Words in the command line that start with the<br />
tilde character cause the Korn shell to check the rest of the word up<br />
to a slash. If the tilde character is found alone or is only followed<br />
by a slash, it is replaced with the value of the <b>HOME</b> variable.</p>
<div id="xcw:" style="padding:1em 0;text-align:center;"><img style="width:538px;height:198px;" src="http://docs.google.com/File?id=dd6nw3mt_156dqcvxngk_b" /></p>
</div>
</div>
</div>
</div>
</div>
<p></span></span><span style="background-color:rgb(255,255,0);"></span></p>

	</div>
	</div>
    
	<div class="post paper">	
    <h2 class="header"><a href="/2008/11/20/kshell-note-1">Korn Shell(K Shell) Notes (I)</a></h2>
    <p>
    	<span class="glyphicon glyphicon-time"></span> Posted by <strong>Bo Yang</strong> at <strong>2008-11-20</strong> with tags <span class="glyphicon glyphicon-tag"></span><a href="/tags.html#Unix/Linux-ref" rel="nofollow">Unix/Linux</a>, <span class="glyphicon glyphicon-tag"></span><a href="/tags.html#Shell-ref" rel="nofollow">Shell</a>, <span class="glyphicon glyphicon-tag"></span><a href="/tags.html#Notes-ref" rel="nofollow">Notes</a>
	</p>
	<hr>
    
    <div class="post_at_index thepost">
    	<br />
<h1 style="text-align:center;"><a id="_korn_Shell_Mannual_" name="_korn_Shell_Mannual_"></a> Korn Shell Notes</h1>
<div>
<h3><a id="1_Useful_Cmds" name="1_Useful_Cmds"></a>1 Useful Cmds</h3>
<p><b>wc</b> - display a count of lines, words and characters in a file.<br />
&nbsp;&nbsp; &nbsp;It can be used to count the numbers together with other commands, such as ls, who and so on.</p>
<p><b>cut</b> - cut out selected fields of each line of a file.<br />
&nbsp;&nbsp;&nbsp; The name of each unique user that is logged on is displayed using this command:<br />
<span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$ who | cut —f1 —d' ' | sort —u</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;anatole</span><br style="font-family:Courier New;" /><br />
<span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;root</p>
<p></span><b>print</b> is a Korn shell&nbsp;specialized&nbsp;command which is similar to <span style="font-family:Courier New;">echo</span>.</p>
<p><b>nl</b> - line numbering filter.</div>
<div>
<h3><a id="2_Conditional_Execution" name="2_Conditional_Execution"></a><span style="font-family:Courier New;"><span style="font-family:Verdana;">2 Conditional Execution</span></span></h3>
<h3><span style="font-family:Courier New;"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:Courier New;"><span style="font-family:Verdana;">You can implement a simple if command by using the &amp;&amp; and || operators together like this:<br />
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<span style="font-family:Courier New;">command1 &amp;&amp; command2 || command3</span><br />
If command1 returns true, then command2 is executed, which causes<br />
command3 to not be executed. If command1 does not return true, then<br />
command2 is not executed, which causes command3 to be executed.<br />
</span></span></div>
<div>
<h3><a id="3_Grouping_Commands" name="3_Grouping_Commands"></a>3 Grouping Commands</h3>
<p>Commands enclosed in {} are executed in current shell. If</div>
<div><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$ echo "This is file temp:" ; cat temp | nl</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;This is file temp:</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;1 The rain in Spain</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;2 falls mainly on the plain</span></div>
<div>
<div style="padding:1em 0;text-align:center;" id="ozct">
<div style="text-align:left;">then by using {}s, the output will be:<br /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$ { echo "This is file temp:"; cat temp ; } | nl</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;1 This is file temp:</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;2 The rain in Spain</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;3 falls mainly on the plain</span><br />There must be whitespace after the opening {, and commands within the {}'s must be terminated with a semi-colon.</p>
<p>Commands<br />
enclosed in () are executed in a subshell. Subshells are generated<br />
whenever you enclose commands in ()'s, perform command substitution,<br />
for background processes, and for coprocesses.A subshell is a separate<br />
copy of the parent shell, so variables, functions, and aliases from the<br />
parent shell are available to the subshell. However, subshells cannot<br />
change the value of parent shell variables, functions, or aliases.</div>
<p><img src="http://docs.google.com/File?id=dd6nw3mt_104f3ccnmc3_b" style="width:501px;height:609px;" /></div>
</div>
<h3><a id="4_Redirecting_Standard_Output" name="4_Redirecting_Standard_Output"></a><span style="font-family:Courier New;"></span><span style="font-family:Courier New;"><span style="font-family:Verdana;">4 Redirecting Standard Output</span></span></h3>
<h3><span style="font-family:Courier New;"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:Courier New;"><span style="font-family:Verdana;">By using the &gt; symbol, the standard output of a command can be redirected to a file, instead of your terminal.</p>
<p>You can also use the &gt; command to create an empty file:<br /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;$ &gt; tmp</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;$ ls —s tmp</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;0 tmp</span><br />This is equivalent to <span style="font-family:Courier New;">touch tmp</span>.</p>
<p>Standard output can be appended to a file by using the <b>&gt;&gt;</b> redirect operator.</p>
<p>Standard output is closed with the <b><span style="font-family:Courier New;">&gt;&amp;-</span></b> redirect operator:<br /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;$ echo "This is going nowhere" &gt;&amp;-</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;$</span></p>
<p></span></span></p>

	</div>
	</div>
    
	<div class="post paper">	
    <h2 class="header"><a href="/2008/11/09/praise-683">行行出状元——表扬683路公交车售票员wen师傅</a></h2>
    <p>
    	<span class="glyphicon glyphicon-time"></span> Posted by <strong>Bo Yang</strong> at <strong>2008-11-09</strong> with tags <span class="glyphicon glyphicon-tag"></span><a href="/tags.html#Personal-ref" rel="nofollow">Personal</a>
	</p>
	<hr>
    
    <div class="post_at_index thepost">
    	<p>
    今天坐683路公交车，又遇到了一个月前遇到的那位售票员（<a href="http://blog.csdn.net/bonny95/archive/2008/10/12/3062688.aspx">http://blog.csdn.net/bonny95/archive/2008/10/12/3062688.aspx</a>）。她依然是那样热情的帮助乘客，依然如数家珍的报站名，依然用音乐抚慰着乘客拥挤的心灵。</p>
<p>不同的是：车厢内更加整洁了；车厢后面多了一排小花；车厢内的高台上（新型公交车有比较大的高台）铺着她自己做的小垫子供人坐，合理利用了空间，也为乘客提供了方便；大多数乘客已经习惯了她的热诚，放心的把东西交给她保管，甚至有些乘客已经成了她的朋友（亲眼见到一位小姐亲切的叫她“wen姐”和她打招呼，不知道是“闻”还是“文”）；绝大多数公交车内一片漆黑（晚上），只有她的车内灯火通明。</p>
<p>另外，一位中年妇女下车时不小心把买的爆米花弄撒了，wen师傅连忙安慰她。由此令我联想到坐某辆公交车，由于司机急刹车致使某位小姑娘摔倒在地，小姑娘的同伴抱怨时，而那位售票员竟然还大声呵斥摔倒的小姑娘为什么不小心……</p>
<p>到了某个我家附近不出名的小站，wen师傅一口气将周围所有的饭店统统报了出来。我不禁伸出大拇指称赞，她笑着说“其实我只是比较喜欢吃东西”我抓住机会看了看她的工作牌，只看清了“<font color="#ff0000"><b>120513C</b></font>”，不知道是不是她的工号。</p>
<p>我要由衷的谢谢她——她用实际行动告诉了我们无论什么事情，哪怕别人都认为没有前途或者无可改进，只要用心，照样也可以做的风生水起。</p>

	</div>
	</div>
    
	<div class="post paper">	
    <h2 class="header"><a href="/2008/11/02/tcl-tk-note-3">Tcl/Tk Notes (3)</a></h2>
    <p>
    	<span class="glyphicon glyphicon-time"></span> Posted by <strong>Bo Yang</strong> at <strong>2008-11-02</strong> with tags <span class="glyphicon glyphicon-tag"></span><a href="/tags.html#Tcl/Tk-ref" rel="nofollow">Tcl/Tk</a>, <span class="glyphicon glyphicon-tag"></span><a href="/tags.html#Notes-ref" rel="nofollow">Notes</a>
	</p>
	<hr>
    
    <div class="post_at_index thepost">
    	<br />
<h2>Part III&nbsp;Tcl&nbsp;Data&nbsp;Structures<br />
    </h2>
<h3><a id="1_More_about_Variables_8194860" name="1_More_about_Variables_8194860"></a>1 More&nbsp;about&nbsp;Variables</h3>
<ul>
<li>
        The <span style="font-family:'Courier New';">set </span>command
      </li>
</ul>
<p>    &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;The <span style="font-family:'Courier New';">set</span><br />
command is used to define variables of any type. In addition, the set<br />
command will return the value &nbsp;of a variable if it is only passed a<br />
single argument. It treats that argument as a variable name and returns<br />
the current value of the variable. </p>
<div style="padding:1em 0;text-align:left;">
<img src="http://docs.google.com/File?id=dd6nw3mt_126frfnfccm_b" style="width:695px;height:222px;" />
</div>
<div style="padding:1em 0;">
    &nbsp;&nbsp; &nbsp;In the&nbsp;last&nbsp;command,&nbsp;<span style="font-family:'Courier New';">$name</span>&nbsp;gets&nbsp;substituted&nbsp;with&nbsp;<span style="font-family:'Courier New';">var</span>.&nbsp;Then&nbsp;the&nbsp;<span style="font-family:'Courier New';">set</span>&nbsp;command&nbsp;returns&nbsp;the&nbsp;value&nbsp;of&nbsp;<span style="font-family:'Courier New';">var</span>,&nbsp;which&nbsp;is&nbsp;<span style="font-family:'Courier New';">the&nbsp;value&nbsp;of&nbsp;var</span>.&nbsp;Another&nbsp;way&nbsp;to&nbsp;achieve&nbsp;a&nbsp;level&nbsp;of&nbsp;indirection&nbsp;like&nbsp;this&nbsp;is&nbsp;with&nbsp;nested&nbsp;<span style="font-family:'Courier New';">set</span>&nbsp;commands.&nbsp;The&nbsp;last&nbsp;<span style="font-family:'Courier New';">set</span>&nbsp;command&nbsp;above&nbsp;can&nbsp;be&nbsp;written&nbsp;as&nbsp;follows:<br />
    &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<span style="font-family:'Courier New';">set&nbsp;[set&nbsp;name]</span><br />
    &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<i>=&gt;&nbsp;the&nbsp;value&nbsp;of&nbsp;var</i></p>
<ul>
<li>
        The <span style="font-family:'Courier New';">unset </span>command&nbsp;
      </li>
</ul>
<p>    &nbsp;&nbsp; &nbsp;You can&nbsp;delete&nbsp;a&nbsp;variable&nbsp;with&nbsp;the&nbsp;unset&nbsp;command:<br />
    &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<span style="font-family:'Courier New';">unset <i>varName varName2 ...</i></span></p>
<ul>
<li>
        Using info to find out about variables
      </li>
</ul>
<p>    &nbsp;&nbsp; &nbsp;The existence&nbsp;of&nbsp;a&nbsp;variable&nbsp;can&nbsp;be&nbsp;tested&nbsp;with&nbsp;the&nbsp;info&nbsp;exists&nbsp;command.<br />
    e.g.&nbsp;<br />
    &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if ![info&nbsp;exists&nbsp;foobar]{<br />
    &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;set&nbsp;foobar&nbsp;0<br />
    &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}&nbsp;else&nbsp;{<br />
    &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;incr&nbsp;foobar }<br />
<h3><a id="2_Tcl_Lists_16283892709607128_38510692397444923" name="2_Tcl_Lists_16283892709607128_38510692397444923"></a>2 Tcl Lists</h3>
<p>&nbsp;&nbsp; &nbsp;The Tcl list has the same structure as a Tcl command. That is, a<br />
list is simply a string with list elements separated by white<br />
space.Braces or quotes can be used to group words with whitespace into<br />
a single list element.
<div id="p_lk" style="padding:1em 0;text-align:left;"><font size="2"><img style="width:585px;height:506px;" src="http://docs.google.com/File?id=dd6nw3mt_1272k4p4qgs_b" /><br /></font><br />
<h3><a id="3_Constructing_Lists_list_lapp_6067784235213389" name="3_Constructing_Lists_list_lapp_6067784235213389"></a><font size="2"><a id="3_Constructing_Lists_list_lapp_064013552814696" name="3_Constructing_Lists_list_lapp_064013552814696"></a><a id="3_Constructing_Lists_list_lapp_48234938647299075" name="3_Constructing_Lists_list_lapp_48234938647299075"></a><a id="3_Constructing_Lists_list_lapp" name="3_Constructing_Lists_list_lapp"></a>3 Constructing Lists: <span style="font-family:Courier New;">list</span>, <span style="font-family:Courier New;">lappend</span> and <span style="font-family:Courier New;">concat</span></font></h3>
<p><font size="2">&nbsp;&nbsp; &nbsp;The <span style="font-family:Courier New;">list</span><br />
command constructs a list out of its arguments such that there is one<br />
list element for each argument. if any of the arguments contain special<br />
characters, the list command adds some quoting to ensure they are<br />
parsed as a single element of the resulting list.<br /></font></div>
<p><font size="2">e.g. <i><span style="font-family:Times New Roman;">Constructing a list with the<span style="font-family:Courier New;"> list </span>command</span></i><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; <span style="font-family:Courier New;">set x {1 2}</span><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; <i>=&gt; 1 2</i><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family:Courier New;"> </span><span style="font-family:Courier New;">set x</span><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; <i>=&gt; 1 2</i><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; <span style="font-family:Courier New;">list $x /$ foo</span><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; <i>=&gt; {1 2} {$} foo</i><br /><span style="color:rgb(0,0,255);">[Note]: The braces used to group the list value into one argument to the set command are not part of the list value.</span></p>
<p>&nbsp;&nbsp;&nbsp; The <span style="font-family:Courier New;">lappend</span> command is used to append elements to the end of a list. You can call <span style="font-family:Courier New;">lappend</span> with the name of an undefined variable and the variable will be created.<br />e.g.<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; <span style="font-family:Courier New;">lappend new 1 2</span><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;<i> </i><i>=&gt; 1 2</i><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; <span style="font-family:Courier New;"></span><span style="font-family:Courier New;">lappend new 3 "4 5"</span><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; =&gt; 1 2 3 {4 5}<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; <span style="font-family:Courier New;">set new</span><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; <i>=&gt; 1 2 3 {4 5}</i></p>
<p>&nbsp;&nbsp;&nbsp; The <span style="font-family:Courier New;">concat</span><br />
command is useful for splicing together lists. It works by<br />
concatenating its arguments together, separating them with spaces. This<br />
multiple lists into one where the top-level list elements in each input<br />
list are also top-level list elements in the resulting list.<br />e.g. <i>Using <span style="font-family:Courier New;">concat </span>to splice together lists.</i><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; <span style="font-family:Courier New;">concat 1 {2 3} {4 5 6}</span><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;<i> </i><i>=&gt; 1 2 3 4 5 6</i><br />&nbsp;&nbsp;&nbsp; It turns out that double quotes behave much like the <span style="font-family:Courier New;">concat</span> command.<br />e.g. <i><span style="font-family:Times New Roman;">Double quotes compared to the <span style="font-family:Courier New;">list </span>command.</span></i><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; <span style="font-family:Courier New;">set x {1 2}</span><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<i>&nbsp; </i><i>=&gt; 1 2</i><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; <span style="font-family:Courier New;">set y "$x 3"</span><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; <i>=&gt; 1 2 3</i><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; <span style="font-family:Courier New;">set y [concat $x 3]</span><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;<i> </i><i>=&gt; 1 2 3</i><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family:Courier New;"> </span><span style="font-family:Courier New;">set z [list $x 3]</span><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; <i>=&gt;{1 2} 3</i><br />&nbsp;&nbsp;&nbsp; The basic rule is that <span style="font-family:Courier New;">list </span>and<span style="font-family:Courier New;"> lappend</span> preserve preserve list structure, while <span style="font-family:Courier New;">concat</span>(or double-quotes)eliminate one level of list structure.<br /></font><br />
<h3><a id="4_Getting_List_Elements_llengt" name="4_Getting_List_Elements_llengt"></a><font size="2">4 Getting List Elements:<span style="font-family:Courier New;"> llength, lindex, <span style="font-family:Verdana;">and</span> lrange</span></font></h3>
<p><font size="2">&nbsp;&nbsp; &nbsp;The <span style="font-family:Courier New;">llength</span> command returns the number of elements in a list. <br />&nbsp;&nbsp;&nbsp; The <span style="font-family:Courier New;">lindex</span> command returns a particular element of a list. It takes an index. List indices count from zero. The keyword <i>end</i> means the last element, and it can be used with <span style="font-family:Courier New;">lindex, linsert, lrange </span>and <span style="font-family:Courier New;">lreplace</span>.<br />e.g.<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<span style="font-family:Courier New;">lindex {1 2 3} 0</span><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; <i>=&gt; 1</i><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;</font><font size="2"><span style="font-family:Courier New;">lindex {1 2 3} 2</span><br />
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; <i>=&gt; 3</i></font><font size="2"><br /> &nbsp;&nbsp;&nbsp; The <span style="font-family:Courier New;">lrange</span> command returns a range of list elements. It takes a list and two indices as arguments.<br />e.g.<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; <span style="font-family:Courier New;">lrange {1 2 3 {4 5}} 2 end</span><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; <i>=&gt; 3 {4 5}</i><br /></font><br />
<h3><a id="5_Modifying_Lists_linsert_and_" name="5_Modifying_Lists_linsert_and_"></a><font size="2">5 Modifying Lists: <span style="font-family:Courier New;">linsert</span> and <span style="font-family:Courier New;">lreplace</span></font></h3>
<p><font size="2">&nbsp;&nbsp;&nbsp; The <span style="font-family:Courier New;">linsert</span><br />
command inserts elements into a list value at a specified index. If the<br />
index is 0 or less, then elements are added to the front. If the index<br />
is equal to or greater than the length of the list, then the elements<br />
are appended to the end. Otherwise, the elements are inserted before<br />
the element that is currentl as position index.<br />&nbsp;&nbsp;&nbsp; <span style="font-family:Courier New;">lreplace</span><br />
is used to replace a range of list elements with new elements. If you<br />
don't specify any new elements, you effectively delete elements from a<br />
list.<br />e.g.<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; <span style="font-family:Courier New;">linsert {1 2} 0 new stuff</span><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; <i>=&gt; new stuff 1 2</i><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<span style="font-family:Courier New;">set x [list a {b c} e d]</span><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; <i>=&gt; a {b c} e d</i><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; <span style="font-family:Courier New;">lreplace $x 1 2 B C</span><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;<i> </i><i>=&gt; a B C d</i><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; <span style="font-family:Courier New;">lreplace $x 0 0</span><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; <i>=&gt; {b c} e d</i><br /></font><br />
<h3><a id="6_Searching_Lists_lsearch" name="6_Searching_Lists_lsearch"></a><font size="2">6 Searching Lists: <span style="font-family:Courier New;">lsearch</span></font></h3>
<p><font size="2"><span>&nbsp;&nbsp;&nbsp; </span><span style="font-family:Courier New;">lsearch</span> returns the index of a value in the list, or -1 if it is not present. <span style="font-family:Courier New;">lsearch</span> supports pattern matching in its search. Glob-style pattern matching is default, and this canbe disabled with the <span style="font-family:Courier New;">-exact</span> flag.<br /><span>&nbsp;&nbsp;&nbsp; </span>The example below uses<span style="font-family:Courier New;"> lreplace</span> to delete elements by not specifying any replacement list elements.<br />e.g.<br /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;</span><span><span style="font-family:Courier New;">&nbsp;&nbsp;&nbsp; proc delete {list value} {</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; set ix [lsearch -exact $list $value]</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; if {$ix&gt;=0} {</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; return [lreplace $list $ix $ix]</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; } else {</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; return $list</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; }</span><br style="font-family:Courier New;" /><span style="font-family:Courier New;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; }</span><br />&nbsp;<br /></span></font><br />
<h3><font size="2">7 Sorting List: <span style="font-family:Courier New;">lsort</span></font></h3>
<p><font size="2"><span>&nbsp;&nbsp;&nbsp; </span>The three basic types of sorts are specified with the <span style="font-family:Courier New;">-ascii, -integer</span>, or <span style="font-family:Courier New;">-real</span> options. The <span style="font-family:Courier New;">-increasing</span> or <span style="font-family:Courier New;">-decreasing</span> option indicate the sirting order. The default option set is <span style="font-family:Courier New;">-ascii -increasing</span>.
<div id="y4i8" style="padding:1em 0;text-align:left;"><img style="width:700px;height:341px;" src="http://docs.google.com/File?id=dd6nw3mt_12843xpw3gx_b" /></p>
<h3>8 The split And join Commands</h3>
<p><span>&nbsp;&nbsp;&nbsp; </span>The <span style="font-family:Courier New;">split </span>command<br />
takes a string and turns it into a list by breaking it at specified<br />
characters. Stray double-quotes or curly braces in the input can result<br />
in invalid list structures and errors in your script. However, the<br />
split command provides a robust way to turn input lines into proper Tcl<br />
lists.
<div id="nj_b" style="padding:1em 0;text-align:left;"><img style="width:659px;height:134px;" src="http://docs.google.com/File?id=dd6nw3mt_129dnrj74dp_b" /></div>
<div id="s61w" style="padding:1em 0;text-align:left;"><img style="width:672px;height:134px;" src="http://docs.google.com/File?id=dd6nw3mt_130f2ksvcpn_b" /></div>
<p><span>&nbsp;&nbsp; &nbsp;</span>The<br />
default split character is white space. If there are multiple separator<br />
characters in a row, these result in empty list elements- the<br />
separators are not collapsed. The following command splits on commas,<br />
periods, spaces and tabs:
<div id="i_2y" style="padding:1em 0;text-align:left;"><img style="width:299px;height:78px;" src="http://docs.google.com/File?id=dd6nw3mt_131fm4hj3gx_b" /></div>
<p><span>&nbsp;&nbsp; &nbsp;</span>The<span style="font-family:Courier New;"> join </span>command<br />
is the inverse of split. It takes a list value and reformats it with<br />
specified characters separating the list elements. In doing so, it will<br />
remove any curly braces from the string representation of the list that<br />
are used to group the top-level elements.
<div id="z1an" style="padding:1em 0;text-align:left;"><img style="width:269px;height:55px;" src="http://docs.google.com/File?id=dd6nw3mt_132gxv9m5gb_b" /></div>
<h3>9 Arrays</h3>
<p><span>&nbsp;&nbsp;&nbsp; </span>The index of an array is delimited by parentheses. The<br />
index can have any string value, and it canbe the result of variable or<br />
command substitution.<br /><span>e.g.<span> &nbsp; &nbsp;</span><span>&nbsp;&nbsp;&nbsp; </span><span style="font-family:Courier New;">set arra(</span><i>index</i><span style="font-family:Courier New;">) value</span><br /><span>&nbsp;&nbsp;&nbsp; </span>The value of an array element is obtained with $ substitution:<br /><span></span><span></span><span>e.g.<span>&nbsp;&nbsp; &nbsp;</span><span>&nbsp;&nbsp;&nbsp;<span style="font-family:Courier New;"> </span></span><span style="font-family:Courier New;">set foo $arr(</span><i>index</i><span style="font-family:Courier New;">)</span>
<div id="rrr0" style="padding:1em 0;text-align:left;"><img style="width:551px;height:145px;" src="http://docs.google.com/File?id=dd6nw3mt_133dvtqdmcr_b" /></div>
<p><span>&nbsp;&nbsp;&nbsp; </span>If<br />
you have complex indices, use a comma to separate different parts of<br />
the index. Avoid putting a pace after the comma. It is legal, but a<br />
space in an index value will cause problems because parenthesis are not<br />
used as a grouping mechanism. The space in the index needs to be quoted<br />
with a backslash, or hte whole variable reference needs to be grouped:<br /><span></span><span>e.g.<span>&nbsp;&nbsp; &nbsp;</span><span>&nbsp;&nbsp;&nbsp;<span style="font-family:Courier New;"> </span></span><span style="font-family:Courier New;">set {arr(I'm asking for trouble)} {I told you so.}</span><br /><span></span><span><span>&nbsp;&nbsp;&nbsp; </span>If<br />
the array index is stored in a variable, then there is no problem with<br />
spaces in the variable's value. The following works fine:<span><br />e.g.<span>&nbsp;&nbsp; &nbsp;</span><br /><span>&nbsp;&nbsp; &nbsp;<span>&nbsp;&nbsp; &nbsp;</span><span>&nbsp;&nbsp;&nbsp;<span style="font-family:Courier New;"> </span></span><span style="font-family:Courier New;">set index {</span></span></span></span></span></span></span><font><font size="2"><span><span><span>I'm asking for trouble</span></span></span></font></font><span><span><span><span><span><span><span style="font-family:Courier New;">}</span><br /><span>&nbsp;&nbsp; &nbsp;</span><span>&nbsp;&nbsp; &nbsp;</span><span>&nbsp;&nbsp;&nbsp;<span style="font-family:Courier New;"> </span></span><span style="font-family:Courier New;">set arr($index) {</span></span></span></span></span></span></span><font><font size="2"><span><span><span>I told you so.</span></span></span></font></font><span><span><span><span><span><span><span><span style="font-family:Courier New;">}</span><br /><span>&nbsp;&nbsp;&nbsp; </span>The<br />
name of the array can be the result of a substitution. If the name of<br />
the array is stored in another variable, then you must use set as shown<br />
in the last command below to reference the array elements. 
<div id="v86g" style="padding:1em 0;text-align:left;"><img style="width:622px;height:266px;" src="http://docs.google.com/File?id=dd6nw3mt_134ckqvbpf3_b" /></div>
<p></span></span></span></span></span></span></span></p>
<h3><span><span><span><span><span><span><span>10 The Array Command</span></span></span></span></span></span></span></h3>
<h3><span><span><span><span><span><span><span></span></span></span></span></span></span></span></h3>
<p><span><span><span><span><span><span><span>
<div id="uxsm" style="padding:1em 0;text-align:left;"><img style="width:722px;height:215px;" src="http://docs.google.com/File?id=dd6nw3mt_135g7rtd4rd_b" /></div>
<div style="padding:1em 0;">
<div id="j5ji" style="padding:1em 0;text-align:left;"><img style="width:722px;height:215px;" src="http://docs.google.com/File?id=dd6nw3mt_137gkb3k889_b" /></div>
<p><span>&nbsp;&nbsp;&nbsp; </span>The array names command is perhaps the most useful because it allows easy iteration through an array with a foreach loop:<br />
<span>&nbsp;&nbsp; &nbsp;</span><span>&nbsp;&nbsp; &nbsp;</span><span>&nbsp;&nbsp;&nbsp; </span><span style="font-family:Courier New;">foreach index [array names arr] {command body}</span><br />
<span>&nbsp;&nbsp;&nbsp; </span>The order of the names returned by array names is<br />
arbitrary. It is essentially determined by the hash table<br />
implementation of the array.<br />
<span>&nbsp;&nbsp;&nbsp; </span>The <span style="font-family:Courier New;">array get</span> and <span style="font-family:Courier New;">array set</span> operations are used to convert between an array and a list. The list returned by <span style="font-family:Courier New;">array get</span><br />
has an even number of elements.The first element is an index, and the<br />
next is the corresponding array value. The ordering of the indexes is<br />
arbitrary. The list argument to <span style="font-family:Courier New;">array se</span>t must have the same structure.</p>
<div id="h3:o" style="padding:1em 0;text-align:left;"><img style="width:467px;height:159px;" src="http://docs.google.com/File?id=dd6nw3mt_138fgwktmcn_b" /></p>
<h3>11 Environment Variables</h3>
<p><span>&nbsp;&nbsp;&nbsp; </span>In UNIX, the process environment variables are available through the global array <span style="font-family:Courier New;">env</span>.<br />
The name of the environment variable is the index,e.g. env(PATH), and<br />
the array element contains the current value of the environment<br />
variable.</p>
<h3>12 Tracing Variable Values</h3>
<p><span>&nbsp;&nbsp;&nbsp; </span>The trace command lets you register a command to be called whenever a variable is accessed, modified or unset. The form is:<br />
<span>&nbsp;&nbsp; &nbsp;</span><span>&nbsp;&nbsp;&nbsp; </span><span style="font-family:Courier New;">trace <i>variable name ops command</i></span><br />
<span>&nbsp;&nbsp;&nbsp; </span>The name is a Tcl variable name, which can be a simple<br />
variable, an array or a element.If a whole array is traced, then the<br />
trace is invoked when any element is used according to ops. The ops<br />
argument is one or more of the letters: r for read traces, w for write<br />
traces, and u for unset traces. The command is executed when one of<br />
these events occurs. It is invoked as:<br />
<span>&nbsp;&nbsp; &nbsp;</span><span>&nbsp;&nbsp;&nbsp; </span><span style="font-family:Courier New;">command name1 name2 op</span></p>
<div id="gbxa" style="padding:1em 0;text-align:left;"><img style="width:631px;height:266px;" src="http://docs.google.com/File?id=dd6nw3mt_139f4brdcdj_b" /></p>
<div id="fq6s" style="padding:1em 0;text-align:left;"><img style="width:565px;height:249px;" src="http://docs.google.com/File?id=dd6nw3mt_140c4szdzcj_b" /></div>
<p><span>&nbsp;&nbsp;&nbsp; </span>Information about traces on a varible is returned with the vinfo option.<br />
<span>&nbsp;&nbsp; &nbsp;</span><span>&nbsp;&nbsp;&nbsp;<span style="font-family:Courier New;"> </span></span><span style="font-family:Courier New;">trace vinfo dynamic</span><br />
<span>&nbsp;&nbsp; &nbsp;</span><span>&nbsp;&nbsp;&nbsp; </span><i>=&gt; {r FixDynamic}</i><br />
<span>&nbsp;&nbsp;&nbsp; </span>A trace is deleted with the <span style="font-family:Courier New;">vdelete <span style="font-family:Verdana;">trace</span></span> option, which has the same form as the <span style="font-family:Courier New;">varible</span> option.</div>
</div>
</div>
<p></span></span></span></span></span></span></span></div>
<p></font></div>

	</div>
	</div>
    
	<div class="post paper">	
    <h2 class="header"><a href="/2008/10/27/tcl-tk-note-1">Tcl/Tk Notes (1)</a></h2>
    <p>
    	<span class="glyphicon glyphicon-time"></span> Posted by <strong>Bo Yang</strong> at <strong>2008-10-27</strong> with tags <span class="glyphicon glyphicon-tag"></span><a href="/tags.html#Unix/Linux-ref" rel="nofollow">Unix/Linux</a>, <span class="glyphicon glyphicon-tag"></span><a href="/tags.html#Tcl/Tk-ref" rel="nofollow">Tcl/Tk</a>, <span class="glyphicon glyphicon-tag"></span><a href="/tags.html#Notes-ref" rel="nofollow">Notes</a>
	</p>
	<hr>
    
    <div class="post_at_index thepost">
    	<div>
<div style="text-align:center;">
<h1>
      Tcl/Tk Notes<br />
    </h1>
</div>
<p></p>
<div></p>
<h2>
      Part I TCL Overview<br />
    </h2>
<h3>
      1 Everything Is a String<br />
    </h3>
<p>    &nbsp;&nbsp; &nbsp;In Tcl, evrything is a string, and you have to explicitly ask for evaluation of variables and nested commands.</p>
<h3>
      2 Substitution<br />
</h3>
<ul>
<li>
        Variable
      </li>
</ul>
</div>
<div>
    &nbsp;&nbsp;&nbsp; The use of dollar sign($) is one kind of substitution. Variables can be assigned values by <span style="font-family:Courier New;">set</span> command.</p>
<ul>
<li>
        Command Substitution
</li>
</ul>
</div>
<div>
&nbsp;&nbsp;&nbsp; A nested command is delimited by square brackets, [ and ]. The Tcl<br />
takes everything between the brackets and evaluates it as a command. It<br />
Reqrites the outer command by replacing the square brackets and<br />
everything between them with the result of nested command.
</div>
<p></p>
<ul>
<li>
      Math Expression
    </li>
</ul>
</div>
<div>
  &nbsp;&nbsp;&nbsp; The <span style="font-family:Courier New;">expr </span>command is used to evaluate math expressions. The Tcl interpreter treats <span style="font-family:Courier New;">expr <span style="font-family:Verdana;">just like any other command, and it leaves the expression parsing up to the <span style="font-family:Courier New;">expr </span>implementation.</span></span></p>
</div>
<div>
<ul>
<li>
      Backslash Substitution
    </li>
</ul>
<p>  &nbsp;&nbsp;&nbsp; Backslash(/) is used to quote characters that have special meaning to the interpreter. <br />&nbsp;&nbsp; &nbsp;You can also specify characters that are hard to type directly by giving their octal or hexadecimal value. <br />&nbsp;&nbsp;<br />
&nbsp;Another common use of backslashes is to continue long commands on<br />
multiple lines. A backslash as the last character in a line is<br />
converted into a space.<br />
<h3>3 Double Quotes vs. Curly Braces</h3>
<p>&nbsp;&nbsp;&nbsp;<br />
Double quotes, like braces, are used to group words together. The<br />
difference between double quotes and curly braces is that quotes allow<br />
substitutions to occur in the group, while curly braces prevent<br />
substitutions.
<div id="o6jd" style="padding:1em 0;text-align:left;"><a target="_blank" href="http://docs.google.com/File?id=dd6nw3mt_112fm5tm2gc_b"><img style="width:666px;height:166px;" src="http://docs.google.com/File?id=dd6nw3mt_112fm5tm2gc_b" /></a><br />&nbsp;&nbsp;&nbsp;<br />
In practice, grouping with curly braces is used when substitutions on<br />
the argument need to be delayed until a later time( or never done at<br />
all). Examples include contrl flow statements and procedure<br />
declararions. Double quotes are usefulin simple cases like the <span style="font-family:Courier New;">puts</span> command.</div>
<p>&nbsp;&nbsp;&nbsp; Another common use of quotes is with the <span style="font-family:Courier New;">format </span>command<br />
that is similar to C printf function. The only way to effectively group<br />
special characters in format command into a single argument is with<br />
quotes.<br />&nbsp;&nbsp;&nbsp;<span style="font-family:Courier New;"> </span><span style="font-family:Courier New;">e.g. puts [format "Item: %s/t%5.3f" $name $value]</span><br />
<h3>4 Procedures</h3>
<p>&nbsp;&nbsp;&nbsp; Tcl uses the <span style="font-family:Courier New;">proc</span> command to define procedures. The syntax is : <br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; proc <i>name arglist body</i><br />&nbsp;&nbsp;&nbsp; <span style="color:rgb(255,0,0);">The <span style="font-family:Courier New;">return</span><br />
command in Tcl procedure is optional because the interpreter will<br />
return the value of the last command in the body as the value of the<br />
procedure.</span><br />
<h3>5 A While Loop Example </h3>
<div id="azjc" style="padding:1em 0;text-align:left;"><img style="width:584px;height:205px;" src="http://docs.google.com/File?id=dd6nw3mt_113d4kxm7gt_b" /><br />&nbsp;&nbsp; &nbsp;The loop around boolean expression <span style="font-family:Courier New;">$i&lt;=10</span><br />
is crucial, because it delays substitution until while command<br />
implementation tests the expression. The following expression is an<br />
infinite loop:<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; <span style="font-family:Courier New;">set i; while $i&lt;=10 {incr i}</span><br />&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;The Tcl interpreter will substitute for $i before while is called, so while gets a constant expression <span style="font-family:Courier New;">1&lt;=10</span><br />
that will always be ture.You can avoid this kind of errors by adopting<br />
a consistent coding style that always groups expressions and command<br />
bodies with curly braces.<br />&nbsp;&nbsp;&nbsp; The command in the example uses <span style="font-family:Courier New;">set</span> with a single argument. When used in this way the <span style="font-family:Courier New;">set</span> command returns the current value of the named variable.</p>
<h3>6 Grouping And Command Substitution</h3>
<p><span>&nbsp;&nbsp;&nbsp; </span>Grouping<br />
decisions are made before substitutions are performed. This means that<br />
the values of variables or command results do not affect grouping.<br /><span>&nbsp;&nbsp;&nbsp; </span>A<br />
single round if substitutions is performed before command invocation.<br />
That is, the result of a substitution is not interpreted a second time.<br />
This rule is important if you have a variable value or a command result<br />
that contains special characters such as spaces, dollar-signs, square<br />
brackets or braces. Because only a single round of substitution is<br />
done, you don't have to worry about special characters in values<br />
causing extra substitutions.</p>
<h3>7 Comments</h3>
<p><span>&nbsp;&nbsp;&nbsp; </span>Tcl<br />
uses # for comments. Unlike many languages, the # character must occur<br />
at the begining of a command. An easy trick to append a comment to the<br />
end of a command is to proceed the # with a semicolon in order to<br />
terminate the previous command.<br /><span>&nbsp;&nbsp;&nbsp; </span>A backslash(/)<br />
continues a comment line onto the next line of the script. In addition,<br />
a semi-colon inside a comment is not significant. only a newline<br />
terminates comments.<br />
<h3>8 Reference</h3>
<ul>
<li>backslash Sequences</li>
</ul>
</div>
</div>
<div>
<div id="z8dm" style="padding:1em 0;text-align:left;"><img style="width:725px;height:491px;" src="http://docs.google.com/File?id=dd6nw3mt_114hkq332ct_b" /></div>
<p>
<ul>
<li>Arithmetic Operators</li>
</ul>
</div>
<div>
<div id="t0kt" style="padding:1em 0;text-align:left;"><img style="width:713px;height:448px;" src="http://docs.google.com/File?id=dd6nw3mt_115cx6tf2gk_b" /></div>
<ul>
<li>Built-in Math Function</li>
</ul>
</div>
<div>
<div id="wkim" style="padding:1em 0;text-align:left;"><img style="width:584px;height:625px;" src="http://docs.google.com/File?id=dd6nw3mt_116gqq38zfc_b" /></div>
<ul>
<li>Core Tcl Commands</li>
</ul>
</div>
<div>
<div id="dwzb" style="padding:1em 0;text-align:left;"><img style="width:584px;height:94px;" src="http://docs.google.com/File?id=dd6nw3mt_117fsn9v3dj_b" />
<div id="f3wa" style="padding:1em 0;text-align:left;"><img style="width:561px;height:804px;" src="http://docs.google.com/File?id=dd6nw3mt_118vb3288fz_b" /></div>
<div id="vr6z" style="padding:1em 0;text-align:left;"><img style="width:561px;height:804px;" src="http://docs.google.com/File?id=dd6nw3mt_119vq4tt6fx_b" /></p>
<ul>
<li>Predefined Variables
</li>
</ul>
</div>
<div id="gq9h" style="padding:1em 0;text-align:left;"><img style="width:562px;height:376px;" src="http://docs.google.com/File?id=dd6nw3mt_120c9tpw3fv_b" /></div>
<p></div>
<p>
</div>
<p>
<div>
<div>
<div><span style="background-color:rgb(255,255,0);"></span></div>
<p></div>
<p></div>
<p></p>

	</div>
	</div>
    
	<div class="post paper">	
    <h2 class="header"><a href="/2008/10/21/unix-workshop-note">UNIX Workshop Notes</a></h2>
    <p>
    	<span class="glyphicon glyphicon-time"></span> Posted by <strong>Bo Yang</strong> at <strong>2008-10-21</strong> with tags <span class="glyphicon glyphicon-tag"></span><a href="/tags.html#Unix/Linux-ref" rel="nofollow">Unix/Linux</a>, <span class="glyphicon glyphicon-tag"></span><a href="/tags.html#Notes-ref" rel="nofollow">Notes</a>
	</p>
	<hr>
    
    <div class="post_at_index thepost">
    	<p>&lt;style&gt;<br />
st1/:*{behavior:url(#ieooui) }<br />
&lt;/style&gt;<br />
&lt;![endif]--&gt;</p>
<h1 style="text-align:center;" align="center"><i><span style='font-family:"Times New Roman";'>UNIX Workshop</span></i> Notes</h1>
<h3>1 <a href="http://hebb.cis.uoguelph.ca/%7Edave/27320/new/unixphil.html">The<br />
UNIX Philosophy</a></h3>
<ul style="margin-top:0;" type="disc">
<li class="MsoNormal">small<br />
     is beautiful </li>
<li class="MsoNormal">make<br />
     each program do one thing well </li>
<li class="MsoNormal">build<br />
     a prototype as soon as possible </li>
<li class="MsoNormal">choose<br />
     portability over efficiency </li>
<li class="MsoNormal">store<br />
     numerical data in flat files </li>
<li class="MsoNormal">use<br />
     software leverage to your advantage </li>
<li class="MsoNormal">use<br />
     shell scripts to increase leverage and portability </li>
<li class="MsoNormal">avoid<br />
     captive user interfaces </li>
<li class="MsoNormal">make<br />
     every program a filter</li>
</ul>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal">The Ten Lesser Tenets</p>
<ul style="margin-top:0;" type="disc">
<li class="MsoNormal">allow<br />
     the user to tailor the environment </li>
<li class="MsoNormal">make<br />
     operating system kernels small and lightweight </li>
<li class="MsoNormal">use<br />
     lower case and keep it short </li>
<li class="MsoNormal">save<br />
     trees </li>
<li class="MsoNormal">silence<br />
     is golden </li>
<li class="MsoNormal">think<br />
     parallel </li>
<li class="MsoNormal">the<br />
     sum of the parts if greater than the whole </li>
<li class="MsoNormal">look<br />
     for the ninety percent solution </li>
<li class="MsoNormal">worse<br />
     is better </li>
<li class="MsoNormal">think<br />
     hierarchically</li>
</ul>
<p class="MsoNormal">&nbsp;</p>
<h3>2 /etc/passwd</h3>
<p class="MsoNormal" style="text-indent:10.5pt;">The /etc/passwd file determines<br />
which shell takes effect during your interactive UNIX session.</p>
<p class="MsoNormal" style="text-indent:10.5pt;">/etc/passwd also contains account<br />
info, which includes UID and GID.</p>
<p class="MsoNormal" style="text-indent:10.5pt;">&nbsp;</p>
<h3>3 init process</h3>
<p class="MsoNormal" style="text-indent:10.5pt;">Each process can have one or more<br />
child process. If you kill the parent of a child process, it automatically<br />
becomes the child of init.</p>
<p class="MsoNormal" style="text-indent:10.5pt;"><b><i>init</i></b> is the last process<br />
created at boot time. It always has a process ID (PID) of 1 (i.e. on all<br />
Unixes). init is responsible for starting all subsequent processes.<br />
Consequently, it is the parent (in other words, mother of all processes!) of<br />
all (non-dummy) Unix processes.</p>
<p class="MsoNormal">&nbsp;</p>
<h3>4 Address Space</h3>
<p class="MsoNormal" style="text-indent:10.5pt;">For each new process created, the<br />
kernel sets up an address space in memory. This address space consists of the<br />
following logical segments:</p>
<p class="MsoNormal" style="text-indent:10.5pt;"><span style="font-family:宋体;" lang="ZH-CN">•</span> text - contains the program's instructions.</p>
<p class="MsoNormal" style="text-indent:10.5pt;"><span style="font-family:宋体;" lang="ZH-CN">•</span> data - contains initialized program variables.</p>
<p class="MsoNormal" style="text-indent:10.5pt;"><span style="font-family:宋体;" lang="ZH-CN">•</span> bss - contains uninitialized program variables.</p>
<p class="MsoNormal" style="text-indent:10.5pt;"><span style="font-family:宋体;" lang="ZH-CN">•</span> stack - a dynamically growable segment, it contains<br />
variables allocated locally</p>
<p class="MsoNormal" style="text-indent:10.5pt;">and parameters passed to<br />
functions in the program.</p>
<p class="MsoNormal">&nbsp;</p>
<h3>5 Process</h3>
<p class="MsoNormal" style="margin-left:28.5pt;text-indent:-18pt;"><!--[if !supportLists]--><span><span>1)<span style='font-family:"Times New Roman";font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;font-size-adjust:none;font-stretch:normal;'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
</span></span></span><!--[endif]-->Context of Process &amp; Context Switching</p>
<p class="MsoNormal" style="text-indent:10.5pt;">The <b>context of a process</b> is essentially a snapshot of its current<br />
runtime environment, including its address space, stack space, etc. At any<br />
given time, a process can be in user-mode, kernel-mode, sleeping, waiting on<br />
I/O, and so on. The process scheduling subsystem within the kernel uses a time<br />
slice of typically 20ms to rotate among currently running processes. Each<br />
process is given its share of the CPU for 20ms, then left to sleep until its turn<br />
again at the CPU. This process of moving processes in and out of the CPU is<br />
called <b>context switching</b>. The kernel<br />
makes the operating system appear to be multi-tasking (i.e. running processes<br />
concurrently) via the use of efficient context-switching.</p>
<p class="MsoNormal" style="text-indent:10.5pt;">&nbsp;</p>
<p class="MsoNormal" style="margin-left:28.5pt;text-indent:-18pt;"><!--[if !supportLists]--><span><span>2)<span style='font-family:"Times New Roman";font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;font-size-adjust:none;font-stretch:normal;'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
</span></span></span><!--[endif]-->Process status:</p>
<p class="MsoNormal" style="text-indent:10.5pt;">R - runable, currently on the run<br />
queue</p>
<p class="MsoNormal" style="text-indent:10.5pt;">S - currently sleeping (waiting<br />
on a pipe, completion of I/O, terminal input, memory)</p>
<p class="MsoNormal" style="text-indent:10.5pt;">T - currently stopped</p>
<p class="MsoNormal" style="text-indent:10.5pt;">Z - defunct or zombie (a process<br />
with no swappable image but a structure in memory)</p>
<p class="MsoNormal" style="text-indent:10.5pt;">&nbsp;</p>
<p class="MsoNormal" style="margin-left:28.5pt;text-indent:-18pt;"><!--[if !supportLists]--><span><span>3)<span style='font-family:"Times New Roman";font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;font-size-adjust:none;font-stretch:normal;'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
</span></span></span><!--[endif]-->Signal:</p>
<p class="MsoNormal" style="text-indent:10.5pt;">SIGHUP<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>1<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Hangup</p>
<p class="MsoNormal" style="text-indent:10.5pt;">SIGINT<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>2<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Interrupt</p>
<p class="MsoNormal" style="text-indent:10.5pt;">SIGKILL<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>9<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Kill (cannot be<br />
caught or ignore)</p>
<p class="MsoNormal" style="text-indent:10.5pt;">SIGTERM<span>&nbsp;&nbsp;&nbsp; </span>15<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Terminate<br />
(termination signal from SIGKILL)</p>
<p class="MsoNormal">&nbsp;</p>
<h3>6 Boot and Shutdown UNIX</h3>
<p class="MsoNormal" style="margin-left:10.5pt;">(1) Boot System</p>
<p class="MsoNormal" style="text-indent:10.5pt;">Boot scripts are normal shell<br />
scripts. The boot scripts will execute by “init” process through sh. Boot<br />
scripts’ task include set computer name, set timezone, check hard disk with<br />
fsck, install file system, configure network interface, start daemon process<br />
and network services, start log and disk quota etc.</p>
<p class="MsoNormal" style="text-indent:10.5pt;">BSD doesn’t have run level. ATT<br />
System V has run level define in <b>/etc/inittab</b>.</p>
<p class="MsoNormal" style="text-indent:10.5pt;">&nbsp;</p>
<p class="MsoNormal" style="text-indent:10.5pt;">(2) Shutdown System</p>
<p class="MsoNormal" style="margin-left:46.5pt;text-indent:-18pt;"><!--[if !supportLists]--><span style="font-family:Symbol;"><span>·<span style='font-family:"Times New Roman";font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;font-size-adjust:none;font-stretch:normal;'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
</span></span></span><!--[endif]--><span>&nbsp;</span>Poweroff<br />
( !!! may damage system )</p>
<p class="MsoNormal" style="margin-left:46.5pt;text-indent:-18pt;"><!--[if !supportLists]--><span style="font-family:Symbol;"><span>·<span style='font-family:"Times New Roman";font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;font-size-adjust:none;font-stretch:normal;'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
</span></span></span><!--[endif]--><span>&nbsp;</span>Shutdown<br />
( good way )</p>
<p class="MsoNormal" style="margin-left:46.5pt;text-indent:-18pt;"><!--[if !supportLists]--><span style="font-family:Symbol;"><span>·<span style='font-family:"Times New Roman";font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;font-size-adjust:none;font-stretch:normal;'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
</span></span></span><!--[endif]--><span>&nbsp;</span>halt (<br />
will change system to single user mode )</p>
<p class="MsoNormal" style="margin-left:46.5pt;text-indent:-18pt;"><!--[if !supportLists]--><span style="font-family:Symbol;"><span>·<span style='font-family:"Times New Roman";font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;font-size-adjust:none;font-stretch:normal;'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
</span></span></span><!--[endif]--><span>&nbsp;</span>reboot</p>
<p class="MsoNormal" style="margin-left:46.5pt;text-indent:-18pt;"><!--[if !supportLists]--><span style="font-family:Symbol;"><span>·<span style='font-family:"Times New Roman";font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;font-size-adjust:none;font-stretch:normal;'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
</span></span></span><!--[endif]--><span>&nbsp;</span>init or<br />
telinit ( change the run level )</p>
<p class="MsoNormal" style="text-indent:10.5pt;">&nbsp;</p>
<h3>7 su V.S. su -</h3>
<p class="MsoNormal" style="text-indent:10.5pt;"><span style="font-family:宋体;" lang="ZH-CN">”</span>su &lt;account&gt;” only change to another user’s<br />
account. “su – &lt;account&gt;“ will excute</p>
<p class="MsoNormal" style="text-indent:10.5pt;">user’s profile while changing.</p>
<p class="MsoNormal" style="text-indent:10.5pt;"><span style="font-family:宋体;" lang="ZH-CN">“</span>su” or “su –“ without any account parameter means<br />
you hope to change to</p>
<p class="MsoNormal" style="text-indent:10.5pt;">superuser(root).</p>
<p class="MsoNormal" style="text-indent:10.5pt;">&nbsp;</p>
<h3>8 Unix Environment </h3>
<p class="MsoNormal" style="margin-left:28.5pt;text-indent:-18pt;"><!--[if !supportLists]--><span><span>1)<span style='font-family:"Times New Roman";font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;font-size-adjust:none;font-stretch:normal;'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
</span></span></span><!--[endif]-->setup user environment in ksh</p>
<p class="MsoNormal" style="margin-left:64.5pt;text-indent:-18pt;"><!--[if !supportLists]--><span style="font-family:Symbol;"><span>·<span style='font-family:"Times New Roman";font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;font-size-adjust:none;font-stretch:normal;'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
</span></span></span><!--[endif]-->$HOME/.profile</p>
<p class="MsoNormal" style="margin-left:64.5pt;text-indent:-18pt;"><!--[if !supportLists]--><span style="font-family:Symbol;"><span>·<span style='font-family:"Times New Roman";font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;font-size-adjust:none;font-stretch:normal;'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
</span></span></span><!--[endif]-->shell variables: varname=value</p>
<p class="MsoNormal" style="margin-left:64.5pt;text-indent:-18pt;"><!--[if !supportLists]--><span style="font-family:Symbol;"><span>·<span style='font-family:"Times New Roman";font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;font-size-adjust:none;font-stretch:normal;'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
</span></span></span><!--[endif]-->unset variables</p>
<p class="MsoNormal" style="margin-left:64.5pt;text-indent:-18pt;"><!--[if !supportLists]--><span style="font-family:Symbol;"><span>·<span style='font-family:"Times New Roman";font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;font-size-adjust:none;font-stretch:normal;'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
</span></span></span><!--[endif]-->aliases</p>
<p class="MsoNormal" style="margin-left:64.5pt;text-indent:-18pt;"><!--[if !supportLists]--><span style="font-family:Symbol;"><span>·<span style='font-family:"Times New Roman";font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;font-size-adjust:none;font-stretch:normal;'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
</span></span></span><!--[endif]-->options</p>
<p class="MsoNormal" style="text-indent:10.5pt;">Any variable can become an<br />
environment variable with the command<b>:<br />
export <i>varnames</i></b>.</p>
<p class="MsoNormal" style="text-indent:10.5pt;">environment file will told sub<br />
process other variables, options, aliases that shell wish to told it. Environment<br />
file name can be any name, as long as you set the environment variable ENV to<br />
the file's name.</p>
<p class="MsoNormal" style="text-indent:10.5pt;"><span style="color:red;">Alias</span><br />
is a synonym for a command or command string. You define an alias by entering<br />
(or adding to your .profile) a line with the following form: <b>alias <i>new</i>=<i>original</i></b></p>
<p class="MsoNormal" style="text-indent:10.5pt;"><span style="color:red;">Options</span><br />
let you change the shell's behavior. The basic commands that relate to options<br />
are <b>set -o <i>optionnames</i></b> and <b>set +o <i>optionnames</i></b>, where <b><i>optionnames</i></b><br />
is a list of option names separated by blanks. the <b>-</b> turns the named option on, while the <b>+</b> turns it off.</p>
<p class="MsoNormal" style="text-indent:10.5pt;">&nbsp;</p>
<p class="MsoNormal" style="margin-left:28.5pt;text-indent:-18pt;"><!--[if !supportLists]--><span><span>2)<span style='font-family:"Times New Roman";font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;font-size-adjust:none;font-stretch:normal;'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
</span></span></span><!--[endif]-->Built-in Variables</p>
<ul style="margin-top:0;" type="disc">
<li class="MsoNormal">PS1,<br />
     PS2, PS3 , PS4</li>
<li class="MsoNormal">TERM</li>
<li class="MsoNormal">PATH,<br />
     MANPATH</li>
<li class="MsoNormal">HOME</li>
<li class="MsoNormal">PWD</li>
<li class="MsoNormal">HISTFILE</li>
<li class="MsoNormal">EDITOR</li>
<li class="MsoNormal">VISUAL</li>
</ul>
<p class="MsoNormal" style="text-indent:10.5pt;">&nbsp;</p>
<h3>9 Common Control Characters</h3>
<p class="MsoNormal" style="margin-left:36pt;text-indent:-18pt;"><!--[if !supportLists]--><span><span>1)<span style='font-family:"Times New Roman";font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;font-size-adjust:none;font-stretch:normal;'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
</span></span></span><!--[endif]-->Erase Character</p>
<p class="MsoNormal" style="margin-left:72pt;text-indent:-18pt;"><!--[if !supportLists]--><span style="font-size:10.5pt;font-family:Symbol;"><span>·<span style='font-family:"Times New Roman";font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;font-size-adjust:none;font-stretch:normal;'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
</span></span></span><!--[endif]--><span style="font-size:10.5pt;font-family:Arial;">[BACKSPACE]</span></p>
<p class="MsoNormal" style="margin-left:72pt;text-indent:-18pt;"><!--[if !supportLists]--><span style="font-size:10.5pt;font-family:Symbol;"><span>·<span style='font-family:"Times New Roman";font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;font-size-adjust:none;font-stretch:normal;'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
</span></span></span><!--[endif]--><span style="font-size:9.5pt;font-family:Symbol;"><span>&nbsp;</span></span><span style="font-size:10.5pt;font-family:Arial;">[DELETE], [DEL] key</span></p>
<p class="MsoNormal" style="margin-left:72pt;text-indent:-18pt;"><!--[if !supportLists]--><span style="font-family:Symbol;"><span>·<span style='font-family:"Times New Roman";font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;font-size-adjust:none;font-stretch:normal;'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
</span></span></span><!--[endif]--><span style="font-size:9.5pt;font-family:Symbol;"><span>&nbsp;</span></span><span style="font-size:10.5pt;font-family:Arial;">[CTRL-H]</span></p>
<p class="MsoNormal" style="margin-left:36pt;text-indent:-18pt;"><!--[if !supportLists]--><span><span>2)<span style='font-family:"Times New Roman";font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;font-size-adjust:none;font-stretch:normal;'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
</span></span></span><!--[endif]-->Other Control Characters</p>
<p class="MsoNormal" style="margin-left:46.5pt;text-indent:-18pt;"><!--[if !supportLists]--><span style="font-family:Symbol;"><span>·<span style='font-family:"Times New Roman";font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;font-size-adjust:none;font-stretch:normal;'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
</span></span></span><!--[endif]-->[CTRL-U]<span>&nbsp;&nbsp;&nbsp; </span>Erases<br />
the whole input line; you can start over.</p>
<p class="MsoNormal" style="margin-left:46.5pt;text-indent:-18pt;"><!--[if !supportLists]--><span style="font-family:Symbol;"><span>·<span style='font-family:"Times New Roman";font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;font-size-adjust:none;font-stretch:normal;'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
</span></span></span><!--[endif]-->[CTRL-S]<span>&nbsp;&nbsp;&nbsp;&nbsp; </span>Pauses<br />
output from a program that is writing to the screen.</p>
<p class="MsoNormal" style="margin-left:46.5pt;text-indent:-18pt;"><!--[if !supportLists]--><span style="font-family:Symbol;"><span>·<span style='font-family:"Times New Roman";font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;font-size-adjust:none;font-stretch:normal;'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
</span></span></span><!--[endif]-->[CTRL-Q]<span>&nbsp;&nbsp;&nbsp; </span>Restarts<br />
output after a pause by [CTRL-S].</p>
<p class="MsoNormal" style="margin-left:46.5pt;text-indent:-18pt;"><!--[if !supportLists]--><span style="font-family:Symbol;"><span>·<span style='font-family:"Times New Roman";font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;font-size-adjust:none;font-stretch:normal;'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
</span></span></span><!--[endif]-->[CTRL-D]<span>&nbsp;&nbsp;&nbsp; </span>Used<br />
to signal end-of-input for some programs.</p>
<p class="MsoNormal" style="text-indent:10.5pt;">&nbsp;</p>
<h3>10 File System Inside</h3>
<p class="MsoNormal" style="text-align:center;text-indent:10.5pt;" align="center"><!--[if !vml]--><img src="/DOCUME%7E1/bonny/LOCALS%7E1/Temp/msohtml1/01/clip_image002.gif" width="519" border="0" height="193" /><!--[endif]--></p>
<p class="MsoNormal" style="text-indent:10.5pt;"><b>super</b> block describes the state of the file system: the total size<br />
of the partition, the block size, pointers to a list of free blocks, the inode<br />
number of the root directory, magic number, etc.</p>
<p class="MsoNormal" style="text-align:center;text-indent:10.5pt;" align="center"><!--[if !vml]--><img src="/DOCUME%7E1/bonny/LOCALS%7E1/Temp/msohtml1/01/clip_image004.gif" width="177" border="0" height="151" /><!--[endif]--></p>
<p class="MsoNormal" style="text-indent:10.5pt;">&nbsp;</p>
<h3>11 I/O Redirection</h3>
<p class="MsoNormal" style="text-align:center;text-indent:10.5pt;" align="center"><!--[if !vml]--><img src="/DOCUME%7E1/bonny/LOCALS%7E1/Temp/msohtml1/01/clip_image006.gif" width="576" border="0" height="394" /><!--[endif]--></p>
<p class="MsoNormal" style="text-indent:10.5pt;"><b>xargs</b> <i>[options] [command]</i></p>
<p class="MsoNormal" style="text-indent:10.5pt;">Execute command (with any initial<br />
arguments), but read remaining arguments from standard input instead of<br />
specifying them directly. xargs passes these arguments in several bundles to<br />
command, allowing command to process more arguments than it could normally<br />
handle at once. The arguments are typically a long list of filenames (generated<br />
by ls or find, for example) that get passed to xargs via a pipe.</p>
<p class="MsoNormal" style="text-indent:10.5pt;">Example:</p>
<p class="MsoNormal" style="text-indent:10.5pt;">grep for pattern in all files on<br />
the home directory /home/foo:</p>
<p class="MsoNormal" style="text-indent:36pt;"><i>find /home/foo -print | xargs grep pattern &gt; out &amp;</i></p>
<h3>12 Search and Patterns</h3>
<p class="MsoNormal" style="text-indent:10.5pt;">(1) Searching Commands</p>
<p class="MsoNormal" style="margin-left:46.5pt;text-indent:-18pt;"><!--[if !supportLists]--><span style="font-family:Symbol;"><span>·<span style='font-family:"Times New Roman";font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;font-size-adjust:none;font-stretch:normal;'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
</span></span></span><!--[endif]-->… find</p>
<p class="MsoNormal" style="margin-left:46.5pt;text-indent:-18pt;"><!--[if !supportLists]--><span style="font-family:Symbol;"><span>·<span style='font-family:"Times New Roman";font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;font-size-adjust:none;font-stretch:normal;'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
</span></span></span><!--[endif]-->… grep</p>
<p class="MsoNormal" style="margin-left:46.5pt;text-indent:-18pt;"><!--[if !supportLists]--><span style="font-family:Symbol;"><span>·<span style='font-family:"Times New Roman";font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;font-size-adjust:none;font-stretch:normal;'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
</span></span></span><!--[endif]-->… egrep</p>
<p class="MsoNormal" style="margin-left:46.5pt;text-indent:-18pt;"><!--[if !supportLists]--><span style="font-family:Symbol;"><span>·<span style='font-family:"Times New Roman";font-style:normal;font-variant:normal;font-weight:normal;font-size:7pt;line-height:normal;font-size-adjust:none;font-stretch:normal;'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
</span></span></span><!--[endif]-->… fgrep</p>
<p class="MsoNormal" style="text-indent:10.5pt;"><span style="font-family:宋体;" lang="ZH-CN">①</span><b> find</b> <i>pathname(s)<br />
condition(s)</i></p>
<p class="MsoNormal" style="text-indent:10.5pt;">find descends the directory tree<br />
beginning at each pathname and locates files that meet the specified<br />
conditions. At least one pathname and one condition must be specified. The most<br />
useful conditions include -print (which must be explicitly given to display any<br />
output), -name and -type (for general use), -exec and -size (for advanced<br />
users), and -mtime and -user (for administrators). Examples:</p>
<p class="MsoNormal" style="text-indent:10.5pt;"><i>find $HOME –print</i></p>
<p class="MsoNormal" style="text-indent:10.5pt;"><i>find $HOME –name ‘core’ –exec rm –rf {} /;</i></p>
<p class="MsoNormal" style="text-indent:10.5pt;">&nbsp;</p>
<p class="MsoNormal" style="text-indent:10.5pt;"><span style="font-family:宋体;" lang="ZH-CN">②</span> <b>grep</b> <i>[options] regexp [files]</i></p>
<p class="MsoNormal" style="text-indent:10.5pt;">Search one or more files for<br />
lines that match a regular expression regexp. Examples:</p>
<p class="MsoNormal" style="text-indent:10.5pt;">List the number of users who use<br />
the korn shell:</p>
<p class="MsoNormal" style="text-indent:10.5pt;"><i>grep -c /bin/ksh /etc/passwd</i></p>
<p class="MsoNormal" style="text-indent:10.5pt;">List header files that have at<br />
least one #include directive:</p>
<p class="MsoNormal" style="text-indent:10.5pt;"><i>grep -l '^#include' /usr/include/*</i></p>
<p class="MsoNormal" style="text-indent:10.5pt;">List files that don't contain<br />
pattern:</p>
<p class="MsoNormal" style="text-indent:10.5pt;"><i>grep -c pattern files | grep :0</i></p>
<p class="MsoNormal" style="text-indent:10.5pt;">&nbsp;</p>
<p class="MsoNormal" style="text-indent:10.5pt;">(2) Patterns (Regular Expressions<br />
)</p>
<p class="MsoNormal" style="text-indent:10.5pt;">A regular expression describes a <b>pattern<br />
</b>or a particular sequence of characters, although it does not necessarily<br />
specify a single exact sequence. Pattern is composed of mixed sequence of<br />
characters and <b>metacharacters</b>.</p>
<p class="MsoNormal" style="text-align:center;text-indent:10.5pt;" align="center"><!--[if !vml]--><img src="/DOCUME%7E1/bonny/LOCALS%7E1/Temp/msohtml1/01/clip_image008.gif" width="483" border="0" height="454" /><!--[endif]--></p>
<h3>13 UNIX Power Tools</h3>
<p class="MsoNormal" style="text-indent:10.5pt;">(1) Backup &amp; Compression</p>
<p class="MsoNormal" style="text-indent:10.5pt;"><b>tar</b></p>
<p class="MsoNormal" style="text-indent:10.5pt;"><b>cpio</b></p>
<p class="MsoNormal" style="text-indent:10.5pt;"><b>dd</b></p>
<p class="MsoNormal" style="text-indent:10.5pt;"><b>compress</b></p>
<p class="MsoNormal" style="text-indent:10.5pt;"><b>uncompress</b></p>
<p class="MsoNormal" style="text-indent:10.5pt;"><b>unzip</b></p>
<p class="MsoNormal" style="text-indent:10.5pt;"><b>gzip/gunzip/zcat</b></p>
<p class="MsoNormal" style="text-indent:10.5pt;"><b>bzip2/bzcat</b></p>
<p class="MsoNormal" style="text-indent:10.5pt;"><b>filename suffix</b></p>
<p class="MsoNormal" style="margin-left:10.55pt;text-indent:10.5pt;">. .tar</p>
<p class="MsoNormal" style="margin-left:10.55pt;text-indent:10.5pt;">. .Z</p>
<p class="MsoNormal" style="margin-left:10.55pt;text-indent:10.5pt;">. .gz</p>
<p class="MsoNormal" style="margin-left:10.55pt;text-indent:10.5pt;">. .tar.Z</p>
<p class="MsoNormal" style="margin-left:10.55pt;text-indent:10.5pt;">. .tar.gz</p>
<p class="MsoNormal" style="margin-left:10.55pt;text-indent:10.5pt;">. .zip</p>
<p class="MsoNormal" style="margin-left:10.55pt;text-indent:10.5pt;">. .bz; .tar.bz</p>
<p class="MsoNormal" style="margin-left:10.55pt;text-indent:10.5pt;">&nbsp;</p>
<p class="MsoNormal" style="text-indent:10.5pt;">(2) Text Processing</p>
<p class="MsoNormal" style="text-indent:10.5pt;"><b>cut<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b>Select columns for display.</p>
<p class="MsoNormal" style="text-indent:10.5pt;"><b>join<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b>Merge different columns into a database.</p>
<p class="MsoNormal" style="text-indent:10.5pt;"><b>paste<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b>Merge columns or switch order.</p>
<p class="MsoNormal" style="text-indent:10.5pt;"><b>sort<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b>Sort or merge files.</p>
<p class="MsoNormal" style="text-indent:10.5pt;"><b>tr<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b>Translate (redefine) characters.</p>
<p class="MsoNormal" style="text-indent:10.5pt;"><b>uniq<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b>Find repeated or unique lines in a file.</p>
<p class="MsoNormal" style="text-indent:10.5pt;"><b>sed<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b>Stream editor, edit one or more files without user<br />
interaction</p>
<p class="MsoNormal" style="text-indent:10.5pt;"><b>awk<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b>Use the pattern-matching program to modify the<br />
specified files</p>
<p class="MsoNormal" style="text-indent:10.5pt;">&nbsp;</p>
<p class="MsoNormal" style="text-indent:10.5pt;">(3) Job Control</p>
<p class="MsoNormal" style="text-indent:36pt;">jobs</p>
<p class="MsoNormal" style="text-indent:36pt;">fg</p>
<p class="MsoNormal" style="text-indent:36pt;">bg</p>
<p class="MsoNormal" style="text-indent:36pt;">ps</p>
<p class="MsoNormal" style="text-indent:36pt;">kill</p>
<p class="MsoNormal" style="text-indent:10.5pt;">&nbsp;</p>
<p class="MsoNormal" style="text-indent:10.5pt;">(4) Communication and network<br />
utilities</p>
<p class="MsoNormal" style="text-indent:10.5pt;"><b>ftp</b></p>
<p class="MsoNormal" style="text-indent:10.5pt;"><b>rsh/remsh</b></p>
<p class="MsoNormal" style="text-indent:10.5pt;"><b>$HOME/.rhosts</b></p>
<p class="MsoNormal" style="text-indent:10.5pt;"><b>rup</b></p>
<p class="MsoNormal" style="text-indent:10.5pt;"><b>mailx</b></p>
<p class="MsoNormal" style="text-indent:10.5pt;"><b>$HOME/.forward</b></p>
<p class="MsoNormal" style="text-indent:10.5pt;"><b>ping</b></p>
<p class="MsoNormal" style="text-indent:10.5pt;"><b>netstat</b></p>
<p class="MsoNormal" style="text-indent:10.5pt;"><b>ifconfig</b></p>
<p class="MsoNormal" style="text-indent:10.5pt;">&nbsp;</p>
<p class="MsoNormal" style="text-indent:10.5pt;">&nbsp;</p>
<p class="MsoNormal" style="text-indent:10.5pt;">&nbsp;</p>
<p class="MsoNormal" style="text-indent:10.5pt;">&nbsp;</p>
<p class="MsoNormal" style="text-indent:10.5pt;">&nbsp;</p>
<p class="MsoNormal" style="text-indent:10.5pt;">&nbsp;</p>

	</div>
	</div>
    
	<div class="post paper">	
    <h2 class="header"><a href="/2008/10/06/perl-note-1">Perl笔记（一）</a></h2>
    <p>
    	<span class="glyphicon glyphicon-time"></span> Posted by <strong>Bo Yang</strong> at <strong>2008-10-06</strong> with tags <span class="glyphicon glyphicon-tag"></span><a href="/tags.html#Unix/Linux-ref" rel="nofollow">Unix/Linux</a>, <span class="glyphicon glyphicon-tag"></span><a href="/tags.html#Notes-ref" rel="nofollow">Notes</a>
	</p>
	<hr>
    
    <div class="post_at_index thepost">
    	<p>
    1 Perl中所有数字内部格式一致，只有双精度浮点数（Perl内部没有整数值）。<br />2 Perl中允许用下划线来分隔比较长的整数，如612980400283768和612_980_400_283_768是相同的值。<br />3 Perl中的非十进制整数：八进制以0开头，十六机制以0x开头，二进制以0b开头。<br />4 Perl中的数字操作符除加减乘除之外，还有模数运算符(%)和指数操作符(**)。对于%，两个操作数首先变成对应的整数值，如10.5%3.2首先变成10%3后再计算。在模数运算中，如果有一个操作数为负数，其结果和Perl的具体实现有关。另外，通常不能进行一个负数的非整数次方的运算（这将产生一个复数），除非有了Math::Complex模块。<br />5 单引号字符串<br />&nbsp;&nbsp; &nbsp;单引号不是字符串的一部分，但Perl可以用它辨别字符串的开始和结束。除了单引号或者反斜线（包括换行字符，如果字符串在下一行继续）之外的任何字符都表示它自身。要得到一个反斜线，可以把两个反斜线放在一起；要得到单引号，需要在单引号之前加上反斜线。单引号字符串中的/n不会被当作换行符来处理，其仅仅是两个字符/和n。只有在反斜线后面接的是/或者是单引号'才会被当作特殊字符来处理。<br />6 双引号字符串<br />&nbsp;&nbsp; &nbsp;双引号字符串中/n为换行符。双引号中的转义字符：<br />&nbsp;－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－<br />｜ 符号&nbsp;&nbsp; &nbsp;｜ 含义&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;｜<br />&nbsp;－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－<br />｜ /n&nbsp;&nbsp; &nbsp;｜ 换行&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;｜<br />&nbsp;－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－<br />｜ /r&nbsp;&nbsp; &nbsp;｜ 回车&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;｜<br />&nbsp;－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－<br />｜ /t&nbsp;&nbsp; &nbsp;｜ 制表符&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;｜<br />&nbsp;－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－<br />｜ /f&nbsp;&nbsp; &nbsp;｜ formfeed&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;｜<br />&nbsp;－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－<br />｜ /b&nbsp;&nbsp; &nbsp;｜ 退格&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;｜<br />&nbsp;－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－<br />｜ /a&nbsp;&nbsp; &nbsp;｜ 响铃&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;｜<br />&nbsp;－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－<br />｜ /e&nbsp;&nbsp; &nbsp;｜ escape(ASCII中的escape字符)&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;｜<br />&nbsp;－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－<br />｜ /007&nbsp;&nbsp; &nbsp;｜ 任何八进制值（这里是007=bell）&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;｜<br />&nbsp;－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－<br />｜ /x7f&nbsp;&nbsp; &nbsp;｜ 任何十六进制值（这里是007＝bell）&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;｜<br />&nbsp;－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－<br />｜ /cC&nbsp;&nbsp; &nbsp;｜ 一个控制符（这里是Ctrl+c）&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;｜<br />&nbsp;－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－<br />｜ //&nbsp;&nbsp; &nbsp;｜ 反斜线&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;｜<br />&nbsp;－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－<br />｜ /"&nbsp;&nbsp; &nbsp;｜ 双引号&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;｜<br />&nbsp;－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－<br />｜ /l&nbsp;&nbsp; &nbsp;｜ 下个字符小写&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;｜<br />&nbsp;－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－<br />｜ /L&nbsp;&nbsp; &nbsp;｜ 接下来的字符均小写直到/E&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;｜<br />&nbsp;－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－<br />｜ /u&nbsp;&nbsp; &nbsp;｜ 下个字符大写&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;｜<br />&nbsp;－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－<br />｜ /U&nbsp;&nbsp; &nbsp;｜ 接下来的字符均大写知道/E&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;｜<br />&nbsp;－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－<br />｜ /Q&nbsp;&nbsp; &nbsp;｜ 在non-word字符之前加上/,直到/E&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;｜<br />&nbsp;－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－<br />｜ /E&nbsp;&nbsp; &nbsp;｜ 结束/L, /E和/Q&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;｜<br />&nbsp;－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－</p>
<p>双引号字符串的另一个性质是可以进行变量内插，也即当使用字符串时，如果字符串中含有变量名，将由变量的当前值替换它。</p>
<p>7 字符串操作符<br />&nbsp;&nbsp; &nbsp;字符串可由.操作符连接。<br />&nbsp;&nbsp; &nbsp;字符串重复操作符为小写字母x，如"fred" x 3 #"fredfredfred", 5 x 4 #实际上是"5555"。</p>
<p>8 数字和字符串之间的自动转换<br />&nbsp;&nbsp; &nbsp;Perl将在需要的时候根据标量值之间的操作符自动进行数字和字符串之间的自动转换。 </p>
<p>9 Perl中的标量变量都形如$fred。当一个字符串由双引号括起来时，如果变量前没有反斜线，则变量的值会被替换（如果一个变量未被赋值，则将使用空值）。Perl提供了分隔符{}将变量名括起来，如：<br />&nbsp;&nbsp; &nbsp;$what="brontosaurus steak";<br />&nbsp;&nbsp; &nbsp;$n=3;<br />&nbsp;&nbsp; &nbsp;print "fred ate $n $whats./n";&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;#输出不是steaks，而是$whats的值<br />&nbsp;&nbsp; &nbsp;print "fred ate $n ${what}s./n";&nbsp;&nbsp; &nbsp;#现在使用$what的值。</p>
<p>10 Perl中没有Boolean类型，但可以利用一下几条法则帮助记忆：<br />&nbsp;&nbsp; &nbsp;如果值为数字，0是false，其余为真；<br />&nbsp;&nbsp; &nbsp;如果值为字符串，则空串('')为false，其余为真；<br />&nbsp;&nbsp; &nbsp;如果值的类型既不是数字又不是字符串，则将其转换为数值或字符串再利用上述规则。</p>
<p>11 行输入运算符：&lt;STDIN&gt;。&lt;STDIN&gt;作为标量值来使用，Perl每次在标准输入中读入文本下一行，将其传给&lt;STDIN&gt;。利用&lt;STDIN&gt;读入的字符串行尾是有换行符的，可以利用chomp函数来去掉。chomp是一个函数，作为函数它有一个返回值，为移除的字符的个数。在使用chomp时，可以使用或不使用（），这又是perl中的一条通用规则：除非移除它们会改变含义，否则括号是可以省略的。如果结尾有两个或两个以上的换行符，chomp仅去掉一个。</p>
<p>12 undef值<br />&nbsp;&nbsp; &nbsp;Perl中，变量在第一次赋值前有一个特殊值undef，如果该变量是数值型，则undef为0；如果是字符串，则undef为空串。</p>
<p>13 defined函数</p>
<p></p>

	</div>
	</div>
    
	
	<!-- Pagination links -->
	
	<ul class="pager">
	    
	    <li class="previous"><a href="/page19">&larr; Older</a></li>
	    
	
	    
	    <li class="next"><a href="/page17">Newer &rarr;</a></li>
	    
	</ul>
	
	<!-- content -->
</div>

<div class="col-lg-3">
		<div class="well">
            <h4>Links</h4>
			<a href="https://www.linkedin.com/pub/bo-yang/21/a3/893" target="_blank"> <i class="fa fa-linkedin-square fa-3x"></i> </a> 
			<a href="https://github.com/bo-yang" target="_blank"> <i class="fa fa-github fa-3x"></i> </a> 
			<a href="https://www.facebook.com/bo.yang.52493" target="_blank"> <i class="fa fa-facebook-square fa-3x"></i> </a>
			<a href="http://www.weibo.com/bonnyang" target="_blank"> <i class="fa fa-weibo fa-3x"></i> </a> 
        	<a href="/atom.xml" target="_blank"> <i class="fa fa-rss-square fa-3x"></i> </a>	
        </div>
        <!-- /well -->
        <div class="well">
			<h4>Tags</h4>
				<div class="tag_box">
				
				<!-- site_tags: C/C++,Algorithm,EMC,Fault Diagnosis,Notes,AI,Database,Unix/Linux,Personal,Telecom,Tcl/Tk,Shell,Network,Perl,Industry,Cloud Computing,API,Android,VBA,Virtualization,Browser,Plan 9,Go,Distributed Systems,Tips,Genetic Algorihtm,Mac OS,Statistics,Matlab,Multithreading,Bioinformatics,Computer Vision,Machine Learning,BACI,Jekyll,Architecture,Java -->
				
				<!-- tag_words:  -->

				
  <ul class="nav nav-pills nav-stacked">
  
    
        <li><a href="/tags.html#AI">AI <span class="badge pull-right">7</span></a></li>
    
        <li><a href="/tags.html#API">API <span class="badge pull-right">3</span></a></li>
    
        <li><a href="/tags.html#Algorithm">Algorithm <span class="badge pull-right">29</span></a></li>
    
        <li><a href="/tags.html#Android">Android <span class="badge pull-right">2</span></a></li>
    
        <li><a href="/tags.html#Architecture">Architecture <span class="badge pull-right">1</span></a></li>
    
        <li><a href="/tags.html#BACI">BACI <span class="badge pull-right">1</span></a></li>
    
        <li><a href="/tags.html#Bioinformatics">Bioinformatics <span class="badge pull-right">1</span></a></li>
    
        <li><a href="/tags.html#Browser">Browser <span class="badge pull-right">2</span></a></li>
    
        <li><a href="/tags.html#C%2FC%2B%2B">C/C++ <span class="badge pull-right">54</span></a></li>
    
        <li><a href="/tags.html#Cloud+Computing">Cloud Computing <span class="badge pull-right">2</span></a></li>
    
        <li><a href="/tags.html#Computer+Vision">Computer Vision <span class="badge pull-right">4</span></a></li>
    
        <li><a href="/tags.html#Database">Database <span class="badge pull-right">1</span></a></li>
    
        <li><a href="/tags.html#Distributed+Systems">Distributed Systems <span class="badge pull-right">2</span></a></li>
    
        <li><a href="/tags.html#EMC">EMC <span class="badge pull-right">9</span></a></li>
    
        <li><a href="/tags.html#Fault+Diagnosis">Fault Diagnosis <span class="badge pull-right">3</span></a></li>
    
        <li><a href="/tags.html#Genetic+Algorihtm">Genetic Algorihtm <span class="badge pull-right">1</span></a></li>
    
        <li><a href="/tags.html#Go">Go <span class="badge pull-right">3</span></a></li>
    
        <li><a href="/tags.html#Industry">Industry <span class="badge pull-right">6</span></a></li>
    
        <li><a href="/tags.html#Java">Java <span class="badge pull-right">1</span></a></li>
    
        <li><a href="/tags.html#Jekyll">Jekyll <span class="badge pull-right">1</span></a></li>
    
        <li><a href="/tags.html#Mac+OS">Mac OS <span class="badge pull-right">1</span></a></li>
    
        <li><a href="/tags.html#Machine+Learning">Machine Learning <span class="badge pull-right">2</span></a></li>
    
        <li><a href="/tags.html#Matlab">Matlab <span class="badge pull-right">3</span></a></li>
    
        <li><a href="/tags.html#Multithreading">Multithreading <span class="badge pull-right">2</span></a></li>
    
        <li><a href="/tags.html#Network">Network <span class="badge pull-right">4</span></a></li>
    
        <li><a href="/tags.html#Notes">Notes <span class="badge pull-right">25</span></a></li>
    
        <li><a href="/tags.html#Perl">Perl <span class="badge pull-right">15</span></a></li>
    
        <li><a href="/tags.html#Personal">Personal <span class="badge pull-right">13</span></a></li>
    
        <li><a href="/tags.html#Plan+9">Plan 9 <span class="badge pull-right">9</span></a></li>
    
        <li><a href="/tags.html#Shell">Shell <span class="badge pull-right">15</span></a></li>
    
        <li><a href="/tags.html#Statistics">Statistics <span class="badge pull-right">2</span></a></li>
    
        <li><a href="/tags.html#Tcl%2FTk">Tcl/Tk <span class="badge pull-right">9</span></a></li>
    
        <li><a href="/tags.html#Telecom">Telecom <span class="badge pull-right">1</span></a></li>
    
        <li><a href="/tags.html#Tips">Tips <span class="badge pull-right">4</span></a></li>
    
        <li><a href="/tags.html#Unix%2FLinux">Unix/Linux <span class="badge pull-right">100</span></a></li>
    
        <li><a href="/tags.html#VBA">VBA <span class="badge pull-right">5</span></a></li>
    
        <li><a href="/tags.html#Virtualization">Virtualization <span class="badge pull-right">4</span></a></li>
    
  
  </ul>




				</div>
		</div>
		<!-- /well -->
        <div class="well">
			<h4>Visitors</h4>
				<script type="text/javascript" src="http://je.revolvermaps.com/2/1.js?i=4gy6jc9lpsq&amp;s=220&amp;m=0&amp;v=true&amp;r=false&amp;b=000000&amp;n=false&amp;c=ff0000" async="async"></script>
	
        </div>
		<!-- /well -->
		<div class="well">
			<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Right-side Ad(300x600) -->
<ins class="adsbygoogle"
     style="display:inline-block;width:300px;height:600px"
     data-ad-client="ca-pub-1292710832620237"
     data-ad-slot="9707222500"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

	   	</div>
        <!-- /well -->
</div>

	</div>
</div>


    </div>

    <footer>
        <p>&copy; 2007 <span id="now_year"></span> Bo Yang. </p>
        <script type="text/javascript">
          var now_year = new Date().getFullYear();
          if (now_year != 2007) {
              $('#now_year').html('- ' + now_year);
          }
	    </script>
      </footer>
  </div>

  <script type="text/javascript" src="/assets/google-code-prettify/prettify.js"></script>
  <script src="/assets/run_prettify.js"></script>
  <script type="text/javascript">
    $(function() {

      $('a[href^="http"]').each(function () {
        $(this).attr('target', '_blank');
      });

      $('pre').addClass('prettyprint linenums').attr('style', 'overflow:auto');
      window.prettyPrint && prettyPrint();

      function traverse($node, len, maxCount) {
        var reachMaxCount = len > maxCount;
        if (reachMaxCount) {
          $node.hide();
        }
        var $contents = $node.contents();
        for (var i = 0; i < $contents.length; ++i) {
          if (reachMaxCount) {
            $contents.eq(i).hide();
            continue;
          }
          if ($contents[i].nodeType == 3) { // TextNode
            var tmp = len;
            var s = $contents[i].nodeValue;
            len += s.length;
            reachMaxCount = len > maxCount;
            if (reachMaxCount && $contents[i].parentNode.nodeName != 'A') {
              $contents[i].nodeValue = s.substring(0, maxCount - tmp);
            }
          }
          else if ($contents[i].nodeType == 1) { // Element
            len = traverse($contents.eq(i), len, maxCount);
          }
        }
        return len;
      }

      $('.post_at_index').each(function() {
        var count = traverse($(this), 0, 400);
        if (count > 400) {
          var thisUrl = $(this).siblings().first().children().attr('href');
          $(this).after('\n<a href="' + thisUrl + '" rel="nofollow" class="btn btn-primary" role="button">' + 'Read More &raquo;</a>');
        }
      });
    });
  </script>

  

</body>
</html>

