<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Bo's Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Bo&#39;s blog.">
    <meta name="author" content="Bo Yang">
    
    <link rel="canonical" href="http://www.bo-yang.net//page16/">
    <link rel="alternate" type="application/rss+xml" title="RSS Feed for Bo's Blog" href="/feed.xml" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/pixyll.css?201602031809" type="text/css">

    <!-- Fonts -->
    <link href='//fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Lato:900,300' rel='stylesheet' type='text/css'>
    
      <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">
    

    <!-- Google Prettify -->
    <link href="http://www.bo-yang.net//assets/google-code-prettify/desert.css" rel="stylesheet" type="text/css" media="all">

    <!-- MathJax -->
    
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
    

    <!-- Verifications -->
    

    <!-- Open Graph -->
    <!-- From: https://github.com/mmistakes/hpstr-jekyll-theme/blob/master/_includes/head.html -->
    <meta property="og:locale" content="en_US">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Bo&#39;s Blog">
    <meta property="og:description" content="Bo&#39;s blog.">
    <meta property="og:url" content="http://www.bo-yang.net//page16/">
    <meta property="og:site_name" content="Bo&#39;s Blog">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    
        <meta name="twitter:site" content="@bonnyang" />
    
    <meta name="twitter:title" content="Bo's Blog" />
    <meta name="twitter:description" content="Bo's blog." />
    <meta name="twitter:url" content="http://www.bo-yang.net//page16/" />

    <!-- Icons -->
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-160x160.png" sizes="160x160">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">

    
    <script type="text/javascript">
       (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
       (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
       m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
       })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
       ga('create', 'UA-50551633-1', 'auto');
       ga('send', 'pageview');
    </script>
    
</head>

<body class="site">

	
		<div id="fb-root"></div>
		<script>(function(d, s, id) {
		  var js, fjs = d.getElementsByTagName(s)[0];
		  if (d.getElementById(id)) return;
		  js = d.createElement(s); js.id = id;
		  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5&appId=";
		  fjs.parentNode.insertBefore(js, fjs);
		}(document, 'script', 'facebook-jssdk'));</script>
	

  <div class="site-wrap">
    <header class="site-header px2 px-responsive">
  <div class="mt2 wrap">
    <div class="measure">
        <a href="http://www.bo-yang.net/" class="site-title"><b>Bo's Blog</b></a>
      <nav class="site-nav">
        
    

    

    
        <a href="/archive/">Archive</a>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    


    

    

    

    

    

    

    

    
        <a href="/tags/">Tags</a>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    


    

    
        <a href="/about/">About Me</a>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    


    

    

    

    
        <a href="/contact/">Contact</a>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    


      </nav>
      <div class="clearfix"></div>
      
        <div class="social-icons">
  <div class="social-icons-right">
    
      <a class="fa fa-github" href="https://github.com/bo-yang"></a>
    
    
    
      <a class="fa fa-stack-overflow" href="https://stackoverflow.com/users/boyang"></a>
    
    <a class="fa fa-rss" href="/feed.xml"></a>
    
      <a class="fa fa-twitter" href="https://twitter.com/bonnyang"></a>
    
    
    
    
    
      <a class="fa fa-envelope" href="mailto:bonny95@gmail.com"></a>
    
    
      <a class="fa fa-linkedin" href="https://www.linkedin.com/in/boyanglink"></a>
    
    
    
  </div>
  <div class="right">
    
    
    
  </div>
</div>
<div class="clearfix"></div>

      
    </div>
  </div>
</header>


    <div class="post p2 p-responsive wrap" role="main">
      <div class="measure">
        

<div class="home">
  
    <div class="posts">
      
        <div class="post py3">
          <p class="post-meta">Oct 22, 2009</p>
          <a href="/2009/10/22/call-perl-in-shell" class="post-link"><h3 class="h2 post-title">Shell中直接调用perl命令</h3></a>
          <p class="post-summary">
            
              <p>The &nbsp;<em>-e</em> option is handy for quick Perl operations<br />
from the command line. Want to change all instances of "oldstring" in<br />
Wiffle.bat to "newstrong"? Try</p>
<p>&nbsp;</p>
<p>
<pre>perl -i.old -p -e "s/ oldstring/ newstrong/g" wiffle.bat</pre>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>This says: "Take each line of &nbsp;Wiffle.bat (-p); store the original in Wiffle.old (-i); substitute all instances of &nbsp;oldstring with newstrong (-e); write the result (-p) to the<br />
original file (-i)."</p>
<p>&nbsp;</p>
<p>Other PERL command line options are:</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;<strong>Perl 5 Command-Line Switches</strong></p>
<p>&nbsp;</p>
<table style="width:80%;" border="1">
<tbody>
<tr valign="top">
<td width="109">
<em>Option</em></td>
<td width="150"><em>Arguments</em> </td>
<td width="168"><em>Purpose</em></td>
<td width="163"><em>Notes</em> </td>
</tr>
<tr valign="top">
<td width="109">
<tt>-0</tt></td>
<td width="150">octal character code</td>
<td width="168">Specify record separator </td>
<td width="163">Default is newline (<tt>/n</tt>) </td>
</tr>
<tr valign="top">
<td width="109">
<tt>-a</tt></td>
<td width="150">none</td>
<td width="168">Automatically spli recordst </td>
<td width="163">Used with <tt>-n</tt> or or <tt>-p</tt> </td>
</tr>
<tr valign="top">
<td width="109">
<tt>-c</tt></td>
<td width="150">none</td>
<td width="168">Check syntax only</td>
<td width="163">Do not execute</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-d</tt></td>
<td width="150">none</td>
<td width="168">Run script using Perl debugger </td>
<td width="163">If Perl debugging option was included when Perl was installed
</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-D</tt></td>
<td width="150">flags</td>
<td width="168">Specify debugging behavior </td>
<td width="163">See table 2</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-e</tt></td>
<td width="150">command</td>
<td width="168">Pass a command to Perl from the command line </td>
<td width="163">Useful for quick operations</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-F</tt></td>
<td width="150">regular expression</td>
<td width="168">If <tt>-a</tt> used </td>
<td width="163">Expression to split by default is white space </td>
</tr>
<tr valign="top">
<td width="109">
<tt>-i</tt></td>
<td width="150">extension</td>
<td width="168">Replace original file with results </td>
<td width="163">Useful for modifying contents of files</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-I</tt></td>
<td width="150">directory</td>
<td width="168">Specify location of <tt>include</tt> files </td>
<td width="163">&nbsp;</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-l</tt></td>
<td width="150">octal character code</td>
<td width="168">Drop newlines when used </td>
<td width="163">With <tt>-n</tt> and <tt>-p</tt> and use designated character as<br />
line- termination character </td>
</tr>
<tr valign="top">
<td width="109">
<tt>-n</tt></td>
<td width="150">none</td>
<td width="168">Process the script using each specified file as an argument </td>
<td width="163">Used for performing the same set of actions on a set of files
</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-p</tt></td>
<td width="150">none</td>
<td width="168">Same as <tt>-n</tt> but each line is printed </td>
<td width="163">&nbsp;</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-P</tt></td>
<td width="150">none</td>
<td width="168">Run the script through the C preprocessor before Perl compiles it
</td>
<td width="163">&nbsp;</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-s</tt></td>
<td width="150">none</td>
<td width="168">Enable passing of arbitrary switches to Perl </td>
<td width="163">Use <tt>-s -what -ever </tt>to have the Perl variables <tt>$what<br />
</tt>and <tt>$ever </tt>defined within your script </td>
</tr>
<tr valign="top">
<td width="109">
<tt>-S</tt></td>
<td width="150">none</td>
<td width="168">Tell Perl to look along the path for the script </td>
<td width="163">&nbsp;</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-T</tt></td>
<td width="150">none</td>
<td width="168">Use taint checking; don't evaluate expressions supplied on the<br />
command line </td>
<td width="163">&nbsp;</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-u</tt></td>
<td width="150">none</td>
<td width="168">Make Perl dump core after compiling your script; intended to allow<br />
for generation of Perl executables </td>
<td width="163">Very messy; wait for the Perl compiler</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-U</tt></td>
<td width="150">none</td>
<td width="168">Unsafe mode; overrides Perl's natural caution </td>
<td width="163">Don't use this!</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-v</tt></td>
<td width="150">none</td>
<td width="168">Print Perl version number </td>
<td width="163">&nbsp;</td>
</tr>
<tr valign="top">
<td width="109">
<tt>-w</tt></td>
<td width="150">none</td>
<td width="168">Print warnings about script syntax </td>
<td width="163">Extremely useful, especially during development &nbsp;</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>

            
          </p>
        </div>
      
        <div class="post py3">
          <p class="post-meta">Oct 17, 2009</p>
          <a href="/2009/10/17/tcl-call-awk-command" class="post-link"><h3 class="h2 post-title">Tcl中调用Awk命令</h3></a>
          <p class="post-summary">
            
              <p>由于' '不是Tcl所能识别的操作符，因此在Tcl中使用Awk命令时不能用exec awk '/pattern/ {do_something}' file这种命令，即使在''前面加上/也不行。' &rsquo; 可以被Bource Shell和其它shell识别，但是由于exec awk命令是在Tcl中解释的。</p>
<p>&nbsp;</p>
<p>如果要在Tcl中执行awk命令，方法有两种：一是用&ldquo;&rdquo;代替' '，但是要考虑到需要把某些Tcl的特殊字符用/转义；二是用{}代替' '。比如语句</p>
<p>
<pre>exec awk '/{print /"blah/"/}' temp.fil </pre>
<p>&nbsp;</p>
<p>应该写为：</p>
<p>
<pre>exec awk "/somePattern/ {print /$0}" someFile</pre>
<p>&nbsp;</p>
<p>或者</p>
<p>
<pre>exec awk {/somePattern/ {print $0}}  someFile </pre>
<p>&nbsp;</p>

            
          </p>
        </div>
      
        <div class="post py3">
          <p class="post-meta">Sep 24, 2009</p>
          <a href="/2009/09/24/cronjob-crontab" class="post-link"><h3 class="h2 post-title">cronjob and crontab</h3></a>
          <p class="post-summary">
            
              <p>&nbsp;</p>
<h3><span style="font-weight:normal;">今天要设置一个cron job，查了一些资料，发现了很好的一篇文章，见下文，原文参见：<a href="http://www.aota.net/Script_Installation_Tips/cronhelp.php4">http://www.aota.net/Script_Installation_Tips/cronhelp.php4</a>。</span></h3>
<h3><span style="font-weight:normal;">但是我按照这篇文章的介绍，在Solaris 9下设置crontab的文件时，老是报错</span></h3>
<p><span style="font-weight:normal;"><br />
</span></p>
<p>
<pre>$ crontab chkbjservers.cron
MAILTO=xxx@xxxxx.com
crontab: error on previous line; unexpected character found in line.
crontab: errors detected in input, no crontab file generated.</pre>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>后来查了Solaris的crontab的手册，发现Solaris的crontab不支持MAILTO，必须要用mailx之类的Unix邮件发送命令。另外，整个cron file只要一句话：<strong>minute(s) hour(s) day(s) month(s) weekday(s) command(s). </strong><span>比如：</span></p>
<p>&nbsp;</p>
<p><span><br />
</span></p>
<p>
<pre>30 7 * * 1 /bld/xxxx/mytool/chkbjserver.sh|cat chkbjserver.out|mailx -s "Shared memory checked result in BJ COOL" xxxx@xxxxxxx.com</pre>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong>=========================================================================</strong></p>
<h3>What is a&nbsp;<a href="http://www.aota.net/keyword.php?cronjob">cronjob</a>, and how do I use it?</h3>
<p>
The&nbsp;<a href="http://www.aota.net/keyword.php?cron">cron</a>&nbsp;daemon is a long running process that executes commands at specific dates and times. To schedule one-time only tasks with&nbsp;<a href="http://www.aota.net/keyword.php?cron">cron</a>, use&nbsp;<strong>at</strong>&nbsp;or&nbsp;<strong>batch</strong>. For commands that need to be executed repeatedly (e.g. hourly, daily or weekly), use&nbsp;<strong>crontab</strong>, which has the following options:</p>
<table border="0" cellpadding="4">
<tbody>
<tr valign="TOP">
<td align="LEFT"><strong>crontab filename</strong></td>
<td align="LEFT">Install filename as your&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;file.</td>
</tr>
<tr valign="TOP">
<td align="LEFT"><strong>crontab -e</strong></td>
<td align="LEFT">Edit your&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;file.</td>
</tr>
<tr valign="TOP">
<td align="LEFT"><strong>crontab -l</strong></td>
<td align="LEFT">Show your&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;file.</td>
</tr>
<tr valign="TOP">
<td align="LEFT"><strong>crontab -r</strong></td>
<td align="LEFT">Remove your&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;file.</td>
</tr>
<tr valign="TOP">
<td align="LEFT"><strong>MAILTO=user@domain.com</strong></td>
<td align="LEFT">Emails the output to the specified address.</td>
</tr>
</tbody>
</table>
<p>The&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;command creates a&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;file containing commands and how often&nbsp;<a href="http://www.aota.net/keyword.php?cron">cron</a>&nbsp;should execute them. Each entry in a&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;file consists of six fields, specified in the following order:</p>
<ul>
<strong>minute(s) hour(s) day(s) month(s) weekday(s) command(s)</strong>
</ul>
<p>The fields are separated by spaces or tabs. The first five are integer patterns and the sixth is the command to be executed. The following table briefly describes each of the fields.</p>
<table border="0" cellpadding="4">
<tbody>
<tr valign="TOP">
<th align="LEFT">Field</th>
<th align="LEFT">Value</th>
<th align="LEFT">Description</th>
</tr>
<tr valign="TOP">
<td align="LEFT">minute</td>
<td align="LEFT">0-59</td>
<td align="LEFT">The exact minute that the command sequence executes.</td>
</tr>
<tr valign="TOP">
<td align="LEFT">hour</td>
<td align="LEFT">0-23</td>
<td align="LEFT">The hour of the day that the command sequence executes.</td>
</tr>
<tr valign="TOP">
<td align="LEFT">day</td>
<td align="LEFT">1-31</td>
<td align="LEFT">The day of the month that the command sequence executes.</td>
</tr>
<tr valign="TOP">
<td align="LEFT">month</td>
<td align="LEFT">1-12</td>
<td align="LEFT">The month of the year that the command sequence executes.</td>
</tr>
<tr valign="TOP">
<td align="LEFT">weekday</td>
<td align="LEFT">0-6</td>
<td align="LEFT">The day of the week that the command sequence executes. Sunday=0, Monday = 1, Tuesday = 2, and so forth.</td>
</tr>
<tr valign="TOP">
<td align="LEFT">command</td>
<td align="LEFT">Special</td>
<td align="LEFT">The complete command sequence variable that is to be executed.</td>
</tr>
</tbody>
</table>
<p>Each of the patterns from the first five fields may either be an asterisk (*) (meaning all legal values) or a list of elements separated by commas. An element is either a number or two numbers separated by a minus sign (meaning an inclusive range). Note that the specification of days may be made by two fields (day of the month and day of the week). If both are specified as a list of elements, both are followed. For example:</p>
<ul>
<strong>MAILTO=user@domain.com</strong>&nbsp;<br /><strong>0 0 1,15 * 1 /big/dom/xdomain/cgi-bin/scriptname.cgi</strong>
</ul>
<p>The&nbsp;<a href="http://www.aota.net/keyword.php?cron">cron</a>&nbsp;daemon would run the program&nbsp;<strong>scriptname.cgi</strong>&nbsp;in the&nbsp;<strong>cgi-bin</strong>&nbsp;directory on the first and fifteenth of each month, as well as on every Monday. To specify days by only one field, the other field should be set to *. For example:</p>
<ul>
<strong>MAILTO=user@domain.com</strong>&nbsp;<br /><strong>0 0 * * 1 /big/dom/xdomain/cgi-bin/scriptname.cgi</strong>
</ul>
<p>The program would then only run on Mondays.</p>
<p>If a&nbsp;<a href="http://www.aota.net/keyword.php?cron">cron</a>&nbsp;job specified in your&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;entry produces any error messages when it runs, they will be reported to you via email.</p>
<p>You may create&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;files in notepad (being sure to upload them in ASCII) or you may create them within&nbsp;<a href="http://www.aota.net/keyword.php?telnet">telnet</a>&nbsp;by simply typing:</p>
<ul>
<strong>mcedit cronfile.txt</strong>
</ul>
<p>For more information, consult the man pages. man pages are the directions and tutorials available to you right at the command line from within&nbsp;<a href="http://www.aota.net/keyword.php?telnet">telnet</a>. Type any of the following lines to open the relevant tutorials:</p>
<ul>
<strong>man 5 crontab</strong>&nbsp;{enter}&nbsp;<br /><strong>man 1 crontab</strong>&nbsp;{enter}&nbsp;<br /><strong>man cron</strong>&nbsp;{enter}&nbsp;<br /><strong>man at</strong>&nbsp;{enter}&nbsp;<br /><strong>man batch</strong>&nbsp;{enter}&nbsp;<br /><strong>man 1 cron</strong>&nbsp;{enter}
</ul>
<p>
<strong>Note:</strong>&nbsp;<br />Your&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;file&nbsp;<strong>must</strong>&nbsp;end with a line feed - in other words, make sure to press [Enter] after the last line in the file.</p>
<hr />
<h3>Try It!</h3>
<p>
Now that you have read an overview of&nbsp;<a href="http://www.aota.net/keyword.php?Cron">Cron</a>, test your skills by following the steps below. Once completed you should have a&nbsp;<a href="http://www.aota.net/keyword.php?cron">cron</a>&nbsp;file of your own!&nbsp;</p>
<p><strong>Step 1:</strong>&nbsp;Create a simple text file using Notepad or any simple text editor that contains the following text:</p>
<ul>
<strong>MAILTO=yourusername@yourdomain.com {Enter}<br />58 23 * * * /big/dom/xdomain/cgi-bin/yourscript.pl<br />{Enter}</strong>
</ul>
<p>
<strong>Notes for Step 1</strong></p>
<ol>
<li>You may create this file using your&nbsp;<a href="http://www.futurequest.net/Services/CNC/">CNC</a>&nbsp;File Manager by navigating to the /big/dom/xdomain/ directory and clicking 'Create New File' or any other simple text editor such as Notepad.</li>
<li>{Enter} should not actually be typed. [Enter] means hit the {Enter} (return) key to begin the next line and to add a blank line feed at the end of the last line of your&nbsp;<a href="http://www.aota.net/keyword.php?Cron">Cron</a>&nbsp;File. It is important to always remember to do this.</li>
<li>MAILTO: Replace the email address with a valid email address of your own. This will ensure that when your&nbsp;<a href="http://www.aota.net/keyword.php?cron">cron</a>runs, that any output from the script, such as error message, will be emailed to you.</li>
<li>The second line tells your server when to run this script. In this example, the script will be run at 11:58 PM Eastern Time every day of the year.</li>
<li>It is very important that you double check the script path to ensure it is correct and remember the file names are CaSe SeNsiTive.</li>
</ol>
<p><strong>Step 2:</strong>&nbsp;Name the text file. (Example: cronfile.txt)<br />The&nbsp;<em>cronfile</em>&nbsp;name may be replaced with any name you choose. For instance if you are running a&nbsp;<a href="http://www.aota.net/keyword.php?Cron">Cron</a>&nbsp;to trigger an email reminder script it could be called&nbsp;<em>reminder.txt</em>. Many choose to simply call it cronfile.txt.&nbsp;</p>
<p><strong>Step 3:</strong>&nbsp;Upload the file in&nbsp;<a href="http://www.aota.net/keyword.php?ASCII">ASCII</a>.<br />Any standard FTP client or your account's&nbsp;<a href="http://www.futurequest.net/Services/CNC/">CNC</a>&nbsp;upload feature will work for this. It must be uploaded in&nbsp;<a href="http://www.aota.net/keyword.php?ASCII">ASCII</a>&nbsp;mode and it is recommended that it be placed in your&nbsp;<strong>/big/dom/xdomain/</strong>&nbsp;directory. It may be placed anywhere in your account but to prevent browser access (security risks) it is strongly recommended to place it above your /www directory.&nbsp;</p>
<p><strong>Step 4:</strong>&nbsp;<a href="http://www.aota.net/keyword.php?Telnet">Telnet</a>&nbsp;into your account and issue the following command:</p>
<ul>
<strong><a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;/big/dom/xdomain/cronfile.txt</strong>
</ul>
<p>
The above tells the server's&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;where the file is located and that you wish to make it active. Make sure the path to the file is the actual path to where the file was placed. If successful you will be returned to the command bash line, if not an error will be displayed)&nbsp;</p>
<p><strong>IMPORTANT NOTES</strong>&nbsp;</p>
<p>Removing/Stopping the Cron: Deleting the&nbsp;<em>cronfile.txt</em>&nbsp;file from your account will&nbsp;<strong>not</strong>&nbsp;stop the&nbsp;<a href="http://www.aota.net/keyword.php?cron">cron</a>. You may remove this file at any time, since the server's&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;already has the contents, and the&nbsp;<a href="http://www.aota.net/keyword.php?cron">cron</a>&nbsp;will still run after you have made it active.&nbsp;</p>
<p>To turn the&nbsp;<a href="http://www.aota.net/keyword.php?cron">cron</a>&nbsp;off you must&nbsp;<a href="http://www.aota.net/keyword.php?Telnet">Telnet</a>&nbsp;into your account and issue the following command:</p>
<ul>
<strong><a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;-r</strong>
</ul>
<p>
The&nbsp;<em>crontab -r</em>&nbsp;will deactivate the&nbsp;<a href="http://www.aota.net/keyword.php?cronjob">cronjob</a>&nbsp;and remove the file contents from the server.&nbsp;</p>
<p><strong>Security Note:</strong>&nbsp;If the script the&nbsp;<a href="http://www.aota.net/keyword.php?cron">cron</a>&nbsp;is setup to run is in the /cgi-bin/ or /www/ directory it may be run at anytime by anyone with browser access. If the&nbsp;<a href="http://www.aota.net/keyword.php?crontab">crontab</a>&nbsp;is all that should run the script and you do not want the public to be able to run the script, then you will need to place the script in a directory above the /cgi-bin/ and /www/ directories such as:<strong>/big/dom/xdom/user/cronscripts/scriptname</strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>

            
          </p>
        </div>
      
        <div class="post py3">
          <p class="post-meta">Sep 19, 2009</p>
          <a href="/2009/09/19/install-expect-in-fedora" class="post-link"><h3 class="h2 post-title">Fedora安装Expect</h3></a>
          <p class="post-summary">
            
              <p>费了很大力气才下到Expect的源代码，然后参考了Expect的INSTALL说明文件，还需要Tcl/Tk的源代码支持，于是又下载了Tcl/Tk的源代码，把它们都给放到/usr/local/src下面。先编译安装tcl和tk，完了之后进入expect的文件夹下面，./configure，结果报错，说找不到tclInt.h。于是在tcl的源文件的文件夹下面搜索tclInt.h，发现该文件确实存在，在generic下面。又参考了一下Expect的INSTALL说明文件，才知道可以加--withtclincluse=选项，于是重新configure：</p>
<p>&nbsp;</p>
<p>./configure --withtclinclude=/usr/local/src/tcl8.6b1/generic</p>
<p>&nbsp;</p>
<p>configure成功。于是输入make,正式编译，结果又发现了如下错误：</p>
<p>&nbsp;</p>
<p>exp_main_exp.c:32: error: &lsquo;Tcl_Interp&rsquo; has no member named &lsquo;result&rsquo;<br />
exp_main_exp.c:33: warning: incompatible implicit declaration of built-in function &lsquo;exit&rsquo;<br />
make: *** [exp_main_exp.o] Error 1</p>
<p>&nbsp;</p>
<p>网上一搜，在<a href="http://groups.google.com/group/comp.lang.tcl/browse_thread/thread/e63b1bd2d350d024/8bbd5758f6193120?show_docid=8bbd5758f6193120&amp;pli=1">http://groups.google.com/group/comp.lang.tcl/browse_thread/thread/e63b1bd2d350d024/8bbd5758f6193120?show_docid=8bbd5758f6193120&amp;pli=1</a><br />
 发现有人遇到过同样的问题。在<a href="http://www.tcl.tk/cgi-bin/tct/tip/330.html">http://www.tcl.tk/cgi-bin/tct/tip/330.html</a><br />
给出了原因，说是因为在新版(8.6)的tcl的tcl.h中Tcl_Interp被重命名为unused1了，而expect的源代码并没有做相应修改。并且给出了解决方案，就是添加预定义USE_INTERP_RESULT，或者用8.5以下的tcl源代码。</p>
<p>&nbsp;</p>
<p>我没有再继续尝试编译安装expect。我想起来可以尝试通过yum安装，于是输入yum install expect，竟然成功了！不过在安装expect的同时，还自动安装了tcl8.5.3，估计这是因为安装的expect是基于tcl8.5的源代码变异的。</p>
<p>&nbsp;</p>
<p>看来Expect开发者乏人啊，这么长时间这个bug竟然没有人修复，唉&hellip;&hellip;</p>

            
          </p>
        </div>
      
        <div class="post py3">
          <p class="post-meta">Sep 15, 2009</p>
          <a href="/2009/09/15/solaris-cpu-usage" class="post-link"><h3 class="h2 post-title">solaris下查看进程的cpu占用率</h3></a>
          <p class="post-summary">
            
              <p>&nbsp;</p>
<h3>solaris下查看某进程的资源占用率及其它</h3>
<p>
<span></p>
<div class="t_msgfontfix"><span style="font-size:x-small;"><br />
</span>
<p><span style="font-size:small;"><span style="color:#000000;">1. &nbsp; &nbsp; # ps -eo pid,pcpu,args | sort +1n&nbsp;</p>
<p>该命令输出当前系统进程的pid, cpu占用率及命令描述，并以pcpu来排序(尝试过，没有成功，据说在RedHat上可行的。)</p>
<p>2. top -p &lt;pid&gt;</span></span></p>
<p><span style="font-size:x-small;"><br /></span></p>
<p><span style="font-size:small;"><span style="color:#000000;">不同的系统top的设置不尽相同，因此使用时需要注意。</p>
<p>3. prstat -p &lt;pid&gt;</span></span></p>
<p><span style="font-size:x-small;"><br /></span></p>
<p><span style="font-size:small;"><span style="color:#000000;">prstat 检查系统中进程占用CPU，内存等情况。可以代替top，不过好像solaris5.8之后才有，5.7上就没有。</p>
<p>4. 查看IO情况 iostat</span></span></p>
<p><span style="font-size:small;"><span style="color:#000000;"><br />iostat -x -I 1 若系统明显变慢，也可用此命令检查磁盘I/O情况</span></span></p>
<p><span style="font-size:small;"><span style="color:#000000;"><br />5. 查看CPU 可以用 psrinfo -v</p>
<p>查看详细信息</p>
<p>/usr/platform/sun4u/sbin/prtdiag -v</p>
<p>&nbsp;6. sar</span></span></p>
<p><span style="font-size:small;"><span style="color:#000000;">sar -u 3 20 若系统明显变慢，用此命令检查cpu占用率<br />sar &ndash;r 3 20 用此命令检查内存使用情况</span></span></p>
</div>
<p></span></p>

            
          </p>
        </div>
      
        <div class="post py3">
          <p class="post-meta">Sep 3, 2009</p>
          <a href="/2009/09/03/fedora11-sound-card" class="post-link"><h3 class="h2 post-title">Fedora11声卡不能外放</h3></a>
          <p class="post-summary">
            
              </p>
<p>这些天一直苦恼于在Thinkpad R61上新装的Fedora声音无法外放，上网搜索了各种各样的方法，结果全都未果。</p>
<p>&nbsp;</p>
<p>昨晚怀疑是Linux Kernel的问题，因为Kernel不是最新的，于是下载了最新的Kernel，编译了一晚上才装上。</p>
<p>&nbsp;</p>
<p>今晚上再次对下载的ALSA源代码编译，由于是最新的Kernel，编译过程中遇到了一些问题，好在或者是缺少一些头文件(version.h,autoconf.h)或者是某个文件不存在。解决方法就是通过locate -e &lt;source_file&gt;找到系统中已经有的源文件，通过which找到可执行文件，然后在目标目录创建符号链接，编译通过。</p>
<p>&nbsp;</p>
<p>装完ALSA重启之后，再次通过alsamixer -c 0对alsa驱动进行设置。结果这时发现一直按向右的方向键会一直有新的item出现，最后一个是speaker，这些是我之前使用alsamixer时所没有发现的，而这个speaker恰恰就是我一直苦恼的！那个speaker项默认是MM，mute也即静音的，必须按M键将其unmute.设好之后，声卡终于可以外放了！</p>
<p>&nbsp;</p>
<p>尽管在网上找到的很多资料没有真正起作用，但还是将其中一些至今仍然有效的摘抄如下，以飨读者。</p>
<p>&nbsp;</p>
<p>**********************************************************************************</p>
<p>原文链接：<a href="http://www.thinkwiki.org/wiki/Installing_Ubuntu_7.04_(Feisty_Fawn)_on_a_ThinkPad_T61#ALSA_driver_update_.28hard_fix.2C_recommended_for_advanced_users.29">http://www.thinkwiki.org/wiki/Installing_Ubuntu_7.04_(Feisty_Fawn)_on_a_ThinkPad_T61#ALSA_driver_update_.28hard_fix.2C_recommended_for_advanced_users.29</a></p>
<p>&nbsp;</p>
<p>ALSA driver update (hard fix, recommended for advanced users)</p>
<p>&nbsp;</p>
<p>Note: This section assumes a high level of technical proficiency. Please fix it.</p>
<p>At www.asla-project.org, did you download only alsa-driver-1.0.14? That and alsa-lib-1.0.14a?</p>
<p>Download alsa-driver, alsa-kernel, alsa-lib, and alsa-utils, according to http://alsa.opensrc.org/index.php/AlsaCVS. Other sources, however, say only the driver is necessary. Perhaps alsa-project.org simply recommends the other two?</p>
<p>&nbsp;</p>
<p>How did you compile it from source? How did you add the patch?</p>
<p>&nbsp;</p>
<p>In short, please explain how you did these things in addition to just telling us what you did. I&acute;m not trying to be rude but seriously, not all Linux users are programmers ;). Thanks. SteveSims 22:19, 11 August 2007 (UTC)</p>
<p>After upgrading to 1.0.14 I still had no sound, and this took about a week to solved (though it was so sadly obvious though). Just upgrading to alsa 1.0.14 will not be enough, there were a few patches released right after the release that fix the Thinkpad's. The reason I missed this was because it was the same day so the release of 1.0.14!</p>
<p>VERY SIMPLE METHOD OF MAKING SOUND WORK [<a href="http://forums.fedoraforum.org/showthread.php?t=159516&amp;page=1&amp;pp=15">http://forums.fedoraforum.org/showthread.php?t=159516&amp;page=1&amp;pp=15</a>] Just follow the instructions step by step, except for two small things: When doing "cp ../patch_analog.c alsa-driver-1.0.14/alsa-kernel/pci/hda/" use "cp ../patch_analog.c alsa-kernel/pci/hda/" instead. Also, when you get to the part about modifying the /etc/modprobe.conf file, it doesn't exist in ubuntu. Adding "options snd-hda-intel index=0 model=thinkpad" to any file (even one you make yourself) inside /etc/modprobe.d should work. I personally added it to the options file, and it works fine.(这种情况在Fedora 11中也是如此，解决方法也应是在/etc/modprobe.d/下自己创建一个*.conf文件，或者添加到dist.conf中去。)</p>
<p>&nbsp;</p>
<p><span> </span>-credit for the guide goes to ciphermonk, and credit to the small changes needed to make this work on ubuntu go to my friend John.</p>
<p><span> </span>-hotkeys control mic volume, not speaker volume for some reason. I do not know how to fix this -- If you're using Gnome, from the System menu, click Preferences -&gt; Sound, and in the Default Mixer Tracks field, choose PCM.(在Fedora 11的Sound中没有这个选项。)</p>
<p>&nbsp;</p>
<p>-this fix should provide sound for both headphones and speakers.</p>
<p>-this edit by fatalchaos</p>
<p>&nbsp;</p>
<p>First make sure these packages are installed (System -&gt; Administration -&gt; Synaptic Package Manager) : automake, autoconfig, cvs, libtool, python-dev, build-essential</p>
<p>&nbsp;</p>
<p>Then download the source code to the alsa-driver and apply these patches: (links to the revisions)</p>
<p>&nbsp;</p>
<p>Fix Oops with AD1984 thinkpad model (http://hg.alsa-project.org/alsa-kernel/rev/958b39f3e8dd)</p>
<p>Fix AD1984 basic model (http://hg.alsa-project.org/alsa-kernel/rev/47ca87407c84)</p>
<p>Fix Thinkpad X61/T61 outputs (http://hg.alsa-project.org/alsa-kernel/rev/ca37aeeeb0ea)</p>
<p>**********************************************************************************************</p>
<p>查看安装了哪些alsa的模块：<span> </span><strong>rpm -qa|grep alsa</strong></p>
<p>查看声卡信息：<span><strong> </strong></span><strong>lspci|grep Audio</strong></p>
<p>另外就是常用的alsamixer和amixer。</p>
<p>***********************************************************************************************</p>
<p>还有就是其他的针对Fedora 10之前的版本的资料基本上都已经过时了，大多从fedora中移除了(比如alsaconf就已经不支持了)。貌似Fedora 11中只能用alsamixer来设置声卡，Preferences -&gt; Sound的功能非常弱。</p>

            
          </p>
        </div>
      
        <div class="post py3">
          <p class="post-meta">Sep 2, 2009</p>
          <a href="/2009/09/02/build-linux-kernel" class="post-link"><h3 class="h2 post-title">Linux内核编译</h3></a>
          <p class="post-summary">
            
              <br />
<table style="width:100%;" border="0" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td align="center">
<table style="width:100%;" border="0" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td width="100%">
<div id="art">
<div><span style="font-size:medium;">如何编译Linux内核？ 相信你会得到很多种不同的答案，而我在写此文章之前，总是获得一些编译错误的结果。</span>
</div>
<div><span style="font-size:medium;">如何你总是遇到编译错误或者失败，其实很多情况下是你下载的内核版本的问题，就是在高版本GCC中编译低版本的内核，造成编译失败。如果你对编译内核一悉莫展，在网上Google到很多种编译方法，但都失败的情话。倒不如看看内核的README文档，或者在内核目录下运行make help。它将会告诉许多你所不知的秘密。</span>
</div>
<div><span style="font-size:medium;">1. Linux系统编译内核的通用方法<br />
内核代码中的README文件对编译过程有非常 详细介绍，下而介绍的方法是Linux内核通用的编译方法，它是Makefile文件已定义好的编译过程。</span>
</div>
<div>
<span style="font-size:medium;">&nbsp; 1） 下载源代码(以2.6.28为例）</span>
</div>
<div>
<span style="font-size:medium;">&nbsp; wget&nbsp;&nbsp;</span><br />
<a href="http://www.kernel.org/pub/linux/kernel/v2.6/linux-2.6.28.1.tar.gz"><span style="font-size:medium;">http://www.kernel.org/pub/linux/kernel/v2.6/linux-2.6.28.1.tar.gz</span><br />
</a>
</div>
<div>
<span style="font-size:medium;">&nbsp; 2) 解压，并把它放到/usr/src/目录下</span>
</div>
<div>
<span style="font-size:medium;">&nbsp;&nbsp; gzip -d linux-2.6.28.1.tar.gz</span>
</div>
<div><span style="font-size:medium;">&nbsp;&nbsp; tar -xvf linux-2.6.28.1.tar</span>
</div>
<div><span style="font-size:medium;">&nbsp; mv -rf linux-2.6.28.1 /usr/src</span>
</div>
<div><span style="font-size:medium;">&nbsp; 3) 在/usr/src/建立一个软链接到linux-2.6.28.1目录&nbsp;</span>
</div>
<div><span style="font-size:medium;">&nbsp; cd /usr/src</span>
</div>
<div><span style="font-size:medium;">&nbsp; ln -s linux-2.6.28.1 linux</span>
</div>
<div><span style="font-size:medium;">&nbsp;4) 清理源代码（如果是之前已生成一些中间文件可运行此命令，否则不必了）</span>
</div>
<div><span style="font-size:medium;">&nbsp;&nbsp; make mrproper</span>
</div>
<div><span style="font-size:medium;">&nbsp;5) 生成config文件</span>
</div>
<div><span style="font-size:medium;">&nbsp; cp /boot/config-`uname -r` ./.config</span>
</div>
<div><span style="font-size:medium;">&nbsp; make menuconfig</span>
</div>
<div><span style="font-size:medium;">&nbsp; 在make menuconfig的配置界面中，先选择Load config file， 把该才拷贝的文件加载进来再进行修改，修改完成后，直接选Exit，然后在提示中选择保当前配置文件。</span>
</div>
<div><span style="font-size:medium;">&nbsp;6） 编译</span>
</div>
<div><span style="font-size:medium;">&nbsp;make</span>
</div>
<div><span style="font-size:medium;">&nbsp;7)&nbsp; 安装模块</span>
</div>
<div><span style="font-size:medium;">&nbsp; make modules_install</span>
</div>
<div><span style="font-size:medium;">&nbsp;该命令会把模块及相关文件放到目录/lib/modules/2.6.18.1/下，并不会与当前内核产生冲突，除非内核版本是一样的。</span>
</div>
<div><span style="font-size:medium;">&nbsp; 8）安装内核</span>
</div>
<div><span style="font-size:medium;">&nbsp; make install</span>
</div>
<div><span style="font-size:medium;">&nbsp;该命令会把内核相关文件(bzImage, initrd.img，System.map .config）放到/boot/目录下，文件名均带有内核版本名，与其它版本相关区别。</span>
</div>
<div><span style="font-size:medium;">&nbsp;如果系统安装了LILO，它会自己把该内核的启动加进来。如果是grub程序，那要看情况而定。我在Fodera系统中，它会自动添加该启动项到/boot/grup/menu.lst文件中，而在Ubuntu中则不会，需要手动添加。添加完也，即可重启进行新内核。</span>
</div>
<div><span style="font-size:medium;">2. Ubuntu内核编译方法。</span>
</div>
<div><span style="font-size:medium;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 上面介如的通常方法适合于所有的Linux系统，Ubuntu也不例外。Ubuntu同样提供了编译内核的方法。而且方法非常简单，把上述第6）和7）步换成下面这一命令即可。</span>
</div>
<div><span style="font-size:medium;">&nbsp; make-kpkg --initrd --append-to-version &lt;your_tag&gt; kernel_image kernel_headers</span>
</div>
<div><span style="font-size:medium;">&nbsp; 其中&lt;your_tag&gt;是你给内核名字在版本号的基础上加上你指定的字符串，如果你打算直接使用内核版本号作为内核名字，则把--append-to-version和它的参数从命令行中去掉。个人建议你不要使用该选项，因为内核名字就是uname -r的运行结果，使得有时编译新的模块程序时，uname -r 和 make kernelrelease结果不一致。</span>
</div>
<div><span style="font-size:medium;">该命运行完毕后，生成两个deb包，其它一个是内核和模块的包；另一个是头文件的deb包。如果不需要，可在命令行上把kernel_header去掉。</span>
</div>
<div><span style="font-size:medium;">安装内核变异常简单，只需安装一个生成的内核映象的deb包。使用如下命令：</span>
</div>
<div><span style="font-size:medium;">dpkg - i&nbsp; linux-image-2.6.28.1_2.6.28.1-10.00.Custom_i386.deb</span>
</div>
<div><span style="font-size:medium;">安装完后，所有的事情也就完成了，连/boot/grub/menu.lst的启动菜单项都修改好了，你所要做的事情就是重启系统而已。</span>
</div>
<div><span style="font-size:medium;">&nbsp; 使用这种方法的好处是不言而喻的：你只需要在一台Ubuntu上编译好一个较新的内核，就可以在整个实验室中升级，何乐而不为呢？</span>
</div>
<div><span style="font-size:medium;">3. Fodera 内核编译方法</span>
</div>
<div><span style="font-size:medium;">&nbsp;&nbsp; 很抱歉，目前还未有找到很准确的Fodera内核编译方法，后面会补上。但这里介绍的方法仍然适后Fodera系统，那就是象Ubuntu一样，把内核编译成为一个rpm包。而且非常简单，只需把上面的第6)和7)步换成下面的命令：</span>
</div>
<div><span style="font-size:medium;">&nbsp; make rpm-pkg</span>
</div>
<div><span style="font-size:medium;">&nbsp;运行完后，内核rpm包位于目录/usr/src/rpm/RPMS/i386/kernel-2.6.28.1.i386.rpm下，使用rpm -i kernel-2.6.28.1.i386.rpm命令即可安装。</span>
</div>
<div><span style="font-size:medium;">&nbsp;安装rpm完成后，请检查/boot/grup/menu.lst文件是否有新内核的启动，若否请手工添加。</span>
</div>
<div>
</div>
<div>内核删除：<br />
有时我们基于各种原因可能删除一些老的内核，基本步骤如下：<br />
1. 查看当前系统的内核版本，千万不要删除错了<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #uname -r&nbsp; 或者&nbsp; uname -a<br />
2. 对于通过rpm方式安装的内核，删除就很简单了。直接用rpm -e 相应的内核版本就能删除掉了。<br />
&nbsp;&nbsp; 对于手工编译安装的内核，删除起来稍微就要麻烦些了。<br />
&nbsp;&nbsp;&nbsp; （1）、修改 /etc/grub/grub.conf 或 /etc/grub/menu.lst ，删除那些不想要的内核选项。<br />
&nbsp;&nbsp;&nbsp; （2）、删除 /lib/modules/相对应的内核版本的目录<br />
&nbsp;&nbsp;&nbsp; （3）、删除 /boot/相对应的内核版本的文件<br />
对于Ubuntu系统：<br />
$dpkg &ndash;get-selections|grep linux-image&nbsp; //查看内核版本名称<br />
$sudo apt-get remove 内核版本（如：linux-image-2.6.15-23-386）</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
</td>
</tr>
<tr>
<td height="25">
<p>&nbsp;<span style="color:#000099;"><strong>原文地址</strong><br />
</span><br />
&nbsp;<a href="http://blog.csdn.net/linyt/archive/2009/03/16/3995435.aspx" target="_blank">http://blog.csdn.net/linyt/archive/2009/03/16/3995435.aspx</a></p>
<p><a href="http://www.loosky.net/?p=309">http://www.loosky.net/?p=309</a></p>
</td>
</tr>
</tbody>
</table>

            
          </p>
        </div>
      
        <div class="post py3">
          <p class="post-meta">Aug 28, 2009</p>
          <a href="/2009/08/28/tcl-condition" class="post-link"><h3 class="h2 post-title">TCL判断条件</h3></a>
          <p class="post-summary">
            
              <p>编写TCL代码时遇要写一个if判断条件，很简单的一个语句，结果却费了很大力气才搞定。要判断的是，如果执行info exists成功而且某全局数组C的某个成员大于0，正确的语句为：</p>
<p>&nbsp;</p>
<p>if { [info exists C(AP${AP}cdnnoperap)] &amp;&amp; $C(AP${AP}cdnnoperap &gt; 0 } { }</p>
<p>&nbsp;</p>
<p>我为了逻辑上的清晰，特地将语句写为：</p>
<p>&nbsp;</p>
<p>if { [info exists C(AP${AP}cdnnoperap)] &amp;&amp; ｛$C(AP${AP}cdnnoperap｝ &gt; 0 } { }</p>
<p>&nbsp;</p>
<p>结果报错。又改成</p>
<p>if { [info exists C(AP${AP}cdnnoperap)] &amp;&amp; ［$C(AP${AP}cdnnoperap］ &gt; 0 } { }</p>
<p>还是报错。又改为</p>
<p>if { [info exists C(AP${AP}cdnnoperap)] &amp;&amp; {&quot;$C(AP${AP}cdnnoperap&quot; != &quot;0&quot;} } { }</p>
<p>仍然报错。</p>
<p>&nbsp;</p>
<p>看来TCL的语法确实还是很有自己的特点的。往后要多加注意。</p>
<p>&nbsp;</p>

            
          </p>
        </div>
      
        <div class="post py3">
          <p class="post-meta">Aug 26, 2009</p>
          <a href="/2009/08/26/1byte-file-in-unix" class="post-link"><h3 class="h2 post-title">UNIX下大小为1byte的文件——都是换行符(EOL)惹得祸</h3></a>
          <p class="post-summary">
            
              <p>某同事用tcl和ksh写了一个程序，利用进行某项操作，如有错误就将错误信息写入某个文件中，写入方法是 2&gt;$stderr，然后判断该文件的大小，如果大于0，则认为有错误发生，报错。</p>
<p>&nbsp;</p>
<p>奇怪的是该程序一直不能成功执行，一直报错。同事逐行追踪他的代码，结果发现文件$stderr刚创建时大小为0，可过一会之后自己就会变成1byte. 然而打开查看时，该文件内容却是空的。后来用vi按照16进制打开(:%!xxd)，发现了0a。</p>
<p>&nbsp;</p>
<p>0x0a是UNIX下默认的行结束符(EOL)，每行都会有的。我们试验了一下，凡是用print在UNIX下创建一个文件：</p>
<p>
<pre>print $test &gt; test</pre>
<p>&nbsp;</p>
<p>其中$test为未定义的变量，则会生成一个大小为1byte的文件。打开文件，也能发现0a的存在。</p>
<p>&nbsp;</p>
<p>可是如果是用C语言编写一个文件操作的函数，却能得到一个大小为0而打开后也有0a的文件。很是奇怪&hellip;&hellip;</p>
<p>&nbsp;</p>

            
          </p>
        </div>
      
        <div class="post py3">
          <p class="post-meta">Aug 24, 2009</p>
          <a href="/2009/08/24/big-num-operations" class="post-link"><h3 class="h2 post-title">大数运算</h3></a>
          <p class="post-summary">
            
              <p>下面这段程序包含了大数的加、减、乘运算的代码，除法运算尚在研究中。</p>
<p>&nbsp;</p>
<p>
<pre>/*
 * =====================================================================================
 *
 *       Filename:  LargeNumOp.c
 *
 *    Description:  The regular version of Large Number Multiplication.
 *
 *        Version:  1.0
 *        Created:  08/23/2009 07:02:48 PM
 *       Revision:  none
 *       Compiler:  gcc
 *
 *         Author:  Bonn Yang 
 *        Company:  
 *
 * =====================================================================================
 */
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
/* 
 * Large number multiplication. 
 *	a*b=c
 * The product stores in c.
 */ 
void multiply(char* a,char* b,char* c)
{
    int i,j,ca,cb,* s;
    ca=strlen(a);
    cb=strlen(b);
    s=(int*)malloc(sizeof(int)*(ca+cb));
    for (i=0;i&lt;ca+cb;i++)
        s[i]=0;
    for (i=0;i&lt;ca;i++)
        for (j=0;j&lt;cb;j++)
            s[i+j+1]+=(a[i]-'0')*(b[j]-'0');
    for (i=ca+cb-1;i&gt;=0;i--)
        if (s[i]&gt;=10)
        {
            s[i-1]+=s[i]/10;
            s[i]%=10;
        }
    i=0;
    while (s[i]==0)
        i++;
    for (j=0;i&lt;ca+cb;i++,j++)
        c[j]=s[i]+'0';
    c[j]='/0';
    free(s);
}
/* Large number addition 
 * 		a+b=c
 */
void add(char* a, char* b, char* c)
{
	int i,j,ca,cb,rlen,* s;
    ca=strlen(a);
    cb=strlen(b);
	rlen=((ca&gt;cb)?ca:cb)+1;		/* len of result */
    s=(int*)malloc(sizeof(int)*rlen);
    for (i=0;i&lt;rlen;i++)
        s[i]=0;
	if(ca&gt;cb)
	{
    	for(i=0;i&lt;ca-cb;i++)
			s[i+1]=a[i]-'0';
		for(i=ca-cb;i&lt;ca;i++)
			s[i+1]=(a[i]-'0')+(b[i-ca+cb]-'0');
	} 
	else 
	{
		for(i=0;i&lt;cb-ca;i++)
			s[i+1]=b[i]-'0';
		for(i=cb-ca;i&lt;cb;i++)
			s[i+1]=(a[i-cb+ca]-'0')+(b[i]-'0');
	} 
	
    for (i=rlen-1;i&gt;=0;i--)
        if (s[i]&gt;=10)
        {
            s[i-1]+=s[i]/10;
            s[i]%=10;
        }
    i=0;
    while (s[i]==0)
        i++;
	for (j=0;i&lt;rlen;i++,j++)
        c[j]=s[i]+'0';
    c[j]='/0';
    free(s);
}
/* Large number substraction 
 * 		a-b=c
 */
void sub(char* a,char* b,char* c)
{
	int i,j,ca,cb,rlen,* s;
    ca=strlen(a);
    cb=strlen(b);
	rlen=((ca&gt;cb)?ca:cb)+1;		/* len of result, the first byte is negative or positive sign */
    s=(int*)malloc(sizeof(int)*rlen);
    for (i=0;i&lt;rlen;i++)
        s[i]=0;
	if(ca&gt;cb)
	{
		s[0]='+';
    	for(i=ca-1;i&gt;=ca-cb;i--)
		{
			if(a[i]&gt;b[i-ca+cb])
			{
				s[i+1]=(a[i]-'0')-(b[i-ca+cb]-'0');
			}
			else if(a[i]&lt;b[i-ca+cb])
			{
				s[i+1]=(a[i]-'0'+10)-(b[i-ca+cb]-'0');
				a[i-1]-=1;
			}
			else
				s[i+1]=0;
		}
		for(i=ca-cb-1;i&gt;=1;i--)
		{
			if(a[i]&gt;0)
			{
				s[i+1]=(a[i]-'0');
			}
			else if(a[i]&lt;0)
			{
				s[i+1]=a[i]-'0'+10;
				a[i-1]-=1;
			}
			else
				s[i+1]=0;
		}
		s[1]=a[i]-'0';
	} 
	else if(ca&lt;cb)
	{
		s[0]='-';
		for(i=cb-1;i&gt;cb-ca-1;i--)
		{
			if(b[i]&gt;a[i-cb+ca])
			{
				s[i+1]=(b[i]-'0')-(a[i-cb+ca]-'0');
			}
			else if(b[i]&lt;a[i-ca+cb])
			{
				s[i+1]=(b[i]-'0'+10)-(a[i-cb+ca]-'0');
				b[i-1]-=1;
			}
			else
				s[i+1]=0;
		}
		for(i=cb-ca-1;i&gt;=1;i--)
		{
			if(b[i]&gt;0)
			{
				s[i+1]=(b[i]-'0');
			}
			else if(b[i]&lt;0)
			{
				s[i+1]=b[i]-'0'+10;
				b[i-1]-=1;
			}
			else
				s[i+1]=0;
		}
		s[1]=b[i]-'0';
	} 
	else	/* ca==cb */
	{
		if(strcmp(a,b)&gt;0)		/* a&gt;b */
		{
			s[0]='+';
			for(i=ca-1;i&gt;=1;i--)
			{
				if(a[i]&gt;b[i])
				{
					s[i+1]=(a[i]-'0')-(b[i]-'0');
				}
				else if(a[i]&lt;b[i])
				{
					s[i+1]=(a[i]-'0'+10)-(b[i]-'0');
					a[i-1]-=1;
				}
				else
					s[i+1]=0;
			}
			s[1]=(a[i]-'0')-(b[i]-'0');
		}
		else if(strcmp(a,b)&lt;0)	/* a&lt;b */
		{
			s[0]='-';
			for(i=ca-1;i&gt;=1;--i)
			{
				if(b[i]&gt;a[i])
				{
					s[i+1]=(b[i]-'0')-(a[i]-'0');
				}
				else if(b[i]&lt;a[i])
				{
					s[i+1]=(b[i]-'0'+10)-(a[i]-'0');
					b[i-1]-=1;
				}
				else
					s[i+1]=0;
			}
			s[1]=(b[i]-'0')-(a[i]-'0');
		}
		else					/* a==b */
		{
			c[0]='+';
			c[1]='0';
			c[2]='/0';
			free(s);
		}
	}
	c[0]=s[0];
    i=1;j=1;
    while ((s[i]==0) &amp;&amp; (i&lt;rlen))
        i++;
	if(i!=rlen)	/* result is not zero */
	{
		for (j=1;i&lt;rlen;i++,j++)
		{
			if(s[i]&lt;0)
				c[j]='0'-s[i];
			else
        		c[j]=s[i]+'0';
		}
	} else {	/* result is zero */
		c[j++]='0';
	}
    c[j]='/0';
    free(s);
}
int main()
{
	char a[1024]={'/0'};
	char b[1024]={'/0'};
	char c[1024]={'/0'};
	printf(&quot;Enter two numbers:/n&quot;);
	gets(a);
	gets(b);
	multiply(a,b,c);
	printf(&quot;%s * %s = %s/n&quot;,a,b,c);
	add(a,b,c);
	printf(&quot;%s + %s = %s/n&quot;,a,b,c);
	sub(a,b,c);
	printf(&quot;%s - %s = %s/n&quot;,a,b,c);
	
	return 0;
}
</pre></p>
<p>&nbsp;</p>

            
          </p>
        </div>
      
    </div>

    <div class="pagination clearfix mb1 mt4">
  <div class="left">
    
      
        <a class="pagination-item" href="/page15/">Newer</a>
      
    
  </div>
  <div class="right">
    
      <a class="pagination-item" href="/page17/">Older</a>
    
  </div>
</div>

  
</div>

      </div>
    </div>
  </div>

  <footer class="center">
    <div class="measure">
        <small>
            <p>&copy; 2007-2016 by <a href="http://www.bo-yang.net/">Bo Yang</a>. &nbsp; <script type="text/javascript" src="//rc.revolvermaps.com/0/0/3.js?i=493pvkdo4nt&amp;b=0&amp;s=20&amp;m=2&amp;cl=ffffff&amp;co=010020&amp;cd=aa0000&amp;v0=60&amp;v1=60&amp;r=1" async="async"></script>
 </p>

            <p>Powered by <a href="https://github.com/jekyll/jekyll">Jekyll</a> and <a href="https://github.com/johnotander/pixyll">Pixyll</a>.</p>.
        </small>
    </div>
</footer>

</body>
</html>
